(self["webpackChunklive_chat"]=self["webpackChunklive_chat"]||[]).push([[998],{9662:function(e,t,n){var r=n(614),i=n(6330),o=TypeError;e.exports=function(e){if(r(e))return e;throw o(i(e)+" is not a function")}},6077:function(e,t,n){var r=n(614),i=String,o=TypeError;e.exports=function(e){if("object"==typeof e||r(e))return e;throw o("Can't set "+i(e)+" as a prototype")}},5787:function(e,t,n){var r=n(7976),i=TypeError;e.exports=function(e,t){if(r(t,e))return e;throw i("Incorrect invocation")}},9670:function(e,t,n){var r=n(111),i=String,o=TypeError;e.exports=function(e){if(r(e))return e;throw o(i(e)+" is not an object")}},1318:function(e,t,n){var r=n(5656),i=n(1400),o=n(6244),a=function(e){return function(t,n,a){var s,u=r(t),c=o(u),l=i(a,c);if(e&&n!=n){while(c>l)if(s=u[l++],s!=s)return!0}else for(;c>l;l++)if((e||l in u)&&u[l]===n)return e||l||0;return!e&&-1}};e.exports={includes:a(!0),indexOf:a(!1)}},3658:function(e,t,n){"use strict";var r=n(9781),i=n(3157),o=TypeError,a=Object.getOwnPropertyDescriptor,s=r&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}();e.exports=s?function(e,t){if(i(e)&&!a(e,"length").writable)throw o("Cannot set read only .length");return e.length=t}:function(e,t){return e.length=t}},206:function(e,t,n){var r=n(1702);e.exports=r([].slice)},4326:function(e,t,n){var r=n(1702),i=r({}.toString),o=r("".slice);e.exports=function(e){return o(i(e),8,-1)}},648:function(e,t,n){var r=n(1694),i=n(614),o=n(4326),a=n(5112),s=a("toStringTag"),u=Object,c="Arguments"==o(function(){return arguments}()),l=function(e,t){try{return e[t]}catch(n){}};e.exports=r?o:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=l(t=u(e),s))?n:c?o(t):"Object"==(r=o(t))&&i(t.callee)?"Arguments":r}},9920:function(e,t,n){var r=n(2597),i=n(3887),o=n(1236),a=n(3070);e.exports=function(e,t,n){for(var s=i(t),u=a.f,c=o.f,l=0;l<s.length;l++){var h=s[l];r(e,h)||n&&r(n,h)||u(e,h,c(t,h))}}},8880:function(e,t,n){var r=n(9781),i=n(3070),o=n(9114);e.exports=r?function(e,t,n){return i.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},9114:function(e){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},8052:function(e,t,n){var r=n(614),i=n(3070),o=n(6339),a=n(3072);e.exports=function(e,t,n,s){s||(s={});var u=s.enumerable,c=void 0!==s.name?s.name:t;if(r(n)&&o(n,c,s),s.global)u?e[t]=n:a(t,n);else{try{s.unsafe?e[t]&&(u=!0):delete e[t]}catch(l){}u?e[t]=n:i.f(e,t,{value:n,enumerable:!1,configurable:!s.nonConfigurable,writable:!s.nonWritable})}return e}},3072:function(e,t,n){var r=n(7854),i=Object.defineProperty;e.exports=function(e,t){try{i(r,e,{value:t,configurable:!0,writable:!0})}catch(n){r[e]=t}return t}},5117:function(e,t,n){"use strict";var r=n(6330),i=TypeError;e.exports=function(e,t){if(!delete e[t])throw i("Cannot delete property "+r(t)+" of "+r(e))}},9781:function(e,t,n){var r=n(7293);e.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},4154:function(e){var t="object"==typeof document&&document.all,n="undefined"==typeof t&&void 0!==t;e.exports={all:t,IS_HTMLDDA:n}},317:function(e,t,n){var r=n(7854),i=n(111),o=r.document,a=i(o)&&i(o.createElement);e.exports=function(e){return a?o.createElement(e):{}}},7207:function(e){var t=TypeError,n=9007199254740991;e.exports=function(e){if(e>n)throw t("Maximum allowed index exceeded");return e}},3678:function(e){e.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}},9363:function(e){e.exports="function"==typeof Bun&&Bun&&"string"==typeof Bun.version},6833:function(e,t,n){var r=n(8113);e.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(r)},5268:function(e,t,n){var r=n(4326),i=n(7854);e.exports="process"==r(i.process)},8113:function(e,t,n){var r=n(5005);e.exports=r("navigator","userAgent")||""},7392:function(e,t,n){var r,i,o=n(7854),a=n(8113),s=o.process,u=o.Deno,c=s&&s.versions||u&&u.version,l=c&&c.v8;l&&(r=l.split("."),i=r[0]>0&&r[0]<4?1:+(r[0]+r[1])),!i&&a&&(r=a.match(/Edge\/(\d+)/),(!r||r[1]>=74)&&(r=a.match(/Chrome\/(\d+)/),r&&(i=+r[1]))),e.exports=i},748:function(e){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},1060:function(e,t,n){var r=n(1702),i=Error,o=r("".replace),a=function(e){return String(i(e).stack)}("zxcasd"),s=/\n\s*at [^:]*:[^\n]*/,u=s.test(a);e.exports=function(e,t){if(u&&"string"==typeof e&&!i.prepareStackTrace)while(t--)e=o(e,s,"");return e}},2109:function(e,t,n){var r=n(7854),i=n(1236).f,o=n(8880),a=n(8052),s=n(3072),u=n(9920),c=n(4705);e.exports=function(e,t){var n,l,h,f,d,p,v=e.target,g=e.global,m=e.stat;if(l=g?r:m?r[v]||s(v,{}):(r[v]||{}).prototype,l)for(h in t){if(d=t[h],e.dontCallGetSet?(p=i(l,h),f=p&&p.value):f=l[h],n=c(g?h:v+(m?".":"#")+h,e.forced),!n&&void 0!==f){if(typeof d==typeof f)continue;u(d,f)}(e.sham||f&&f.sham)&&o(d,"sham",!0),a(l,h,d,e)}}},7293:function(e){e.exports=function(e){try{return!!e()}catch(t){return!0}}},2104:function(e,t,n){var r=n(4374),i=Function.prototype,o=i.apply,a=i.call;e.exports="object"==typeof Reflect&&Reflect.apply||(r?a.bind(o):function(){return a.apply(o,arguments)})},9974:function(e,t,n){var r=n(1470),i=n(9662),o=n(4374),a=r(r.bind);e.exports=function(e,t){return i(e),void 0===t?e:o?a(e,t):function(){return e.apply(t,arguments)}}},4374:function(e,t,n){var r=n(7293);e.exports=!r((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))},6916:function(e,t,n){var r=n(4374),i=Function.prototype.call;e.exports=r?i.bind(i):function(){return i.apply(i,arguments)}},6530:function(e,t,n){var r=n(9781),i=n(2597),o=Function.prototype,a=r&&Object.getOwnPropertyDescriptor,s=i(o,"name"),u=s&&"something"===function(){}.name,c=s&&(!r||r&&a(o,"name").configurable);e.exports={EXISTS:s,PROPER:u,CONFIGURABLE:c}},1470:function(e,t,n){var r=n(4326),i=n(1702);e.exports=function(e){if("Function"===r(e))return i(e)}},1702:function(e,t,n){var r=n(4374),i=Function.prototype,o=i.call,a=r&&i.bind.bind(o,o);e.exports=r?a:function(e){return function(){return o.apply(e,arguments)}}},5005:function(e,t,n){var r=n(7854),i=n(614),o=function(e){return i(e)?e:void 0};e.exports=function(e,t){return arguments.length<2?o(r[e]):r[e]&&r[e][t]}},8173:function(e,t,n){var r=n(9662),i=n(8554);e.exports=function(e,t){var n=e[t];return i(n)?void 0:r(n)}},7854:function(e,t,n){var r=function(e){return e&&e.Math==Math&&e};e.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof n.g&&n.g)||function(){return this}()||Function("return this")()},2597:function(e,t,n){var r=n(1702),i=n(7908),o=r({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return o(i(e),t)}},3501:function(e){e.exports={}},490:function(e,t,n){var r=n(5005);e.exports=r("document","documentElement")},4664:function(e,t,n){var r=n(9781),i=n(7293),o=n(317);e.exports=!r&&!i((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},8361:function(e,t,n){var r=n(1702),i=n(7293),o=n(4326),a=Object,s=r("".split);e.exports=i((function(){return!a("z").propertyIsEnumerable(0)}))?function(e){return"String"==o(e)?s(e,""):a(e)}:a},9587:function(e,t,n){var r=n(614),i=n(111),o=n(7674);e.exports=function(e,t,n){var a,s;return o&&r(a=t.constructor)&&a!==n&&i(s=a.prototype)&&s!==n.prototype&&o(e,s),e}},2788:function(e,t,n){var r=n(1702),i=n(614),o=n(5465),a=r(Function.toString);i(o.inspectSource)||(o.inspectSource=function(e){return a(e)}),e.exports=o.inspectSource},9909:function(e,t,n){var r,i,o,a=n(4811),s=n(7854),u=n(111),c=n(8880),l=n(2597),h=n(5465),f=n(6200),d=n(3501),p="Object already initialized",v=s.TypeError,g=s.WeakMap,m=function(e){return o(e)?i(e):r(e,{})},y=function(e){return function(t){var n;if(!u(t)||(n=i(t)).type!==e)throw v("Incompatible receiver, "+e+" required");return n}};if(a||h.state){var _=h.state||(h.state=new g);_.get=_.get,_.has=_.has,_.set=_.set,r=function(e,t){if(_.has(e))throw v(p);return t.facade=e,_.set(e,t),t},i=function(e){return _.get(e)||{}},o=function(e){return _.has(e)}}else{var b=f("state");d[b]=!0,r=function(e,t){if(l(e,b))throw v(p);return t.facade=e,c(e,b,t),t},i=function(e){return l(e,b)?e[b]:{}},o=function(e){return l(e,b)}}e.exports={set:r,get:i,has:o,enforce:m,getterFor:y}},3157:function(e,t,n){var r=n(4326);e.exports=Array.isArray||function(e){return"Array"==r(e)}},614:function(e,t,n){var r=n(4154),i=r.all;e.exports=r.IS_HTMLDDA?function(e){return"function"==typeof e||e===i}:function(e){return"function"==typeof e}},4705:function(e,t,n){var r=n(7293),i=n(614),o=/#|\.prototype\./,a=function(e,t){var n=u[s(e)];return n==l||n!=c&&(i(t)?r(t):!!t)},s=a.normalize=function(e){return String(e).replace(o,".").toLowerCase()},u=a.data={},c=a.NATIVE="N",l=a.POLYFILL="P";e.exports=a},8554:function(e){e.exports=function(e){return null===e||void 0===e}},111:function(e,t,n){var r=n(614),i=n(4154),o=i.all;e.exports=i.IS_HTMLDDA?function(e){return"object"==typeof e?null!==e:r(e)||e===o}:function(e){return"object"==typeof e?null!==e:r(e)}},1913:function(e){e.exports=!1},2190:function(e,t,n){var r=n(5005),i=n(614),o=n(7976),a=n(3307),s=Object;e.exports=a?function(e){return"symbol"==typeof e}:function(e){var t=r("Symbol");return i(t)&&o(t.prototype,s(e))}},6244:function(e,t,n){var r=n(7466);e.exports=function(e){return r(e.length)}},6339:function(e,t,n){var r=n(7293),i=n(614),o=n(2597),a=n(9781),s=n(6530).CONFIGURABLE,u=n(2788),c=n(9909),l=c.enforce,h=c.get,f=Object.defineProperty,d=a&&!r((function(){return 8!==f((function(){}),"length",{value:8}).length})),p=String(String).split("String"),v=e.exports=function(e,t,n){"Symbol("===String(t).slice(0,7)&&(t="["+String(t).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(t="get "+t),n&&n.setter&&(t="set "+t),(!o(e,"name")||s&&e.name!==t)&&(a?f(e,"name",{value:t,configurable:!0}):e.name=t),d&&n&&o(n,"arity")&&e.length!==n.arity&&f(e,"length",{value:n.arity});try{n&&o(n,"constructor")&&n.constructor?a&&f(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(i){}var r=l(e);return o(r,"source")||(r.source=p.join("string"==typeof t?t:"")),e};Function.prototype.toString=v((function(){return i(this)&&h(this).source||u(this)}),"toString")},4758:function(e){var t=Math.ceil,n=Math.floor;e.exports=Math.trunc||function(e){var r=+e;return(r>0?n:t)(r)}},6277:function(e,t,n){var r=n(1340);e.exports=function(e,t){return void 0===e?arguments.length<2?"":t:r(e)}},3070:function(e,t,n){var r=n(9781),i=n(4664),o=n(3353),a=n(9670),s=n(4948),u=TypeError,c=Object.defineProperty,l=Object.getOwnPropertyDescriptor,h="enumerable",f="configurable",d="writable";t.f=r?o?function(e,t,n){if(a(e),t=s(t),a(n),"function"===typeof e&&"prototype"===t&&"value"in n&&d in n&&!n[d]){var r=l(e,t);r&&r[d]&&(e[t]=n.value,n={configurable:f in n?n[f]:r[f],enumerable:h in n?n[h]:r[h],writable:!1})}return c(e,t,n)}:c:function(e,t,n){if(a(e),t=s(t),a(n),i)try{return c(e,t,n)}catch(r){}if("get"in n||"set"in n)throw u("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},1236:function(e,t,n){var r=n(9781),i=n(6916),o=n(5296),a=n(9114),s=n(5656),u=n(4948),c=n(2597),l=n(4664),h=Object.getOwnPropertyDescriptor;t.f=r?h:function(e,t){if(e=s(e),t=u(t),l)try{return h(e,t)}catch(n){}if(c(e,t))return a(!i(o.f,e,t),e[t])}},8006:function(e,t,n){var r=n(6324),i=n(748),o=i.concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,o)}},5181:function(e,t){t.f=Object.getOwnPropertySymbols},7976:function(e,t,n){var r=n(1702);e.exports=r({}.isPrototypeOf)},6324:function(e,t,n){var r=n(1702),i=n(2597),o=n(5656),a=n(1318).indexOf,s=n(3501),u=r([].push);e.exports=function(e,t){var n,r=o(e),c=0,l=[];for(n in r)!i(s,n)&&i(r,n)&&u(l,n);while(t.length>c)i(r,n=t[c++])&&(~a(l,n)||u(l,n));return l}},5296:function(e,t){"use strict";var n={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,i=r&&!n.call({1:2},1);t.f=i?function(e){var t=r(this,e);return!!t&&t.enumerable}:n},7674:function(e,t,n){var r=n(1702),i=n(9670),o=n(6077);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{e=r(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set),e(n,[]),t=n instanceof Array}catch(a){}return function(n,r){return i(n),o(r),t?e(n,r):n.__proto__=r,n}}():void 0)},2140:function(e,t,n){var r=n(6916),i=n(614),o=n(111),a=TypeError;e.exports=function(e,t){var n,s;if("string"===t&&i(n=e.toString)&&!o(s=r(n,e)))return s;if(i(n=e.valueOf)&&!o(s=r(n,e)))return s;if("string"!==t&&i(n=e.toString)&&!o(s=r(n,e)))return s;throw a("Can't convert object to primitive value")}},3887:function(e,t,n){var r=n(5005),i=n(1702),o=n(8006),a=n(5181),s=n(9670),u=i([].concat);e.exports=r("Reflect","ownKeys")||function(e){var t=o.f(s(e)),n=a.f;return n?u(t,n(e)):t}},4488:function(e,t,n){var r=n(8554),i=TypeError;e.exports=function(e){if(r(e))throw i("Can't call method on "+e);return e}},7152:function(e,t,n){"use strict";var r=n(7854),i=n(2104),o=n(614),a=n(9363),s=n(8113),u=n(206),c=n(8053),l=r.Function,h=/MSIE .\./.test(s)||a&&function(){var e=r.Bun.version.split(".");return e.length<3||0==e[0]&&(e[1]<3||3==e[1]&&0==e[2])}();e.exports=function(e,t){var n=t?2:1;return h?function(r,a){var s=c(arguments.length,1)>n,h=o(r)?r:l(r),f=s?u(arguments,n):[],d=s?function(){i(h,this,f)}:h;return t?e(d,a):e(d)}:e}},6200:function(e,t,n){var r=n(2309),i=n(9711),o=r("keys");e.exports=function(e){return o[e]||(o[e]=i(e))}},5465:function(e,t,n){var r=n(7854),i=n(3072),o="__core-js_shared__",a=r[o]||i(o,{});e.exports=a},2309:function(e,t,n){var r=n(1913),i=n(5465);(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.27.1",mode:r?"pure":"global",copyright:"Â© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.27.1/LICENSE",source:"https://github.com/zloirock/core-js"})},6293:function(e,t,n){var r=n(7392),i=n(7293);e.exports=!!Object.getOwnPropertySymbols&&!i((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},261:function(e,t,n){var r,i,o,a,s=n(7854),u=n(2104),c=n(9974),l=n(614),h=n(2597),f=n(7293),d=n(490),p=n(206),v=n(317),g=n(8053),m=n(6833),y=n(5268),_=s.setImmediate,b=s.clearImmediate,w=s.process,I=s.Dispatch,T=s.Function,E=s.MessageChannel,k=s.String,S=0,C={},A="onreadystatechange";try{r=s.location}catch(O){}var N=function(e){if(h(C,e)){var t=C[e];delete C[e],t()}},x=function(e){return function(){N(e)}},R=function(e){N(e.data)},P=function(e){s.postMessage(k(e),r.protocol+"//"+r.host)};_&&b||(_=function(e){g(arguments.length,1);var t=l(e)?e:T(e),n=p(arguments,1);return C[++S]=function(){u(t,void 0,n)},i(S),S},b=function(e){delete C[e]},y?i=function(e){w.nextTick(x(e))}:I&&I.now?i=function(e){I.now(x(e))}:E&&!m?(o=new E,a=o.port2,o.port1.onmessage=R,i=c(a.postMessage,a)):s.addEventListener&&l(s.postMessage)&&!s.importScripts&&r&&"file:"!==r.protocol&&!f(P)?(i=P,s.addEventListener("message",R,!1)):i=A in v("script")?function(e){d.appendChild(v("script"))[A]=function(){d.removeChild(this),N(e)}}:function(e){setTimeout(x(e),0)}),e.exports={set:_,clear:b}},1400:function(e,t,n){var r=n(9303),i=Math.max,o=Math.min;e.exports=function(e,t){var n=r(e);return n<0?i(n+t,0):o(n,t)}},5656:function(e,t,n){var r=n(8361),i=n(4488);e.exports=function(e){return r(i(e))}},9303:function(e,t,n){var r=n(4758);e.exports=function(e){var t=+e;return t!==t||0===t?0:r(t)}},7466:function(e,t,n){var r=n(9303),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},7908:function(e,t,n){var r=n(4488),i=Object;e.exports=function(e){return i(r(e))}},7593:function(e,t,n){var r=n(6916),i=n(111),o=n(2190),a=n(8173),s=n(2140),u=n(5112),c=TypeError,l=u("toPrimitive");e.exports=function(e,t){if(!i(e)||o(e))return e;var n,u=a(e,l);if(u){if(void 0===t&&(t="default"),n=r(u,e,t),!i(n)||o(n))return n;throw c("Can't convert object to primitive value")}return void 0===t&&(t="number"),s(e,t)}},4948:function(e,t,n){var r=n(7593),i=n(2190);e.exports=function(e){var t=r(e,"string");return i(t)?t:t+""}},1694:function(e,t,n){var r=n(5112),i=r("toStringTag"),o={};o[i]="z",e.exports="[object z]"===String(o)},1340:function(e,t,n){var r=n(648),i=String;e.exports=function(e){if("Symbol"===r(e))throw TypeError("Cannot convert a Symbol value to a string");return i(e)}},6330:function(e){var t=String;e.exports=function(e){try{return t(e)}catch(n){return"Object"}}},9711:function(e,t,n){var r=n(1702),i=0,o=Math.random(),a=r(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+a(++i+o,36)}},3307:function(e,t,n){var r=n(6293);e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},3353:function(e,t,n){var r=n(9781),i=n(7293);e.exports=r&&i((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},8053:function(e){var t=TypeError;e.exports=function(e,n){if(e<n)throw t("Not enough arguments");return e}},4811:function(e,t,n){var r=n(7854),i=n(614),o=r.WeakMap;e.exports=i(o)&&/native code/.test(String(o))},5112:function(e,t,n){var r=n(7854),i=n(2309),o=n(2597),a=n(9711),s=n(6293),u=n(3307),c=i("wks"),l=r.Symbol,h=l&&l["for"],f=u?l:l&&l.withoutSetter||a;e.exports=function(e){if(!o(c,e)||!s&&"string"!=typeof c[e]){var t="Symbol."+e;s&&o(l,e)?c[e]=l[e]:c[e]=u&&h?h(t):f(t)}return c[e]}},7658:function(e,t,n){"use strict";var r=n(2109),i=n(7908),o=n(6244),a=n(3658),s=n(7207),u=n(7293),c=u((function(){return 4294967297!==[].push.call({length:4294967296},1)})),l=!function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(e){return e instanceof TypeError}}();r({target:"Array",proto:!0,arity:1,forced:c||l},{push:function(e){var t=i(this),n=o(t),r=arguments.length;s(n+r);for(var u=0;u<r;u++)t[n]=arguments[u],n++;return a(t,n),n}})},541:function(e,t,n){"use strict";var r=n(2109),i=n(7908),o=n(6244),a=n(3658),s=n(5117),u=n(7207),c=1!==[].unshift(0),l=!function(){try{Object.defineProperty([],"length",{writable:!1}).unshift()}catch(e){return e instanceof TypeError}}();r({target:"Array",proto:!0,arity:1,forced:c||l},{unshift:function(e){var t=i(this),n=o(t),r=arguments.length;if(r){u(n+r);var c=n;while(c--){var l=c+r;c in t?t[l]=t[c]:s(t,l)}for(var h=0;h<r;h++)t[h]=arguments[h]}return a(t,n+r)}})},1091:function(e,t,n){var r=n(2109),i=n(7854),o=n(261).clear;r({global:!0,bind:!0,enumerable:!0,forced:i.clearImmediate!==o},{clearImmediate:o})},2801:function(e,t,n){"use strict";var r=n(2109),i=n(7854),o=n(5005),a=n(9114),s=n(3070).f,u=n(2597),c=n(5787),l=n(9587),h=n(6277),f=n(3678),d=n(1060),p=n(9781),v=n(1913),g="DOMException",m=o("Error"),y=o(g),_=function(){c(this,b);var e=arguments.length,t=h(e<1?void 0:arguments[0]),n=h(e<2?void 0:arguments[1],"Error"),r=new y(t,n),i=m(t);return i.name=g,s(r,"stack",a(1,d(i.stack,1))),l(r,this,_),r},b=_.prototype=y.prototype,w="stack"in m(g),I="stack"in new y(1,2),T=y&&p&&Object.getOwnPropertyDescriptor(i,g),E=!!T&&!(T.writable&&T.configurable),k=w&&!E&&!I;r({global:!0,constructor:!0,forced:v||k},{DOMException:k?_:y});var S=o(g),C=S.prototype;if(C.constructor!==S)for(var A in v||s(C,"constructor",a(1,S)),f)if(u(f,A)){var N=f[A],x=N.s;u(S,x)||s(S,x,a(6,N.c))}},4633:function(e,t,n){n(1091),n(2986)},2986:function(e,t,n){var r=n(2109),i=n(7854),o=n(261).set,a=n(7152),s=i.setImmediate?a(o,!1):o;r({global:!0,bind:!0,enumerable:!0,forced:i.setImmediate!==s},{setImmediate:s})},1746:function(e,t,n){"use strict";n(7658);var r=n(4552),i=n(8914),o=n(2900),a=n(9658),s=n(7e3);function u(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var c,l=u(r),h=(c={},c["already-activated"]="You are trying to activate AppCheck for FirebaseApp {$appName}, while it is already activated. AppCheck can only be activated once.",c["use-before-activation"]="AppCheck is being used before activate() is called for FirebaseApp {$appName}. Please make sure you call activate() before instantiating other Firebase services.",c["fetch-network-error"]="Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",c["fetch-parse-error"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",c["fetch-status-error"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",c["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",c["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",c["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",c["recaptcha-error"]="ReCAPTCHA error.",c),f=new a.ErrorFactory("appCheck","AppCheck",h),d=new Map,p={activated:!1,tokenObservers:[]},v={enabled:!1};
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g(e){return d.get(e)||p}function m(e,t){d.set(e,t)}function y(){return v}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _="https://content-firebaseappcheck.googleapis.com/v1beta",b="exchangeRecaptchaToken",w="exchangeDebugToken",I={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4},T=function(){function e(e,t,n,r,i){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=n,this.lowerBound=r,this.upperBound=i,this.pending=null,this.nextErrorWaitInterval=r,r>i)throw new Error("Proactive refresh lower bound greater than upper bound!")}return e.prototype.start=function(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch((function(){}))},e.prototype.stop=function(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)},e.prototype.isRunning=function(){return!!this.pending},e.prototype.process=function(e){return o.__awaiter(this,void 0,void 0,(function(){var t;return o.__generator(this,(function(n){switch(n.label){case 0:this.stop(),n.label=1;case 1:return n.trys.push([1,6,,7]),this.pending=new a.Deferred,[4,E(this.getNextRun(e))];case 2:return n.sent(),this.pending.resolve(),[4,this.pending.promise];case 3:return n.sent(),this.pending=new a.Deferred,[4,this.operation()];case 4:return n.sent(),this.pending.resolve(),[4,this.pending.promise];case 5:return n.sent(),this.process(!0).catch((function(){})),[3,7];case 6:return t=n.sent(),this.retryPolicy(t)?this.process(!1).catch((function(){})):this.stop(),[3,7];case 7:return[2]}}))}))},e.prototype.getNextRun=function(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();var t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t},e}();function E(e){return new Promise((function(t){setTimeout(t,e)}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k(){return self.grecaptcha}function S(e){if(!g(e).activated)throw f.create("use-before-activation",{appName:e.name})}function C(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0,n="x"===e?t:3&t|8;return n.toString(16)}))}function A(e){return a.base64.encodeString(JSON.stringify(e),!1)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N(e,t){var n=e.url,r=e.body;return o.__awaiter(this,void 0,void 0,(function(){var e,i,a,s,u,c,l,h,d,p;return o.__generator(this,(function(o){switch(o.label){case 0:e={"Content-Type":"application/json"},i=t.getImmediate({optional:!0}),i&&(e["X-Firebase-Client"]=i.getPlatformInfoString()),a={method:"POST",body:JSON.stringify(r),headers:e},o.label=1;case 1:return o.trys.push([1,3,,4]),[4,fetch(n,a)];case 2:return s=o.sent(),[3,4];case 3:throw u=o.sent(),f.create("fetch-network-error",{originalErrorMessage:u.message});case 4:if(200!==s.status)throw f.create("fetch-status-error",{httpStatus:s.status});o.label=5;case 5:return o.trys.push([5,7,,8]),[4,s.json()];case 6:return c=o.sent(),[3,8];case 7:throw l=o.sent(),f.create("fetch-parse-error",{originalErrorMessage:l.message});case 8:if(h=c.ttl.match(/^([\d.]+)(s)$/),!h||!h[2]||isNaN(Number(h[1])))throw f.create("fetch-parse-error",{originalErrorMessage:"ttl field (timeToLive) is not in standard Protobuf Duration format: "+c.ttl});return d=1e3*Number(h[1]),p=Date.now(),[2,{token:c.attestationToken,expireTimeMillis:p+d,issuedAtTimeMillis:p}]}}))}))}function x(e,t){var n=e.options,r=n.projectId,i=n.appId,o=n.apiKey;return{url:_+"/projects/"+r+"/apps/"+i+":"+b+"?key="+o,body:{recaptcha_token:t}}}function R(e,t){var n=e.options,r=n.projectId,i=n.appId,o=n.apiKey;return{url:_+"/projects/"+r+"/apps/"+i+":"+w+"?key="+o,body:{debug_token:t}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var P="firebase-app-check-database",O=1,D="firebase-app-check-store",M="debug-token",L=null;function F(){return L||(L=new Promise((function(e,t){try{var n=indexedDB.open(P,O);n.onsuccess=function(t){e(t.target.result)},n.onerror=function(e){var n;t(f.create("storage-open",{originalErrorMessage:null===(n=e.target.error)||void 0===n?void 0:n.message}))},n.onupgradeneeded=function(e){var t=e.target.result;switch(e.oldVersion){case 0:t.createObjectStore(D,{keyPath:"compositeKey"})}}}catch(r){t(f.create("storage-open",{originalErrorMessage:r.message}))}})),L)}function j(e){return K(W(e))}function U(e,t){return B(W(e),t)}function q(e){return B(M,e)}function V(){return K(M)}function B(e,t){return o.__awaiter(this,void 0,void 0,(function(){var n,r,i,a;return o.__generator(this,(function(o){switch(o.label){case 0:return[4,F()];case 1:return n=o.sent(),r=n.transaction(D,"readwrite"),i=r.objectStore(D),a=i.put({compositeKey:e,value:t}),[2,new Promise((function(e,t){a.onsuccess=function(t){e()},r.onerror=function(e){var n;t(f.create("storage-set",{originalErrorMessage:null===(n=e.target.error)||void 0===n?void 0:n.message}))}}))]}}))}))}function K(e){return o.__awaiter(this,void 0,void 0,(function(){var t,n,r,i;return o.__generator(this,(function(o){switch(o.label){case 0:return[4,F()];case 1:return t=o.sent(),n=t.transaction(D,"readonly"),r=n.objectStore(D),i=r.get(e),[2,new Promise((function(e,t){i.onsuccess=function(t){var n=t.target.result;e(n?n.value:void 0)},n.onerror=function(e){var n;t(f.create("storage-get",{originalErrorMessage:null===(n=e.target.error)||void 0===n?void 0:n.message}))}}))]}}))}))}function W(e){return e.options.appId+"-"+e.name}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var H=new s.Logger("@firebase/app-check");
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G(e){return o.__awaiter(this,void 0,void 0,(function(){var t,n;return o.__generator(this,(function(r){switch(r.label){case 0:if(!a.isIndexedDBAvailable())return[3,5];t=void 0,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,j(e)];case 2:return t=r.sent(),[3,4];case 3:return n=r.sent(),H.warn("Failed to read token from indexeddb. Error: "+n),[3,4];case 4:return[2,t];case 5:return[2,void 0]}}))}))}function z(e,t){return a.isIndexedDBAvailable()?U(e,t).catch((function(e){H.warn("Failed to write token to indexeddb. Error: "+e)})):Promise.resolve()}function Q(){return o.__awaiter(this,void 0,void 0,(function(){var e,t;return o.__generator(this,(function(n){switch(n.label){case 0:e=void 0,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,V()];case 2:return e=n.sent(),[3,4];case 3:return n.sent(),[3,4];case 4:return e?[2,e]:(t=C(),q(t).catch((function(e){return H.warn("Failed to persist debug token to indexeddb. Error: "+e)})),console.log("AppCheck debug token: "+t+". You will need to whitelist it in the Firebase console for it to work"),[2,t])}}))}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $(){var e=y();return e.enabled}function Y(){return o.__awaiter(this,void 0,void 0,(function(){var e;return o.__generator(this,(function(t){if(e=y(),e.enabled&&e.token)return[2,e.token.promise];throw Error("\n            Can't get debug token in production mode.\n        ")}))}))}function X(){var e=a.getGlobal();if("string"===typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN||!0===e.FIREBASE_APPCHECK_DEBUG_TOKEN){var t=y();t.enabled=!0;var n=new a.Deferred;t.token=n,"string"===typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN?n.resolve(e.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(Q())}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var J={error:"UNKNOWN_ERROR"};function Z(e,t,n){return void 0===n&&(n=!1),o.__awaiter(this,void 0,void 0,(function(){var r,i,a,s,u,c,l,h,f,d;return o.__generator(this,(function(p){switch(p.label){case 0:return S(e),r=g(e),i=r.token,a=void 0,i?[3,2]:[4,r.cachedTokenPromise];case 1:s=p.sent(),s&&ie(s)&&(i=s,m(e,o.__assign(o.__assign({},r),{token:i})),re(e,{token:i.token})),p.label=2;case 2:return!n&&i&&ie(i)?[2,{token:i.token}]:$()?(c=N,l=R,h=[e],[4,Y()]):[3,6];case 3:return[4,c.apply(void 0,[l.apply(void 0,h.concat([p.sent()])),t])];case 4:return u=p.sent(),[4,z(e,u)];case 5:return p.sent(),m(e,o.__assign(o.__assign({},r),{token:u})),[2,{token:u.token}];case 6:return p.trys.push([6,8,,9]),[4,r.provider.getToken()];case 7:return i=p.sent(),[3,9];case 8:return f=p.sent(),H.error(f),a=f,[3,9];case 9:return i?[3,10]:(d=oe(a),[3,12]);case 10:return d={token:i.token},m(e,o.__assign(o.__assign({},r),{token:i})),[4,z(e,i)];case 11:p.sent(),p.label=12;case 12:return re(e,d),[2,d]}}))}))}function ee(e,t,n,r,i){var a=g(e),s={next:r,error:i,type:n},u=o.__assign(o.__assign({},a),{tokenObservers:o.__spreadArray(o.__spreadArray([],a.tokenObservers),[s])});if(!u.tokenRefresher){var c=ne(e,t);u.tokenRefresher=c}if(!u.tokenRefresher.isRunning()&&a.isTokenAutoRefreshEnabled&&u.tokenRefresher.start(),a.token&&ie(a.token)){var l=a.token;Promise.resolve().then((function(){return r({token:l.token})})).catch((function(){}))}else null==a.token&&a.cachedTokenPromise.then((function(e){e&&ie(e)&&r({token:e.token})})).catch((function(){}));m(e,u)}function te(e,t){var n=g(e),r=n.tokenObservers.filter((function(e){return e.next!==t}));0===r.length&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),m(e,o.__assign(o.__assign({},n),{tokenObservers:r}))}function ne(e,t){var n=this;return new T((function(){return o.__awaiter(n,void 0,void 0,(function(){var n,r;return o.__generator(this,(function(i){switch(i.label){case 0:return n=g(e),n.token?[3,2]:[4,Z(e,t)];case 1:return r=i.sent(),[3,4];case 2:return[4,Z(e,t,!0)];case 3:r=i.sent(),i.label=4;case 4:if(r.error)throw r.error;return[2]}}))}))}),(function(){return!0}),(function(){var t=g(e);if(t.token){var n=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5,r=t.token.expireTimeMillis-3e5;return n=Math.min(n,r),Math.max(0,n-Date.now())}return 0}),I.RETRIAL_MIN_WAIT,I.RETRIAL_MAX_WAIT)}function re(e,t){for(var n=g(e).tokenObservers,r=0,i=n;r<i.length;r++){var o=i[r];try{"EXTERNAL"===o.type&&null!=t.error?o.error(t.error):o.next(t)}catch(a){}}}function ie(e){return e.expireTimeMillis-Date.now()>0}function oe(e){return{token:A(J),error:e}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ae="https://www.google.com/recaptcha/api.js";function se(e,t){var n=g(e),r=new a.Deferred;m(e,o.__assign(o.__assign({},n),{reCAPTCHAState:{initialized:r}}));var i="fire_app_check_"+e.name,s=document.createElement("div");s.id=i,s.style.display="none",document.body.appendChild(s);var u=k();return u?u.ready((function(){ce(e,t,u,i),r.resolve(u)})):le((function(){var n=k();if(!n)throw new Error("no recaptcha");n.ready((function(){ce(e,t,n,i),r.resolve(n)}))})),r.promise}function ue(e){return o.__awaiter(this,void 0,void 0,(function(){var t,n;return o.__generator(this,(function(r){switch(r.label){case 0:return S(e),t=g(e).reCAPTCHAState,[4,t.initialized.promise];case 1:return n=r.sent(),[2,new Promise((function(t,r){var i=g(e).reCAPTCHAState;n.ready((function(){t(n.execute(i.widgetId,{action:"fire_app_check"}))}))}))]}}))}))}function ce(e,t,n,r){var i=n.render(r,{sitekey:t,size:"invisible"}),a=g(e);m(e,o.__assign(o.__assign({},a),{reCAPTCHAState:o.__assign(o.__assign({},a.reCAPTCHAState),{widgetId:i})}))}function le(e){var t=document.createElement("script");t.src=""+ae,t.onload=e,document.head.appendChild(t)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var he=function(){function e(e){this._siteKey=e}return e.prototype.getToken=function(){return o.__awaiter(this,void 0,void 0,(function(){var e;return o.__generator(this,(function(t){switch(t.label){case 0:if(!this._app||!this._platformLoggerProvider)throw f.create("use-before-activation",{appName:""});t.label=1;case 1:return t.trys.push([1,3,,4]),[4,ue(this._app)];case 2:return e=t.sent(),[3,4];case 3:throw t.sent(),f.create("recaptcha-error");case 4:return[2,N(x(this._app,e),this._platformLoggerProvider)]}}))}))},e.prototype.initialize=function(e,t){this._app=e,this._platformLoggerProvider=t,se(e,this._siteKey).catch((function(){}))},e}(),fe=function(){function e(e){this._customProviderOptions=e}return e.prototype.getToken=function(){return o.__awaiter(this,void 0,void 0,(function(){var e,t,n;return o.__generator(this,(function(r){switch(r.label){case 0:if(!this._app)throw f.create("use-before-activation",{appName:""});return[4,this._customProviderOptions.getToken()];case 1:return e=r.sent(),t=a.issuedAtTime(e.token),n=null!==t&&t<Date.now()&&t>0?1e3*t:Date.now(),[2,o.__assign(o.__assign({},e),{issuedAtTimeMillis:n})]}}))}))},e.prototype.initialize=function(e){this._app=e},e}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function de(e,t,n,r){var i=g(e);if(i.activated)throw f.create("already-activated",{appName:e.name});var a=o.__assign(o.__assign({},i),{activated:!0});a.cachedTokenPromise=G(e).then((function(t){return t&&ie(t)&&m(e,o.__assign(o.__assign({},g(e)),{token:t})),t})),a.provider="string"===typeof t?new he(t):t instanceof he||t instanceof fe?t:new fe({getToken:t.getToken}),a.isTokenAutoRefreshEnabled=void 0===r?e.automaticDataCollectionEnabled:r,m(e,a),a.provider.initialize(e,n)}function pe(e,t){var n=g(e);n.tokenRefresher&&(!0===t?n.tokenRefresher.start():n.tokenRefresher.stop()),m(e,o.__assign(o.__assign({},n),{isTokenAutoRefreshEnabled:t}))}function ve(e,t,n){return o.__awaiter(this,void 0,void 0,(function(){var r;return o.__generator(this,(function(i){switch(i.label){case 0:return[4,Z(e,t,n)];case 1:if(r=i.sent(),r.error)throw r.error;return[2,{token:r.token}]}}))}))}function ge(e,t,n,r,i){var o=function(){},a=function(){};return o=null!=n.next?n.next.bind(n):n,null!=n.error?a=n.error.bind(n):r&&(a=r),ee(e,t,"EXTERNAL",o,a),function(){return te(e,o)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function me(e,t){return{app:e,activate:function(n,r){return de(e,n,t,r)},setTokenAutoRefreshEnabled:function(t){return pe(e,t)},getToken:function(n){return ve(e,t,n)},onTokenChanged:function(n,r,i){return ge(e,t,n,r)},INTERNAL:{delete:function(){for(var t=g(e).tokenObservers,n=0,r=t;n<r.length;n++){var i=r[n];te(e,i.next)}return Promise.resolve()}}}}function ye(e,t){return{getToken:function(n){return Z(e,t,n)},addTokenListener:function(n){return ee(e,t,"INTERNAL",n)},removeTokenListener:function(t){return te(e,t)}}}var _e="@firebase/app-check",be="0.3.2",we="appCheck",Ie="app-check-internal";function Te(e){e.INTERNAL.registerComponent(new i.Component(we,(function(e){var t=e.getProvider("app").getImmediate(),n=e.getProvider("platform-logger");return me(t,n)}),"PUBLIC").setServiceProps({ReCaptchaV3Provider:he,CustomProvider:fe}).setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){var r=e.getProvider(Ie);r.initialize()}))),e.INTERNAL.registerComponent(new i.Component(Ie,(function(e){var t=e.getProvider("app").getImmediate(),n=e.getProvider("platform-logger");return ye(t,n)}),"PUBLIC").setInstantiationMode("EXPLICIT")),e.registerVersion(_e,be)}Te(l["default"]),X()},4552:function(e,t,n){"use strict";n.r(t),n.d(t,{firebase:function(){return j}});n(7658);var r,i,o=n(2900),a=n(9658),s=n(8914),u=n(7e3),c=(r={},r["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new a.ErrorFactory("app","Firebase",c),h="@firebase/app",f="0.6.30",d="@firebase/analytics",p="@firebase/app-check",v="@firebase/auth",g="@firebase/database",m="@firebase/functions",y="@firebase/installations",_="@firebase/messaging",b="@firebase/performance",w="@firebase/remote-config",I="@firebase/storage",T="@firebase/firestore",E="firebase-wrapper",k="[DEFAULT]",S=(i={},i[h]="fire-core",i[d]="fire-analytics",i[p]="fire-app-check",i[v]="fire-auth",i[g]="fire-rtdb",i[m]="fire-fn",i[y]="fire-iid",i[_]="fire-fcm",i[b]="fire-perf",i[w]="fire-rc",i[I]="fire-gcs",i[T]="fire-fst",i["fire-js"]="fire-js",i[E]="fire-js-all",i),C=new u.Logger("@firebase/app"),A=function(){function e(e,t,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=t.name,this.automaticDataCollectionEnabled_=t.automaticDataCollectionEnabled||!1,this.options_=(0,a.deepCopy)(e),this.container=new s.ComponentContainer(t.name),this._addComponent(new s.Component("app",(function(){return r}),"PUBLIC")),this.firebase_.INTERNAL.components.forEach((function(e){return r._addComponent(e)}))}return Object.defineProperty(e.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(e){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),e.prototype.delete=function(){var e=this;return new Promise((function(t){e.checkDestroyed_(),t()})).then((function(){return e.firebase_.INTERNAL.removeApp(e.name_),Promise.all(e.container.getProviders().map((function(e){return e.delete()})))})).then((function(){e.isDeleted_=!0}))},e.prototype._getService=function(e,t){var n;void 0===t&&(t=k),this.checkDestroyed_();var r=this.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})},e.prototype._removeServiceInstance=function(e,t){void 0===t&&(t=k),this.container.getProvider(e).clearInstance(t)},e.prototype._addComponent=function(e){try{this.container.addComponent(e)}catch(t){C.debug("Component "+e.name+" failed to register with FirebaseApp "+this.name,t)}},e.prototype._addOrOverwriteComponent=function(e){this.container.addOrOverwriteComponent(e)},e.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},e.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},e}();A.prototype.name&&A.prototype.options||A.prototype.delete||console.log("dc");var N="8.10.0";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x(e){var t={},n=new Map,r={__esModule:!0,initializeApp:c,app:o,registerVersion:d,setLogLevel:u.setLogLevel,onLog:p,apps:null,SDK_VERSION:N,INTERNAL:{registerComponent:f,removeApp:i,components:n,useAsService:v}};function i(e){delete t[e]}function o(e){if(e=e||k,!(0,a.contains)(t,e))throw l.create("no-app",{appName:e});return t[e]}function c(n,i){if(void 0===i&&(i={}),"object"!==typeof i||null===i){var o=i;i={name:o}}var s=i;void 0===s.name&&(s.name=k);var u=s.name;if("string"!==typeof u||!u)throw l.create("bad-app-name",{appName:String(u)});if((0,a.contains)(t,u))throw l.create("duplicate-app",{appName:u});var c=new e(n,s,r);return t[u]=c,c}function h(){return Object.keys(t).map((function(e){return t[e]}))}function f(i){var s=i.name;if(n.has(s))return C.debug("There were multiple attempts to register component "+s+"."),"PUBLIC"===i.type?r[s]:null;if(n.set(s,i),"PUBLIC"===i.type){var u=function(e){if(void 0===e&&(e=o()),"function"!==typeof e[s])throw l.create("invalid-app-argument",{appName:s});return e[s]()};void 0!==i.serviceProps&&(0,a.deepExtend)(u,i.serviceProps),r[s]=u,e.prototype[s]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this._getService.bind(this,s);return n.apply(this,i.multipleInstances?e:[])}}for(var c=0,h=Object.keys(t);c<h.length;c++){var f=h[c];t[f]._addComponent(i)}return"PUBLIC"===i.type?r[s]:null}function d(e,t,n){var r,i=null!==(r=S[e])&&void 0!==r?r:e;n&&(i+="-"+n);var o=i.match(/\s|\//),a=t.match(/\s|\//);if(o||a){var u=['Unable to register library "'+i+'" with version "'+t+'":'];return o&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&a&&u.push("and"),a&&u.push('version name "'+t+'" contains illegal characters (whitespace or "/")'),void C.warn(u.join(" "))}f(new s.Component(i+"-version",(function(){return{library:i,version:t}}),"VERSION"))}function p(e,t){if(null!==e&&"function"!==typeof e)throw l.create("invalid-log-argument");(0,u.setUserLogHandler)(e,t)}function v(e,t){if("serverAuth"===t)return null;var n=t;return n}return r["default"]=r,Object.defineProperty(r,"apps",{get:h}),o["App"]=e,r}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R(){var e=x(A);function t(t){(0,a.deepExtend)(e,t)}return e.INTERNAL=(0,o.__assign)((0,o.__assign)({},e.INTERNAL),{createFirebaseNamespace:R,extendNamespace:t,createSubscribe:a.createSubscribe,ErrorFactory:a.ErrorFactory,deepExtend:a.deepExtend}),e}var P=R(),O=function(){function e(e){this.container=e}return e.prototype.getPlatformInfoString=function(){var e=this.container.getProviders();return e.map((function(e){if(D(e)){var t=e.getImmediate();return t.library+"/"+t.version}return null})).filter((function(e){return e})).join(" ")},e}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M(e,t){e.INTERNAL.registerComponent(new s.Component("platform-logger",(function(e){return new O(e)}),"PRIVATE")),e.registerVersion(h,f,t),e.registerVersion("fire-js","")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if((0,a.isBrowser)()&&void 0!==self.firebase){C.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var L=self.firebase.SDK_VERSION;L&&L.indexOf("LITE")>=0&&C.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var F=P.initializeApp;P.initializeApp=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0,a.isNode)()&&C.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),F.apply(void 0,e)};var j=P;M(j),t["default"]=j},3753:function(e,t,n){"use strict";n(7658),n(541),n(4633);var r=n(4552);(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){e!=Array.prototype&&e!=Object.prototype&&(e[t]=n.value)};function i(e){e=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof n.g&&n.g,e];for(var t=0;t<e.length;++t){var r=e[t];if(r&&r.Math==Math)return r}return globalThis}var o=i(this);function a(e,n){if(n){var r=o;e=e.split(".");for(var i=0;i<e.length-1;i++){var a=e[i];a in r||(r[a]={}),r=r[a]}e=e[e.length-1],i=r[e],n=n(i),n!=i&&null!=n&&t(r,e,{configurable:!0,writable:!0,value:n})}}function s(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}function u(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):{next:s(e)}}a("Promise",(function(e){function t(e){this.b=0,this.c=void 0,this.a=[];var t=this.f();try{e(t.resolve,t.reject)}catch(n){t.reject(n)}}function n(){this.a=null}function r(e){return e instanceof t?e:new t((function(t){t(e)}))}if(e)return e;n.prototype.b=function(e){if(null==this.a){this.a=[];var t=this;this.c((function(){t.g()}))}this.a.push(e)};var i=o.setTimeout;n.prototype.c=function(e){i(e,0)},n.prototype.g=function(){for(;this.a&&this.a.length;){var e=this.a;this.a=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(r){this.f(r)}}}this.a=null},n.prototype.f=function(e){this.c((function(){throw e}))},t.prototype.f=function(){function e(e){return function(r){n||(n=!0,e.call(t,r))}}var t=this,n=!1;return{resolve:e(this.m),reject:e(this.g)}},t.prototype.m=function(e){if(e===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.s(e);else{e:switch(typeof e){case"object":var n=null!=e;break e;case"function":n=!0;break e;default:n=!1}n?this.v(e):this.h(e)}},t.prototype.v=function(e){var t=void 0;try{t=e.then}catch(n){return void this.g(n)}"function"==typeof t?this.u(t,e):this.h(e)},t.prototype.g=function(e){this.i(2,e)},t.prototype.h=function(e){this.i(1,e)},t.prototype.i=function(e,t){if(0!=this.b)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.b);this.b=e,this.c=t,this.l()},t.prototype.l=function(){if(null!=this.a){for(var e=0;e<this.a.length;++e)a.b(this.a[e]);this.a=null}};var a=new n;return t.prototype.s=function(e){var t=this.f();e.Ra(t.resolve,t.reject)},t.prototype.u=function(e,t){var n=this.f();try{e.call(t,n.resolve,n.reject)}catch(r){n.reject(r)}},t.prototype.then=function(e,n){function r(e,t){return"function"==typeof e?function(t){try{i(e(t))}catch(n){o(n)}}:t}var i,o,a=new t((function(e,t){i=e,o=t}));return this.Ra(r(e,i),r(n,o)),a},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.Ra=function(e,t){function n(){switch(r.b){case 1:e(r.c);break;case 2:t(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?a.b(n):this.a.push(n)},t.resolve=r,t.reject=function(e){return new t((function(t,n){n(e)}))},t.race=function(e){return new t((function(t,n){for(var i=u(e),o=i.next();!o.done;o=i.next())r(o.value).Ra(t,n)}))},t.all=function(e){var n=u(e),i=n.next();return i.done?r([]):new t((function(e,t){function o(t){return function(n){a[t]=n,s--,0==s&&e(a)}}var a=[],s=0;do{a.push(void 0),s++,r(i.value).Ra(o(a.length-1),t),i=n.next()}while(!i.done)}))},t}));var c=c||{},l=this||self,h=/^[\w+/_-]+[=]{0,2}$/,f=null;function d(e){return(e=e.querySelector&&e.querySelector("script[nonce]"))&&(e=e.nonce||e.getAttribute("nonce"))&&h.test(e)?e:""}function p(){}function v(e){var t=typeof e;return"object"!=t?t:e?Array.isArray(e)?"array":t:"null"}function g(e){var t=v(e);return"array"==t||"object"==t&&"number"==typeof e.length}function m(e){return"function"==v(e)}function y(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function _(e){return Object.prototype.hasOwnProperty.call(e,b)&&e[b]||(e[b]=++w)}var b="closure_uid_"+(1e9*Math.random()>>>0),w=0;function I(e,t,n){return e.call.apply(e.bind,arguments)}function T(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function E(e,t,n){return E=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?I:T,E.apply(null,arguments)}function k(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var S=Date.now;function C(e,t){function n(){}n.prototype=t.prototype,e.bb=t.prototype,e.prototype=new n,e.prototype.constructor=e}function A(e){return e}function N(e,t,n){this.code=P+e,this.message=t||O[e]||"",this.a=n||null}function x(e){var t=e&&e.code;return t?new N(t.substring(P.length),e.message,e.serverResponse):null}C(N,Error),N.prototype.w=function(){var e={code:this.code,message:this.message};return this.a&&(e.serverResponse=this.a),e},N.prototype.toJSON=function(){return this.w()};var R,P="auth/",O={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},D={ld:{Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ua:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://securetoken.googleapis.com/v1/token",Xa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ua:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ua:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",$a:"https://test-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function M(e){for(var t in D)if(D[t].id===e)return e=D[t],{firebaseEndpoint:e.Ua,secureTokenEndpoint:e.$a,identityPlatformEndpoint:e.Xa};return null}function L(e){if(!e)return!1;try{return!!e.$goog_Thenable}catch(t){return!1}}function F(e){if(Error.captureStackTrace)Error.captureStackTrace(this,F);else{var t=Error().stack;t&&(this.stack=t)}e&&(this.message=String(e))}function j(e,t){e=e.split("%s");for(var n="",r=e.length-1,i=0;i<r;i++)n+=e[i]+(i<t.length?t[i]:"%s");F.call(this,n+e[r])}function U(e,t){throw new j("Failure"+(e?": "+e:""),Array.prototype.slice.call(arguments,1))}function q(e,t){this.c=e,this.f=t,this.b=0,this.a=null}function V(e,t){e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}function B(){this.b=this.a=null}R=M("__EID__")?"__EID__":void 0,C(F,Error),F.prototype.name="CustomError",C(j,F),j.prototype.name="AssertionError",q.prototype.get=function(){if(0<this.b){this.b--;var e=this.a;this.a=e.next,e.next=null}else e=this.c();return e};var K=new q((function(){return new H}),(function(e){e.reset()}));function W(){var e=Rt,t=null;return e.a&&(t=e.a,e.a=e.a.next,e.a||(e.b=null),t.next=null),t}function H(){this.next=this.b=this.a=null}B.prototype.add=function(e,t){var n=K.get();n.set(e,t),this.b?this.b.next=n:this.a=n,this.b=n},H.prototype.set=function(e,t){this.a=e,this.b=t,this.next=null},H.prototype.reset=function(){this.next=this.b=this.a=null};var G=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},z=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,o=0;o<r;o++)o in i&&t.call(n,i[o],o,e)};function Q(e,t){for(var n="string"===typeof e?e.split(""):e,r=e.length-1;0<=r;--r)r in n&&t.call(void 0,n[r],r,e)}var $=Array.prototype.filter?function(e,t){return Array.prototype.filter.call(e,t,void 0)}:function(e,t){for(var n=e.length,r=[],i=0,o="string"===typeof e?e.split(""):e,a=0;a<n;a++)if(a in o){var s=o[a];t.call(void 0,s,a,e)&&(r[i++]=s)}return r},Y=Array.prototype.map?function(e,t){return Array.prototype.map.call(e,t,void 0)}:function(e,t){for(var n=e.length,r=Array(n),i="string"===typeof e?e.split(""):e,o=0;o<n;o++)o in i&&(r[o]=t.call(void 0,i[o],o,e));return r},X=Array.prototype.some?function(e,t){return Array.prototype.some.call(e,t,void 0)}:function(e,t){for(var n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e))return!0;return!1};function J(e){e:{for(var t=os,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}function Z(e,t){return 0<=G(e,t)}function ee(e,t){var n;return t=G(e,t),(n=0<=t)&&Array.prototype.splice.call(e,t,1),n}function te(e,t){Q(e,(function(n,r){t.call(void 0,n,r,e)&&1==Array.prototype.splice.call(e,r,1).length&&0}))}function ne(e){return Array.prototype.concat.apply([],arguments)}function re(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}var ie,oe=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]},ae=/&/g,se=/</g,ue=/>/g,ce=/"/g,le=/'/g,he=/\x00/g,fe=/[\x00&<>"']/;function de(e,t){return-1!=e.indexOf(t)}function pe(e,t){return e<t?-1:e>t?1:0}e:{var ve=l.navigator;if(ve){var ge=ve.userAgent;if(ge){ie=ge;break e}}ie=""}function me(e){return de(ie,e)}function ye(e,t){for(var n in e)t.call(void 0,e[n],n,e)}function _e(e){for(var t in e)return!1;return!0}function be(e){var t,n={};for(t in e)n[t]=e[t];return n}var we="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ie(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(var o=0;o<we.length;o++)n=we[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Te(e,t){e:{try{var n=e&&e.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if(r=r||l,r.Element&&r.Location){var i=r;break e}}catch(a){}i=null}if(i&&"undefined"!=typeof i[t]&&(!e||!(e instanceof i[t])&&(e instanceof i.Location||e instanceof i.Element))){if(y(e))try{var o=e.constructor.displayName||e.constructor.name||Object.prototype.toString.call(e)}catch(a){o="<object could not be stringified>"}else o=void 0===e?"undefined":null===e?"null":typeof e;U("Argument is not a %s (or a non-Element, non-Location mock); got: %s",t,o)}}function Ee(e,t){this.a=e===Ae&&t||"",this.b=Ce}function ke(e){return e instanceof Ee&&e.constructor===Ee&&e.b===Ce?e.a:(U("expected object of type Const, got '"+e+"'"),"type_error:Const")}Ee.prototype.ta=!0,Ee.prototype.sa=function(){return this.a},Ee.prototype.toString=function(){return"Const{"+this.a+"}"};var Se,Ce={},Ae={};function Ne(){if(void 0===Se){var e=null,t=l.trustedTypes;if(t&&t.createPolicy){try{e=t.createPolicy("goog#html",{createHTML:A,createScript:A,createScriptURL:A})}catch(n){l.console&&l.console.error(n.message)}Se=e}else Se=e}return Se}function xe(e,t){this.a=t===Me?e:""}function Re(e){return e instanceof xe&&e.constructor===xe?e.a:(U("expected object of type TrustedResourceUrl, got '"+e+"' of type "+v(e)),"type_error:TrustedResourceUrl")}function Pe(e,t){var n=ke(e);if(!De.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return e=n.replace(Oe,(function(e,r){if(!Object.prototype.hasOwnProperty.call(t,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(t));return e=t[r],e instanceof Ee?ke(e):encodeURIComponent(String(e))})),Le(e)}xe.prototype.ta=!0,xe.prototype.sa=function(){return this.a.toString()},xe.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var Oe=/%{(\w+)}/g,De=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,Me={};function Le(e){var t=Ne();return e=t?t.createScriptURL(e):e,new xe(e,Me)}function Fe(e,t){this.a=t===We?e:""}function je(e){return e instanceof Fe&&e.constructor===Fe?e.a:(U("expected object of type SafeUrl, got '"+e+"' of type "+v(e)),"type_error:SafeUrl")}Fe.prototype.ta=!0,Fe.prototype.sa=function(){return this.a.toString()},Fe.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Ue=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,qe=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,Ve=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Be(e){if(e instanceof Fe)return e;if(e="object"==typeof e&&e.ta?e.sa():String(e),Ve.test(e))e=new Fe(e,We);else{e=String(e),e=e.replace(/(%0A|%0D)/g,"");var t=e.match(qe);e=t&&Ue.test(t[1])?new Fe(e,We):null}return e}function Ke(e){return e instanceof Fe?e:(e="object"==typeof e&&e.ta?e.sa():String(e),Ve.test(e)||(e="about:invalid#zClosurez"),new Fe(e,We))}var We={},He=new Fe("about:invalid#zClosurez",We);function Ge(e,t,n){this.a=n===Qe?e:""}function ze(e){return e instanceof Ge&&e.constructor===Ge?e.a:(U("expected object of type SafeHtml, got '"+e+"' of type "+v(e)),"type_error:SafeHtml")}Ge.prototype.ta=!0,Ge.prototype.sa=function(){return this.a.toString()},Ge.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Qe={};function $e(e,t){Te(e,"HTMLScriptElement"),e.src=Re(t),(t=e.ownerDocument&&e.ownerDocument.defaultView)&&t!=l?t=d(t.document):(null===f&&(f=d(l.document)),t=f),t&&e.setAttribute("nonce",t)}function Ye(e,t,n,r){return e=e instanceof Fe?e:Ke(e),t=t||l,n=n instanceof Ee?ke(n):n||"",t.open(je(e),n,r,void 0)}function Xe(e,t){for(var n=e.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function Je(e){return fe.test(e)&&(-1!=e.indexOf("&")&&(e=e.replace(ae,"&amp;")),-1!=e.indexOf("<")&&(e=e.replace(se,"&lt;")),-1!=e.indexOf(">")&&(e=e.replace(ue,"&gt;")),-1!=e.indexOf('"')&&(e=e.replace(ce,"&quot;")),-1!=e.indexOf("'")&&(e=e.replace(le,"&#39;")),-1!=e.indexOf("\0")&&(e=e.replace(he,"&#0;"))),e}function Ze(e){return Ze[" "](e),e}function et(e,t){var n=dt;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}Ze[" "]=p;var tt,nt=me("Opera"),rt=me("Trident")||me("MSIE"),it=me("Edge"),ot=it||rt,at=me("Gecko")&&!(de(ie.toLowerCase(),"webkit")&&!me("Edge"))&&!(me("Trident")||me("MSIE"))&&!me("Edge"),st=de(ie.toLowerCase(),"webkit")&&!me("Edge");function ut(){var e=l.document;return e?e.documentMode:void 0}e:{var ct="",lt=function(){var e=ie;return at?/rv:([^\);]+)(\)|;)/.exec(e):it?/Edge\/([\d\.]+)/.exec(e):rt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):st?/WebKit\/(\S+)/.exec(e):nt?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(lt&&(ct=lt?lt[1]:""),rt){var ht=ut();if(null!=ht&&ht>parseFloat(ct)){tt=String(ht);break e}}tt=ct}var ft,dt={};function pt(e){return et(e,(function(){for(var t=0,n=oe(String(tt)).split("."),r=oe(String(e)).split("."),i=Math.max(n.length,r.length),o=0;0==t&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;t=pe(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||pe(0==a[2].length,0==s[2].length)||pe(a[2],s[2]),a=a[3],s=s[3]}while(0==t)}return 0<=t}))}if(l.document&&rt){var vt=ut();ft=vt||(parseInt(tt,10)||void 0)}else ft=void 0;var gt=ft;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(ep){}var mt=!rt||9<=Number(gt);function yt(e){var t=document;return"string"===typeof e?t.getElementById(e):e}function _t(e,t){ye(t,(function(t,n){t&&"object"==typeof t&&t.ta&&(t=t.sa()),"style"==n?e.style.cssText=t:"class"==n?e.className=t:"for"==n?e.htmlFor=t:It.hasOwnProperty(n)?e.setAttribute(It[n],t):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?e.setAttribute(n,t):e[n]=t}))}var bt,wt,It={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function Tt(e,t,n){var r=arguments,i=document,o=String(r[0]),a=r[1];if(!mt&&a&&(a.name||a.type)){if(o=["<",o],a.name&&o.push(' name="',Je(a.name),'"'),a.type){o.push(' type="',Je(a.type),'"');var s={};Ie(s,a),delete s.type,a=s}o.push(">"),o=o.join("")}return o=kt(i,o),a&&("string"===typeof a?o.className=a:Array.isArray(a)?o.className=a.join(" "):_t(o,a)),2<r.length&&Et(i,o,r),o}function Et(e,t,n){function r(n){n&&t.appendChild("string"===typeof n?e.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];if(!g(o)||y(o)&&0<o.nodeType)r(o);else{e:{if(o&&"number"==typeof o.length){if(y(o)){var a="function"==typeof o.item||"string"==typeof o.item;break e}if(m(o)){a="function"==typeof o.item;break e}}a=!1}z(a?re(o):o,r)}}}function kt(e,t){return t=String(t),"application/xhtml+xml"===e.contentType&&(t=t.toLowerCase()),e.createElement(t)}function St(e){l.setTimeout((function(){throw e}),0)}function Ct(){var e=l.MessageChannel;if("undefined"===typeof e&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!me("Presto")&&(e=function(){var e=kt(document,"IFRAME");e.style.display="none",document.documentElement.appendChild(e);var t=e.contentWindow;e=t.document,e.open(),e.close();var n="callImmediate"+Math.random(),r="file:"==t.location.protocol?"*":t.location.protocol+"//"+t.location.host;e=E((function(e){"*"!=r&&e.origin!=r||e.data!=n||this.port1.onmessage()}),this),t.addEventListener("message",e,!1),this.port1={},this.port2={postMessage:function(){t.postMessage(n,r)}}}),"undefined"!==typeof e&&!me("Trident")&&!me("MSIE")){var t=new e,n={},r=n;return t.port1.onmessage=function(){if(void 0!==n.next){n=n.next;var e=n.Hb;n.Hb=null,e()}},function(e){r.next={Hb:e},r=r.next,t.port2.postMessage(0)}}return function(e){l.setTimeout(e,0)}}function At(e,t){wt||Nt(),xt||(wt(),xt=!0),Rt.add(e,t)}function Nt(){if(l.Promise&&l.Promise.resolve){var e=l.Promise.resolve(void 0);wt=function(){e.then(Pt)}}else wt=function(){var e=Pt;!m(l.setImmediate)||l.Window&&l.Window.prototype&&!me("Edge")&&l.Window.prototype.setImmediate==l.setImmediate?(bt||(bt=Ct()),bt(e)):l.setImmediate(e)}}var xt=!1,Rt=new B;function Pt(){for(var e;e=W();){try{e.a.call(e.b)}catch(t){St(t)}V(K,e)}xt=!1}function Ot(e,t){if(this.a=Dt,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,e!=p)try{var n=this;e.call(t,(function(e){Qt(n,Mt,e)}),(function(e){if(!(e instanceof rn))try{if(e instanceof Error)throw e;throw Error("Promise rejected.")}catch(t){}Qt(n,Lt,e)}))}catch(r){Qt(this,Lt,r)}}var Dt=0,Mt=2,Lt=3;function Ft(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Ft.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var jt=new q((function(){return new Ft}),(function(e){e.reset()}));function Ut(e,t,n){var r=jt.get();return r.g=e,r.b=t,r.f=n,r}function qt(e){if(e instanceof Ot)return e;var t=new Ot(p);return Qt(t,Mt,e),t}function Vt(e){return new Ot((function(t,n){n(e)}))}function Bt(e,t,n){$t(e,t,n,null)||At(k(t,e))}function Kt(e){return new Ot((function(t,n){var r=e.length,i=[];if(r)for(var o,a=function(e,n){r--,i[e]=n,0==r&&t(i)},s=function(e){n(e)},u=0;u<e.length;u++)o=e[u],Bt(o,k(a,u),s);else t(i)}))}function Wt(e){return new Ot((function(t){var n=e.length,r=[];if(n)for(var i,o=function(e,i,o){n--,r[e]=i?{Qb:!0,value:o}:{Qb:!1,reason:o},0==n&&t(r)},a=0;a<e.length;a++)i=e[a],Bt(i,k(o,a,!0),k(o,a,!1));else t(r)}))}function Ht(e,t){if(e.a==Dt)if(e.c){var n=e.c;if(n.b){for(var r=0,i=null,o=null,a=n.b;a&&(a.c||(r++,a.a==e&&(i=a),!(i&&1<r)));a=a.next)i||(o=a);i&&(n.a==Dt&&1==r?Ht(n,t):(o?(r=o,r.next==n.f&&(n.f=r),r.next=r.next.next):Jt(n),Zt(n,i,Lt,t)))}e.c=null}else Qt(e,Lt,t)}function Gt(e,t){e.b||e.a!=Mt&&e.a!=Lt||Xt(e),e.f?e.f.next=t:e.b=t,e.f=t}function zt(e,t,n,r){var i=Ut(null,null,null);return i.a=new Ot((function(e,o){i.g=t?function(n){try{var i=t.call(r,n);e(i)}catch(a){o(a)}}:e,i.b=n?function(t){try{var i=n.call(r,t);void 0===i&&t instanceof rn?o(t):e(i)}catch(a){o(a)}}:o})),i.a.c=e,Gt(e,i),i.a}function Qt(e,t,n){e.a==Dt&&(e===n&&(t=Lt,n=new TypeError("Promise cannot resolve to itself")),e.a=1,$t(n,e.$c,e.ad,e)||(e.i=n,e.a=t,e.c=null,Xt(e),t!=Lt||n instanceof rn||tn(e,n)))}function $t(e,t,n,r){if(e instanceof Ot)return Gt(e,Ut(t||p,n||null,r)),!0;if(L(e))return e.then(t,n,r),!0;if(y(e))try{var i=e.then;if(m(i))return Yt(e,i,t,n,r),!0}catch(o){return n.call(r,o),!0}return!1}function Yt(e,t,n,r,i){function o(e){s||(s=!0,r.call(i,e))}function a(e){s||(s=!0,n.call(i,e))}var s=!1;try{t.call(e,a,o)}catch(u){o(u)}}function Xt(e){e.h||(e.h=!0,At(e.gc,e))}function Jt(e){var t=null;return e.b&&(t=e.b,e.b=t.next,t.next=null),e.b||(e.f=null),t}function Zt(e,t,n,r){if(n==Lt&&t.b&&!t.c)for(;e&&e.g;e=e.c)e.g=!1;if(t.a)t.a.c=null,en(t,n,r);else try{t.c?t.g.call(t.f):en(t,n,r)}catch(i){nn.call(null,i)}V(jt,t)}function en(e,t,n){t==Mt?e.g.call(e.f,n):e.b&&e.b.call(e.f,n)}function tn(e,t){e.g=!0,At((function(){e.g&&nn.call(null,t)}))}Ot.prototype.then=function(e,t,n){return zt(this,m(e)?e:null,m(t)?t:null,n)},Ot.prototype.$goog_Thenable=!0,e=Ot.prototype,e.oa=function(e,t){return e=Ut(e,e,t),e.c=!0,Gt(this,e),this},e.o=function(e,t){return zt(this,null,e,t)},e.cancel=function(e){if(this.a==Dt){var t=new rn(e);At((function(){Ht(this,t)}),this)}},e.$c=function(e){this.a=Dt,Qt(this,Mt,e)},e.ad=function(e){this.a=Dt,Qt(this,Lt,e)},e.gc=function(){for(var e;e=Jt(this);)Zt(this,e,this.a,this.i);this.h=!1};var nn=St;function rn(e){F.call(this,e)}function on(){0!=an&&(sn[_(this)]=this),this.ya=this.ya,this.pa=this.pa}C(rn,F),rn.prototype.name="cancel";var an=0,sn={};function un(e){if(!e.ya&&(e.ya=!0,e.Da(),0!=an)){var t=_(e);if(0!=an&&e.pa&&0<e.pa.length)throw Error(e+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete sn[t]}}on.prototype.ya=!1,on.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var cn=Object.freeze||function(e){return e},ln=!rt||9<=Number(gt),hn=rt&&!pt("9"),fn=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{l.addEventListener("test",p,t),l.removeEventListener("test",p,t)}catch(n){}return e}();function dn(e,t){this.type=e,this.b=this.target=t,this.defaultPrevented=!1}function pn(e,t){if(dn.call(this,e?e.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.b=t,t=e.relatedTarget){if(at){e:{try{Ze(t.nodeName);var i=!0;break e}catch(o){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:vn[e.pointerType]||"",this.a=e,e.defaultPrevented&&this.preventDefault()}}dn.prototype.preventDefault=function(){this.defaultPrevented=!0},C(pn,dn);var vn=cn({2:"touch",3:"pen",4:"mouse"});pn.prototype.preventDefault=function(){pn.bb.preventDefault.call(this);var e=this.a;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,hn)try{(e.ctrlKey||112<=e.keyCode&&123>=e.keyCode)&&(e.keyCode=-1)}catch(t){}},pn.prototype.g=function(){return this.a};var gn="closure_listenable_"+(1e6*Math.random()|0),mn=0;function yn(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.Wa=i,this.key=++mn,this.wa=this.Qa=!1}function _n(e){e.wa=!0,e.listener=null,e.proxy=null,e.src=null,e.Wa=null}function bn(e){this.src=e,this.a={},this.b=0}function wn(e,t){var n=t.type;n in e.a&&ee(e.a[n],t)&&(_n(t),0==e.a[n].length&&(delete e.a[n],e.b--))}function In(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.wa&&o.listener==t&&o.capture==!!n&&o.Wa==r)return i}return-1}bn.prototype.add=function(e,t,n,r,i){var o=e.toString();e=this.a[o],e||(e=this.a[o]=[],this.b++);var a=In(e,t,r,i);return-1<a?(t=e[a],n||(t.Qa=!1)):(t=new yn(t,this.src,o,!!r,i),t.Qa=n,e.push(t)),t};var Tn="closure_lm_"+(1e6*Math.random()|0),En={};function kn(e,t,n,r,i){if(r&&r.once)An(e,t,n,r,i);else if(Array.isArray(t))for(var o=0;o<t.length;o++)kn(e,t[o],n,r,i);else n=Fn(n),e&&e[gn]?Un(e,t,n,y(r)?!!r.capture:!!r,i):Sn(e,t,n,!1,r,i)}function Sn(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var a=y(i)?!!i.capture:!!i,s=Mn(e);if(s||(e[Tn]=s=new bn(e)),n=s.add(t,n,r,a,o),!n.proxy){if(r=Cn(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)fn||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Rn(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}0}}function Cn(){var e=Dn,t=ln?function(n){return e.call(t.src,t.listener,n)}:function(n){if(n=e.call(t.src,t.listener,n),!n)return n};return t}function An(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)An(e,t[o],n,r,i);else n=Fn(n),e&&e[gn]?qn(e,t,n,y(r)?!!r.capture:!!r,i):Sn(e,t,n,!0,r,i)}function Nn(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)Nn(e,t[o],n,r,i);else r=y(r)?!!r.capture:!!r,n=Fn(n),e&&e[gn]?(e=e.v,t=String(t).toString(),t in e.a&&(o=e.a[t],n=In(o,n,r,i),-1<n&&(_n(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.a[t],e.b--)))):e&&(e=Mn(e))&&(t=e.a[t.toString()],e=-1,t&&(e=In(t,n,r,i)),(n=-1<e?t[e]:null)&&xn(n))}function xn(e){if("number"!==typeof e&&e&&!e.wa){var t=e.src;if(t&&t[gn])wn(t.v,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Rn(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Mn(t))?(wn(n,e),0==n.b&&(n.src=null,t[Tn]=null)):_n(e)}}}function Rn(e){return e in En?En[e]:En[e]="on"+e}function Pn(e,t,n,r){var i=!0;if((e=Mn(e))&&(t=e.a[t.toString()]))for(t=t.concat(),e=0;e<t.length;e++){var o=t[e];o&&o.capture==n&&!o.wa&&(o=On(o,r),i=i&&!1!==o)}return i}function On(e,t){var n=e.listener,r=e.Wa||e.src;return e.Qa&&xn(e),n.call(r,t)}function Dn(e,t){if(e.wa)return!0;if(!ln){if(!t)e:{t=["window","event"];for(var n=l,r=0;r<t.length;r++)if(n=n[t[r]],null==n){t=null;break e}t=n}if(r=t,t=new pn(r,this),n=!0,!(0>r.keyCode||void 0!=r.returnValue)){e:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break e}catch(a){i=!0}(i||void 0==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=t.b;i;i=i.parentNode)r.push(i);for(e=e.type,i=r.length-1;0<=i;i--){t.b=r[i];var o=Pn(r[i],e,!0,t);n=n&&o}for(i=0;i<r.length;i++)t.b=r[i],o=Pn(r[i],e,!1,t),n=n&&o}return n}return On(e,new pn(t,this))}function Mn(e){return e=e[Tn],e instanceof bn?e:null}var Ln="__closure_events_fn_"+(1e9*Math.random()>>>0);function Fn(e){return m(e)?e:(e[Ln]||(e[Ln]=function(t){return e.handleEvent(t)}),e[Ln])}function jn(){on.call(this),this.v=new bn(this),this.bc=this,this.hb=null}function Un(e,t,n,r,i){e.v.add(String(t),n,!1,r,i)}function qn(e,t,n,r,i){e.v.add(String(t),n,!0,r,i)}function Vn(e,t,n,r){if(t=e.v.a[String(t)],!t)return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var a=t[o];if(a&&!a.wa&&a.capture==n){var s=a.listener,u=a.Wa||a.src;a.Qa&&wn(e.v,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}function Bn(e,t,n){if(m(e))n&&(e=E(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=E(e.handleEvent,e)}return 2147483647<Number(t)?-1:l.setTimeout(e,t||0)}function Kn(e){var t=null;return new Ot((function(n,r){t=Bn((function(){n(void 0)}),e),-1==t&&r(Error("Failed to schedule timer."))})).o((function(e){throw l.clearTimeout(t),e}))}function Wn(e){if(e.X&&"function"==typeof e.X)return e.X();if("string"===typeof e)return e.split("");if(g(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}function Hn(e){if(e.Y&&"function"==typeof e.Y)return e.Y();if(!e.X||"function"!=typeof e.X){if(g(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}function Gn(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(g(e)||"string"===typeof e)z(e,t,void 0);else for(var n=Hn(e),r=Wn(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}function zn(e,t){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof zn)for(n=e.Y(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function Qn(e){if(e.c!=e.a.length){for(var t=0,n=0;t<e.a.length;){var r=e.a[t];$n(e.b,r)&&(e.a[n++]=r),t++}e.a.length=n}if(e.c!=e.a.length){var i={};for(n=t=0;t<e.a.length;)r=e.a[t],$n(i,r)||(e.a[n++]=r,i[r]=1),t++;e.a.length=n}}function $n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}C(jn,on),jn.prototype[gn]=!0,jn.prototype.addEventListener=function(e,t,n,r){kn(this,e,t,n,r)},jn.prototype.removeEventListener=function(e,t,n,r){Nn(this,e,t,n,r)},jn.prototype.dispatchEvent=function(e){var t,n=this.hb;if(n)for(t=[];n;n=n.hb)t.push(n);n=this.bc;var r=e.type||e;if("string"===typeof e)e=new dn(e,n);else if(e instanceof dn)e.target=e.target||n;else{var i=e;e=new dn(r,n),Ie(e,i)}if(i=!0,t)for(var o=t.length-1;0<=o;o--){var a=e.b=t[o];i=Vn(a,r,!0,e)&&i}if(a=e.b=n,i=Vn(a,r,!0,e)&&i,i=Vn(a,r,!1,e)&&i,t)for(o=0;o<t.length;o++)a=e.b=t[o],i=Vn(a,r,!1,e)&&i;return i},jn.prototype.Da=function(){if(jn.bb.Da.call(this),this.v){var e,t=this.v;for(e in t.a){for(var n=t.a[e],r=0;r<n.length;r++)_n(n[r]);delete t.a[e],t.b--}}this.hb=null},e=zn.prototype,e.X=function(){Qn(this);for(var e=[],t=0;t<this.a.length;t++)e.push(this.b[this.a[t]]);return e},e.Y=function(){return Qn(this),this.a.concat()},e.clear=function(){this.b={},this.c=this.a.length=0},e.get=function(e,t){return $n(this.b,e)?this.b[e]:t},e.set=function(e,t){$n(this.b,e)||(this.c++,this.a.push(e)),this.b[e]=t},e.forEach=function(e,t){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);e.call(t,o,i,this)}};var Yn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Xn(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Jn(e,t){var n;this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1,e instanceof Jn?(this.i=void 0!==t?t:e.i,Zn(this,e.c),this.l=e.l,this.a=e.a,er(this,e.g),this.f=e.f,tr(this,br(e.b)),this.h=e.h):e&&(n=String(e).match(Yn))?(this.i=!!t,Zn(this,n[1]||"",!0),this.l=ar(n[2]||""),this.a=ar(n[3]||"",!0),er(this,n[4]),this.f=ar(n[5]||"",!0),tr(this,n[6]||"",!0),this.h=ar(n[7]||"")):(this.i=!!t,this.b=new pr(null,this.i))}function Zn(e,t,n){e.c=n?ar(t,!0):t,e.c&&(e.c=e.c.replace(/:$/,""))}function er(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.g=t}else e.g=null}function tr(e,t,n){t instanceof pr?(e.b=t,Ir(e.b,e.i)):(n||(t=sr(t,fr)),e.b=new pr(t,e.i))}function nr(e,t,n){e.b.set(t,n)}function rr(e,t){return e.b.get(t)}function ir(e){return e instanceof Jn?new Jn(e):new Jn(e,void 0)}function or(e,t,n,r){var i=new Jn(null,void 0);return e&&Zn(i,e),t&&(i.a=t),n&&er(i,n),r&&(i.f=r),i}function ar(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function sr(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,ur),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function ur(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(15&e).toString(16)}Jn.prototype.toString=function(){var e=[],t=this.c;t&&e.push(sr(t,cr,!0),":");var n=this.a;return(n||"file"==t)&&(e.push("//"),(t=this.l)&&e.push(sr(t,cr,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.g,null!=n&&e.push(":",String(n))),(n=this.f)&&(this.a&&"/"!=n.charAt(0)&&e.push("/"),e.push(sr(n,"/"==n.charAt(0)?hr:lr,!0))),(n=this.b.toString())&&e.push("?",n),(n=this.h)&&e.push("#",sr(n,dr)),e.join("")},Jn.prototype.resolve=function(e){var t=new Jn(this),n=!!e.c;n?Zn(t,e.c):n=!!e.l,n?t.l=e.l:n=!!e.a,n?t.a=e.a:n=null!=e.g;var r=e.f;if(n)er(t,e.g);else if(n=!!e.f){if("/"!=r.charAt(0))if(this.a&&!this.f)r="/"+r;else{var i=t.f.lastIndexOf("/");-1!=i&&(r=t.f.substr(0,i+1)+r)}if(i=r,".."==i||"."==i)r="";else if(de(i,"./")||de(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?t.f=r:n=""!==e.b.toString(),n?tr(t,br(e.b)):n=!!e.h,n&&(t.h=e.h),t};var cr=/[#\/\?@]/g,lr=/[#\?:]/g,hr=/[#\?]/g,fr=/[#\?@]/g,dr=/#/g;function pr(e,t){this.b=this.a=null,this.c=e||null,this.f=!!t}function vr(e){e.a||(e.a=new zn,e.b=0,e.c&&Xn(e.c,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function gr(e){var t=Hn(e);if("undefined"==typeof t)throw Error("Keys are undefined");var n=new pr(null,void 0);e=Wn(e);for(var r=0;r<t.length;r++){var i=t[r],o=e[r];Array.isArray(o)?_r(n,i,o):n.add(i,o)}return n}function mr(e,t){vr(e),t=wr(e,t),$n(e.a.b,t)&&(e.c=null,e.b-=e.a.get(t).length,e=e.a,$n(e.b,t)&&(delete e.b[t],e.c--,e.a.length>2*e.c&&Qn(e)))}function yr(e,t){return vr(e),t=wr(e,t),$n(e.a.b,t)}function _r(e,t,n){mr(e,t),0<n.length&&(e.c=null,e.a.set(wr(e,t),re(n)),e.b+=n.length)}function br(e){var t=new pr;return t.c=e.c,e.a&&(t.a=new zn(e.a),t.b=e.b),t}function wr(e,t){return t=String(t),e.f&&(t=t.toLowerCase()),t}function Ir(e,t){t&&!e.f&&(vr(e),e.c=null,e.a.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(mr(this,t),_r(this,n,e))}),e)),e.f=t}function Tr(e){var t=[];return kr(new Er,e,t),t.join("")}function Er(){}function kr(e,t,n){if(null==t)n.push("null");else{if("object"==typeof t){if(Array.isArray(t)){var r=t;t=r.length,n.push("[");for(var i="",o=0;o<t;o++)n.push(i),kr(e,r[o],n),i=",";return void n.push("]")}if(!(t instanceof String||t instanceof Number||t instanceof Boolean)){for(r in n.push("{"),i="",t)Object.prototype.hasOwnProperty.call(t,r)&&(o=t[r],"function"!=typeof o&&(n.push(i),Ar(r,n),n.push(":"),kr(e,o,n),i=","));return void n.push("}")}t=t.valueOf()}switch(typeof t){case"string":Ar(t,n);break;case"number":n.push(isFinite(t)&&!isNaN(t)?String(t):"null");break;case"boolean":n.push(String(t));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof t)}}}e=pr.prototype,e.add=function(e,t){vr(this),this.c=null,e=wr(this,e);var n=this.a.get(e);return n||this.a.set(e,n=[]),n.push(t),this.b+=1,this},e.clear=function(){this.a=this.c=null,this.b=0},e.forEach=function(e,t){vr(this),this.a.forEach((function(n,r){z(n,(function(n){e.call(t,n,r,this)}),this)}),this)},e.Y=function(){vr(this);for(var e=this.a.X(),t=this.a.Y(),n=[],r=0;r<t.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(t[r]);return n},e.X=function(e){vr(this);var t=[];if("string"===typeof e)yr(this,e)&&(t=ne(t,this.a.get(wr(this,e))));else{e=this.a.X();for(var n=0;n<e.length;n++)t=ne(t,e[n])}return t},e.set=function(e,t){return vr(this),this.c=null,e=wr(this,e),yr(this,e)&&(this.b-=this.a.get(e).length),this.a.set(e,[t]),this.b+=1,this},e.get=function(e,t){return e?(e=this.X(e),0<e.length?String(e[0]):t):t},e.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var e=[],t=this.a.Y(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.X(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),e.push(a)}}return this.c=e.join("&")};var Sr={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},Cr=/\uffff/.test("ï¿¿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function Ar(e,t){t.push('"',e.replace(Cr,(function(e){var t=Sr[e];return t||(t="\\u"+(65536|e.charCodeAt(0)).toString(16).substr(1),Sr[e]=t),t})),'"')}function Nr(){var e=Zr();return rt&&!!gt&&11==gt||/Edge\/\d+/.test(e)}function xr(){return l.window&&l.window.location.href||self&&self.location&&self.location.href||""}function Rr(e,t){t=t||l.window;var n="about:blank";e&&(n=je(Be(e)||He)),t.location.href=n}function Pr(e,t){var n,r=[];for(n in e)n in t?typeof e[n]!=typeof t[n]?r.push(n):"object"==typeof e[n]&&null!=e[n]&&null!=t[n]?0<Pr(e[n],t[n]).length&&r.push(n):e[n]!==t[n]&&r.push(n):r.push(n);for(n in t)n in e||r.push(n);return r}function Or(){var e=Zr();return e=Yr(e)!=$r?null:(e=e.match(/\sChrome\/(\d+)/i))&&2==e.length?parseInt(e[1],10):null,!(e&&30>e)&&(!rt||!gt||9<gt)}function Dr(e){return e=(e||Zr()).toLowerCase(),!!(e.match(/android/)||e.match(/webos/)||e.match(/iphone|ipad|ipod/)||e.match(/blackberry/)||e.match(/windows phone/)||e.match(/iemobile/))}function Mr(e){e=e||l.window;try{e.close()}catch(t){}}function Lr(e,t,n){var r=Math.floor(1e9*Math.random()).toString();t=t||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-t)/2;for(a in t={width:t,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=Zr().toLowerCase(),r&&(t.target=r,de(n,"crios/")&&(t.target="_blank")),Yr(Zr())==Qr&&(e=e||"http://localhost",t.scrollbars=!0),n=e||"",(e=t)||(e={}),r=window,t=n instanceof Fe?n:Be("undefined"!=typeof n.href?n.href:String(n))||He,n=e.target||n.target,i=[],e)switch(a){case"width":case"height":case"top":case"left":i.push(a+"="+e[a]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(a+"="+(e[a]?1:0))}var a=i.join(",");if((me("iPhone")&&!me("iPod")&&!me("iPad")||me("iPad")||me("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(a=kt(document,"A"),Te(a,"HTMLAnchorElement"),t=t instanceof Fe?t:Ke(t),a.href=je(t),a.setAttribute("target",n),e.noreferrer&&a.setAttribute("rel","noreferrer"),e=document.createEvent("MouseEvent"),e.initMouseEvent("click",!0,!0,r,1),a.dispatchEvent(e),a={}):e.noreferrer?(a=Ye("",r,n,a),e=je(t),a&&(ot&&de(e,";")&&(e="'"+e.replace(/'/g,"%27")+"'"),a.opener=null,e='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Je(e)+'">',e=(r=Ne())?r.createHTML(e):e,e=new Ge(e,null,Qe),r=a.document)&&(r.write(ze(e)),r.close())):(a=Ye(t,r,n,a))&&e.noopener&&(a.opener=null),a)try{a.focus()}catch(s){}return a}function Fr(e){return new Ot((function(t){function n(){Kn(2e3).then((function(){if(e&&!e.closed)return n();t()}))}return n()}))}var jr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ur=/^[^@]+@[^@]+$/;function qr(){var e=null;return new Ot((function(t){"complete"==l.document.readyState?t():(e=function(){t()},An(window,"load",e))})).o((function(t){throw Nn(window,"load",e),t}))}function Vr(){return Br(void 0)?qr().then((function(){return new Ot((function(e,t){var n=l.document,r=setTimeout((function(){t(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),e()}),!1)}))})):Vt(Error("Cordova must run in an Android or iOS file scheme."))}function Br(e){return e=e||Zr(),!("file:"!==ii()&&"ionic:"!==ii()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function Kr(){var e=l.window;try{return!(!e||e==e.top)}catch(t){return!1}}function Wr(){return"undefined"!==typeof l.WorkerGlobalScope&&"function"===typeof l.importScripts}function Hr(){return r["default"].INTERNAL.hasOwnProperty("reactNative")?"ReactNative":r["default"].INTERNAL.hasOwnProperty("node")?"Node":Wr()?"Worker":"Browser"}function Gr(){var e=Hr();return"ReactNative"===e||"Node"===e}function zr(){for(var e=50,t=[];0<e;)t.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),e--;return t.join("")}var Qr="Firefox",$r="Chrome";function Yr(e){var t=e.toLowerCase();return de(t,"opera/")||de(t,"opr/")||de(t,"opios/")?"Opera":de(t,"iemobile")?"IEMobile":de(t,"msie")||de(t,"trident/")?"IE":de(t,"edge/")?"Edge":de(t,"firefox/")?Qr:de(t,"silk/")?"Silk":de(t,"blackberry")?"Blackberry":de(t,"webos")?"Webos":!de(t,"safari/")||de(t,"chrome/")||de(t,"crios/")||de(t,"android")?!de(t,"chrome/")&&!de(t,"crios/")||de(t,"edge/")?de(t,"android")?"Android":(e=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==e.length?e[1]:"Other":$r:"Safari"}var Xr={md:"FirebaseCore-web",od:"FirebaseUI-web"};function Jr(e,t){t=t||[];var n,r=[],i={};for(n in Xr)i[Xr[n]]=!0;for(n=0;n<t.length;n++)"undefined"!==typeof i[t[n]]&&(delete i[t[n]],r.push(t[n]));return r.sort(),t=r,t.length||(t=["FirebaseCore-web"]),r=Hr(),"Browser"===r?(i=Zr(),r=Yr(i)):"Worker"===r&&(i=Zr(),r=Yr(i)+"-"+r),r+"/JsCore/"+e+"/"+t.join(",")}function Zr(){return l.navigator&&l.navigator.userAgent||""}function ei(e,t){e=e.split("."),t=t||l;for(var n=0;n<e.length&&"object"==typeof t&&null!=t;n++)t=t[e[n]];return n!=e.length&&(t=void 0),t}function ti(){try{var e=l.localStorage,t=ci();if(e)return e.setItem(t,"1"),e.removeItem(t),!Nr()||!!l.indexedDB}catch(n){return Wr()&&!!l.indexedDB}return!1}function ni(){return(ri()||"chrome-extension:"===ii()||Br())&&!Gr()&&ti()&&!Wr()}function ri(){return"http:"===ii()||"https:"===ii()}function ii(){return l.location&&l.location.protocol||null}function oi(e){return e=e||Zr(),!Dr(e)&&Yr(e)!=Qr}function ai(e){return"undefined"===typeof e?null:Tr(e)}function si(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&null!==e[t]&&void 0!==e[t]&&(n[t]=e[t]);return n}function ui(e){if(null!==e)return JSON.parse(e)}function ci(e){return e||Math.floor(1e9*Math.random()).toString()}function li(e){return e=e||Zr(),"Safari"!=Yr(e)&&!e.toLowerCase().match(/iphone|ipad|ipod/)}function hi(){var e=l.___jsl;if(e&&e.H)for(var t in e.H)if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=e.H[t].L.concat(),e.CP)for(var n=0;n<e.CP.length;n++)e.CP[n]=null}function fi(e,t){if(e>t)throw Error("Short delay should be less than long delay!");this.a=e,this.c=t,e=Zr(),t=Hr(),this.b=Dr(e)||"ReactNative"===t}function di(){var e=l.document;return!e||"undefined"===typeof e.visibilityState||"visible"==e.visibilityState}function pi(){var e=l.document,t=null;return di()||!e?qt():new Ot((function(n){t=function(){di()&&(e.removeEventListener("visibilitychange",t,!1),n())},e.addEventListener("visibilitychange",t,!1)})).o((function(n){throw e.removeEventListener("visibilitychange",t,!1),n}))}function vi(e){try{var t=new Date(parseInt(e,10));if(!isNaN(t.getTime())&&!/[^0-9]/.test(e))return t.toUTCString()}catch(n){}return null}function gi(){return!(!ei("fireauth.oauthhelper",l)&&!ei("fireauth.iframe",l))}function mi(){var e=l.navigator;return e&&e.serviceWorker&&e.serviceWorker.controller||null}function yi(){var e=l.navigator;return e&&e.serviceWorker?qt().then((function(){return e.serviceWorker.ready})).then((function(e){return e.active||null})).o((function(){return null})):qt(null)}fi.prototype.get=function(){var e=l.navigator;return!e||"boolean"!==typeof e.onLine||!ri()&&"chrome-extension:"!==ii()&&"undefined"===typeof e.connection||e.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var _i,bi={};function wi(e){bi[e]||(bi[e]=!0,"undefined"!==typeof console&&"function"===typeof console.warn&&console.warn(e))}try{var Ii={};Object.defineProperty(Ii,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Ii,"abcd",{configurable:!0,enumerable:!0,value:2}),_i=2==Ii.abcd}catch(ep){_i=!1}function Ti(e,t,n){_i?Object.defineProperty(e,t,{configurable:!0,enumerable:!0,value:n}):e[t]=n}function Ei(e,t){if(t)for(var n in t)t.hasOwnProperty(n)&&Ti(e,n,t[n])}function ki(e){var t={};return Ei(t,e),t}function Si(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function Ci(e,t){if(!t||!t.length)return!0;if(!e)return!1;for(var n=0;n<t.length;n++){var r=e[t[n]];if(void 0===r||null===r||""===r)return!1}return!0}function Ai(e){var t=e;if("object"==typeof e&&null!=e)for(var n in t="length"in e?[]:{},e)Ti(t,n,Ai(e[n]));return t}function Ni(e){var t=e&&(e[Di]?"phone":null);if(!(t&&e&&e[Oi]))throw new N("internal-error","Internal assert: invalid MultiFactorInfo object");Ti(this,"uid",e[Oi]),Ti(this,"displayName",e[Ri]||null);var n=null;e[Pi]&&(n=new Date(e[Pi]).toUTCString()),Ti(this,"enrollmentTime",n),Ti(this,"factorId",t)}function xi(e){try{var t=new Mi(e)}catch(n){t=null}return t}Ni.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var Ri="displayName",Pi="enrolledAt",Oi="mfaEnrollmentId",Di="phoneInfo";function Mi(e){Ni.call(this,e),Ti(this,"phoneNumber",e[Di])}function Li(e){var t={},n=e[qi],r=e[Bi],i=e[Ki];if(e=xi(e[Vi]),!i||i!=ji&&i!=Ui&&!n||i==Ui&&!r||i==Fi&&!e)throw Error("Invalid checkActionCode response!");i==Ui?(t[Hi]=n||null,t[zi]=n||null,t[Wi]=r):(t[Hi]=r||null,t[zi]=r||null,t[Wi]=n||null),t[Gi]=e||null,Ti(this,$i,i),Ti(this,Qi,Ai(t))}C(Mi,Ni),Mi.prototype.w=function(){var e=Mi.bb.w.call(this);return e.phoneNumber=this.phoneNumber,e};var Fi="REVERT_SECOND_FACTOR_ADDITION",ji="EMAIL_SIGNIN",Ui="VERIFY_AND_CHANGE_EMAIL",qi="email",Vi="mfaInfo",Bi="newEmail",Ki="requestType",Wi="email",Hi="fromEmail",Gi="multiFactorInfo",zi="previousEmail",Qi="data",$i="operation";function Yi(e){e=ir(e);var t=rr(e,Xi)||null,n=rr(e,Ji)||null,r=rr(e,to)||null;if(r=r&&ro[r]||null,!t||!n||!r)throw new N("argument-error",Xi+", "+Ji+"and "+to+" are required in a valid action code URL.");Ei(this,{apiKey:t,operation:r,code:n,continueUrl:rr(e,Zi)||null,languageCode:rr(e,eo)||null,tenantId:rr(e,no)||null})}var Xi="apiKey",Ji="oobCode",Zi="continueUrl",eo="languageCode",to="mode",no="tenantId",ro={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:Fi,signIn:ji,verifyAndChangeEmail:Ui,verifyEmail:"VERIFY_EMAIL"};function io(e){try{return new Yi(e)}catch(t){return null}}function oo(e){var t=e[lo];if("undefined"===typeof t)throw new N("missing-continue-uri");if("string"!==typeof t||"string"===typeof t&&!t.length)throw new N("invalid-continue-uri");this.h=t,this.b=this.a=null,this.g=!1;var n=e[ao];if(n&&"object"===typeof n){t=n[po];var r=n[ho];if(n=n[fo],"string"===typeof t&&t.length){if(this.a=t,"undefined"!==typeof r&&"boolean"!==typeof r)throw new N("argument-error",ho+" property must be a boolean when specified.");if(this.g=!!r,"undefined"!==typeof n&&("string"!==typeof n||"string"===typeof n&&!n.length))throw new N("argument-error",fo+" property must be a non empty string when specified.");this.b=n||null}else{if("undefined"!==typeof t)throw new N("argument-error",po+" property must be a non empty string when specified.");if("undefined"!==typeof r||"undefined"!==typeof n)throw new N("missing-android-pkg-name")}}else if("undefined"!==typeof n)throw new N("argument-error",ao+" property must be a non null object when specified.");if(this.f=null,(t=e[co])&&"object"===typeof t){if(t=t[vo],"string"===typeof t&&t.length)this.f=t;else if("undefined"!==typeof t)throw new N("argument-error",vo+" property must be a non empty string when specified.")}else if("undefined"!==typeof t)throw new N("argument-error",co+" property must be a non null object when specified.");if(t=e[uo],"undefined"!==typeof t&&"boolean"!==typeof t)throw new N("argument-error",uo+" property must be a boolean when specified.");if(this.c=!!t,e=e[so],"undefined"!==typeof e&&("string"!==typeof e||"string"===typeof e&&!e.length))throw new N("argument-error",so+" property must be a non empty string when specified.");this.i=e||null}var ao="android",so="dynamicLinkDomain",uo="handleCodeInApp",co="iOS",lo="url",ho="installApp",fo="minimumVersion",po="packageName",vo="bundleId";function go(e){var t={};for(var n in t.continueUrl=e.h,t.canHandleCodeInApp=e.c,(t.androidPackageName=e.a)&&(t.androidMinimumVersion=e.b,t.androidInstallApp=e.g),t.iOSBundleId=e.f,t.dynamicLinkDomain=e.i,t)null===t[n]&&delete t[n];return t}function mo(e){return Y(e,(function(e){return e=e.toString(16),1<e.length?e:"0"+e})).join("")}var yo=null;function _o(e){var t=[];return bo(e,(function(e){t.push(e)})),t}function bo(e,t){function n(t){for(;r<e.length;){var n=e.charAt(r++),i=yo[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return t}wo();for(var r=0;;){var i=n(-1),o=n(0),a=n(64),s=n(64);if(64===s&&-1===i)break;t(i<<2|o>>4),64!=a&&(t(o<<4&240|a>>2),64!=s&&t(a<<6&192|s))}}function wo(){if(!yo){yo={};for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),t=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=e.concat(t[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===yo[o]&&(yo[o]=i)}}}function Io(e){var t=Eo(e);if(!(t&&t.sub&&t.iss&&t.aud&&t.exp))throw Error("Invalid JWT");this.h=e,this.a=t.exp,this.i=t.sub,e=Date.now()/1e3,this.g=t.iat||(e>this.a?this.a:e),this.b=t.provider_id||t.firebase&&t.firebase.sign_in_provider||null,this.f=t.firebase&&t.firebase.tenant||null,this.c=!!t.is_anonymous||"anonymous"==this.b}function To(e){try{return new Io(e)}catch(t){return null}}function Eo(e){if(!e)return null;if(e=e.split("."),3!=e.length)return null;e=e[1];for(var t=(4-e.length%4)%4,n=0;n<t;n++)e+=".";try{var r=_o(e);for(e=[],n=t=0;t<r.length;){var i=r[t++];if(128>i)e[n++]=String.fromCharCode(i);else if(191<i&&224>i){var o=r[t++];e[n++]=String.fromCharCode((31&i)<<6|63&o)}else if(239<i&&365>i){o=r[t++];var a=r[t++],s=r[t++],u=((7&i)<<18|(63&o)<<12|(63&a)<<6|63&s)-65536;e[n++]=String.fromCharCode(55296+(u>>10)),e[n++]=String.fromCharCode(56320+(1023&u))}else o=r[t++],a=r[t++],e[n++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}return JSON.parse(e.join(""))}catch(c){}return null}Io.prototype.T=function(){return this.f},Io.prototype.l=function(){return this.c},Io.prototype.toString=function(){return this.h};var ko="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),So=["client_id","response_type","scope","redirect_uri","state"],Co={nd:{Ja:"locale",va:700,ua:600,fa:"facebook.com",Ya:So},pd:{Ja:null,va:500,ua:750,fa:"github.com",Ya:So},qd:{Ja:"hl",va:515,ua:680,fa:"google.com",Ya:So},wd:{Ja:"lang",va:485,ua:705,fa:"twitter.com",Ya:ko},kd:{Ja:"locale",va:640,ua:600,fa:"apple.com",Ya:[]}};function Ao(e){for(var t in Co)if(Co[t].fa==e)return Co[t];return null}function No(e){var t={};t["facebook.com"]=Do,t["google.com"]=Lo,t["github.com"]=Mo,t["twitter.com"]=Fo;var n=e&&e[Ro];try{if(n)return t[n]?new t[n](e):new Oo(e);if("undefined"!==typeof e[xo])return new Po(e)}catch(r){}return null}var xo="idToken",Ro="providerId";function Po(e){var t=e[Ro];if(!t&&e[xo]){var n=To(e[xo]);n&&n.b&&(t=n.b)}if(!t)throw Error("Invalid additional user info!");"anonymous"!=t&&"custom"!=t||(t=null),n=!1,"undefined"!==typeof e.isNewUser?n=!!e.isNewUser:"identitytoolkit#SignupNewUserResponse"===e.kind&&(n=!0),Ti(this,"providerId",t),Ti(this,"isNewUser",n)}function Oo(e){Po.call(this,e),e=ui(e.rawUserInfo||"{}"),Ti(this,"profile",Ai(e||{}))}function Do(e){if(Oo.call(this,e),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function Mo(e){if(Oo.call(this,e),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Ti(this,"username",this.profile&&this.profile.login||null)}function Lo(e){if(Oo.call(this,e),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function Fo(e){if(Oo.call(this,e),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Ti(this,"username",e.screenName||null)}function jo(e){var t=ir(e),n=rr(t,"link"),r=rr(ir(n),"link");return t=rr(t,"deep_link_id"),rr(ir(t),"link")||t||r||n||e}function Uo(e,t){if(!e&&!t)throw new N("internal-error","Internal assert: no raw session string available");if(e&&t)throw new N("internal-error","Internal assert: unable to determine the session type");this.a=e||null,this.b=t||null,this.type=this.a?qo:Vo}C(Oo,Po),C(Do,Oo),C(Mo,Oo),C(Lo,Oo),C(Fo,Oo);var qo="enroll",Vo="signin";function Bo(){}function Ko(e,t){return e.then((function(e){if(e[Ls]){var n=To(e[Ls]);if(!n||t!=n.i)throw new N("user-mismatch");return e}throw new N("user-mismatch")})).o((function(e){throw e&&e.code&&e.code==P+"user-not-found"?new N("user-mismatch"):e}))}function Wo(e,t){if(!t)throw new N("internal-error","failed to construct a credential");this.a=t,Ti(this,"providerId",e),Ti(this,"signInMethod",e)}function Ho(e){return{pendingToken:e.a,requestUri:"http://localhost"}}function Go(e){if(e&&e.providerId&&e.signInMethod&&0==e.providerId.indexOf("saml.")&&e.pendingToken)try{return new Wo(e.providerId,e.pendingToken)}catch(t){}return null}function zo(e,t,n){if(this.a=null,t.idToken||t.accessToken)t.idToken&&Ti(this,"idToken",t.idToken),t.accessToken&&Ti(this,"accessToken",t.accessToken),t.nonce&&!t.pendingToken&&Ti(this,"nonce",t.nonce),t.pendingToken&&(this.a=t.pendingToken);else{if(!t.oauthToken||!t.oauthTokenSecret)throw new N("internal-error","failed to construct a credential");Ti(this,"accessToken",t.oauthToken),Ti(this,"secret",t.oauthTokenSecret)}Ti(this,"providerId",e),Ti(this,"signInMethod",n)}function Qo(e){var t={};return e.idToken&&(t.id_token=e.idToken),e.accessToken&&(t.access_token=e.accessToken),e.secret&&(t.oauth_token_secret=e.secret),t.providerId=e.providerId,e.nonce&&!e.a&&(t.nonce=e.nonce),t={postBody:gr(t).toString(),requestUri:"http://localhost"},e.a&&(delete t.postBody,t.pendingToken=e.a),t}function $o(e){if(e&&e.providerId&&e.signInMethod){var t={idToken:e.oauthIdToken,accessToken:e.oauthTokenSecret?null:e.oauthAccessToken,oauthTokenSecret:e.oauthTokenSecret,oauthToken:e.oauthTokenSecret&&e.oauthAccessToken,nonce:e.nonce,pendingToken:e.pendingToken};try{return new zo(e.providerId,t,e.signInMethod)}catch(n){}}return null}function Yo(e,t){this.Qc=t||[],Ei(this,{providerId:e,isOAuthProvider:!0}),this.Jb={},this.qb=(Ao(e)||{}).Ja||null,this.pb=null}function Xo(e){if("string"!==typeof e||0!=e.indexOf("saml."))throw new N("argument-error",'SAML provider IDs must be prefixed with "saml."');Yo.call(this,e,[])}function Jo(e){Yo.call(this,e,So),this.a=[]}function Zo(){Jo.call(this,"facebook.com")}function ea(e){if(!e)throw new N("argument-error","credential failed: expected 1 argument (the OAuth access token).");var t=e;return y(e)&&(t=e.accessToken),(new Zo).credential({accessToken:t})}function ta(){Jo.call(this,"github.com")}function na(e){if(!e)throw new N("argument-error","credential failed: expected 1 argument (the OAuth access token).");var t=e;return y(e)&&(t=e.accessToken),(new ta).credential({accessToken:t})}function ra(){Jo.call(this,"google.com"),this.Ca("profile")}function ia(e,t){var n=e;return y(e)&&(n=e.idToken,t=e.accessToken),(new ra).credential({idToken:n,accessToken:t})}function oa(){Yo.call(this,"twitter.com",ko)}function aa(e,t){var n=e;if(y(n)||(n={oauthToken:e,oauthTokenSecret:t}),!n.oauthToken||!n.oauthTokenSecret)throw new N("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new zo("twitter.com",n,"twitter.com")}function sa(e,t,n){this.a=e,this.f=t,Ti(this,"providerId","password"),Ti(this,"signInMethod",n===ca.EMAIL_LINK_SIGN_IN_METHOD?ca.EMAIL_LINK_SIGN_IN_METHOD:ca.EMAIL_PASSWORD_SIGN_IN_METHOD)}function ua(e){return e&&e.email&&e.password?new sa(e.email,e.password,e.signInMethod):null}function ca(){Ei(this,{providerId:"password",isOAuthProvider:!1})}function la(e,t){if(t=ha(t),!t)throw new N("argument-error","Invalid email link!");return new sa(e,t.code,ca.EMAIL_LINK_SIGN_IN_METHOD)}function ha(e){return e=jo(e),(e=io(e))&&e.operation===ji?e:null}function fa(e){if(!(e.fb&&e.eb||e.La&&e.ea))throw new N("internal-error");this.a=e,Ti(this,"providerId","phone"),this.fa="phone",Ti(this,"signInMethod","phone")}function da(e){if(e&&"phone"===e.providerId&&(e.verificationId&&e.verificationCode||e.temporaryProof&&e.phoneNumber)){var t={};return z(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){e[n]&&(t[n]=e[n])})),new fa(t)}return null}function pa(e){return e.a.La&&e.a.ea?{temporaryProof:e.a.La,phoneNumber:e.a.ea}:{sessionInfo:e.a.fb,code:e.a.eb}}function va(e){try{this.a=e||r["default"].auth()}catch(t){throw new N("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Ei(this,{providerId:"phone",isOAuthProvider:!1})}function ga(e,t){if(!e)throw new N("missing-verification-id");if(!t)throw new N("missing-verification-code");return new fa({fb:e,eb:t})}function ma(e){if(e.temporaryProof&&e.phoneNumber)return new fa({La:e.temporaryProof,ea:e.phoneNumber});var t=e&&e.providerId;if(!t||"password"===t)return null;var n=e&&e.oauthAccessToken,r=e&&e.oauthTokenSecret,i=e&&e.nonce,o=e&&e.oauthIdToken,a=e&&e.pendingToken;try{switch(t){case"google.com":return ia(o,n);case"facebook.com":return ea(n);case"github.com":return na(n);case"twitter.com":return aa(n,r);default:return n||r||o||a?a?0==t.indexOf("saml.")?new Wo(t,a):new zo(t,{pendingToken:a,idToken:e.oauthIdToken,accessToken:e.oauthAccessToken},t):new Jo(t).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(s){return null}}function ya(e){if(!e.isOAuthProvider)throw new N("invalid-oauth-provider")}function _a(e,t,n,r,i,o,a){if(this.c=e,this.b=t||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=a||null,this.a=i||null,!this.g&&!this.a)throw new N("invalid-auth-event");if(this.g&&this.a)throw new N("invalid-auth-event");if(this.g&&!this.f)throw new N("invalid-auth-event")}function ba(e){return e=e||{},e.type?new _a(e.type,e.eventId,e.urlResponse,e.sessionId,e.error&&x(e.error),e.postBody,e.tenantId):null}function wa(){this.b=null,this.a=[]}Uo.prototype.Ha=function(){return this.a?qt(this.a):qt(this.b)},Uo.prototype.w=function(){return this.type==qo?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},Bo.prototype.ka=function(){},Bo.prototype.b=function(){},Bo.prototype.c=function(){},Bo.prototype.w=function(){},Wo.prototype.ka=function(e){return fu(e,Ho(this))},Wo.prototype.b=function(e,t){var n=Ho(this);return n.idToken=t,du(e,n)},Wo.prototype.c=function(e,t){return Ko(pu(e,Ho(this)),t)},Wo.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},zo.prototype.ka=function(e){return fu(e,Qo(this))},zo.prototype.b=function(e,t){var n=Qo(this);return n.idToken=t,du(e,n)},zo.prototype.c=function(e,t){var n=Qo(this);return Ko(pu(e,n),t)},zo.prototype.w=function(){var e={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(e.oauthIdToken=this.idToken),this.accessToken&&(e.oauthAccessToken=this.accessToken),this.secret&&(e.oauthTokenSecret=this.secret),this.nonce&&(e.nonce=this.nonce),this.a&&(e.pendingToken=this.a),e},Yo.prototype.Ka=function(e){return this.Jb=be(e),this},C(Xo,Yo),C(Jo,Yo),Jo.prototype.Ca=function(e){return Z(this.a,e)||this.a.push(e),this},Jo.prototype.Rb=function(){return re(this.a)},Jo.prototype.credential=function(e,t){var n;if(n=y(e)?{idToken:e.idToken||null,accessToken:e.accessToken||null,nonce:e.rawNonce||null}:{idToken:e||null,accessToken:t||null},!n.idToken&&!n.accessToken)throw new N("argument-error","credential failed: must provide the ID token and/or the access token.");return new zo(this.providerId,n,this.providerId)},C(Zo,Jo),Ti(Zo,"PROVIDER_ID","facebook.com"),Ti(Zo,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),C(ta,Jo),Ti(ta,"PROVIDER_ID","github.com"),Ti(ta,"GITHUB_SIGN_IN_METHOD","github.com"),C(ra,Jo),Ti(ra,"PROVIDER_ID","google.com"),Ti(ra,"GOOGLE_SIGN_IN_METHOD","google.com"),C(oa,Yo),Ti(oa,"PROVIDER_ID","twitter.com"),Ti(oa,"TWITTER_SIGN_IN_METHOD","twitter.com"),sa.prototype.ka=function(e){return this.signInMethod==ca.EMAIL_LINK_SIGN_IN_METHOD?$u(e,Iu,{email:this.a,oobCode:this.f}):$u(e,Wu,{email:this.a,password:this.f})},sa.prototype.b=function(e,t){return this.signInMethod==ca.EMAIL_LINK_SIGN_IN_METHOD?$u(e,Tu,{idToken:t,email:this.a,oobCode:this.f}):$u(e,Lu,{idToken:t,email:this.a,password:this.f})},sa.prototype.c=function(e,t){return Ko(this.ka(e),t)},sa.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Ei(ca,{PROVIDER_ID:"password"}),Ei(ca,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Ei(ca,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),fa.prototype.ka=function(e){return e.gb(pa(this))},fa.prototype.b=function(e,t){var n=pa(this);return n.idToken=t,$u(e,Gu,n)},fa.prototype.c=function(e,t){var n=pa(this);return n.operation="REAUTH",e=$u(e,zu,n),Ko(e,t)},fa.prototype.w=function(){var e={providerId:"phone"};return this.a.fb&&(e.verificationId=this.a.fb),this.a.eb&&(e.verificationCode=this.a.eb),this.a.La&&(e.temporaryProof=this.a.La),this.a.ea&&(e.phoneNumber=this.a.ea),e},va.prototype.gb=function(e,t){var n=this.a.a;return qt(t.verify()).then((function(r){if("string"!==typeof r)throw new N("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(t.type){case"recaptcha":var i,o=y(e)?e.session:null,a=y(e)?e.phoneNumber:e;return i=o&&o.type==qo?o.Ha().then((function(e){return ou(n,{idToken:e,phoneEnrollmentInfo:{phoneNumber:a,recaptchaToken:r}})})):o&&o.type==Vo?o.Ha().then((function(t){return su(n,{mfaPendingCredential:t,mfaEnrollmentId:e.multiFactorHint&&e.multiFactorHint.uid||e.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}})})):iu(n,{phoneNumber:a,recaptchaToken:r}),i.then((function(e){return"function"===typeof t.reset&&t.reset(),e}),(function(e){throw"function"===typeof t.reset&&t.reset(),e}));default:throw new N("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}}))},Ei(va,{PROVIDER_ID:"phone"}),Ei(va,{PHONE_SIGN_IN_METHOD:"phone"}),_a.prototype.getUid=function(){var e=[];return e.push(this.c),this.b&&e.push(this.b),this.f&&e.push(this.f),this.h&&e.push(this.h),e.join("-")},_a.prototype.T=function(){return this.h},_a.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var Ia,Ta=null;function Ea(e){var t=Ta;t.a.push(e),t.b||(t.b=function(e){for(var n=0;n<t.a.length;n++)t.a[n](e)},e=ei("universalLinks.subscribe",l),"function"===typeof e&&e(null,t.b))}function ka(e){var t="unauthorized-domain",n=void 0,r=ir(e);e=r.a,r=r.c,"chrome-extension"==r?n=Xe("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",e):"http"==r||"https"==r?n=Xe("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",e):t="operation-not-supported-in-this-environment",N.call(this,t,n)}function Sa(e,t,n){N.call(this,e,n),e=t||{},e.Kb&&Ti(this,"email",e.Kb),e.ea&&Ti(this,"phoneNumber",e.ea),e.credential&&Ti(this,"credential",e.credential),e.$b&&Ti(this,"tenantId",e.$b)}function Ca(e){if(e.code){var t=e.code||"";0==t.indexOf(P)&&(t=t.substring(P.length));var n={credential:ma(e),$b:e.tenantId};if(e.email)n.Kb=e.email;else if(e.phoneNumber)n.ea=e.phoneNumber;else if(!n.credential)return new N(t,e.message||void 0);return new Sa(t,n,e.message)}return null}function Aa(){}function Na(e){return e.c||(e.c=e.b())}function xa(){}function Ra(e){if(!e.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var t=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<t.length;n++){var r=t[n];try{return new ActiveXObject(r),e.f=r}catch(i){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return e.f}function Pa(){}function Oa(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=E(this.qc,this),this.a.onerror=E(this.Tb,this),this.a.onprogress=E(this.rc,this),this.a.ontimeout=E(this.vc,this)}function Da(e,t){e.readyState=t,e.onreadystatechange&&e.onreadystatechange()}function Ma(e,t,n){this.reset(e,t,n,void 0,void 0)}C(ka,N),C(Sa,N),Sa.prototype.w=function(){var e={code:this.code,message:this.message};this.email&&(e.email=this.email),this.phoneNumber&&(e.phoneNumber=this.phoneNumber),this.tenantId&&(e.tenantId=this.tenantId);var t=this.credential&&this.credential.w();return t&&Ie(e,t),e},Sa.prototype.toJSON=function(){return this.w()},Aa.prototype.c=null,C(xa,Aa),xa.prototype.a=function(){var e=Ra(this);return e?new ActiveXObject(e):new XMLHttpRequest},xa.prototype.b=function(){var e={};return Ra(this)&&(e[0]=!0,e[1]=!0),e},Ia=new xa,C(Pa,Aa),Pa.prototype.a=function(){var e=new XMLHttpRequest;if("withCredentials"in e)return e;if("undefined"!=typeof XDomainRequest)return new Oa;throw Error("Unsupported browser")},Pa.prototype.b=function(){return{}},e=Oa.prototype,e.open=function(e,t,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(e,t)},e.send=function(e){if(e){if("string"!=typeof e)throw Error("Only string data is supported");this.a.send(e)}else this.a.send()},e.abort=function(){this.a.abort()},e.setRequestHeader=function(){},e.getResponseHeader=function(e){return"content-type"==e.toLowerCase()?this.a.contentType:""},e.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Da(this,4)},e.Tb=function(){this.status=500,this.response=this.responseText="",Da(this,4)},e.vc=function(){this.Tb()},e.rc=function(){this.status=200,Da(this,1)},e.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},Ma.prototype.a=null;function La(e){this.f=e,this.b=this.c=this.a=null}function Fa(e,t){this.name=e,this.value=t}Ma.prototype.reset=function(e,t,n,r,i){"number"==typeof i||0,r||S(),delete this.a},Fa.prototype.toString=function(){return this.name};var ja=new Fa("SEVERE",1e3),Ua=new Fa("WARNING",900),qa=new Fa("CONFIG",700),Va=new Fa("FINE",500);function Ba(e){return e.c?e.c:e.a?Ba(e.a):(U("Root logger has no level set."),null)}La.prototype.log=function(e,t,n){if(e.value>=Ba(this).value)for(m(t)&&(t=t()),e=new Ma(e,String(t),this.f),n&&(e.a=n),n=this;n;)n=n.a};var Ka={},Wa=null;function Ha(e){var t;if(Wa||(Wa=new La(""),Ka[""]=Wa,Wa.c=qa),!(t=Ka[e])){t=new La(e);var n=e.lastIndexOf("."),r=e.substr(n+1);n=Ha(e.substr(0,n)),n.b||(n.b={}),n.b[r]=t,t.a=n,Ka[e]=t}return t}function Ga(e,t){e&&e.log(Va,t,void 0)}function za(e){this.f=e}function Qa(e){jn.call(this),this.u=e,this.h=void 0,this.readyState=$a,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=Ha("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}C(za,Aa),za.prototype.a=function(){return new Qa(this.f)},za.prototype.b=function(e){return function(){return e}}({}),C(Qa,jn);var $a=0;function Ya(e){e.c.read().then(e.pc.bind(e)).catch(e.Va.bind(e))}function Xa(e){e.readyState=4,e.g=null,e.c=null,e.m=null,Ja(e)}function Ja(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Za(e){jn.call(this),this.headers=new zn,this.D=e||null,this.c=!1,this.C=this.a=null,this.h=this.P=this.l="",this.f=this.N=this.i=this.J=!1,this.g=0,this.s=null,this.m=es,this.u=this.S=!1}e=Qa.prototype,e.open=function(e,t){if(this.readyState!=$a)throw this.abort(),Error("Error reopening a connection");this.s=e,this.f=t,this.readyState=1,Ja(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var t={headers:this.l,method:this.s,credentials:this.h,cache:void 0};e&&(t.body=e),this.u.fetch(new Request(this.f,t)).then(this.uc.bind(this),this.Va.bind(this))},e.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,Xa(this)),this.readyState=$a},e.uc=function(e){this.a&&(this.g=e,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=e.headers,this.readyState=2,Ja(this)),this.a&&(this.readyState=3,Ja(this),this.a&&("arraybuffer"===this.responseType?e.arrayBuffer().then(this.sc.bind(this),this.Va.bind(this)):"undefined"!==typeof l.ReadableStream&&"body"in e?(this.response=this.responseText="",this.c=e.body.getReader(),this.m=new TextDecoder,Ya(this)):e.text().then(this.tc.bind(this),this.Va.bind(this)))))},e.pc=function(e){if(this.a){var t=this.m.decode(e.value?e.value:new Uint8Array(0),{stream:!e.done});t&&(this.response=this.responseText+=t),e.done?Xa(this):Ja(this),3==this.readyState&&Ya(this)}},e.tc=function(e){this.a&&(this.response=this.responseText=e,Xa(this))},e.sc=function(e){this.a&&(this.response=e,Xa(this))},e.Va=function(e){var t=this.i;t&&t.log(Ua,"Failed to fetch url "+this.f,e instanceof Error?e:Error(e)),this.a&&Xa(this)},e.setRequestHeader=function(e,t){this.l.append(e,t)},e.getResponseHeader=function(e){return this.b?this.b.get(e.toLowerCase())||"":((e=this.i)&&e.log(Ua,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},e.getAllResponseHeaders=function(){if(!this.b){var e=this.i;return e&&e.log(Ua,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}e=[];for(var t=this.b.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Qa.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(e){this.h=e?"include":"same-origin"}}),C(Za,jn);var es="";Za.prototype.b=Ha("goog.net.XhrIo");var ts=/^https?$/i,ns=["POST","PUT"];function rs(e,t,n,r,i){if(e.a)throw Error("[goog.net.XhrIo] Object is active with another request="+e.l+"; newUri="+t);n=n?n.toUpperCase():"GET",e.l=t,e.h="",e.P=n,e.J=!1,e.c=!0,e.a=e.D?e.D.a():Ia.a(),e.C=e.D?Na(e.D):Na(Ia),e.a.onreadystatechange=E(e.Wb,e);try{Ga(e.b,ps(e,"Opening Xhr")),e.N=!0,e.a.open(n,String(t),!0),e.N=!1}catch(a){return Ga(e.b,ps(e,"Error opening Xhr: "+a.message)),void as(e,a)}t=r||"";var o=new zn(e.headers);i&&Gn(i,(function(e,t){o.set(t,e)})),i=J(o.Y()),r=l.FormData&&t instanceof l.FormData,!Z(ns,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(e,t){this.a.setRequestHeader(t,e)}),e),e.m&&(e.a.responseType=e.m),"withCredentials"in e.a&&e.a.withCredentials!==e.S&&(e.a.withCredentials=e.S);try{ls(e),0<e.g&&(e.u=is(e.a),Ga(e.b,ps(e,"Will abort after "+e.g+"ms if incomplete, xhr2 "+e.u)),e.u?(e.a.timeout=e.g,e.a.ontimeout=E(e.Ma,e)):e.s=Bn(e.Ma,e.g,e)),Ga(e.b,ps(e,"Sending request")),e.i=!0,e.a.send(t),e.i=!1}catch(a){Ga(e.b,ps(e,"Send error: "+a.message)),as(e,a)}}function is(e){return rt&&pt(9)&&"number"===typeof e.timeout&&void 0!==e.ontimeout}function os(e){return"content-type"==e.toLowerCase()}function as(e,t){e.c=!1,e.a&&(e.f=!0,e.a.abort(),e.f=!1),e.h=t,ss(e),cs(e)}function ss(e){e.J||(e.J=!0,e.dispatchEvent("complete"),e.dispatchEvent("error"))}function us(e){if(e.c&&"undefined"!=typeof c)if(e.C[1]&&4==hs(e)&&2==fs(e))Ga(e.b,ps(e,"Local request error detected and ignored"));else if(e.i&&4==hs(e))Bn(e.Wb,0,e);else if(e.dispatchEvent("readystatechange"),4==hs(e)){Ga(e.b,ps(e,"Request complete")),e.c=!1;try{var t,n=fs(e);e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var o=String(e.l).match(Yn)[1]||null;if(!o&&l.self&&l.self.location){var a=l.self.location.protocol;o=a.substr(0,a.length-1)}i=!ts.test(o?o.toLowerCase():"")}t=i}if(t)e.dispatchEvent("complete"),e.dispatchEvent("success");else{try{var s=2<hs(e)?e.a.statusText:""}catch(u){Ga(e.b,"Can not get status: "+u.message),s=""}e.h=s+" ["+fs(e)+"]",ss(e)}}finally{cs(e)}}}function cs(e,t){if(e.a){ls(e);var n=e.a,r=e.C[0]?p:null;e.a=null,e.C=null,t||e.dispatchEvent("ready");try{n.onreadystatechange=r}catch(i){(e=e.b)&&e.log(ja,"Problem encountered resetting onreadystatechange: "+i.message,void 0)}}}function ls(e){e.a&&e.u&&(e.a.ontimeout=null),e.s&&(l.clearTimeout(e.s),e.s=null)}function hs(e){return e.a?e.a.readyState:0}function fs(e){try{return 2<hs(e)?e.a.status:-1}catch(t){return-1}}function ds(e){try{return e.a?e.a.responseText:""}catch(t){return Ga(e.b,"Can not get responseText: "+t.message),""}}function ps(e,t){return t+" ["+e.P+" "+e.l+" "+fs(e)+"]"}function vs(e){var t=As;this.g=[],this.u=t,this.s=e||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}function gs(e,t,n){e.a=!0,e.c=n,e.f=!t,ws(e)}function ms(e){if(e.a){if(!e.v)throw new Is(e);e.v=!1}}function ys(e,t){_s(e,null,t,void 0)}function _s(e,t,n,r){e.g.push([t,n,r]),e.a&&ws(e)}function bs(e){return X(e.g,(function(e){return m(e[1])}))}function ws(e){if(e.h&&e.a&&bs(e)){var t=e.h,n=ks[t];n&&(l.clearTimeout(n.a),delete ks[t]),e.h=0}e.b&&(e.b.l--,delete e.b),t=e.c;for(var r=n=!1;e.g.length&&!e.i;){var i=e.g.shift(),o=i[0],a=i[1];if(i=i[2],o=e.f?a:o)try{var s=o.call(i||e.s,t);void 0!==s&&(e.f=e.f&&(s==t||s instanceof Error),e.c=t=s),(L(t)||"function"===typeof l.Promise&&t instanceof l.Promise)&&(r=!0,e.i=!0)}catch(u){t=u,e.f=!0,bs(e)||(n=!0)}}e.c=t,r&&(s=E(e.m,e,!0),r=E(e.m,e,!1),t instanceof vs?(_s(t,s,r),t.C=!0):t.then(s,r)),n&&(t=new Es(t),ks[t.a]=t,e.h=t.a)}function Is(){F.call(this)}function Ts(){F.call(this)}function Es(e){this.a=l.setTimeout(E(this.c,this),0),this.b=e}e=Za.prototype,e.Ma=function(){"undefined"!=typeof c&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",Ga(this.b,ps(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},e.abort=function(){this.a&&this.c&&(Ga(this.b,ps(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),cs(this))},e.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),cs(this,!0)),Za.bb.Da.call(this)},e.Wb=function(){this.ya||(this.N||this.i||this.f?us(this):this.Jc())},e.Jc=function(){us(this)},e.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case es:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var e=this.b;return e&&e.log(ja,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return Ga(this.b,"Can not get response: "+t.message),null}},vs.prototype.cancel=function(e){if(this.a)this.c instanceof vs&&this.c.cancel();else{if(this.b){var t=this.b;delete this.b,e?t.cancel(e):(t.l--,0>=t.l&&t.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(e=new Ts(this),ms(this),gs(this,!1,e))}},vs.prototype.m=function(e,t){this.i=!1,gs(this,e,t)},vs.prototype.then=function(e,t,n){var r,i,o=new Ot((function(e,t){r=e,i=t}));return _s(this,r,(function(e){e instanceof Ts?o.cancel():i(e)})),o.then(e,t,n)},vs.prototype.$goog_Thenable=!0,C(Is,F),Is.prototype.message="Deferred has already fired",Is.prototype.name="AlreadyCalledError",C(Ts,F),Ts.prototype.message="Deferred was canceled",Ts.prototype.name="CanceledError",Es.prototype.c=function(){throw delete ks[this.a],this.b};var ks={};function Ss(e){var t={},n=t.document||document,r=Re(e).toString(),i=kt(document,"SCRIPT"),o={Xb:i,Ma:void 0},a=new vs(o),s=null,u=null!=t.timeout?t.timeout:5e3;return 0<u&&(s=window.setTimeout((function(){Ns(i,!0);var e=new Ps(Rs,"Timeout reached for loading script "+r);ms(a),gs(a,!1,e)}),u),o.Ma=s),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Ns(i,t.xd||!1,s),ms(a),gs(a,!0,null))},i.onerror=function(){Ns(i,!0,s);var e=new Ps(xs,"Error while loading script "+r);ms(a),gs(a,!1,e)},o=t.attributes||{},Ie(o,{type:"text/javascript",charset:"UTF-8"}),_t(i,o),$e(i,e),Cs(n).appendChild(i),a}function Cs(e){var t;return(t=(e||document).getElementsByTagName("HEAD"))&&0!=t.length?t[0]:e.documentElement}function As(){if(this&&this.Xb){var e=this.Xb;e&&"SCRIPT"==e.tagName&&Ns(e,!0,this.Ma)}}function Ns(e,t,n){null!=n&&l.clearTimeout(n),e.onload=p,e.onerror=p,e.onreadystatechange=p,t&&window.setTimeout((function(){e&&e.parentNode&&e.parentNode.removeChild(e)}),0)}var xs=0,Rs=1;function Ps(e,t){var n="Jsloader error (code #"+e+")";t&&(n+=": "+t),F.call(this,n),this.code=e}function Os(e){this.f=e}function Ds(e,t,n){if(this.c=e,e=t||{},this.l=e.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=e.secureTokenTimeout||Fs,this.g=be(e.secureTokenHeaders||js),this.h=e.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=e.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=e.firebaseTimeout||Us,this.a=be(e.firebaseHeaders||qs),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==Hr(),n=l.XMLHttpRequest||n&&r["default"].INTERNAL.node&&r["default"].INTERNAL.node.XMLHttpRequest,!n&&!Wr())throw new N("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,Wr()?this.f=new za(self):Gr()?this.f=new Os(n):this.f=new Pa,this.b=null}C(Ps,F),C(Os,Aa),Os.prototype.a=function(){return new this.f},Os.prototype.b=function(){return{}};var Ms,Ls="idToken",Fs=new fi(3e4,6e4),js={"Content-Type":"application/x-www-form-urlencoded"},Us=new fi(3e4,6e4),qs={"Content-Type":"application/json"};function Vs(e,t){t?e.a["X-Firebase-Locale"]=t:delete e.a["X-Firebase-Locale"]}function Bs(e,t){t&&(e.l=Ks("https://securetoken.googleapis.com/v1/token",t),e.h=Ks("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",t),e.i=Ks("https://identitytoolkit.googleapis.com/v2/",t))}function Ks(e,t){return e=ir(e),t=ir(t.url),e.f=e.a+e.f,Zn(e,t.c),e.a=t.a,er(e,t.g),e.toString()}function Ws(e,t){t?(e.a["X-Client-Version"]=t,e.g["X-Client-Version"]=t):(delete e.a["X-Client-Version"],delete e.g["X-Client-Version"])}function Hs(e,t,n,r,i,o,a){Or()||Wr()?e=E(e.u,e):(Ms||(Ms=new Ot((function(e,t){Qs(e,t)}))),e=E(e.s,e)),e(t,n,r,i,o,a)}Ds.prototype.T=function(){return this.b},Ds.prototype.u=function(e,t,n,r,i,o){if(Wr()&&("undefined"===typeof l.fetch||"undefined"===typeof l.Headers||"undefined"===typeof l.Request))throw new N("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var a=new Za(this.f);if(o){a.g=Math.max(0,o);var s=setTimeout((function(){a.dispatchEvent("timeout")}),o)}Un(a,"complete",(function(){s&&clearTimeout(s);var e=null;try{e=JSON.parse(ds(this))||null}catch(n){e=null}t&&t(e)})),qn(a,"ready",(function(){s&&clearTimeout(s),un(this)})),qn(a,"timeout",(function(){s&&clearTimeout(s),un(this),t&&t(null)})),rs(a,e,n,r,i)};var Gs=new Ee(Ae,"https://apis.google.com/js/client.js?onload=%{onload}"),zs="__fcb"+Math.floor(1e6*Math.random()).toString();function Qs(e,t){if(((window.gapi||{}).client||{}).request)e();else{l[zs]=function(){((window.gapi||{}).client||{}).request?e():t(Error("CORS_UNSUPPORTED"))};var n=Pe(Gs,{onload:zs});ys(Ss(n),(function(){t(Error("CORS_UNSUPPORTED"))}))}}function $s(e,t){return new Ot((function(n,r){"refresh_token"==t.grant_type&&t.refresh_token||"authorization_code"==t.grant_type&&t.code?Hs(e,e.l+"?key="+encodeURIComponent(e.c),(function(e){e?e.error?r(Xu(e)):e.access_token&&e.refresh_token?n(e):r(new N("internal-error")):r(new N("network-request-failed"))}),"POST",gr(t).toString(),e.g,e.m.get()):r(new N("internal-error"))}))}function Ys(e,t,n,r,i,o,a){var s=ir(t+n);nr(s,"key",e.c),a&&nr(s,"cb",Date.now().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&nr(s,c,i[c]);return new Ot((function(t,n){Hs(e,s.toString(),(function(e){e?e.error?n(Xu(e,o||{})):t(e):n(new N("network-request-failed"))}),r,u?void 0:Tr(si(i)),e.a,e.v.get())}))}function Xs(e){if(e=e.email,"string"!==typeof e||!Ur.test(e))throw new N("invalid-email")}function Js(e){"email"in e&&Xs(e)}function Zs(e,t){return $u(e,_u,{identifier:t,continueUri:ri()?xr():"http://localhost"}).then((function(e){return e.signinMethods||[]}))}function eu(e){return $u(e,Ru,{}).then((function(e){return e.authorizedDomains||[]}))}function tu(e){if(!e[Ls]){if(e.mfaPendingCredential)throw new N("multi-factor-auth-required",null,be(e));throw new N("internal-error")}}function nu(e){if(e.phoneNumber||e.temporaryProof){if(!e.phoneNumber||!e.temporaryProof)throw new N("internal-error")}else{if(!e.sessionInfo)throw new N("missing-verification-id");if(!e.code)throw new N("missing-verification-code")}}Ds.prototype.s=function(e,t,n,r,i){var o=this;Ms.then((function(){window.gapi.client.setApiKey(o.c);var a=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:e,method:n,body:r,headers:i,authType:"none",callback:function(e){window.gapi.auth.setToken(a),t&&t(e)}})})).o((function(e){t&&t({error:{message:e&&e.message||"CORS_UNSUPPORTED"}})}))},Ds.prototype.Ab=function(){return $u(this,Fu,{})},Ds.prototype.Cb=function(e,t){return $u(this,Mu,{idToken:e,email:t})},Ds.prototype.Db=function(e,t){return $u(this,Lu,{idToken:e,password:t})};var ru={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function iu(e,t){return $u(e,Du,t)}function ou(e,t){return $u(e,ju,t).then((function(e){return e.phoneSessionInfo.sessionInfo}))}function au(e){if(!e.phoneVerificationInfo)throw new N("internal-error");if(!e.phoneVerificationInfo.sessionInfo)throw new N("missing-verification-id");if(!e.phoneVerificationInfo.code)throw new N("missing-verification-code")}function su(e,t){return $u(e,Uu,t).then((function(e){return e.phoneResponseInfo.sessionInfo}))}function uu(e,t,n){return $u(e,wu,{idToken:t,deleteProvider:n})}function cu(e){if(!e.requestUri||!e.sessionId&&!e.postBody&&!e.pendingToken)throw new N("internal-error")}function lu(e,t){return t.oauthIdToken&&t.providerId&&0==t.providerId.indexOf("oidc.")&&!t.pendingToken&&(e.sessionId?t.nonce=e.sessionId:e.postBody&&(e=new pr(e.postBody),yr(e,"nonce")&&(t.nonce=e.get("nonce")))),t}function hu(e){var t=null;if(e.needConfirmation?(e.code="account-exists-with-different-credential",t=Ca(e)):"FEDERATED_USER_ID_ALREADY_LINKED"==e.errorMessage?(e.code="credential-already-in-use",t=Ca(e)):"EMAIL_EXISTS"==e.errorMessage?(e.code="email-already-in-use",t=Ca(e)):e.errorMessage&&(t=Yu(e.errorMessage)),t)throw t;tu(e)}function fu(e,t){return t.returnIdpCredential=!0,$u(e,qu,t)}function du(e,t){return t.returnIdpCredential=!0,$u(e,Bu,t)}function pu(e,t){return t.returnIdpCredential=!0,t.autoCreate=!1,$u(e,Vu,t)}function vu(e){if(!e.oobCode)throw new N("invalid-action-code")}e=Ds.prototype,e.Eb=function(e,t){var n={idToken:e},r=[];return ye(ru,(function(e,i){var o=t[i];null===o?r.push(e):i in t&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),$u(this,Mu,n)},e.wb=function(e,t){return e={requestType:"PASSWORD_RESET",email:e},Ie(e,t),$u(this,xu,e)},e.xb=function(e,t){return e={requestType:"EMAIL_SIGNIN",email:e},Ie(e,t),$u(this,Cu,e)},e.vb=function(e,t){return e={requestType:"VERIFY_EMAIL",idToken:e},Ie(e,t),$u(this,Au,e)},e.Fb=function(e,t,n){return e={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:e,newEmail:t},Ie(e,n),$u(this,Nu,e)},e.gb=function(e){return $u(this,Hu,e)},e.ob=function(e,t){return $u(this,Ou,{oobCode:e,newPassword:t})},e.Sa=function(e){return $u(this,mu,{oobCode:e})},e.kb=function(e){return $u(this,gu,{oobCode:e})};var gu={endpoint:"setAccountInfo",A:vu,Z:"email",B:!0},mu={endpoint:"resetPassword",A:vu,G:function(e){var t=e.requestType;if(!t||!e.email&&"EMAIL_SIGNIN"!=t&&"VERIFY_AND_CHANGE_EMAIL"!=t)throw new N("internal-error")},B:!0},yu={endpoint:"signupNewUser",A:function(e){if(Xs(e),!e.password)throw new N("weak-password")},G:tu,V:!0,B:!0},_u={endpoint:"createAuthUri",B:!0},bu={endpoint:"deleteAccount",O:["idToken"]},wu={endpoint:"setAccountInfo",O:["idToken","deleteProvider"],A:function(e){if(!Array.isArray(e.deleteProvider))throw new N("internal-error")}},Iu={endpoint:"emailLinkSignin",O:["email","oobCode"],A:Xs,G:tu,V:!0,B:!0},Tu={endpoint:"emailLinkSignin",O:["idToken","email","oobCode"],A:Xs,G:tu,V:!0},Eu={endpoint:"accounts/mfaEnrollment:finalize",O:["idToken","phoneVerificationInfo"],A:au,G:tu,B:!0,Na:!0},ku={endpoint:"accounts/mfaSignIn:finalize",O:["mfaPendingCredential","phoneVerificationInfo"],A:au,G:tu,B:!0,Na:!0},Su={endpoint:"getAccountInfo"},Cu={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(e){if("EMAIL_SIGNIN"!=e.requestType)throw new N("internal-error");Xs(e)},Z:"email",B:!0},Au={endpoint:"getOobConfirmationCode",O:["idToken","requestType"],A:function(e){if("VERIFY_EMAIL"!=e.requestType)throw new N("internal-error")},Z:"email",B:!0},Nu={endpoint:"getOobConfirmationCode",O:["idToken","newEmail","requestType"],A:function(e){if("VERIFY_AND_CHANGE_EMAIL"!=e.requestType)throw new N("internal-error")},Z:"email",B:!0},xu={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(e){if("PASSWORD_RESET"!=e.requestType)throw new N("internal-error");Xs(e)},Z:"email",B:!0},Ru={mb:!0,endpoint:"getProjectConfig",Vb:"GET"},Pu={mb:!0,endpoint:"getRecaptchaParam",Vb:"GET",G:function(e){if(!e.recaptchaSiteKey)throw new N("internal-error")}},Ou={endpoint:"resetPassword",A:vu,Z:"email",B:!0},Du={endpoint:"sendVerificationCode",O:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},Mu={endpoint:"setAccountInfo",O:["idToken"],A:Js,V:!0},Lu={endpoint:"setAccountInfo",O:["idToken"],A:function(e){if(Js(e),!e.password)throw new N("weak-password")},G:tu,V:!0},Fu={endpoint:"signupNewUser",G:tu,V:!0,B:!0},ju={endpoint:"accounts/mfaEnrollment:start",O:["idToken","phoneEnrollmentInfo"],A:function(e){if(!e.phoneEnrollmentInfo)throw new N("internal-error");if(!e.phoneEnrollmentInfo.phoneNumber)throw new N("missing-phone-number");if(!e.phoneEnrollmentInfo.recaptchaToken)throw new N("missing-app-credential")},G:function(e){if(!e.phoneSessionInfo||!e.phoneSessionInfo.sessionInfo)throw new N("internal-error")},B:!0,Na:!0},Uu={endpoint:"accounts/mfaSignIn:start",O:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(e){if(!e.phoneSignInInfo||!e.phoneSignInInfo.recaptchaToken)throw new N("missing-app-credential")},G:function(e){if(!e.phoneResponseInfo||!e.phoneResponseInfo.sessionInfo)throw new N("internal-error")},B:!0,Na:!0},qu={endpoint:"verifyAssertion",A:cu,Za:lu,G:hu,V:!0,B:!0},Vu={endpoint:"verifyAssertion",A:cu,Za:lu,G:function(e){if(e.errorMessage&&"USER_NOT_FOUND"==e.errorMessage)throw new N("user-not-found");if(e.errorMessage)throw Yu(e.errorMessage);tu(e)},V:!0,B:!0},Bu={endpoint:"verifyAssertion",A:function(e){if(cu(e),!e.idToken)throw new N("internal-error")},Za:lu,G:hu,V:!0},Ku={endpoint:"verifyCustomToken",A:function(e){if(!e.token)throw new N("invalid-custom-token")},G:tu,V:!0,B:!0},Wu={endpoint:"verifyPassword",A:function(e){if(Xs(e),!e.password)throw new N("wrong-password")},G:tu,V:!0,B:!0},Hu={endpoint:"verifyPhoneNumber",A:nu,G:tu,B:!0},Gu={endpoint:"verifyPhoneNumber",A:function(e){if(!e.idToken)throw new N("internal-error");nu(e)},G:function(e){if(e.temporaryProof)throw e.code="credential-already-in-use",Ca(e);tu(e)}},zu={Ib:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:nu,G:tu,B:!0},Qu={endpoint:"accounts/mfaEnrollment:withdraw",O:["idToken","mfaEnrollmentId"],G:function(e){if(!!e[Ls]^!!e.refreshToken)throw new N("internal-error")},B:!0,Na:!0};function $u(e,t,n){if(!Ci(n,t.O))return Vt(new N("internal-error"));var r,i=!!t.Na,o=t.Vb||"POST";return qt(n).then(t.A).then((function(){return t.V&&(n.returnSecureToken=!0),t.B&&e.b&&"undefined"===typeof n.tenantId&&(n.tenantId=e.b),Ys(e,i?e.i:e.h,t.endpoint,o,n,t.Ib,t.mb||!1)})).then((function(e){return r=e,t.Za?t.Za(n,r):r})).then(t.G).then((function(){if(!t.Z)return r;if(!(t.Z in r))throw new N("internal-error");return r[t.Z]}))}function Yu(e){return Xu({error:{errors:[{message:e}],code:400,message:e}})}function Xu(e,t){var n=(e.error&&e.error.errors&&e.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new N(r[n]):null)return n;for(var i in n=e.error&&e.error.message||"",r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},Ie(r,t||{}),t=(t=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<t.length?t[1]:void 0,r)if(0===n.indexOf(i))return new N(r[i],t);return!t&&e&&(t=ai(e)),new N("internal-error",t)}function Ju(e){this.b=e,this.a=null,this.sb=Zu(this)}function Zu(e){return ac().then((function(){return new Ot((function(t,n){ei("gapi.iframes.getContext")().open({where:document.body,url:e.b,messageHandlersFilter:ei("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),t()}e.a=r,e.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),ic.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))}))}function ec(e,t){return e.sb.then((function(){return new Ot((function(n){e.a.send(t.type,t,n,ei("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}function tc(e,t){e.sb.then((function(){e.a.register("authEvent",t,ei("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}var nc=new Ee(Ae,"https://apis.google.com/js/api.js?onload=%{onload}"),rc=new fi(3e4,6e4),ic=new fi(5e3,15e3),oc=null;function ac(){return oc||(oc=new Ot((function(e,t){function n(){hi(),ei("gapi.load")("gapi.iframes",{callback:e,ontimeout:function(){hi(),t(Error("Network Error"))},timeout:rc.get()})}if(ei("gapi.iframes.Iframe"))e();else if(ei("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();l[r]=function(){ei("gapi.load")?n():t(Error("Network Error"))},r=Pe(nc,{onload:r}),qt(Ss(r)).o((function(){t(Error("Network Error"))}))}})).o((function(e){throw oc=null,e})))}function sc(e,t,n,r){this.l=e,this.h=t,this.i=n,this.g=r,this.f=null,this.g?(e=ir(this.g.url),e=or(e.c,e.a,e.g,"/emulator/auth/iframe")):e=or("https",this.l,null,"/__/auth/iframe"),this.a=e,nr(this.a,"apiKey",this.h),nr(this.a,"appName",this.i),this.b=null,this.c=[]}function uc(e,t,n,r,i,o){this.u=e,this.s=t,this.c=n,this.m=r,this.v=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function cc(e){try{return r["default"].app(e).auth().Ga()}catch(t){return[]}}function lc(e,t,n,r,i,o){this.s=e,this.g=t,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function hc(e){var t=xr();return eu(e).then((function(e){e:{var n=ir(t),r=n.c;n=n.a;for(var i=0;i<e.length;i++){var o=e[i],a=n,s=r;if(0==o.indexOf("chrome-extension://")?a=ir(o).a==a&&"chrome-extension"==s:"http"!=s&&"https"!=s?a=!1:jr.test(o)?a=a==o:(o=o.split(".").join("\\."),a=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)),a){e=!0;break e}}e=!1}if(!e)throw new ka(xr())}))}function fc(e){return e.m||(e.m=qr().then((function(){if(!e.u){var t=e.c,n=e.i,r=cc(e.b),i=new sc(e.s,e.g,e.b,e.f);i.f=t,i.b=n,i.c=re(r||[]),e.u=i.toString()}e.v=new Ju(e.u),vc(e)}))),e.m}function dc(e){return e.l||(e.C=e.c?Jr(e.c,cc(e.b)):null,e.l=new Ds(e.g,M(e.i),e.C),e.f&&Bs(e.l,e.f)),e.l}function pc(e,t,n,r,i,o,a,s,u,c,l,h){return e=new uc(e,t,n,r,i,h),e.l=o,e.g=a,e.i=s,e.b=be(u||null),e.f=c,e.zb(l).toString()}function vc(e){if(!e.v)throw Error("IfcHandler must be initialized!");tc(e.v,(function(t){var n={};if(t&&t.authEvent){var r=!1;for(t=ba(t.authEvent),n=0;n<e.h.length;n++)r=e.h[n](t)||r;return n={},n.status=r?"ACK":"ERROR",qt(n)}return n.status="ERROR",qt(n)}))}function gc(e){var t={type:"webStorageSupport"};return fc(e).then((function(){return ec(e.v,t)})).then((function(e){if(e&&e.length&&"undefined"!==typeof e[0].webStorageSupport)return e[0].webStorageSupport;throw Error()}))}function mc(e){if(this.a=e||r["default"].INTERNAL.reactNative&&r["default"].INTERNAL.reactNative.AsyncStorage,!this.a)throw new N("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function yc(e){this.b=e,this.a={},this.f=E(this.c,this)}sc.prototype.toString=function(){return this.f?nr(this.a,"v",this.f):mr(this.a.b,"v"),this.b?nr(this.a,"eid",this.b):mr(this.a.b,"eid"),this.c.length?nr(this.a,"fw",this.c.join(",")):mr(this.a.b,"fw"),this.a.toString()},uc.prototype.zb=function(e){return this.h=e,this},uc.prototype.toString=function(){if(this.v){var e=ir(this.v.url);e=or(e.c,e.a,e.g,"/emulator/auth/handler")}else e=or("https",this.u,null,"/__/auth/handler");if(nr(e,"apiKey",this.s),nr(e,"appName",this.c),nr(e,"authType",this.m),this.a.isOAuthProvider){var t=this.a;try{var n=r["default"].app(this.c).auth().la()}catch(u){n=null}for(var i in t.pb=n,nr(e,"providerId",this.a.providerId),n=this.a,t=si(n.Jb),t)t[i]=t[i].toString();i=n.Qc,t=be(t);for(var o=0;o<i.length;o++){var a=i[o];a in t&&delete t[a]}n.qb&&n.pb&&!t[n.qb]&&(t[n.qb]=n.pb),_e(t)||nr(e,"customParameters",ai(t))}if("function"===typeof this.a.Rb&&(n=this.a.Rb(),n.length&&nr(e,"scopes",n.join(","))),this.l?nr(e,"redirectUrl",this.l):mr(e.b,"redirectUrl"),this.g?nr(e,"eventId",this.g):mr(e.b,"eventId"),this.i?nr(e,"v",this.i):mr(e.b,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!rr(e,s)&&nr(e,s,this.b[s]);return this.h?nr(e,"tid",this.h):mr(e.b,"tid"),this.f?nr(e,"eid",this.f):mr(e.b,"eid"),s=cc(this.c),s.length&&nr(e,"fw",s.join(",")),e.toString()},e=lc.prototype,e.Pb=function(e,t,n){var r=new N("popup-closed-by-user"),i=new N("web-storage-unsupported"),o=this,a=!1;return this.ma().then((function(){gc(o).then((function(n){n||(e&&Mr(e),t(i),a=!0)}))})).o((function(){})).then((function(){if(!a)return Fr(e)})).then((function(){if(!a)return Kn(n).then((function(){t(r)}))}))},e.Yb=function(){var e=Zr();return!oi(e)&&!li(e)},e.Ub=function(){return!1},e.Nb=function(e,t,n,r,i,o,a,s){if(!e)return Vt(new N("popup-blocked"));if(a&&!oi())return this.ma().o((function(t){Mr(e),i(t)})),r(),qt();this.a||(this.a=hc(dc(this)));var u=this;return this.a.then((function(){var t=u.ma().o((function(t){throw Mr(e),i(t),t}));return r(),t})).then((function(){if(ya(n),!a){var r=pc(u.s,u.g,u.b,t,n,null,o,u.c,void 0,u.i,s,u.f);Rr(r,e)}})).o((function(e){throw"auth/network-request-failed"==e.code&&(u.a=null),e}))},e.Ob=function(e,t,n,r){this.a||(this.a=hc(dc(this)));var i=this;return this.a.then((function(){ya(t);var o=pc(i.s,i.g,i.b,e,t,xr(),n,i.c,void 0,i.i,r,i.f);Rr(o)})).o((function(e){throw"auth/network-request-failed"==e.code&&(i.a=null),e}))},e.ma=function(){var e=this;return fc(this).then((function(){return e.v.sb})).o((function(){throw e.a=null,new N("network-request-failed")}))},e.ac=function(){return!0},e.Ea=function(e){this.h.push(e)},e.Ta=function(e){te(this.h,(function(t){return t==e}))},e=mc.prototype,e.get=function(e){return qt(this.a.getItem(e)).then((function(e){return e&&ui(e)}))},e.set=function(e,t){return qt(this.a.setItem(e,ai(t)))},e.U=function(e){return qt(this.a.removeItem(e))},e.ca=function(){},e.ia=function(){};var _c,bc=[];function wc(){var e=Wr()?self:null;if(z(bc,(function(n){n.b==e&&(t=n)})),!t){var t=new yc(e);bc.push(t)}return t}function Ic(e,t,n){_e(e.a)&&e.b.addEventListener("message",e.f),"undefined"===typeof e.a[t]&&(e.a[t]=[]),e.a[t].push(n)}function Tc(e){this.a=e}function Ec(e){this.c=e,this.b=!1,this.a=[]}function kc(e,t,n,r){var i,o,a,s,u=n||{},c=null;if(e.b)return Vt(Error("connection_unavailable"));var l=r?800:50,h="undefined"!==typeof MessageChannel?new MessageChannel:null;return new Ot((function(n,r){h?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),h.port1.start(),a=setTimeout((function(){r(Error("unsupported_event"))}),l),o=function(e){e.data.eventId===i&&("ack"===e.data.status?(clearTimeout(a),s=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===e.data.status?(clearTimeout(s),"undefined"!==typeof e.data.response?n(e.data.response):r(Error("unknown_error"))):(clearTimeout(a),clearTimeout(s),r(Error("invalid_response"))))},c={messageChannel:h,onMessage:o},e.a.push(c),h.port1.addEventListener("message",o),e.c.postMessage({eventType:t,eventId:i,data:u},[h.port2])):r(Error("connection_unavailable"))})).then((function(t){return Sc(e,c),t})).o((function(t){throw Sc(e,c),t}))}function Sc(e,t){if(t){var n=t.messageChannel,r=t.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),te(e.a,(function(e){return e==t}))}}function Cc(){if(!Pc())throw new N("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=l.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var e=this;Wr()&&self?(this.v=wc(),Ic(this.v,"keyChanged",(function(t,n){return Fc(e).then((function(t){return 0<t.length&&z(e.a,(function(e){e(t)})),{keyProcessed:Z(t,n.key)}}))})),Ic(this.v,"ping",(function(){return qt(["keyChanged"])}))):yi().then((function(t){(e.h=t)&&(e.g=new Ec(new Tc(t)),kc(e.g,"ping",null,!0).then((function(t){t[0].fulfilled&&Z(t[0].value,"keyChanged")&&(e.s=!0)})).o((function(){})))}))}function Ac(e){return new Ot((function(t,n){var r=e.m.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){t()},r.onerror=function(e){n(Error(e.target.error))}}))}function Nc(e){return new Ot((function(t,n){var r=e.m.open("firebaseLocalStorageDb",1);r.onerror=function(e){try{e.preventDefault()}catch(t){}n(Error(e.target.error))},r.onupgradeneeded=function(e){e=e.target.result;try{e.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}},r.onsuccess=function(r){r=r.target.result,r.objectStoreNames.contains("firebaseLocalStorage")?t(r):Ac(e).then((function(){return Nc(e)})).then((function(e){t(e)})).o((function(e){n(e)}))}}))}function xc(e){return e.i||(e.i=Nc(e)),e.i}function Rc(e,t){function n(i,o){xc(e).then(t).then(i).o((function(t){if(!(3<++r))return xc(e).then((function(t){return t.close(),e.i=void 0,n(i,o)})).o((function(e){o(e)}));o(t)}))}var r=0;return new Ot(n)}function Pc(){try{return!!l.indexedDB}catch(ep){return!1}}function Oc(e){return e.objectStore("firebaseLocalStorage")}function Dc(e,t){return e.transaction(["firebaseLocalStorage"],t?"readwrite":"readonly")}function Mc(e){return new Ot((function(t,n){e.onsuccess=function(e){e&&e.target?t(e.target.result):t()},e.onerror=function(e){n(e.target.error)}}))}function Lc(e,t){return e.g&&e.h&&mi()===e.h?kc(e.g,"keyChanged",{key:t},e.s).then((function(){})).o((function(){})):qt()}function Fc(e){return xc(e).then((function(e){var t=Oc(Dc(e,!1));return t.getAll?Mc(t.getAll()):new Ot((function(e,n){var r=[],i=t.openCursor();i.onsuccess=function(t){(t=t.target.result)?(r.push(t.value),t["continue"]()):e(r)},i.onerror=function(e){n(e.target.error)}}))})).then((function(t){var n={},r=[];if(0==e.b){for(r=0;r<t.length;r++)n[t[r].fbase_key]=t[r].value;r=Pr(e.c,n),e.c=n}return r}))}function jc(e){function t(){e.f=setTimeout((function(){e.l=Fc(e).then((function(t){0<t.length&&z(e.a,(function(e){e(t)}))})).then((function(){t()})).o((function(e){"STOP_EVENT"!=e.message&&t()}))}),800)}Uc(e),t()}function Uc(e){e.l&&e.l.cancel("STOP_EVENT"),e.f&&(clearTimeout(e.f),e.f=null)}function qc(e){var t=this,n=null;this.a=[],this.type="indexedDB",this.c=e,this.b=qt().then((function(){if(Pc()){var e=ci(),r="__sak"+e;return _c||(_c=new Cc),n=_c,n.set(r,e).then((function(){return n.get(r)})).then((function(t){if(t!==e)throw Error("indexedDB not supported!");return n.U(r)})).then((function(){return n})).o((function(){return t.c}))}return t.c})).then((function(e){return t.type=e.type,e.ca((function(e){z(t.a,(function(t){t(e)}))})),e}))}function Vc(){this.a={},this.type="inMemory"}function Bc(){if(!Wc()){if("Node"==Hr())throw new N("internal-error","The LocalStorage compatibility library was not found.");throw new N("web-storage-unsupported")}this.a=Kc()||r["default"].INTERNAL.node.localStorage,this.type="localStorage"}function Kc(){try{var e=l.localStorage,t=ci();return e&&(e.setItem(t,"1"),e.removeItem(t)),e}catch(n){return null}}function Wc(){var e="Node"==Hr();if(e=Kc()||e&&r["default"].INTERNAL.node&&r["default"].INTERNAL.node.localStorage,!e)return!1;try{return e.setItem("__sak","1"),e.removeItem("__sak"),!0}catch(t){return!1}}function Hc(){this.type="nullStorage"}function Gc(){if(!Qc()){if("Node"==Hr())throw new N("internal-error","The SessionStorage compatibility library was not found.");throw new N("web-storage-unsupported")}this.a=zc()||r["default"].INTERNAL.node.sessionStorage,this.type="sessionStorage"}function zc(){try{var e=l.sessionStorage,t=ci();return e&&(e.setItem(t,"1"),e.removeItem(t)),e}catch(n){return null}}function Qc(){var e="Node"==Hr();if(e=zc()||e&&r["default"].INTERNAL.node&&r["default"].INTERNAL.node.sessionStorage,!e)return!1;try{return e.setItem("__sak","1"),e.removeItem("__sak"),!0}catch(t){return!1}}function $c(){var e={};e.Browser=Jc,e.Node=Zc,e.ReactNative=el,e.Worker=tl,this.a=e[Hr()]}yc.prototype.c=function(e){var t=e.data.eventType,n=e.data.eventId,r=this.a[t];if(r&&0<r.length){e.ports[0].postMessage({status:"ack",eventId:n,eventType:t,response:null});var i=[];z(r,(function(t){i.push(qt().then((function(){return t(e.origin,e.data.data)})))})),Wt(i).then((function(r){var i=[];z(r,(function(e){i.push({fulfilled:e.Qb,value:e.value,reason:e.reason?e.reason.message:void 0})})),z(i,(function(e){for(var t in e)"undefined"===typeof e[t]&&delete e[t]})),e.ports[0].postMessage({status:"done",eventId:n,eventType:t,response:i})}))}},Tc.prototype.postMessage=function(e,t){this.a.postMessage(e,t)},Ec.prototype.close=function(){for(;0<this.a.length;)Sc(this,this.a[0]);this.b=!0},e=Cc.prototype,e.set=function(e,t){var n=this,r=!1;return Rc(this,(function(t){return t=Oc(Dc(t,!0)),Mc(t.get(e))})).then((function(i){return Rc(n,(function(o){if(o=Oc(Dc(o,!0)),i)return i.value=t,Mc(o.put(i));n.b++,r=!0;var a={};return a.fbase_key=e,a.value=t,Mc(o.add(a))}))})).then((function(){return n.c[e]=t,Lc(n,e)})).oa((function(){r&&n.b--}))},e.get=function(e){return Rc(this,(function(t){return Mc(Oc(Dc(t,!1)).get(e))})).then((function(e){return e&&e.value}))},e.U=function(e){var t=this,n=!1;return Rc(this,(function(r){return n=!0,t.b++,Mc(Oc(Dc(r,!0))["delete"](e))})).then((function(){return delete t.c[e],Lc(t,e)})).oa((function(){n&&t.b--}))},e.ca=function(e){0==this.a.length&&jc(this),this.a.push(e)},e.ia=function(e){te(this.a,(function(t){return t==e})),0==this.a.length&&Uc(this)},e=qc.prototype,e.get=function(e){return this.b.then((function(t){return t.get(e)}))},e.set=function(e,t){return this.b.then((function(n){return n.set(e,t)}))},e.U=function(e){return this.b.then((function(t){return t.U(e)}))},e.ca=function(e){this.a.push(e)},e.ia=function(e){te(this.a,(function(t){return t==e}))},e=Vc.prototype,e.get=function(e){return qt(this.a[e])},e.set=function(e,t){return this.a[e]=t,qt()},e.U=function(e){return delete this.a[e],qt()},e.ca=function(){},e.ia=function(){},e=Bc.prototype,e.get=function(e){var t=this;return qt().then((function(){var n=t.a.getItem(e);return ui(n)}))},e.set=function(e,t){var n=this;return qt().then((function(){var r=ai(t);null===r?n.U(e):n.a.setItem(e,r)}))},e.U=function(e){var t=this;return qt().then((function(){t.a.removeItem(e)}))},e.ca=function(e){l.window&&kn(l.window,"storage",e)},e.ia=function(e){l.window&&Nn(l.window,"storage",e)},e=Hc.prototype,e.get=function(){return qt(null)},e.set=function(){return qt()},e.U=function(){return qt()},e.ca=function(){},e.ia=function(){},e=Gc.prototype,e.get=function(e){var t=this;return qt().then((function(){var n=t.a.getItem(e);return ui(n)}))},e.set=function(e,t){var n=this;return qt().then((function(){var r=ai(t);null===r?n.U(e):n.a.setItem(e,r)}))},e.U=function(e){var t=this;return qt().then((function(){t.a.removeItem(e)}))},e.ca=function(){},e.ia=function(){};var Yc,Xc,Jc={F:Bc,cb:Gc},Zc={F:Bc,cb:Gc},el={F:mc,cb:Hc},tl={F:Bc,cb:Hc},nl={rd:"local",NONE:"none",td:"session"};function rl(e){var t=new N("invalid-persistence-type"),n=new N("unsupported-persistence-type");e:{for(r in nl)if(nl[r]==e){var r=!0;break e}r=!1}if(!r||"string"!==typeof e)throw t;switch(Hr()){case"ReactNative":if("session"===e)throw n;break;case"Node":if("none"!==e)throw n;break;case"Worker":if("session"===e||!Pc()&&"none"!==e)throw n;break;default:if(!ti()&&"none"!==e)throw n}}function il(){var e=!(li(Zr())||!Kr()),t=oi(),n=ti();this.m=e,this.h=t,this.l=n,this.a={},Yc||(Yc=new $c),e=Yc;try{this.g=!Nr()&&gi()||!l.indexedDB?new e.a.F:new qc(Wr()?new Vc:new e.a.F)}catch(r){this.g=new Vc,this.h=!0}try{this.i=new e.a.cb}catch(r){this.i=new Vc}this.v=new Vc,this.f=E(this.Zb,this),this.b={}}function ol(){return Xc||(Xc=new il),Xc}function al(e,t){switch(t){case"session":return e.i;case"none":return e.v;default:return e.g}}function sl(e,t){return"firebase:"+e.name+(t?":"+t:"")}function ul(e,t,n){var r=sl(t,n),i=al(e,t.F);return e.get(t,n).then((function(o){var a=null;try{a=ui(l.localStorage.getItem(r))}catch(s){}if(a&&!o)return l.localStorage.removeItem(r),e.set(t,a,n);a&&o&&"localStorage"!=i.type&&l.localStorage.removeItem(r)}))}function cl(e,t,n){return n=sl(t,n),"local"==t.F&&(e.b[n]=null),al(e,t.F).U(n)}function ll(e){hl(e),e.c=setInterval((function(){for(var t in e.a){var n=l.localStorage.getItem(t),r=e.b[t];n!=r&&(e.b[t]=n,n=new pn({type:"storage",key:t,target:window,oldValue:r,newValue:n,a:!0}),e.Zb(n))}}),1e3)}function hl(e){e.c&&(clearInterval(e.c),e.c=null)}function fl(e){this.a=e,this.b=ol()}e=il.prototype,e.get=function(e,t){return al(this,e.F).get(sl(e,t))},e.set=function(e,t,n){var r=sl(e,n),i=this,o=al(this,e.F);return o.set(r,t).then((function(){return o.get(r)})).then((function(t){"local"==e.F&&(i.b[r]=t)}))},e.addListener=function(e,t,n){e=sl(e,t),this.l&&(this.b[e]=l.localStorage.getItem(e)),_e(this.a)&&(al(this,"local").ca(this.f),this.h||(Nr()||!gi())&&l.indexedDB||!this.l||ll(this)),this.a[e]||(this.a[e]=[]),this.a[e].push(n)},e.removeListener=function(e,t,n){e=sl(e,t),this.a[e]&&(te(this.a[e],(function(e){return e==n})),0==this.a[e].length&&delete this.a[e]),_e(this.a)&&(al(this,"local").ia(this.f),hl(this))},e.Zb=function(e){if(e&&e.g){var t=e.a.key;if(null==t)for(var n in this.a){var r=this.b[n];"undefined"===typeof r&&(r=null);var i=l.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.nb(n))}else if(0==t.indexOf("firebase:")&&this.a[t]){if("undefined"!==typeof e.a.a?al(this,"local").ia(this.f):hl(this),this.m)if(n=l.localStorage.getItem(t),r=e.a.newValue,r!==n)null!==r?l.localStorage.setItem(t,r):l.localStorage.removeItem(t);else if(this.b[t]===r&&"undefined"===typeof e.a.a)return;var o=this;n=function(){"undefined"===typeof e.a.a&&o.b[t]===l.localStorage.getItem(t)||(o.b[t]=l.localStorage.getItem(t),o.nb(t))},rt&&gt&&10==gt&&l.localStorage.getItem(t)!==e.a.newValue&&e.a.newValue!==e.a.oldValue?setTimeout(n,10):n()}}else z(e,E(this.nb,this))},e.nb=function(e){this.a[e]&&z(this.a[e],(function(e){e()}))};var dl,pl={name:"authEvent",F:"local"};function vl(e){return e.b.get(pl,e.a).then((function(e){return ba(e)}))}function gl(){this.a=ol()}function ml(){this.b=-1}function yl(e,t){this.b=_l,this.f=l.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=e,this.h=t,this.l=l.Int32Array?new Int32Array(64):Array(64),void 0===dl&&(dl=l.Int32Array?new Int32Array(Sl):Sl),this.reset()}C(yl,ml);for(var _l=64,bl=_l-1,wl=[],Il=0;Il<bl;Il++)wl[Il]=0;var Tl=ne(128,wl);function El(e){for(var t=e.f,n=e.l,r=0,i=0;i<t.length;)n[r++]=t[i]<<24|t[i+1]<<16|t[i+2]<<8|t[i+3],i=4*r;for(t=16;64>t;t++){i=0|n[t-15],r=0|n[t-2];var o=(0|n[t-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,a=(0|n[t-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[t]=o+a|0}r=0|e.a[0],i=0|e.a[1];var s=0|e.a[2],u=0|e.a[3],c=0|e.a[4],l=0|e.a[5],h=0|e.a[6];for(o=0|e.a[7],t=0;64>t;t++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&s^i&s)|0;a=c&l^~c&h,o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0,a=a+(0|dl[t])|0,a=o+(a+(0|n[t])|0)|0,o=h,h=l,l=c,c=u+a|0,u=s,s=i,i=r,r=a+f|0}e.a[0]=e.a[0]+r|0,e.a[1]=e.a[1]+i|0,e.a[2]=e.a[2]+s|0,e.a[3]=e.a[3]+u|0,e.a[4]=e.a[4]+c|0,e.a[5]=e.a[5]+l|0,e.a[6]=e.a[6]+h|0,e.a[7]=e.a[7]+o|0}function kl(e,t,n){void 0===n&&(n=t.length);var r=0,i=e.c;if("string"===typeof t)for(;r<n;)e.f[i++]=t.charCodeAt(r++),i==e.b&&(El(e),i=0);else{if(!g(t))throw Error("message must be string or array");for(;r<n;){var o=t[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");e.f[i++]=o,i==e.b&&(El(e),i=0)}}e.c=i,e.g+=n}yl.prototype.reset=function(){this.g=this.c=0,this.a=l.Int32Array?new Int32Array(this.h):re(this.h)};var Sl=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Cl(){yl.call(this,8,Al)}C(Cl,yl);var Al=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function Nl(e,t,n,r,i,o){this.v=e,this.i=t,this.l=n,this.m=r||null,this.u=i||null,this.s=o,this.h=t+":"+n,this.C=new gl,this.g=new fl(this.h),this.f=null,this.b=[],this.a=this.c=null}function xl(e){return new N("invalid-cordova-configuration",e)}function Rl(){for(var e=20,t=[];0<e;)t.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),e--;return t.join("")}function Pl(e){var t=new Cl;kl(t,e),e=[];var n=8*t.g;56>t.c?kl(t,Tl,56-t.c):kl(t,Tl,t.b-(t.c-56));for(var r=63;56<=r;r--)t.f[r]=255&n,n/=256;for(El(t),r=n=0;r<t.i;r++)for(var i=24;0<=i;i-=8)e[n++]=t.a[r]>>i&255;return mo(e)}function Ol(e,t,n,r,i){var o=Rl(),a=new _a(t,r,null,o,new N("no-auth-event"),null,i),s=ei("BuildInfo.packageName",l);if("string"!==typeof s)throw new N("invalid-cordova-configuration");var u=ei("BuildInfo.displayName",l),c={};if(Zr().toLowerCase().match(/iphone|ipad|ipod/))c.ibi=s;else{if(!Zr().toLowerCase().match(/android/))return Vt(new N("operation-not-supported-in-this-environment"));c.apn=s}u&&(c.appDisplayName=u),o=Pl(o),c.sessionId=o;var h=pc(e.v,e.i,e.l,t,n,null,r,e.m,c,e.u,i,e.s);return e.ma().then((function(){var t=e.h;return e.C.a.set(pl,a.w(),t)})).then((function(){var t=ei("cordova.plugins.browsertab.isAvailable",l);if("function"!==typeof t)throw new N("invalid-cordova-configuration");var n=null;t((function(t){if(t){if(n=ei("cordova.plugins.browsertab.openUrl",l),"function"!==typeof n)throw new N("invalid-cordova-configuration");n(h)}else{if(n=ei("cordova.InAppBrowser.open",l),"function"!==typeof n)throw new N("invalid-cordova-configuration");t=Zr(),e.a=n(h,t.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||t.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}function Dl(e,t){for(var n=0;n<e.b.length;n++)try{e.b[n](t)}catch(r){}}function Ml(e){return e.f||(e.f=e.ma().then((function(){return new Ot((function(t){function n(r){return t(r),e.Ta(n),!1}e.Ea(n),Fl(e)}))}))),e.f}function Ll(e){var t=null;return vl(e.g).then((function(n){return t=n,n=e.g,cl(n.b,pl,n.a)})).then((function(){return t}))}function Fl(e){function t(t){r=!0,i&&i.cancel(),Ll(e).then((function(r){var i=n;if(r&&t&&t.url){var o=null;i=jo(t.url),-1!=i.indexOf("/__/auth/callback")&&(o=ir(i),o=ui(rr(o,"firebaseError")||null),o=(o="object"===typeof o?x(o):null)?new _a(r.c,r.b,null,null,o,null,r.T()):new _a(r.c,r.b,i,r.f,null,null,r.T())),i=o||n}Dl(e,i)}))}var n=new _a("unknown",null,null,null,new N("no-auth-event")),r=!1,i=Kn(500).then((function(){return Ll(e).then((function(){r||Dl(e,n)}))})),o=l.handleOpenURL;l.handleOpenURL=function(e){if(0==e.toLowerCase().indexOf(ei("BuildInfo.packageName",l).toLowerCase()+"://")&&t({url:e}),"function"===typeof o)try{o(e)}catch(n){console.error(n)}},Ta||(Ta=new wa),Ea(t)}function jl(e){this.a=e,this.b=ol()}e=Nl.prototype,e.ma=function(){return this.Ia?this.Ia:this.Ia=Vr().then((function(){if("function"!==typeof ei("universalLinks.subscribe",l))throw xl("cordova-universal-links-plugin-fix is not installed");if("undefined"===typeof ei("BuildInfo.packageName",l))throw xl("cordova-plugin-buildinfo is not installed");if("function"!==typeof ei("cordova.plugins.browsertab.openUrl",l))throw xl("cordova-plugin-browsertab is not installed");if("function"!==typeof ei("cordova.InAppBrowser.open",l))throw xl("cordova-plugin-inappbrowser is not installed")}),(function(){throw new N("cordova-not-ready")}))},e.Pb=function(e,t){return t(new N("operation-not-supported-in-this-environment")),qt()},e.Nb=function(){return Vt(new N("operation-not-supported-in-this-environment"))},e.ac=function(){return!1},e.Yb=function(){return!0},e.Ub=function(){return!0},e.Ob=function(e,t,n,r){if(this.c)return Vt(new N("redirect-operation-pending"));var i=this,o=l.document,a=null,s=null,u=null,c=null;return this.c=qt().then((function(){return ya(t),Ml(i)})).then((function(){return Ol(i,e,t,n,r)})).then((function(){return new Ot((function(e,t){s=function(){var t=ei("cordova.plugins.browsertab.close",l);return e(),"function"===typeof t&&t(),i.a&&"function"===typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(s),u=function(){a||(a=Kn(2e3).then((function(){t(new N("redirect-cancelled-by-user"))})))},c=function(){di()&&u()},o.addEventListener("resume",u,!1),Zr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",c,!1)})).o((function(e){return Ll(i).then((function(){throw e}))}))})).oa((function(){u&&o.removeEventListener("resume",u,!1),c&&o.removeEventListener("visibilitychange",c,!1),a&&a.cancel(),s&&i.Ta(s),i.c=null}))},e.Ea=function(e){this.b.push(e),Ml(this).o((function(t){"auth/invalid-cordova-configuration"===t.code&&(t=new _a("unknown",null,null,null,new N("no-auth-event")),e(t))}))},e.Ta=function(e){te(this.b,(function(t){return t==e}))};var Ul={name:"pendingRedirect",F:"session"};function ql(e){return e.b.set(Ul,"pending",e.a)}function Vl(e){return cl(e.b,Ul,e.a)}function Bl(e){return e.b.get(Ul,e.a).then((function(e){return"pending"==e}))}function Kl(e,t,n,r){this.i={},this.u=0,this.D=e,this.v=t,this.m=n,this.J=r,this.h=[],this.f=!1,this.l=E(this.s,this),this.b=new ih,this.C=new fh,this.g=new jl(nh(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=Wl(this.D,this.v,this.m,R,this.J)}function Wl(e,t,n,i,o){var a=r["default"].SDK_VERSION||null;return Br()?new Nl(e,t,n,a,i,o):new lc(e,t,n,a,i,o)}function Hl(e){e.f||(e.f=!0,e.a.Ea(e.l));var t=e.a;return e.a.ma().o((function(n){throw e.a==t&&e.reset(),n}))}function Gl(e){e.a.Yb()&&Hl(e).o((function(t){var n=new _a("unknown",null,null,null,new N("operation-not-supported-in-this-environment"));Jl(t)&&e.s(n)})),e.a.Ub()||oh(e.b)}function zl(e,t){Z(e.h,t)||e.h.push(t),e.f||Bl(e.g).then((function(t){t?Vl(e.g).then((function(){Hl(e).o((function(t){var n=new _a("unknown",null,null,null,new N("operation-not-supported-in-this-environment"));Jl(t)&&e.s(n)}))})):Gl(e)})).o((function(){Gl(e)}))}function Ql(e,t){te(e.h,(function(e){return e==t}))}Kl.prototype.reset=function(){this.f=!1,this.a.Ta(this.l),this.a=Wl(this.D,this.v,this.m,null,this.J),this.i={}},Kl.prototype.s=function(e){if(!e)throw new N("invalid-auth-event");if(6e5<=Date.now()-this.u&&(this.i={},this.u=0),e&&e.getUid()&&this.i.hasOwnProperty(e.getUid()))return!1;for(var t=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Gb(e.c,e.b)){(t=this.c[e.c])&&(t.h(e,r),e&&(e.f||e.b)&&(this.i[e.getUid()]=!0,this.u=Date.now())),t=!0;break}}return oh(this.b),t};var $l=new fi(2e3,1e4),Yl=new fi(3e4,6e4);function Xl(e,t,n,r,i,o,a){return e.a.Nb(t,n,r,(function(){e.f||(e.f=!0,e.a.Ea(e.l))}),(function(){e.reset()}),i,o,a)}function Jl(e){return!(!e||"auth/cordova-not-ready"!=e.code)}function Zl(e,t,n,r,i){var o;return ql(e.g).then((function(){return e.a.Ob(t,n,r,i).o((function(t){if(Jl(t))throw new N("operation-not-supported-in-this-environment");return o=t,Vl(e.g).then((function(){throw o}))})).then((function(){return e.a.ac()?new Ot((function(){})):Vl(e.g).then((function(){return e.ra()})).then((function(){})).o((function(){}))}))}))}function eh(e,t,n,r,i){return e.a.Pb(r,(function(e){t.na(n,null,e,i)}),$l.get())}Kl.prototype.ra=function(){return this.b.ra()};var th={};function nh(e,t,n){return e=e+":"+t,n&&(e=e+":"+n.url),e}function rh(e,t,n,r){var i=nh(t,n,r);return th[i]||(th[i]=new Kl(e,t,n,r)),th[i]}function ih(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function oh(e){e.g||(e.g=!0,lh(e,!1,null,null))}function ah(e){e.g&&!e.i&&lh(e,!1,null,null)}function sh(e,t,n){n=n.Fa(t.c,t.b);var r=t.g,i=t.f,o=t.i,a=t.T(),s=!!t.c.match(/Redirect$/);n(r,i,a,o).then((function(t){lh(e,s,t,null)})).o((function(t){lh(e,s,null,t)}))}function uh(e,t){if(e.b=function(){return Vt(t)},e.c.length)for(var n=0;n<e.c.length;n++)e.c[n](t)}function ch(e,t){if(e.b=function(){return qt(t)},e.f.length)for(var n=0;n<e.f.length;n++)e.f[n](t)}function lh(e,t,n,r){t?r?uh(e,r):ch(e,n):ch(e,{user:null}),e.f=[],e.c=[]}function hh(e){var t=new N("timeout");e.a&&e.a.cancel(),e.a=Kn(Yl.get()).then((function(){e.b||(e.g=!0,lh(e,!0,null,t))}))}function fh(){}function dh(e,t){var n=e.b,r=e.c;t.Fa(r,n)(e.g,e.f,e.T(),e.i).then((function(e){t.na(r,e,null,n)})).o((function(e){t.na(r,null,e,n)}))}function ph(){this.jb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.jb},set:function(e){this.jb=e},enumerable:!1})}function vh(e,t){this.a=t,Ti(this,"verificationId",e)}function gh(e,t,n,r){return new va(e).gb(t,n).then((function(e){return new vh(e,r)}))}function mh(e){var t=Eo(e);if(!(t&&t.exp&&t.auth_time&&t.iat))throw new N("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Ei(this,{token:e,expirationTime:vi(1e3*t.exp),authTime:vi(1e3*t.auth_time),issuedAtTime:vi(1e3*t.iat),signInProvider:t.firebase&&t.firebase.sign_in_provider?t.firebase.sign_in_provider:null,signInSecondFactor:t.firebase&&t.firebase.sign_in_second_factor?t.firebase.sign_in_second_factor:null,claims:t})}function yh(e,t,n){var r=t&&t[bh];if(!r)throw new N("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=e,this.f=be(t),this.g=n,this.c=new Uo(null,r),this.b=[];var i=this;z(t[_h]||[],(function(e){(e=xi(e))&&i.b.push(e)})),Ti(this,"auth",this.a),Ti(this,"session",this.c),Ti(this,"hints",this.b)}ih.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},ih.prototype.h=function(e,t){if(e){this.reset(),this.g=!0;var n=e.c,r=e.b,i=e.a&&"auth/web-storage-unsupported"==e.a.code,o=e.a&&"auth/operation-not-supported-in-this-environment"==e.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?e.a?(lh(this,!0,null,e.a),qt()):t.Fa(n,r)?sh(this,e,t):Vt(new N("invalid-auth-event")):(lh(this,!1,null,null),qt())}else Vt(new N("invalid-auth-event"))},ih.prototype.ra=function(){var e=this;return new Ot((function(t,n){e.b?e.b().then(t,n):(e.f.push(t),e.c.push(n),hh(e))}))},fh.prototype.h=function(e,t){if(e){var n=e.c,r=e.b;e.a?(t.na(e.c,null,e.a,e.b),qt()):t.Fa(n,r)?dh(e,t):Vt(new N("invalid-auth-event"))}else Vt(new N("invalid-auth-event"))},vh.prototype.confirm=function(e){return e=ga(this.verificationId,e),this.a(e)};var _h="mfaInfo",bh="mfaPendingCredential";function wh(e,t,n,r){N.call(this,"multi-factor-auth-required",r,t),this.b=new yh(e,t,n),Ti(this,"resolver",this.b)}function Ih(e,t,n){if(e&&y(e.serverResponse)&&"auth/multi-factor-auth-required"===e.code)try{return new wh(t,e.serverResponse,n,e.message)}catch(r){}return null}function Th(){}function Eh(e,t,n,r){return n.Ha().then((function(n){return n={idToken:n},"undefined"!==typeof r&&(n.displayName=r),Ie(n,{phoneVerificationInfo:pa(e.a)}),$u(t,Eu,n)}))}function kh(e,t,n){return n.Ha().then((function(n){return n={mfaPendingCredential:n},Ie(n,{phoneVerificationInfo:pa(e.a)}),$u(t,ku,n)}))}function Sh(e){Ti(this,"factorId",e.fa),this.a=e}function Ch(e){if(Sh.call(this,e),this.a.fa!=va.PROVIDER_ID)throw new N("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function Ah(e,t){for(var n in dn.call(this,e),t)this[n]=t[n]}function Nh(e,t){this.a=e,this.b=[],this.c=E(this.yc,this),kn(this.a,"userReloaded",this.c);var n=[];t&&t.multiFactor&&t.multiFactor.enrolledFactors&&z(t.multiFactor.enrolledFactors,(function(e){var t=null,r={};if(e){e.uid&&(r[Oi]=e.uid),e.displayName&&(r[Ri]=e.displayName),e.enrollmentTime&&(r[Pi]=new Date(e.enrollmentTime).toISOString()),e.phoneNumber&&(r[Di]=e.phoneNumber);try{t=new Mi(r)}catch(i){}e=t}else e=null;e&&n.push(e)})),Rh(this,n)}function xh(e){var t=[];return z(e.mfaInfo||[],(function(e){(e=xi(e))&&t.push(e)})),t}function Rh(e,t){e.b=t,Ti(e,"enrolledFactors",t)}function Ph(e,t,n){if(this.h=e,this.i=t,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function Oh(e,t){return t?(e.a=e.c,e.g()):(t=e.a,e.a*=2,e.a>e.f&&(e.a=e.f),t)}function Dh(e,t){e.stop(),e.b=Kn(Oh(e,t)).then((function(){return pi()})).then((function(){return e.h()})).then((function(){Dh(e,!0)})).o((function(t){e.i(t)&&Dh(e,!1)}))}function Mh(e){this.f=e,this.b=this.a=null,this.c=Date.now()}function Lh(e,t){"undefined"===typeof t&&(e.b?(t=e.b,t=t.a-t.g):t=0),e.c=Date.now()+1e3*t}function Fh(e,t){e.b=To(t[Ls]||""),e.a=t.refreshToken,t=t.expiresIn,Lh(e,"undefined"!==typeof t?Number(t):void 0)}function jh(e,t){e.b=t.b,e.a=t.a,e.c=t.c}function Uh(e,t){return $s(e.f,t).then((function(t){return e.b=To(t.access_token),e.a=t.refresh_token,Lh(e,t.expires_in),{accessToken:e.b.toString(),refreshToken:e.a}})).o((function(t){throw"auth/user-token-expired"==t.code&&(e.a=null),t}))}function qh(e,t){this.a=e||null,this.b=t||null,Ei(this,{lastSignInTime:vi(t||null),creationTime:vi(e||null)})}function Vh(e){return new qh(e.a,e.b)}function Bh(e,t,n,r,i,o){Ei(this,{uid:e,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:t})}function Kh(e,t,n){this.N=[],this.l=e.apiKey,this.m=e.appName,this.s=e.authDomain||null;var i=r["default"].SDK_VERSION?Jr(r["default"].SDK_VERSION):null;this.a=new Ds(this.l,M(R),i),(this.u=e.emulatorConfig||null)&&Bs(this.a,this.u),this.h=new Mh(this.a),Zh(this,t[Ls]),Fh(this.h,t),Ti(this,"refreshToken",this.h.a),rf(this,n||{}),jn.call(this),this.P=!1,this.s&&ni()&&(this.b=rh(this.s,this.l,this.m,this.u)),this.W=[],this.i=null,this.D=Yh(this),this.ba=E(this.ib,this);var o=this;this.za=null,this.Pa=function(e){o.xa(e.h)},this.qa=null,this.Ba=function(e){Wh(o,e.c)},this.$=null,this.aa=[],this.Oa=function(e){zh(o,e.f)},this.ja=null,this.S=new Nh(this,n),Ti(this,"multiFactor",this.S)}function Wh(e,t){e.u=t,Bs(e.a,t),e.b&&(t=e.b,e.b=rh(e.s,e.l,e.m,e.u),e.P&&(Ql(t,e),zl(e.b,e)))}function Hh(e,t){e.qa&&Nn(e.qa,"languageCodeChanged",e.Pa),(e.qa=t)&&kn(t,"languageCodeChanged",e.Pa)}function Gh(e,t){e.$&&Nn(e.$,"emulatorConfigChanged",e.Ba),(e.$=t)&&kn(t,"emulatorConfigChanged",e.Ba)}function zh(e,t){e.aa=t,Ws(e.a,r["default"].SDK_VERSION?Jr(r["default"].SDK_VERSION,e.aa):null)}function Qh(e,t){e.ja&&Nn(e.ja,"frameworkChanged",e.Oa),(e.ja=t)&&kn(t,"frameworkChanged",e.Oa)}function $h(e){try{return r["default"].app(e.m).auth()}catch(t){throw new N("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+e.m+"'!")}}function Yh(e){return new Ph((function(){return e.I(!0)}),(function(e){return!(!e||"auth/network-request-failed"!=e.code)}),(function(){var t=e.h.c-Date.now()-3e5;return 0<t?t:0}))}function Xh(e){e.J||e.D.b||(e.D.start(),Nn(e,"tokenChanged",e.ba),kn(e,"tokenChanged",e.ba))}function Jh(e){Nn(e,"tokenChanged",e.ba),e.D.stop()}function Zh(e,t){e.Aa=t,Ti(e,"_lat",t)}function ef(e,t){te(e.W,(function(e){return e==t}))}function tf(e){for(var t=[],n=0;n<e.W.length;n++)t.push(e.W[n](e));return Wt(t).then((function(){return e}))}function nf(e){e.b&&!e.P&&(e.P=!0,zl(e.b,e))}function rf(e,t){Ei(e,{uid:t.uid,displayName:t.displayName||null,photoURL:t.photoURL||null,email:t.email||null,emailVerified:t.emailVerified||!1,phoneNumber:t.phoneNumber||null,isAnonymous:t.isAnonymous||!1,tenantId:t.tenantId||null,metadata:new qh(t.createdAt,t.lastLoginAt),providerData:[]}),e.a.b=e.tenantId}function of(){}function af(e){return qt().then((function(){if(e.J)throw new N("app-deleted")}))}function sf(e){return Y(e.providerData,(function(e){return e.providerId}))}function uf(e,t){t&&(cf(e,t.providerId),e.providerData.push(t))}function cf(e,t){te(e.providerData,(function(e){return e.providerId==t}))}function lf(e,t,n){("uid"!=t||n)&&e.hasOwnProperty(t)&&Ti(e,t,n)}function hf(e,t){e!=t&&(Ei(e,{uid:t.uid,displayName:t.displayName,photoURL:t.photoURL,email:t.email,emailVerified:t.emailVerified,phoneNumber:t.phoneNumber,isAnonymous:t.isAnonymous,tenantId:t.tenantId,providerData:[]}),t.metadata?Ti(e,"metadata",Vh(t.metadata)):Ti(e,"metadata",new qh),z(t.providerData,(function(t){uf(e,t)})),jh(e.h,t.h),Ti(e,"refreshToken",e.h.a),Rh(e.S,t.S.b))}function ff(e){return e.I().then((function(t){var n=e.isAnonymous;return pf(e,t).then((function(){return n||lf(e,"isAnonymous",!1),t}))}))}function df(e,t){t[Ls]&&e.Aa!=t[Ls]&&(Fh(e.h,t),e.dispatchEvent(new Ah("tokenChanged")),Zh(e,t[Ls]),lf(e,"refreshToken",e.h.a))}function pf(e,t){return $u(e.a,Su,{idToken:t}).then(E(e.Kc,e))}function vf(e){return(e=e.providerUserInfo)&&e.length?Y(e,(function(e){return new Bh(e.rawId,e.providerId,e.email,e.displayName,e.photoUrl,e.phoneNumber)})):[]}function gf(e,t){return ff(e).then((function(){if(Z(sf(e),t))return tf(e).then((function(){throw new N("provider-already-linked")}))}))}function mf(e,t,n){var r=ma(t);return t=No(t),ki({user:e,credential:r,additionalUserInfo:t,operationType:n})}function yf(e,t){return df(e,t),e.reload().then((function(){return e}))}function _f(e,t,n,i,o){if(!ni())return Vt(new N("operation-not-supported-in-this-environment"));if(e.i&&!o)return Vt(e.i);var a=Ao(n.providerId),s=ci(e.uid+":::"),u=null;(!oi()||Kr())&&e.s&&n.isOAuthProvider&&(u=pc(e.s,e.l,e.m,t,n,null,s,r["default"].SDK_VERSION||null,null,null,e.tenantId,e.u));var c=Lr(u,a&&a.va,a&&a.ua);return i=i().then((function(){if(wf(e),!o)return e.I().then((function(){}))})).then((function(){return Xl(e.b,c,t,n,s,!!u,e.tenantId)})).then((function(){return new Ot((function(n,r){e.na(t,null,new N("cancelled-popup-request"),e.g||null),e.f=n,e.C=r,e.g=s,e.c=eh(e.b,e,t,c,s)}))})).then((function(e){return c&&Mr(c),e?ki(e):null})).o((function(e){throw c&&Mr(c),e})),If(e,i,o)}function bf(e,t,n,r,i){if(!ni())return Vt(new N("operation-not-supported-in-this-environment"));if(e.i&&!i)return Vt(e.i);var o=null,a=ci(e.uid+":::");return r=r().then((function(){if(wf(e),!i)return e.I().then((function(){}))})).then((function(){return e.ga=a,tf(e)})).then((function(t){return e.ha&&(t=e.ha,t=t.b.set(Af,e.w(),t.a)),t})).then((function(){return Zl(e.b,t,n,a,e.tenantId)})).o((function(t){if(o=t,e.ha)return Nf(e.ha);throw o})).then((function(){if(o)throw o})),If(e,r,i)}function wf(e){if(!e.b||!e.P){if(e.b&&!e.P)throw new N("internal-error");throw new N("auth-domain-config-required")}}function If(e,t,n){var r=Tf(e,t,n);return e.N.push(r),r.oa((function(){ee(e.N,r)})),r.o((function(t){var n=null;throw t&&"auth/multi-factor-auth-required"===t.code&&(n=Ih(t.w(),$h(e),E(e.jc,e))),n||t}))}function Tf(e,t,n){return e.i&&!n?(t.cancel(),Vt(e.i)):t.o((function(t){throw!t||"auth/user-disabled"!=t.code&&"auth/user-token-expired"!=t.code||(e.i||e.dispatchEvent(new Ah("userInvalidated")),e.i=t),t}))}function Ef(e){if(!e.apiKey)return null;var t={apiKey:e.apiKey,authDomain:e.authDomain,appName:e.appName,emulatorConfig:e.emulatorConfig},n={};if(!e.stsTokenManager||!e.stsTokenManager.accessToken)return null;n[Ls]=e.stsTokenManager.accessToken,n.refreshToken=e.stsTokenManager.refreshToken||null;var r=e.stsTokenManager.expirationTime;r&&(n.expiresIn=(r-Date.now())/1e3);var i=new Kh(t,n,e);return e.providerData&&z(e.providerData,(function(e){e&&uf(i,ki(e))})),e.redirectEventId&&(i.ga=e.redirectEventId),i}function kf(e,t,n,r){var i=new Kh(e,t);return n&&(i.ha=n),r&&zh(i,r),i.reload().then((function(){return i}))}function Sf(e,t,n,r){var i=e.h,o={};return o[Ls]=i.b&&i.b.toString(),o.refreshToken=i.a,t=new Kh(t||{apiKey:e.l,authDomain:e.s,appName:e.m},o),n&&(t.ha=n),r&&zh(t,r),hf(t,e),t}function Cf(e){this.a=e,this.b=ol()}yh.prototype.Rc=function(e){var t=this;return e.tb(this.a.a,this.c).then((function(e){var n=be(t.f);return delete n[_h],delete n[bh],Ie(n,e),t.g(n)}))},C(wh,N),Th.prototype.tb=function(e,t,n){return t.type==qo?Eh(this,e,t,n):kh(this,e,t)},C(Sh,Th),C(Ch,Sh),C(Ah,dn),e=Nh.prototype,e.yc=function(e){Rh(this,xh(e.hd))},e.Sb=function(){return this.a.I().then((function(e){return new Uo(e,null)}))},e.fc=function(e,t){var n=this,r=this.a.a;return this.Sb().then((function(n){return e.tb(r,n,t)})).then((function(e){return df(n.a,e),n.a.reload()}))},e.bd=function(e){var t=this,n="string"===typeof e?e:e.uid,r=this.a.a;return this.a.I().then((function(e){return $u(r,Qu,{idToken:e,mfaEnrollmentId:n})})).then((function(e){var r=$(t.b,(function(e){return e.uid!=n}));return Rh(t,r),df(t.a,e),t.a.reload().o((function(e){if("auth/user-token-expired"!=e.code)throw e}))}))},e.w=function(){return{multiFactor:{enrolledFactors:Y(this.b,(function(e){return e.w()}))}}},Ph.prototype.start=function(){this.a=this.c,Dh(this,!0)},Ph.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},Mh.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},Mh.prototype.getToken=function(e){return e=!!e,this.b&&!this.a?Vt(new N("user-token-expired")):e||!this.b||Date.now()>this.c-3e4?this.a?Uh(this,{grant_type:"refresh_token",refresh_token:this.a}):qt(null):qt({accessToken:this.b.toString(),refreshToken:this.a})},qh.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},C(Kh,jn),Kh.prototype.xa=function(e){this.za=e,Vs(this.a,e)},Kh.prototype.la=function(){return this.za},Kh.prototype.Ga=function(){return re(this.aa)},Kh.prototype.ib=function(){this.D.b&&(this.D.stop(),this.D.start())},Ti(Kh.prototype,"providerId","firebase"),e=Kh.prototype,e.reload=function(){var e=this;return If(this,af(this).then((function(){return ff(e).then((function(){return tf(e)})).then(of)})))},e.oc=function(e){return this.I(e).then((function(e){return new mh(e)}))},e.I=function(e){var t=this;return If(this,af(this).then((function(){return t.h.getToken(e)})).then((function(e){if(!e)throw new N("internal-error");return e.accessToken!=t.Aa&&(Zh(t,e.accessToken),t.dispatchEvent(new Ah("tokenChanged"))),lf(t,"refreshToken",e.refreshToken),e.accessToken})))},e.Kc=function(e){if(e=e.users,!e||!e.length)throw new N("internal-error");e=e[0],rf(this,{uid:e.localId,displayName:e.displayName,photoURL:e.photoUrl,email:e.email,emailVerified:!!e.emailVerified,phoneNumber:e.phoneNumber,lastLoginAt:e.lastLoginAt,createdAt:e.createdAt,tenantId:e.tenantId});for(var t=vf(e),n=0;n<t.length;n++)uf(this,t[n]);lf(this,"isAnonymous",!(this.email&&e.passwordHash)&&!(this.providerData&&this.providerData.length)),this.dispatchEvent(new Ah("userReloaded",{hd:e}))},e.Lc=function(e){return wi("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.ub(e)},e.ub=function(e){var t=this,n=null;return If(this,e.c(this.a,this.uid).then((function(e){return df(t,e),n=mf(t,e,"reauthenticate"),t.i=null,t.reload()})).then((function(){return n})),!0)},e.Cc=function(e){return wi("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.rb(e)},e.rb=function(e){var t=this,n=null;return If(this,gf(this,e.providerId).then((function(){return t.I()})).then((function(n){return e.b(t.a,n)})).then((function(e){return n=mf(t,e,"link"),yf(t,e)})).then((function(){return n})))},e.Dc=function(e,t){var n=this;return If(this,gf(this,"phone").then((function(){return gh($h(n),e,t,E(n.rb,n))})))},e.Mc=function(e,t){var n=this;return If(this,qt().then((function(){return gh($h(n),e,t,E(n.ub,n))})),!0)},e.Cb=function(e){var t=this;return If(this,this.I().then((function(n){return t.a.Cb(n,e)})).then((function(e){return df(t,e),t.reload()})))},e.ed=function(e){var t=this;return If(this,this.I().then((function(n){return e.b(t.a,n)})).then((function(e){return df(t,e),t.reload()})))},e.Db=function(e){var t=this;return If(this,this.I().then((function(n){return t.a.Db(n,e)})).then((function(e){return df(t,e),t.reload()})))},e.Eb=function(e){if(void 0===e.displayName&&void 0===e.photoURL)return af(this);var t=this;return If(this,this.I().then((function(n){return t.a.Eb(n,{displayName:e.displayName,photoUrl:e.photoURL})})).then((function(e){return df(t,e),lf(t,"displayName",e.displayName||null),lf(t,"photoURL",e.photoUrl||null),z(t.providerData,(function(e){"password"===e.providerId&&(Ti(e,"displayName",t.displayName),Ti(e,"photoURL",t.photoURL))})),tf(t)})).then(of))},e.cd=function(e){var t=this;return If(this,ff(this).then((function(n){return Z(sf(t),e)?uu(t.a,n,[e]).then((function(e){var n={};return z(e.providerUserInfo||[],(function(e){n[e.providerId]=!0})),z(sf(t),(function(e){n[e]||cf(t,e)})),n[va.PROVIDER_ID]||Ti(t,"phoneNumber",null),tf(t)})):tf(t).then((function(){throw new N("no-such-provider")}))})))},e.delete=function(){var e=this;return If(this,this.I().then((function(t){return $u(e.a,bu,{idToken:t})})).then((function(){e.dispatchEvent(new Ah("userDeleted"))}))).then((function(){for(var t=0;t<e.N.length;t++)e.N[t].cancel("app-deleted");Hh(e,null),Gh(e,null),Qh(e,null),e.N=[],e.J=!0,Jh(e),Ti(e,"refreshToken",null),e.b&&Ql(e.b,e)}))},e.Gb=function(e,t){return!!("linkViaPopup"==e&&(this.g||null)==t&&this.f||"reauthViaPopup"==e&&(this.g||null)==t&&this.f||"linkViaRedirect"==e&&(this.ga||null)==t||"reauthViaRedirect"==e&&(this.ga||null)==t)},e.na=function(e,t,n,r){"linkViaPopup"!=e&&"reauthViaPopup"!=e||r!=(this.g||null)||(n&&this.C?this.C(n):t&&!n&&this.f&&this.f(t),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},e.Fa=function(e,t){return"linkViaPopup"==e&&t==(this.g||null)?E(this.Lb,this):"reauthViaPopup"==e&&t==(this.g||null)?E(this.Mb,this):"linkViaRedirect"==e&&(this.ga||null)==t?E(this.Lb,this):"reauthViaRedirect"==e&&(this.ga||null)==t?E(this.Mb,this):null},e.Ec=function(e){var t=this;return _f(this,"linkViaPopup",e,(function(){return gf(t,e.providerId).then((function(){return tf(t)}))}),!1)},e.Nc=function(e){return _f(this,"reauthViaPopup",e,(function(){return qt()}),!0)},e.Fc=function(e){var t=this;return bf(this,"linkViaRedirect",e,(function(){return gf(t,e.providerId)}),!1)},e.Oc=function(e){return bf(this,"reauthViaRedirect",e,(function(){return qt()}),!0)},e.Lb=function(e,t,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return n=this.I().then((function(n){return du(i.a,{requestUri:e,postBody:r,sessionId:t,idToken:n})})).then((function(e){return o=mf(i,e,"link"),yf(i,e)})).then((function(){return o})),If(this,n)},e.Mb=function(e,t,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null,a=qt().then((function(){return Ko(pu(i.a,{requestUri:e,sessionId:t,postBody:r,tenantId:n}),i.uid)})).then((function(e){return o=mf(i,e,"reauthenticate"),df(i,e),i.i=null,i.reload()})).then((function(){return o}));return If(this,a,!0)},e.vb=function(e){var t=this,n=null;return If(this,this.I().then((function(t){return n=t,"undefined"===typeof e||_e(e)?{}:go(new oo(e))})).then((function(e){return t.a.vb(n,e)})).then((function(e){if(t.email!=e)return t.reload()})).then((function(){})))},e.Fb=function(e,t){var n=this,r=null;return If(this,this.I().then((function(e){return r=e,"undefined"===typeof t||_e(t)?{}:go(new oo(t))})).then((function(t){return n.a.Fb(r,e,t)})).then((function(e){if(n.email!=e)return n.reload()})).then((function(){})))},e.jc=function(e){var t=null,n=this;return e=Ko(qt(e),n.uid).then((function(e){return t=mf(n,e,"reauthenticate"),df(n,e),n.i=null,n.reload()})).then((function(){return t})),If(this,e,!0)},e.toJSON=function(){return this.w()},e.w=function(){var e={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.h.w(),redirectEventId:this.ga||null};return this.metadata&&Ie(e,this.metadata.w()),z(this.providerData,(function(t){e.providerData.push(Si(t))})),Ie(e,this.S.w()),e};var Af={name:"redirectUser",F:"session"};function Nf(e){return cl(e.b,Af,e.a)}function xf(e,t){return e.b.get(Af,e.a).then((function(e){return e&&t&&(e.authDomain=t),Ef(e||{})}))}function Rf(e){this.a=e,this.b=ol(),this.c=null,this.f=Of(this),this.b.addListener(Mf("local"),this.a,E(this.g,this))}function Pf(e,t){var n,r=[];for(n in nl)nl[n]!==t&&r.push(cl(e.b,Mf(nl[n]),e.a));return r.push(cl(e.b,Df,e.a)),Kt(r)}function Of(e){var t=Mf("local"),n=Mf("session"),r=Mf("none");return ul(e.b,t,e.a).then((function(){return e.b.get(n,e.a)})).then((function(i){return i?n:e.b.get(r,e.a).then((function(n){return n?r:e.b.get(t,e.a).then((function(n){return n?t:e.b.get(Df,e.a).then((function(e){return e?Mf(e):t}))}))}))})).then((function(t){return e.c=t,Pf(e,t.F)})).o((function(){e.c||(e.c=t)}))}Rf.prototype.g=function(){var e=this,t=Mf("local");qf(this,(function(){return qt().then((function(){return e.c&&"local"!=e.c.F?e.b.get(t,e.a):null})).then((function(n){if(n)return Pf(e,"local").then((function(){e.c=t}))}))}))};var Df={name:"persistence",F:"session"};function Mf(e){return{name:"authUser",F:e}}function Lf(e){return qf(e,(function(){return e.b.set(Df,e.c.F,e.a)}))}function Ff(e,t){return qf(e,(function(){return e.b.set(e.c,t.w(),e.a)}))}function jf(e){return qf(e,(function(){return cl(e.b,e.c,e.a)}))}function Uf(e,t,n){return qf(e,(function(){return e.b.get(e.c,e.a).then((function(e){return e&&t&&(e.authDomain=t),e&&n&&(e.emulatorConfig=n),Ef(e||{})}))}))}function qf(e,t){return e.f=e.f.then(t,t),e.f}function Vf(e){if(this.l=!1,Ti(this,"settings",new ph),Ti(this,"app",e),!nd(this).options||!nd(this).options.apiKey)throw new N("invalid-api-key");e=r["default"].SDK_VERSION?Jr(r["default"].SDK_VERSION):null,this.a=new Ds(nd(this).options&&nd(this).options.apiKey,M(R),e),this.P=[],this.s=[],this.N=[],this.Pa=r["default"].INTERNAL.createSubscribe(E(this.zc,this)),this.W=void 0,this.ib=r["default"].INTERNAL.createSubscribe(E(this.Ac,this)),Xf(this,null),this.i=new Rf(nd(this).options.apiKey+":"+nd(this).name),this.D=new Cf(nd(this).options.apiKey+":"+nd(this).name),this.$=sd(this,Zf(this)),this.h=sd(this,ed(this)),this.ba=!1,this.ja=E(this.Zc,this),this.Ba=E(this.da,this),this.qa=E(this.mc,this),this.za=E(this.wc,this),this.Aa=E(this.xc,this),this.b=null,Qf(this),this.INTERNAL={},this.INTERNAL["delete"]=E(this.delete,this),this.INTERNAL.logFramework=E(this.Gc,this),this.u=0,jn.call(this),Gf(this),this.J=[],this.R=null}function Bf(e){dn.call(this,"languageCodeChanged"),this.h=e}function Kf(e){dn.call(this,"emulatorConfigChanged"),this.c=e}function Wf(e){dn.call(this,"frameworkChanged"),this.f=e}function Hf(e){"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),l.document&&!e&&qr().then((function(){var e=l.document.createElement("div");e.innerText="Running in emulator mode. Do not use with production credentials.",e.style.position="fixed",e.style.width="100%",e.style.backgroundColor="#ffffff",e.style.border=".1em solid #000000",e.style.color="#b50000",e.style.bottom="0px",e.style.left="0px",e.style.margin="0px",e.style.zIndex=1e4,e.style.textAlign="center",e.classList.add("firebase-emulator-warning"),l.document.body.appendChild(e)}))}function Gf(e){Object.defineProperty(e,"lc",{get:function(){return this.la()},set:function(e){this.xa(e)},enumerable:!1}),e.aa=null,Object.defineProperty(e,"ti",{get:function(){return this.T()},set:function(e){this.zb(e)},enumerable:!1}),e.S=null,Object.defineProperty(e,"emulatorConfig",{get:function(){if(this.R){var e=ir(this.R.url);e=ki({protocol:e.c,host:e.a,port:e.g,options:ki({disableWarnings:this.R.ec})})}else e=null;return e},enumerable:!1})}function zf(e){return e.Oa||Vt(new N("auth-domain-config-required"))}function Qf(e){var t=nd(e).options.authDomain,n=nd(e).options.apiKey;t&&ni()&&(e.Oa=e.$.then((function(){if(!e.l){if(e.b=rh(t,n,nd(e).name,e.R),zl(e.b,e),rd(e)&&nf(rd(e)),e.m){nf(e.m);var r=e.m;r.xa(e.la()),Hh(r,e),r=e.m,zh(r,e.J),Qh(r,e),r=e.m,Wh(r,e.R),Gh(r,e),e.m=null}return e.b}})))}function $f(e){if(!ni())return Vt(new N("operation-not-supported-in-this-environment"));var t=zf(e).then((function(){return e.b.ra()})).then((function(e){return e?ki(e):null}));return sd(e,t)}function Yf(e,t){var n={};return n.apiKey=nd(e).options.apiKey,n.authDomain=nd(e).options.authDomain,n.appName=nd(e).name,e.R&&(n.emulatorConfig=e.R),e.$.then((function(){return kf(n,t,e.D,e.Ga())})).then((function(t){return rd(e)&&t.uid==rd(e).uid?(hf(rd(e),t),e.da(t)):(Xf(e,t),nf(t),e.da(t))})).then((function(){od(e)}))}function Xf(e,t){rd(e)&&(ef(rd(e),e.Ba),Nn(rd(e),"tokenChanged",e.qa),Nn(rd(e),"userDeleted",e.za),Nn(rd(e),"userInvalidated",e.Aa),Jh(rd(e))),t&&(t.W.push(e.Ba),kn(t,"tokenChanged",e.qa),kn(t,"userDeleted",e.za),kn(t,"userInvalidated",e.Aa),0<e.u&&Xh(t)),Ti(e,"currentUser",t),t&&(t.xa(e.la()),Hh(t,e),zh(t,e.J),Qh(t,e),Wh(t,e.R),Gh(t,e))}function Jf(e){var t=xf(e.D,nd(e).options.authDomain).then((function(t){return(e.m=t)&&(t.ha=e.D),Nf(e.D)}));return sd(e,t)}function Zf(e){var t=nd(e).options.authDomain,n=Jf(e).then((function(){return Uf(e.i,t,e.R)})).then((function(t){return t?(t.ha=e.D,e.m&&(e.m.ga||null)==(t.ga||null)?t:t.reload().then((function(){return Ff(e.i,t).then((function(){return t}))})).o((function(n){return"auth/network-request-failed"==n.code?t:jf(e.i)}))):null})).then((function(t){Xf(e,t||null)}));return sd(e,n)}function ed(e){return e.$.then((function(){return $f(e)})).o((function(){})).then((function(){if(!e.l)return e.ja()})).o((function(){})).then((function(){if(!e.l){e.ba=!0;var t=e.i;t.b.addListener(Mf("local"),t.a,e.ja)}}))}function td(e,t){var n=null,r=null;return sd(e,t.then((function(t){return n=ma(t),r=No(t),Yf(e,t)}),(function(t){var n=null;throw t&&"auth/multi-factor-auth-required"===t.code&&(n=Ih(t.w(),e,E(e.kc,e))),n||t})).then((function(){return ki({user:rd(e),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function nd(e){return e.app}function rd(e){return e.currentUser}function id(e){return rd(e)&&rd(e)._lat||null}function od(e){if(e.ba){for(var t=0;t<e.s.length;t++)e.s[t]&&e.s[t](id(e));if(e.W!==e.getUid()&&e.N.length)for(e.W=e.getUid(),t=0;t<e.N.length;t++)e.N[t]&&e.N[t](id(e))}}function ad(e,t){e.N.push(t),sd(e,e.h.then((function(){!e.l&&Z(e.N,t)&&e.W!==e.getUid()&&(e.W=e.getUid(),t(id(e)))})))}function sd(e,t){return e.P.push(t),t.oa((function(){ee(e.P,t)})),t}function ud(){}function cd(){this.a={},this.b=1e12}Rf.prototype.yb=function(e){var t=null,n=this;return rl(e),qf(this,(function(){return e!=n.c.F?n.b.get(n.c,n.a).then((function(r){return t=r,Pf(n,e)})).then((function(){if(n.c=Mf(e),t)return n.b.set(n.c,t,n.a)})):qt()}))},C(Vf,jn),C(Bf,dn),C(Kf,dn),C(Wf,dn),e=Vf.prototype,e.yb=function(e){return e=this.i.yb(e),sd(this,e)},e.xa=function(e){this.aa===e||this.l||(this.aa=e,Vs(this.a,this.aa),this.dispatchEvent(new Bf(this.la())))},e.la=function(){return this.aa},e.fd=function(){var e=l.navigator;this.xa(e&&(e.languages&&e.languages[0]||e.language||e.userLanguage)||null)},e.gd=function(e,t){if(!this.R){if(!/^https?:\/\//.test(e))throw new N("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");t=!!t&&!!t.disableWarnings,Hf(t),this.R={url:e,ec:t},this.settings.jb=!0,Bs(this.a,this.R),this.dispatchEvent(new Kf(this.R))}},e.Gc=function(e){this.J.push(e),Ws(this.a,r["default"].SDK_VERSION?Jr(r["default"].SDK_VERSION,this.J):null),this.dispatchEvent(new Wf(this.J))},e.Ga=function(){return re(this.J)},e.zb=function(e){this.S===e||this.l||(this.S=e,this.a.b=this.S)},e.T=function(){return this.S},e.toJSON=function(){return{apiKey:nd(this).options.apiKey,authDomain:nd(this).options.authDomain,appName:nd(this).name,currentUser:rd(this)&&rd(this).w()}},e.Gb=function(e,t){switch(e){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==t&&!!this.f;default:return!1}},e.na=function(e,t,n,r){"signInViaPopup"==e&&this.g==r&&(n&&this.C?this.C(n):t&&!n&&this.f&&this.f(t),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},e.Fa=function(e,t){return"signInViaRedirect"==e||"signInViaPopup"==e&&this.g==t&&this.f?E(this.ic,this):null},e.ic=function(e,t,n,r){var i=this,o={requestUri:e,postBody:r,sessionId:t,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then((function(){return td(i,fu(i.a,o))}))},e.Xc=function(e){if(!ni())return Vt(new N("operation-not-supported-in-this-environment"));var t=this,n=Ao(e.providerId),i=ci(),o=null;(!oi()||Kr())&&nd(this).options.authDomain&&e.isOAuthProvider&&(o=pc(nd(this).options.authDomain,nd(this).options.apiKey,nd(this).name,"signInViaPopup",e,null,i,r["default"].SDK_VERSION||null,null,null,this.T(),this.R));var a=Lr(o,n&&n.va,n&&n.ua);return n=zf(this).then((function(n){return Xl(n,a,"signInViaPopup",e,i,!!o,t.T())})).then((function(){return new Ot((function(e,n){t.na("signInViaPopup",null,new N("cancelled-popup-request"),t.g),t.f=e,t.C=n,t.g=i,t.c=eh(t.b,t,"signInViaPopup",a,i)}))})).then((function(e){return a&&Mr(a),e?ki(e):null})).o((function(e){throw a&&Mr(a),e})),sd(this,n)},e.Yc=function(e){if(!ni())return Vt(new N("operation-not-supported-in-this-environment"));var t=this,n=zf(this).then((function(){return Lf(t.i)})).then((function(){return Zl(t.b,"signInViaRedirect",e,void 0,t.T())}));return sd(this,n)},e.ra=function(){var e=this;return $f(this).then((function(t){return e.b&&ah(e.b.b),t})).o((function(t){throw e.b&&ah(e.b.b),t}))},e.dd=function(e){if(!e)return Vt(new N("null-user"));if(this.S!=e.tenantId)return Vt(new N("tenant-id-mismatch"));var t=this,n={};n.apiKey=nd(this).options.apiKey,n.authDomain=nd(this).options.authDomain,n.appName=nd(this).name;var r=Sf(e,n,t.D,t.Ga());return sd(this,this.h.then((function(){if(nd(t).options.apiKey!=e.l)return r.reload()})).then((function(){return rd(t)&&e.uid==rd(t).uid?(hf(rd(t),e),t.da(e)):(Xf(t,r),nf(r),t.da(r))})).then((function(){od(t)})))},e.Bb=function(){var e=this,t=this.h.then((function(){return e.b&&ah(e.b.b),rd(e)?(Xf(e,null),jf(e.i).then((function(){od(e)}))):qt()}));return sd(this,t)},e.Zc=function(){var e=this;return Uf(this.i,nd(this).options.authDomain).then((function(t){if(!e.l){var n;if(n=rd(e)&&t){n=rd(e).uid;var r=t.uid;n=void 0!==n&&null!==n&&""!==n&&void 0!==r&&null!==r&&""!==r&&n==r}if(n)return hf(rd(e),t),rd(e).I();(rd(e)||t)&&(Xf(e,t),t&&(nf(t),t.ha=e.D),e.b&&zl(e.b,e),od(e))}}))},e.da=function(e){return Ff(this.i,e)},e.mc=function(){od(this),this.da(rd(this))},e.wc=function(){this.Bb()},e.xc=function(){this.Bb()},e.kc=function(e){var t=this;return this.h.then((function(){return td(t,qt(e))}))},e.zc=function(e){var t=this;this.addAuthTokenListener((function(){e.next(rd(t))}))},e.Ac=function(e){var t=this;ad(this,(function(){e.next(rd(t))}))},e.Ic=function(e,t,n){var r=this;return this.ba&&Promise.resolve().then((function(){"function"===typeof e?e(rd(r)):"function"===typeof e.next&&e.next(rd(r))})),this.Pa(e,t,n)},e.Hc=function(e,t,n){var r=this;return this.ba&&Promise.resolve().then((function(){r.W=r.getUid(),"function"===typeof e?e(rd(r)):"function"===typeof e.next&&e.next(rd(r))})),this.ib(e,t,n)},e.nc=function(e){var t=this,n=this.h.then((function(){return rd(t)?rd(t).I(e).then((function(e){return{accessToken:e}})):null}));return sd(this,n)},e.Tc=function(e){var t=this;return this.h.then((function(){return td(t,$u(t.a,Ku,{token:e}))})).then((function(e){var n=e.user;return lf(n,"isAnonymous",!1),t.da(n),e}))},e.Uc=function(e,t){var n=this;return this.h.then((function(){return td(n,$u(n.a,Wu,{email:e,password:t}))}))},e.dc=function(e,t){var n=this;return this.h.then((function(){return td(n,$u(n.a,yu,{email:e,password:t}))}))},e.ab=function(e){var t=this;return this.h.then((function(){return td(t,e.ka(t.a))}))},e.Sc=function(e){return wi("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.ab(e)},e.Ab=function(){var e=this;return this.h.then((function(){var t=rd(e);if(t&&t.isAnonymous){var n=ki({providerId:null,isNewUser:!1});return ki({user:t,credential:null,additionalUserInfo:n,operationType:"signIn"})}return td(e,e.a.Ab()).then((function(t){var n=t.user;return lf(n,"isAnonymous",!0),e.da(n),t}))}))},e.getUid=function(){return rd(this)&&rd(this).uid||null},e.cc=function(e){this.addAuthTokenListener(e),this.u++,0<this.u&&rd(this)&&Xh(rd(this))},e.Pc=function(e){var t=this;z(this.s,(function(n){n==e&&t.u--})),0>this.u&&(this.u=0),0==this.u&&rd(this)&&Jh(rd(this)),this.removeAuthTokenListener(e)},e.addAuthTokenListener=function(e){var t=this;this.s.push(e),sd(this,this.h.then((function(){t.l||Z(t.s,e)&&e(id(t))})))},e.removeAuthTokenListener=function(e){te(this.s,(function(t){return t==e}))},e.delete=function(){this.l=!0;for(var e=0;e<this.P.length;e++)this.P[e].cancel("app-deleted");return this.P=[],this.i&&(e=this.i,e.b.removeListener(Mf("local"),e.a,this.ja)),this.b&&(Ql(this.b,this),ah(this.b.b)),Promise.resolve()},e.hc=function(e){return sd(this,Zs(this.a,e))},e.Bc=function(e){return!!ha(e)},e.xb=function(e,t){var n=this;return sd(this,qt().then((function(){var e=new oo(t);if(!e.c)throw new N("argument-error",uo+" must be true when sending sign in link to email");return go(e)})).then((function(t){return n.a.xb(e,t)})).then((function(){})))},e.jd=function(e){return this.Sa(e).then((function(e){return e.data.email}))},e.ob=function(e,t){return sd(this,this.a.ob(e,t).then((function(){})))},e.Sa=function(e){return sd(this,this.a.Sa(e).then((function(e){return new Li(e)})))},e.kb=function(e){return sd(this,this.a.kb(e).then((function(){})))},e.wb=function(e,t){var n=this;return sd(this,qt().then((function(){return"undefined"===typeof t||_e(t)?{}:go(new oo(t))})).then((function(t){return n.a.wb(e,t)})).then((function(){})))},e.Wc=function(e,t){return sd(this,gh(this,e,t,E(this.ab,this)))},e.Vc=function(e,t){var n=this;return sd(this,qt().then((function(){var r=t||xr(),i=la(e,r);if(r=ha(r),!r)throw new N("argument-error","Invalid email link!");if(r.tenantId!==n.T())throw new N("tenant-id-mismatch");return n.ab(i)})))},ud.prototype.render=function(){},ud.prototype.reset=function(){},ud.prototype.getResponse=function(){},ud.prototype.execute=function(){};var ld=null;function hd(e,t){return(t=fd(t))&&e.a[t]||null}function fd(e){return(e="undefined"===typeof e?1e12:e)?e.toString():null}function dd(e,t){this.g=!1,this.c=t,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=yt(e);var n=this;this.i=function(){n.execute()},this.h?this.execute():kn(this.f,"click",this.i)}function pd(e){if(e.g)throw Error("reCAPTCHA mock was already deleted!")}function vd(){}function gd(){}cd.prototype.render=function(e,t){return this.a[this.b.toString()]=new dd(e,t),this.b++},cd.prototype.reset=function(e){var t=hd(this,e);e=fd(e),t&&e&&(t.delete(),delete this.a[e])},cd.prototype.getResponse=function(e){return(e=hd(this,e))?e.getResponse():null},cd.prototype.execute=function(e){(e=hd(this,e))&&e.execute()},dd.prototype.getResponse=function(){return pd(this),this.b},dd.prototype.execute=function(){pd(this);var e=this;this.a||(this.a=setTimeout((function(){e.b=zr();var t=e.c.callback,n=e.c["expired-callback"];if(t)try{t(e.b)}catch(r){}e.a=setTimeout((function(){if(e.a=null,e.b=null,n)try{n()}catch(r){}e.h&&e.execute()}),6e4)}),500))},dd.prototype.delete=function(){pd(this),this.g=!0,clearTimeout(this.a),this.a=null,Nn(this.f,"click",this.i)},Ti(vd,"FACTOR_ID","phone"),gd.prototype.g=function(){return ld||(ld=new cd),qt(ld)},gd.prototype.c=function(){};var md=null;function yd(){this.b=l.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var _d=new Ee(Ae,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),bd=new fi(3e4,6e4);yd.prototype.g=function(e){var t=this;return new Ot((function(n,r){var i=setTimeout((function(){r(new N("network-request-failed"))}),bd.get());if(!l.grecaptcha||e!==t.f&&!t.b){l[t.a]=function(){if(l.grecaptcha){t.f=e;var o=l.grecaptcha.render;l.grecaptcha.render=function(e,n){return e=o(e,n),t.b++,e},clearTimeout(i),n(l.grecaptcha)}else clearTimeout(i),r(new N("internal-error"));delete l[t.a]};var o=Pe(_d,{onload:t.a,hl:e||""});qt(Ss(o)).o((function(){clearTimeout(i),r(new N("internal-error","Unable to load external reCAPTCHA dependencies!"))}))}else clearTimeout(i),n(l.grecaptcha)}))},yd.prototype.c=function(){this.b--};var wd=null;function Id(e,t,n,r,i,o,a){if(Ti(this,"type","recaptcha"),this.c=this.f=null,this.J=!1,this.v=t,this.g=null,a?(md||(md=new gd),a=md):(wd||(wd=new yd),a=wd),this.m=a,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[kd])throw new N("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Sd],!l.document)throw new N("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!yt(t)||!this.i&&yt(t).hasChildNodes())throw new N("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new Ds(e,o||null,i||null),this.u=r||function(){return null};var s=this;this.l=[];var u=this.a[Td];this.a[Td]=function(e){if(Cd(s,e),"function"===typeof u)u(e);else if("string"===typeof u){var t=ei(u,l);"function"===typeof t&&t(e)}};var c=this.a[Ed];this.a[Ed]=function(){if(Cd(s,null),"function"===typeof c)c();else if("string"===typeof c){var e=ei(c,l);"function"===typeof e&&e()}}}var Td="callback",Ed="expired-callback",kd="sitekey",Sd="size";function Cd(e,t){for(var n=0;n<e.l.length;n++)try{e.l[n](t)}catch(r){}}function Ad(e,t){te(e.l,(function(e){return e==t}))}function Nd(e,t){return e.h.push(t),t.oa((function(){ee(e.h,t)})),t}function xd(e){if(e.J)throw new N("internal-error","RecaptchaVerifier instance has been destroyed.")}function Rd(e,t,n){var i=!1;try{this.b=n||r["default"].app()}catch(s){throw new N("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new N("invalid-api-key");n=this.b.options.apiKey;var o=this,a=null;try{a=this.b.auth().Ga()}catch(s){}try{i=this.b.auth().settings.appVerificationDisabledForTesting}catch(s){}a=r["default"].SDK_VERSION?Jr(r["default"].SDK_VERSION,a):null,Id.call(this,n,e,t,(function(){try{var e=o.b.auth().la()}catch(t){e=null}return e}),a,M(R),i)}function Pd(e,t,n,r){e:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,a=0;a<t.length;a++)if(t[a].optional)o=!0;else{if(o)throw new N("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=t.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=t[i].optional&&void 0===n[i],!t[i].M(n[i])&&!o){if(t=t[i],0>i||i>=Od.length)throw new N("internal-error","Argument validator received an unsupported number of arguments.");n=Od[i],r=(r?"":n+" argument ")+(t.name?'"'+t.name+'" ':"")+"must be "+t.K+".";break e}r=null}}if(r)throw new N("argument-error",e+" failed: "+r)}e=Id.prototype,e.Ia=function(){var e=this;return this.f?this.f:this.f=Nd(this,qt().then((function(){if(ri()&&!Wr())return qr();throw new N("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return e.m.g(e.u())})).then((function(t){return e.g=t,$u(e.s,Pu,{})})).then((function(t){e.a[kd]=t.recaptchaSiteKey})).o((function(t){throw e.f=null,t})))},e.render=function(){xd(this);var e=this;return Nd(this,this.Ia().then((function(){if(null===e.c){var t=e.v;if(!e.i){var n=yt(t);t=Tt("DIV"),n.appendChild(t)}e.c=e.g.render(t,e.a)}return e.c})))},e.verify=function(){xd(this);var e=this;return Nd(this,this.render().then((function(t){return new Ot((function(n){var r=e.g.getResponse(t);if(r)n(r);else{var i=function(t){t&&(Ad(e,i),n(t))};e.l.push(i),e.i&&e.g.execute(e.c)}}))})))},e.reset=function(){xd(this),null!==this.c&&this.g.reset(this.c)},e.clear=function(){xd(this),this.J=!0,this.m.c();for(var e=0;e<this.h.length;e++)this.h[e].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){e=yt(this.v);for(var t;t=e.firstChild;)e.removeChild(t)}},C(Rd,Id);var Od="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Dd(e,t){return{name:e||"",K:"a valid string",optional:!!t,M:function(e){return"string"===typeof e}}}function Md(e,t){return{name:e||"",K:"a boolean",optional:!!t,M:function(e){return"boolean"===typeof e}}}function Ld(e,t){return{name:e||"",K:"a valid object",optional:!!t,M:y}}function Fd(e,t){return{name:e||"",K:"a function",optional:!!t,M:function(e){return"function"===typeof e}}}function jd(e,t){return{name:e||"",K:"null",optional:!!t,M:function(e){return null===e}}}function Ud(){return{name:"",K:"an HTML element",optional:!1,M:function(e){return!!(e&&e instanceof Element)}}}function qd(){return{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(e){return!!(e&&e instanceof Vf)}}}function Vd(){return{name:"app",K:"an instance of Firebase App",optional:!0,M:function(e){return!!(e&&e instanceof r["default"].app.App)}}}function Bd(e){return{name:e?e+"Credential":"credential",K:e?"a valid "+e+" credential":"a valid credential",optional:!1,M:function(t){if(!t)return!1;var n=!e||t.providerId===e;return!(!t.ka||!n)}}}function Kd(){return{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(e){return!!e&&!!e.tb}}}function Wd(){return{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}}function Hd(e,t){return y(e)&&"string"===typeof e.type&&e.type===t&&"function"===typeof e.Ha}function Gd(e){return y(e)&&"string"===typeof e.uid}function zd(){return{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(e){return!(!e||"string"!==typeof e.type||"function"!==typeof e.verify)}}}function Qd(e,t,n,r){return{name:n||"",K:e.K+" or "+t.K,optional:!!r,M:function(n){return e.M(n)||t.M(n)}}}function $d(e,t){for(var n in t){var r=t[n].name;e[r]=Jd(r,e[n],t[n].j)}}function Yd(e,t){for(var n in t){var r=t[n].name;r!==n&&Object.defineProperty(e,r,{get:k((function(e){return this[e]}),n),set:k((function(e,t,n,r){Pd(e,[n],[r],!0),this[t]=r}),r,n,t[n].lb),enumerable:!0})}}function Xd(e,t,n,r){e[t]=Jd(t,n,r)}function Jd(e,t,n){function r(){var e=Array.prototype.slice.call(arguments);return Pd(o,n,e),t.apply(this,e)}if(!n)return t;var i,o=Zd(e);for(i in t)r[i]=t[i];for(i in t.prototype)r.prototype[i]=t.prototype[i];return r}function Zd(e){return e=e.split("."),e[e.length-1]}$d(Vf.prototype,{kb:{name:"applyActionCode",j:[Dd("code")]},Sa:{name:"checkActionCode",j:[Dd("code")]},ob:{name:"confirmPasswordReset",j:[Dd("code"),Dd("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[Dd("email"),Dd("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[Dd("email")]},ra:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[Dd("emailLink")]},Hc:{name:"onAuthStateChanged",j:[Qd(Ld(),Fd(),"nextOrObserver"),Fd("opt_error",!0),Fd("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[Qd(Ld(),Fd(),"nextOrObserver"),Fd("opt_error",!0),Fd("opt_completed",!0)]},wb:{name:"sendPasswordResetEmail",j:[Dd("email"),Qd(Ld("opt_actionCodeSettings",!0),jd(null,!0),"opt_actionCodeSettings",!0)]},xb:{name:"sendSignInLinkToEmail",j:[Dd("email"),Ld("actionCodeSettings")]},yb:{name:"setPersistence",j:[Dd("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[Bd()]},Ab:{name:"signInAnonymously",j:[]},ab:{name:"signInWithCredential",j:[Bd()]},Tc:{name:"signInWithCustomToken",j:[Dd("token")]},Uc:{name:"signInWithEmailAndPassword",j:[Dd("email"),Dd("password")]},Vc:{name:"signInWithEmailLink",j:[Dd("email"),Dd("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[Dd("phoneNumber"),zd()]},Xc:{name:"signInWithPopup",j:[Wd()]},Yc:{name:"signInWithRedirect",j:[Wd()]},dd:{name:"updateCurrentUser",j:[Qd(function(e){return{name:"user",K:"an instance of Firebase User",optional:!!e,M:function(e){return!!(e&&e instanceof Kh)}}}(),jd(),"user")]},Bb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Dd(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[Dd("url"),Ld("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[Dd("code")]}}),Yd(Vf.prototype,{lc:{name:"languageCode",lb:Qd(Dd(),jd(),"languageCode")},ti:{name:"tenantId",lb:Qd(Dd(),jd(),"tenantId")}}),Vf.Persistence=nl,Vf.Persistence.LOCAL="local",Vf.Persistence.SESSION="session",Vf.Persistence.NONE="none",$d(Kh.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[Md("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Md("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[Bd()]},rb:{name:"linkWithCredential",j:[Bd()]},Dc:{name:"linkWithPhoneNumber",j:[Dd("phoneNumber"),zd()]},Ec:{name:"linkWithPopup",j:[Wd()]},Fc:{name:"linkWithRedirect",j:[Wd()]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Bd()]},ub:{name:"reauthenticateWithCredential",j:[Bd()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[Dd("phoneNumber"),zd()]},Nc:{name:"reauthenticateWithPopup",j:[Wd()]},Oc:{name:"reauthenticateWithRedirect",j:[Wd()]},reload:{name:"reload",j:[]},vb:{name:"sendEmailVerification",j:[Qd(Ld("opt_actionCodeSettings",!0),jd(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Dd(null,!0)]},cd:{name:"unlink",j:[Dd("provider")]},Cb:{name:"updateEmail",j:[Dd("email")]},Db:{name:"updatePassword",j:[Dd("password")]},ed:{name:"updatePhoneNumber",j:[Bd("phone")]},Eb:{name:"updateProfile",j:[Ld("profile")]},Fb:{name:"verifyBeforeUpdateEmail",j:[Dd("email"),Qd(Ld("opt_actionCodeSettings",!0),jd(null,!0),"opt_actionCodeSettings",!0)]}}),$d(cd.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),$d(ud.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),$d(Ot.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),Yd(ph.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",lb:Md("appVerificationDisabledForTesting")}}),$d(vh.prototype,{confirm:{name:"confirm",j:[Dd("verificationCode")]}}),Xd(Bo,"fromJSON",(function(e){e="string"===typeof e?JSON.parse(e):e;for(var t,n=[$o,ua,da,Go],r=0;r<n.length;r++)if(t=n[r](e))return t;return null}),[Qd(Dd(),Ld(),"json")]),Xd(ca,"credential",(function(e,t){return new sa(e,t)}),[Dd("email"),Dd("password")]),$d(sa.prototype,{w:{name:"toJSON",j:[Dd(null,!0)]}}),$d(Zo.prototype,{Ca:{name:"addScope",j:[Dd("scope")]},Ka:{name:"setCustomParameters",j:[Ld("customOAuthParameters")]}}),Xd(Zo,"credential",ea,[Qd(Dd(),Ld(),"token")]),Xd(ca,"credentialWithLink",la,[Dd("email"),Dd("emailLink")]),$d(ta.prototype,{Ca:{name:"addScope",j:[Dd("scope")]},Ka:{name:"setCustomParameters",j:[Ld("customOAuthParameters")]}}),Xd(ta,"credential",na,[Qd(Dd(),Ld(),"token")]),$d(ra.prototype,{Ca:{name:"addScope",j:[Dd("scope")]},Ka:{name:"setCustomParameters",j:[Ld("customOAuthParameters")]}}),Xd(ra,"credential",ia,[Qd(Dd(),Qd(Ld(),jd()),"idToken"),Qd(Dd(),jd(),"accessToken",!0)]),$d(oa.prototype,{Ka:{name:"setCustomParameters",j:[Ld("customOAuthParameters")]}}),Xd(oa,"credential",aa,[Qd(Dd(),Ld(),"token"),Dd("secret",!0)]),$d(Jo.prototype,{Ca:{name:"addScope",j:[Dd("scope")]},credential:{name:"credential",j:[Qd(Dd(),Qd(Ld(),jd()),"optionsOrIdToken"),Qd(Dd(),jd(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[Ld("customOAuthParameters")]}}),$d(zo.prototype,{w:{name:"toJSON",j:[Dd(null,!0)]}}),$d(Wo.prototype,{w:{name:"toJSON",j:[Dd(null,!0)]}}),Xd(va,"credential",ga,[Dd("verificationId"),Dd("verificationCode")]),$d(va.prototype,{gb:{name:"verifyPhoneNumber",j:[Qd(Dd(),function(e,t){return{name:e||"phoneInfoOptions",K:"valid phone info options",optional:!!t,M:function(e){return!!e&&(e.session&&e.phoneNumber?Hd(e.session,qo)&&"string"===typeof e.phoneNumber:e.session&&e.multiFactorHint?Hd(e.session,Vo)&&Gd(e.multiFactorHint):e.session&&e.multiFactorUid?Hd(e.session,Vo)&&"string"===typeof e.multiFactorUid:!!e.phoneNumber&&"string"===typeof e.phoneNumber)}}}(),"phoneInfoOptions"),zd()]}}),$d(fa.prototype,{w:{name:"toJSON",j:[Dd(null,!0)]}}),$d(N.prototype,{toJSON:{name:"toJSON",j:[Dd(null,!0)]}}),$d(Sa.prototype,{toJSON:{name:"toJSON",j:[Dd(null,!0)]}}),$d(ka.prototype,{toJSON:{name:"toJSON",j:[Dd(null,!0)]}}),$d(wh.prototype,{toJSON:{name:"toJSON",j:[Dd(null,!0)]}}),$d(yh.prototype,{Rc:{name:"resolveSignIn",j:[Kd()]}}),$d(Nh.prototype,{Sb:{name:"getSession",j:[]},fc:{name:"enroll",j:[Kd(),Dd("displayName",!0)]},bd:{name:"unenroll",j:[Qd({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:Gd},Dd(),"multiFactorInfoIdentifier")]}}),$d(Rd.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),Xd(Yi,"parseLink",io,[Dd("link")]),Xd(vd,"assertion",(function(e){return new Ch(e)}),[Bd("phone")]),function(){if("undefined"===typeof r["default"]||!r["default"].INTERNAL||!r["default"].INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var e={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ji,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:Fi,VERIFY_AND_CHANGE_EMAIL:Ui,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:Vf,AuthCredential:Bo,Error:N};Xd(e,"EmailAuthProvider",ca,[]),Xd(e,"FacebookAuthProvider",Zo,[]),Xd(e,"GithubAuthProvider",ta,[]),Xd(e,"GoogleAuthProvider",ra,[]),Xd(e,"TwitterAuthProvider",oa,[]),Xd(e,"OAuthProvider",Jo,[Dd("providerId")]),Xd(e,"SAMLAuthProvider",Xo,[Dd("providerId")]),Xd(e,"PhoneAuthProvider",va,[qd()]),Xd(e,"RecaptchaVerifier",Rd,[Qd(Dd(),Ud(),"recaptchaContainer"),Ld("recaptchaParameters",!0),Vd()]),Xd(e,"ActionCodeURL",Yi,[]),Xd(e,"PhoneMultiFactorGenerator",vd,[]),r["default"].INTERNAL.registerComponent({name:"auth",instanceFactory:function(e){return e=e.getProvider("app").getImmediate(),new Vf(e)},multipleInstances:!1,serviceProps:e,instantiationMode:"LAZY",type:"PUBLIC",onInstanceCreated:function(e){e.getProvider("auth-internal").initialize()}}),r["default"].INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(e){return e=e.getProvider("auth").getImmediate(),{getUid:E(e.getUid,e),getToken:E(e.nc,e),addAuthTokenListener:E(e.cc,e),removeAuthTokenListener:E(e.Pc,e)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),r["default"].registerVersion("@firebase/auth","0.16.8"),r["default"].INTERNAL.extendNamespace({User:Kh})}()}).apply("undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},8914:function(e,t,n){"use strict";n.r(t),n.d(t,{Component:function(){return o},ComponentContainer:function(){return l},Provider:function(){return s}});var r=n(2900),i=n(9658),o=function(){function e(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return e.prototype.setInstantiationMode=function(e){return this.instantiationMode=e,this},e.prototype.setMultipleInstances=function(e){return this.multipleInstances=e,this},e.prototype.setServiceProps=function(e){return this.serviceProps=e,this},e.prototype.setInstanceCreatedCallback=function(e){return this.onInstanceCreated=e,this},e}(),a="[DEFAULT]",s=function(){function e(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return e.prototype.get=function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new i.Deferred;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(t).promise},e.prototype.getImmediate=function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}},e.prototype.getComponent=function(){return this.component},e.prototype.setComponent=function(e){var t,n;if(e.name!==this.name)throw Error("Mismatching Component "+e.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=e,this.shouldAutoInitialize()){if(c(e))try{this.getOrInitializeService({instanceIdentifier:a})}catch(d){}try{for(var i=(0,r.__values)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var s=(0,r.__read)(o.value,2),u=s[0],l=s[1],h=this.normalizeInstanceIdentifier(u);try{var f=this.getOrInitializeService({instanceIdentifier:h});l.resolve(f)}catch(d){}}}catch(p){t={error:p}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}}},e.prototype.clearInstance=function(e){void 0===e&&(e=a),this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)},e.prototype.delete=function(){return(0,r.__awaiter)(this,void 0,void 0,(function(){var e;return(0,r.__generator)(this,(function(t){switch(t.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all((0,r.__spreadArray)((0,r.__spreadArray)([],(0,r.__read)(e.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()})))),(0,r.__read)(e.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))))];case 1:return t.sent(),[2]}}))}))},e.prototype.isComponentSet=function(){return null!=this.component},e.prototype.isInitialized=function(e){return void 0===e&&(e=a),this.instances.has(e)},e.prototype.getOptions=function(e){return void 0===e&&(e=a),this.instancesOptions.get(e)||{}},e.prototype.initialize=function(e){var t,n;void 0===e&&(e={});var i=e.options,o=void 0===i?{}:i,a=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(a))throw Error(this.name+"("+a+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var s=this.getOrInitializeService({instanceIdentifier:a,options:o});try{for(var u=(0,r.__values)(this.instancesDeferred.entries()),c=u.next();!c.done;c=u.next()){var l=(0,r.__read)(c.value,2),h=l[0],f=l[1],d=this.normalizeInstanceIdentifier(h);a===d&&f.resolve(s)}}catch(p){t={error:p}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}return s},e.prototype.onInit=function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var o=this.instances.get(r);return o&&e(o,r),function(){i.delete(e)}},e.prototype.invokeOnInitCallbacks=function(e,t){var n,i,o=this.onInitCallbacks.get(t);if(o)try{for(var a=(0,r.__values)(o),s=a.next();!s.done;s=a.next()){var u=s.value;try{u(e,t)}catch(c){}}}catch(l){n={error:l}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}},e.prototype.getOrInitializeService=function(e){var t=e.instanceIdentifier,n=e.options,r=void 0===n?{}:n,i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:u(t),options:r}),this.instances.set(t,i),this.instancesOptions.set(t,r),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch(o){}return i||null},e.prototype.normalizeInstanceIdentifier=function(e){return void 0===e&&(e=a),this.component?this.component.multipleInstances?e:a:e},e.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},e}();function u(e){return e===a?void 0:e}function c(e){return"EAGER"===e.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var l=function(){function e(e){this.name=e,this.providers=new Map}return e.prototype.addComponent=function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component "+e.name+" has already been registered with "+this.name);t.setComponent(e)},e.prototype.addOrOverwriteComponent=function(e){var t=this.getProvider(e.name);t.isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)},e.prototype.getProvider=function(e){if(this.providers.has(e))return this.providers.get(e);var t=new s(e,this);return this.providers.set(e,t),t},e.prototype.getProviders=function(){return Array.from(this.providers.values())},e}()},5706:function(e,t,n){"use strict";n(7658);var r=n(4552),i=n(8914),o=n(9658),a=n(2900),s=n(7e3);e=n.hmd(e);var u="@firebase/database",c="0.11.0",l="";function h(e){l=e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var f=function(){function e(e){this.domStorage_=e,this.prefix_="firebase:"}return e.prototype.set=function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,o.stringify)(t))},e.prototype.get=function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,o.jsonEval)(t)},e.prototype.remove=function(e){this.domStorage_.removeItem(this.prefixedName_(e))},e.prototype.prefixedName_=function(e){return this.prefix_+e},e.prototype.toString=function(){return this.domStorage_.toString()},e}(),d=function(){function e(){this.cache_={},this.isInMemoryStorage=!0}return e.prototype.set=function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t},e.prototype.get=function(e){return(0,o.contains)(this.cache_,e)?this.cache_[e]:null},e.prototype.remove=function(e){delete this.cache_[e]},e}(),p=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new f(t)}}catch(n){}return new d},v=p("localStorage"),g=p("sessionStorage"),m=new s.Logger("@firebase/database"),y=function(){var e=1;return function(){return e++}}(),_=function(e){var t=(0,o.stringToByteArray)(e),n=new o.Sha1;n.update(t);var r=n.digest();return o.base64.encodeByteArray(r)},b=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n="",r=0;r<e.length;r++){var i=e[r];Array.isArray(i)||i&&"object"===typeof i&&"number"===typeof i.length?n+=b.apply(null,i):n+="object"===typeof i?(0,o.stringify)(i):i,n+=" "}return n},w=null,I=!0,T=function(e,t){(0,o.assert)(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(m.logLevel=s.LogLevel.VERBOSE,w=m.log.bind(m),t&&g.set("logging_enabled",!0)):"function"===typeof e?w=e:(w=null,g.remove("logging_enabled"))},E=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(!0===I&&(I=!1,null===w&&!0===g.get("logging_enabled")&&T(!0)),w){var n=b.apply(null,e);w(n)}},k=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];E.apply(void 0,(0,a.__spreadArray)([e],(0,a.__read)(t)))}},S=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE INTERNAL ERROR: "+b.apply(void 0,(0,a.__spreadArray)([],(0,a.__read)(e)));m.error(n)},C=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE FATAL ERROR: "+b.apply(void 0,(0,a.__spreadArray)([],(0,a.__read)(e)));throw m.error(n),new Error(n)},A=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE WARNING: "+b.apply(void 0,(0,a.__spreadArray)([],(0,a.__read)(e)));m.warn(n)},N=function(){"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&A("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},x=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},R=function(e){if((0,o.isNodeSdk)()||"complete"===document.readyState)e();else{var t=!1,n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}},P="[MIN_NAME]",O="[MAX_NAME]",D=function(e,t){if(e===t)return 0;if(e===P||t===O)return-1;if(t===P||e===O)return 1;var n=z(e),r=z(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},M=function(e,t){return e===t?0:e<t?-1:1},L=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+(0,o.stringify)(t))},F=function(e){if("object"!==typeof e||null===e)return(0,o.stringify)(e);var t=[];for(var n in e)t.push(n);t.sort();for(var r="{",i=0;i<t.length;i++)0!==i&&(r+=","),r+=(0,o.stringify)(t[i]),r+=":",r+=F(e[t[i]]);return r+="}",r},j=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var q=function(e){(0,o.assert)(!x(e),"Invalid JSON number");var t,n,r,i,a,s=11,u=52,c=(1<<s-1)-1;0===e?(n=0,r=0,t=1/e===-1/0?1:0):(t=e<0,e=Math.abs(e),e>=Math.pow(2,1-c)?(i=Math.min(Math.floor(Math.log(e)/Math.LN2),c),n=i+c,r=Math.round(e*Math.pow(2,u-i)-Math.pow(2,u))):(n=0,r=Math.round(e/Math.pow(2,1-c-u))));var l=[];for(a=u;a;a-=1)l.push(r%2?1:0),r=Math.floor(r/2);for(a=s;a;a-=1)l.push(n%2?1:0),n=Math.floor(n/2);l.push(t?1:0),l.reverse();var h=l.join(""),f="";for(a=0;a<64;a+=8){var d=parseInt(h.substr(a,8),2).toString(16);1===d.length&&(d="0"+d),f+=d}return f.toLowerCase()},V=function(){return!("object"!==typeof window||!window["chrome"]||!window["chrome"]["extension"]||/^chrome/.test(window.location.href))},B=function(){return"object"===typeof Windows&&"object"===typeof Windows.UI};function K(e,t){var n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");var r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}var W=new RegExp("^-?(0*)\\d{1,10}$"),H=-2147483648,G=2147483647,z=function(e){if(W.test(e)){var t=Number(e);if(t>=H&&t<=G)return t}return null},Q=function(e){try{e()}catch(t){setTimeout((function(){var e=t.stack||"";throw A("Exception was thrown by user callback.",e),t}),Math.floor(0))}},$=function(){var e="object"===typeof window&&window["navigator"]&&window["navigator"]["userAgent"]||"";return e.search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Y=function(e,t){var n=setTimeout(e,t);return"object"===typeof n&&n["unref"]&&n["unref"](),n},X=function(){function e(e,t){var n=this;this.appName_=e,this.appCheckProvider=t,this.appCheck=null===t||void 0===t?void 0:t.getImmediate({optional:!0}),this.appCheck||null===t||void 0===t||t.get().then((function(e){return n.appCheck=e}))}return e.prototype.getToken=function(e){var t=this;return this.appCheck?this.appCheck.getToken(e):new Promise((function(n,r){setTimeout((function(){t.appCheck?t.getToken(e).then(n,r):n(null)}),0)}))},e.prototype.addTokenChangeListener=function(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((function(t){return t.addTokenListener(e)}))},e.prototype.notifyForInvalidToken=function(){A('Provided AppCheck credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly.')},e}(),J=function(){function e(e,t,n){var r=this;this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit((function(e){return r.auth_=e}))}return e.prototype.getToken=function(e){var t=this;return this.auth_?this.auth_.getToken(e).catch((function(e){return e&&"auth/token-not-initialized"===e.code?(E("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})):new Promise((function(n,r){setTimeout((function(){t.auth_?t.getToken(e).then(n,r):n(null)}),0)}))},e.prototype.addTokenChangeListener=function(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((function(t){return t.addAuthTokenListener(e)}))},e.prototype.removeTokenChangeListener=function(e){this.authProvider_.get().then((function(t){return t.removeAuthTokenListener(e)}))},e.prototype.notifyForInvalidToken=function(){var e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',A(e)},e}(),Z=function(){function e(e){this.accessToken=e}return e.prototype.getToken=function(e){return Promise.resolve({accessToken:this.accessToken})},e.prototype.addTokenChangeListener=function(e){e(this.accessToken)},e.prototype.removeTokenChangeListener=function(e){},e.prototype.notifyForInvalidToken=function(){},e.OWNER="owner",e}(),ee="5",te="v",ne="s",re="r",ie="f",oe=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,ae="ls",se="p",ue="ac",ce="websocket",le="long_polling",he=function(){function e(e,t,n,r,i,o,a){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===a&&(a=!1),this.secure=t,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=v.get("host:"+e)||this._host}return e.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},e.prototype.isCustomHost=function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain},Object.defineProperty(e.prototype,"host",{get:function(){return this._host},set:function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&v.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),e.prototype.toString=function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e},e.prototype.toURLString=function(){var e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns="+this.namespace:"";return""+e+this.host+"/"+t},e}();function fe(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams}function de(e,t,n){var r;if((0,o.assert)("string"===typeof t,"typeof type must == string"),(0,o.assert)("object"===typeof n,"typeof params must == object"),t===ce)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==le)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}fe(e)&&(n["ns"]=e.namespace);var i=[];return U(n,(function(e,t){i.push(e+"="+t)})),r+i.join("&")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pe=function(){function e(){this.counters_={}}return e.prototype.incrementCounter=function(e,t){void 0===t&&(t=1),(0,o.contains)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t},e.prototype.get=function(){return(0,o.deepCopy)(this.counters_)},e}(),ve={},ge={};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function me(e){var t=e.toString();return ve[t]||(ve[t]=new pe),ve[t]}function ye(e,t){var n=e.toString();return ge[n]||(ge[n]=t()),ge[n]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _e=function(){function e(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return e.prototype.closeAfter=function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},e.prototype.handleResponse=function(e,t){var n=this;this.pendingResponses[e]=t;var r=function(){var e=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var t=function(t){e[t]&&Q((function(){n.onMessage_(e[t])}))},r=0;r<e.length;++r)t(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;while(this.pendingResponses[this.currentResponseNum]){var o=r();if("break"===o)break}},e}(),be="start",we="close",Ie="pLPCommand",Te="pRTLPCB",Ee="id",ke="pw",Se="ser",Ce="cb",Ae="seg",Ne="ts",xe="d",Re="dframe",Pe=1870,Oe=30,De=Pe-Oe,Me=25e3,Le=3e4,Fe=function(){function e(e,t,n,r,i,o,a){var s=this;this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=k(e),this.stats_=me(t),this.urlFn=function(e){return s.appCheckToken&&(e[ue]=s.appCheckToken),de(t,le,e)}}return e.prototype.open=function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new _e(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(Le)),R((function(){if(!n.isClosed_){n.scriptTagHolder=new je((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=(0,a.__read)(e,5),i=r[0],o=r[1],s=r[2];if(r[3],r[4],n.incrementIncomingBytes_(e),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===be)n.id=o,n.password=s;else{if(i!==we)throw new Error("Unrecognized command received: "+i);o?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(o,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=(0,a.__read)(e,2),i=r[0],o=r[1];n.incrementIncomingBytes_(e),n.myPacketOrderer.handleResponse(i,o)}),(function(){n.onClosed_()}),n.urlFn);var e={};e[be]="t",e[Se]=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e[Ce]=n.scriptTagHolder.uniqueCallbackIdentifier),e[te]=ee,n.transportSessionId&&(e[ne]=n.transportSessionId),n.lastSessionId&&(e[ae]=n.lastSessionId),n.applicationId&&(e[se]=n.applicationId),n.appCheckToken&&(e[ue]=n.appCheckToken),"undefined"!==typeof location&&location.hostname&&oe.test(location.hostname)&&(e[re]=ie);var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,(function(){}))}}))},e.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},e.forceAllow=function(){e.forceAllow_=!0},e.forceDisallow=function(){e.forceDisallow_=!0},e.isAvailable=function(){return!(0,o.isNodeSdk)()&&(!!e.forceAllow_||!e.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!V()&&!B())},e.prototype.markConnectionHealthy=function(){},e.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},e.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},e.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},e.prototype.send=function(e){var t=(0,o.stringify)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=(0,o.base64Encode)(t),r=j(n,De),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},e.prototype.addDisconnectPingFrame=function(e,t){if(!(0,o.isNodeSdk)()){this.myDisconnFrame=document.createElement("iframe");var n={};n[Re]="t",n[Ee]=e,n[ke]=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},e.prototype.incrementIncomingBytes_=function(e){var t=(0,o.stringify)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)},e}(),je=function(){function e(t,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,o.isNodeSdk)())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=y(),window[Ie+this.uniqueCallbackIdentifier]=t,window[Te+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var a="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)){var s=document.domain;a='<script>document.domain="'+s+'";<\/script>'}var u="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(u),this.myIFrame.doc.close()}catch(c){E("frame writing exception"),c.stack&&E(c.stack),E(c)}}}return e.createIFrame_=function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{var t=e.contentWindow.document;t||E("No IE domain setting required")}catch(r){var n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e},e.prototype.close=function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)}),Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())},e.prototype.startLongPoll=function(e,t){this.myID=e,this.myPW=t,this.alive=!0;while(this.newRequest_());},e.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e[Ee]=this.myID,e[ke]=this.myPW,e[Se]=this.currentSerial;var t=this.urlFn(e),n="",r=0;while(this.pendingSegs.length>0){var i=this.pendingSegs[0];if(!(i.d.length+Oe+n.length<=Pe))break;var o=this.pendingSegs.shift();n=n+"&"+Ae+r+"="+o.seg+"&"+Ne+r+"="+o.ts+"&"+xe+r+"="+o.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1},e.prototype.enqueueSegment=function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()},e.prototype.addLongPollTag_=function(e,t){var n=this;this.outstandingRequests.add(t);var r=function(){n.outstandingRequests.delete(t),n.newRequest_()},i=setTimeout(r,Math.floor(Me)),o=function(){clearTimeout(i),r()};this.addTag(e,o)},e.prototype.addTag=function(e,t){var n=this;(0,o.isNodeSdk)()?this.doNodeLongPoll(e,t):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){E("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}}),Math.floor(1))},e}(),Ue=16384,qe=45e3,Ve=null;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */"undefined"!==typeof MozWebSocket?Ve=MozWebSocket:"undefined"!==typeof WebSocket&&(Ve=WebSocket);var Be=function(){function e(t,n,r,i,o,a,s){this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=k(this.connId),this.stats_=me(n),this.connURL=e.connectionURL_(n,a,s,i),this.nodeAdmin=n.nodeAdmin}return e.connectionURL_=function(e,t,n,r){var i={};return i[te]=ee,!(0,o.isNodeSdk)()&&"undefined"!==typeof location&&location.hostname&&oe.test(location.hostname)&&(i[re]=ie),t&&(i[ne]=t),n&&(i[ae]=n),r&&(i[ue]=r),de(e,ce,i)},e.prototype.open=function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,v.set("previous_websocket_failure",!0);try{if((0,o.isNodeSdk)()){var r=this.nodeAdmin?"AdminNode":"Node",i={headers:{"User-Agent":"Firebase/"+ee+"/"+l+"/"+process.platform+"/"+r,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(i.headers["Authorization"]="Bearer "+this.authToken),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);var a={NODE_ENV:"production",BASE_URL:"/"},s=0===this.connURL.indexOf("wss://")?a["HTTPS_PROXY"]||a["https_proxy"]:a["HTTP_PROXY"]||a["http_proxy"];s&&(i["proxy"]={origin:s}),this.mySock=new Ve(this.connURL,[],i)}else{i={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}};this.mySock=new Ve(this.connURL,[],i)}}catch(c){this.log_("Error instantiating WebSocket.");var u=c.message||c.data;return u&&this.log_(u),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}},e.prototype.start=function(){},e.forceDisallow=function(){e.forceDisallow_=!0},e.isAvailable=function(){var t=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(t=!0)}return!t&&null!==Ve&&!e.forceDisallow_},e.previouslyFailed=function(){return v.isInMemoryStorage||!0===v.get("previous_websocket_failure")},e.prototype.markConnectionHealthy=function(){v.remove("previous_websocket_failure")},e.prototype.appendFrame_=function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var n=(0,o.jsonEval)(t);this.onMessage(n)}},e.prototype.handleNewFrameCount_=function(e){this.totalFrames=e,this.frames=[]},e.prototype.extractFrameCount_=function(e){if((0,o.assert)(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e},e.prototype.handleIncomingFrame=function(e){if(null!==this.mySock){var t=e["data"];if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}},e.prototype.send=function(e){this.resetKeepAlive();var t=(0,o.stringify)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=j(t,Ue);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},e.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},e.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},e.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},e.prototype.resetKeepAlive=function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()}),Math.floor(qe))},e.prototype.sendString_=function(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},e.responsesRequiredToBeHealthy=2,e.healthyTimeout=3e4,e}(),Ke=function(){function e(e){this.initTransports_(e)}return Object.defineProperty(e,"ALL_TRANSPORTS",{get:function(){return[Fe,Be]},enumerable:!1,configurable:!0}),e.prototype.initTransports_=function(t){var n,r,i=Be&&Be["isAvailable"](),o=i&&!Be.previouslyFailed();if(t.webSocketOnly&&(i||A("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[Be];else{var s=this.transports_=[];try{for(var u=(0,a.__values)(e.ALL_TRANSPORTS),c=u.next();!c.done;c=u.next()){var l=c.value;l&&l["isAvailable"]()&&s.push(l)}}catch(h){n={error:h}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}},e.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},e.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},e}(),We=6e4,He=5e3,Ge=10240,ze=102400,Qe="t",$e="d",Ye="s",Xe="r",Je="e",Ze="o",et="a",tt="n",nt="p",rt="h",it=function(){function e(e,t,n,r,i,o,a,s,u,c){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=s,this.onKill_=u,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=k("c:"+this.id+":"),this.transportManager_=new Ke(t),this.log_("Connection created"),this.start_()}return e.prototype.start_=function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t["responsesRequiredToBeHealthy"]||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){e.conn_&&e.conn_.open(n,r)}),Math.floor(0));var i=t["healthyTimeout"]||0;i>0&&(this.healthyTimeout_=Y((function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>ze?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>Ge?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))}),Math.floor(i)))},e.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},e.prototype.disconnReceiver_=function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}},e.prototype.connReceiver_=function(e){var t=this;return function(n){2!==t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}},e.prototype.sendRequest=function(e){var t={t:"d",d:e};this.sendData_(t)},e.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},e.prototype.onSecondaryControl_=function(e){if(Qe in e){var t=e[Qe];t===et?this.upgradeIfSecondaryHealthy_():t===Xe?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):t===Ze&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},e.prototype.onSecondaryMessageReceived_=function(e){var t=L("t",e),n=L("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}},e.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:nt,d:{}}}))},e.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:et,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:tt,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},e.prototype.onPrimaryMessageReceived_=function(e){var t=L("t",e),n=L("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)},e.prototype.onDataMessage_=function(e){this.onPrimaryResponse_(),this.onMessage_(e)},e.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},e.prototype.onControl_=function(e){var t=L(Qe,e);if($e in e){var n=e[$e];if(t===rt)this.onHandshake_(n);else if(t===tt){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===Ye?this.onConnectionShutdown_(n):t===Xe?this.onReset_(n):t===Je?S("Server Error: "+n):t===Ze?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):S("Unknown control packet command: "+t)}},e.prototype.onHandshake_=function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),ee!==n&&A("Protocol version mismatch detected"),this.tryStartUpgrade_())},e.prototype.tryStartUpgrade_=function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)},e.prototype.startUpgrade_=function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e["responsesRequiredToBeHealthy"]||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Y((function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())}),Math.floor(We))},e.prototype.onReset_=function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())},e.prototype.onConnectionEstablished_=function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Y((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(He))},e.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:nt,d:{}}}))},e.prototype.onSecondaryConnectionLost_=function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()},e.prototype.onConnectionLost_=function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(v.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},e.prototype.onConnectionShutdown_=function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()},e.prototype.sendData_=function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)},e.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},e.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},e}(),ot=function(){function e(){}return e.prototype.put=function(e,t,n,r){},e.prototype.merge=function(e,t,n,r){},e.prototype.refreshAuthToken=function(e){},e.prototype.refreshAppCheckToken=function(e){},e.prototype.onDisconnectPut=function(e,t,n){},e.prototype.onDisconnectMerge=function(e,t,n){},e.prototype.onDisconnectCancel=function(e,t){},e.prototype.reportStats=function(e){},e}(),at=function(){function e(e){this.allowedEvents_=e,this.listeners_={},(0,o.assert)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}return e.prototype.trigger=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(Array.isArray(this.listeners_[e]))for(var r=(0,a.__spreadArray)([],(0,a.__read)(this.listeners_[e])),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)},e.prototype.on=function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)},e.prototype.off=function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)},e.prototype.validateEventType_=function(e){(0,o.assert)(this.allowedEvents_.find((function(t){return t===e})),"Unknown event: "+e)},e}(),st=function(e){function t(){var t=e.call(this,["online"])||this;return t.online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||(0,o.isMobileCordova)()||(window.addEventListener("online",(function(){t.online_||(t.online_=!0,t.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){t.online_&&(t.online_=!1,t.trigger("online",!1))}),!1)),t}return(0,a.__extends)(t,e),t.getInstance=function(){return new t},t.prototype.getInitialEvent=function(e){return(0,o.assert)("online"===e,"Unknown event type: "+e),[this.online_]},t.prototype.currentlyOnline=function(){return this.online_},t}(at),ut=32,ct=768,lt=function(){function e(e,t){if(void 0===t){this.pieces_=e.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}return e.prototype.toString=function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ht(){return new lt("")}function ft(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function dt(e){return e.pieces_.length-e.pieceNum_}function pt(e){var t=e.pieceNum_;return t<e.pieces_.length&&t++,new lt(e.pieces_,t)}function vt(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function gt(e){for(var t="",n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}function mt(e,t){return void 0===t&&(t=0),e.pieces_.slice(e.pieceNum_+t)}function yt(e){if(e.pieceNum_>=e.pieces_.length)return null;for(var t=[],n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new lt(t,0)}function _t(e,t){for(var n=[],r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof lt)for(r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{var i=t.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new lt(n,0)}function bt(e){return e.pieceNum_>=e.pieces_.length}function wt(e,t){var n=ft(e),r=ft(t);if(null===n)return t;if(n===r)return wt(pt(e),pt(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function It(e,t){for(var n=mt(e,0),r=mt(t,0),i=0;i<n.length&&i<r.length;i++){var o=D(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function Tt(e,t){if(dt(e)!==dt(t))return!1;for(var n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function Et(e,t){var n=e.pieceNum_,r=t.pieceNum_;if(dt(e)>dt(t))return!1;while(n<e.pieces_.length){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var kt=function(){function e(e,t){this.errorPrefix_=t,this.parts_=mt(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=(0,o.stringLength)(this.parts_[n]);At(this)}return e}();function St(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=(0,o.stringLength)(t),At(e)}function Ct(e){var t=e.parts_.pop();e.byteLength_-=(0,o.stringLength)(t),e.parts_.length>0&&(e.byteLength_-=1)}function At(e){if(e.byteLength_>ct)throw new Error(e.errorPrefix_+"has a key path longer than "+ct+" bytes ("+e.byteLength_+").");if(e.parts_.length>ut)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+ut+") or object contains a cycle "+Nt(e))}function Nt(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xt,Rt,Pt=function(e){function t(){var t,n,r=e.call(this,["visible"])||this;return"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document["hidden"]?(n="visibilitychange",t="hidden"):"undefined"!==typeof document["mozHidden"]?(n="mozvisibilitychange",t="mozHidden"):"undefined"!==typeof document["msHidden"]?(n="msvisibilitychange",t="msHidden"):"undefined"!==typeof document["webkitHidden"]&&(n="webkitvisibilitychange",t="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,(function(){var e=!document[t];e!==r.visible_&&(r.visible_=e,r.trigger("visible",e))}),!1),r}return(0,a.__extends)(t,e),t.getInstance=function(){return new t},t.prototype.getInitialEvent=function(e){return(0,o.assert)("visible"===e,"Unknown event type: "+e),[this.visible_]},t}(at),Ot=1e3,Dt=3e5,Mt=3e3,Lt=3e4,Ft=1.3,jt=3e4,Ut="server_kill",qt=3,Vt=function(e){function t(n,r,i,a,s,u,c,l){var h=e.call(this)||this;if(h.repoInfo_=n,h.applicationId_=r,h.onDataUpdate_=i,h.onConnectStatus_=a,h.onServerInfoUpdate_=s,h.authTokenProvider_=u,h.appCheckTokenProvider_=c,h.authOverride_=l,h.id=t.nextPersistentConnectionId_++,h.log_=k("p:"+h.id+":"),h.interruptReasons_={},h.listens=new Map,h.outstandingPuts_=[],h.outstandingGets_=[],h.outstandingPutCount_=0,h.outstandingGetCount_=0,h.onDisconnectRequestQueue_=[],h.connected_=!1,h.reconnectDelay_=Ot,h.maxReconnectDelay_=Dt,h.securityDebugCallback_=null,h.lastSessionId=null,h.establishConnectionTimer_=null,h.visible_=!1,h.requestCBHash_={},h.requestNumber_=0,h.realtime_=null,h.authToken_=null,h.appCheckToken_=null,h.forceTokenRefresh_=!1,h.invalidAuthTokenCount_=0,h.invalidAppCheckTokenCount_=0,h.firstConnection_=!0,h.lastConnectionAttemptTime_=null,h.lastConnectionEstablishedTime_=null,l&&!(0,o.isNodeSdk)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return Pt.getInstance().on("visible",h.onVisible_,h),-1===n.host.indexOf("fblocal")&&st.getInstance().on("online",h.onOnline_,h),h}return(0,a.__extends)(t,e),t.prototype.sendRequest=function(e,t,n){var r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_((0,o.stringify)(i)),(0,o.assert)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},t.prototype.get=function(e){var t=this;this.initConnection_();var n=new o.Deferred,r={p:e._path.toString(),q:e._queryObject},i={action:"g",request:r,onComplete:function(e){var i=e["d"];"ok"===e["s"]?(t.onDataUpdate_(r["p"],i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var a=this.outstandingGets_.length-1;return this.connected_||setTimeout((function(){var e=t.outstandingGets_[a];void 0!==e&&i===e&&(delete t.outstandingGets_[a],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),t.log_("get "+a+" timed out on connection"),n.reject(new Error("Client is offline.")))}),Mt),this.connected_&&this.sendGet_(a),n.promise},t.prototype.listen=function(e,t,n,r){this.initConnection_();var i=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+i),this.listens.has(a)||this.listens.set(a,new Map),(0,o.assert)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,o.assert)(!this.listens.get(a).has(i),"listen() called twice for same path/queryId.");var s={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(a).set(i,s),this.connected_&&this.sendListen_(s)},t.prototype.sendGet_=function(e){var t=this,n=this.outstandingGets_[e];this.sendRequest("g",n.request,(function(r){delete t.outstandingGets_[e],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))},t.prototype.sendListen_=function(e){var n=this,r=e.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);var a={p:i},s="q";e.tag&&(a["q"]=r._queryObject,a["t"]=e.tag),a["h"]=e.hashFn(),this.sendRequest(s,a,(function(a){var s=a["d"],u=a["s"];t.warnOnListenWarnings_(s,r);var c=n.listens.get(i)&&n.listens.get(i).get(o);c===e&&(n.log_("listen response",a),"ok"!==u&&n.removeListen_(i,o),e.onComplete&&e.onComplete(u,s))}))},t.warnOnListenWarnings_=function(e,t){if(e&&"object"===typeof e&&(0,o.contains)(e,"w")){var n=(0,o.safeGet)(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t._queryParams.getIndex().toString()+'"',i=t._path.toString();A("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},t.prototype.refreshAuthToken=function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(e)},t.prototype.reduceReconnectDelayIfAdminCredential_=function(e){var t=e&&40===e.length;(t||(0,o.isAdmin)(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Lt)},t.prototype.refreshAppCheckToken=function(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))},t.prototype.tryAuth=function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=(0,o.isValidFormat)(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r["noauth"]=!0:"object"===typeof this.authOverride_&&(r["authvar"]=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n["s"],i=n["d"]||"error";e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}},t.prototype.tryAppCheck=function(){var e=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(t){var n=t["s"],r=t["d"]||"error";"ok"===n?e.invalidAppCheckTokenCount_=0:e.onAppCheckRevoked_(n,r)}))},t.prototype.unlisten=function(e,t){var n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),(0,o.assert)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query");var i=this.removeListen_(n,r);i&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)},t.prototype.sendUnlisten_=function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e},o="n";r&&(i["q"]=n,i["t"]=r),this.sendRequest(o,i)},t.prototype.onDisconnectPut=function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})},t.prototype.onDisconnectMerge=function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})},t.prototype.onDisconnectCancel=function(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})},t.prototype.sendOnDisconnect_=function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(function(e){r&&setTimeout((function(){r(e["s"],e["d"])}),Math.floor(0))}))},t.prototype.put=function(e,t,n,r){this.putInternal("p",e,t,n,r)},t.prototype.merge=function(e,t,n,r){this.putInternal("m",e,t,n,r)},t.prototype.putInternal=function(e,t,n,r,i){this.initConnection_();var o={p:t,d:n};void 0!==i&&(o["h"]=i),this.outstandingPuts_.push({action:e,request:o,onComplete:r}),this.outstandingPutCount_++;var a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+t)},t.prototype.sendPut_=function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,(function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r["s"],r["d"])}))},t.prototype.reportStats=function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,(function(e){var n=e["s"];if("ok"!==n){var r=e["d"];t.log_("reportStats","Error sending stats: "+r)}}))}},t.prototype.onDataMessage_=function(e){if("r"in e){this.log_("from server: "+(0,o.stringify)(e));var t=e["r"],n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e["b"]))}else{if("error"in e)throw"A server-side error has occurred: "+e["error"];"a"in e&&this.onDataPush_(e["a"],e["b"])}},t.prototype.onDataPush_=function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t["p"],t["d"],!1,t["t"]):"m"===e?this.onDataUpdate_(t["p"],t["d"],!0,t["t"]):"c"===e?this.onListenRevoked_(t["p"],t["q"]):"ac"===e?this.onAuthRevoked_(t["s"],t["d"]):"apc"===e?this.onAppCheckRevoked_(t["s"],t["d"]):"sd"===e?this.onSecurityDebugPacket_(t):S("Unrecognized action received from server: "+(0,o.stringify)(e)+"\nAre you using the latest client?")},t.prototype.onReady_=function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},t.prototype.scheduleConnect_=function(e){var t=this;(0,o.assert)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){t.establishConnectionTimer_=null,t.establishConnection_()}),Math.floor(e))},t.prototype.initConnection_=function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)},t.prototype.onVisible_=function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ot,this.realtime_||this.scheduleConnect_(0)),this.visible_=e},t.prototype.onOnline_=function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Ot,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},t.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){var e=(new Date).getTime()-this.lastConnectionEstablishedTime_;e>jt&&(this.reconnectDelay_=Ot),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var t=(new Date).getTime()-this.lastConnectionAttemptTime_,n=Math.max(0,this.reconnectDelay_-t);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*Ft)}this.onConnectStatus_(!1)},t.prototype.establishConnection_=function(){return(0,a.__awaiter)(this,void 0,void 0,(function(){var e,n,r,i,s,u,c,l,h,f,d,p,v,g,m=this;return(0,a.__generator)(this,(function(y){switch(y.label){case 0:if(!this.shouldReconnect_())return[3,4];this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+t.nextConnectionId_++,s=this.lastSessionId,u=!1,c=null,l=function(){c?c.close():(u=!0,r())},h=function(e){(0,o.assert)(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(e)},this.realtime_={close:l,sendRequest:h},f=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,y.label=1;case 1:return y.trys.push([1,3,,4]),[4,Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)])];case 2:return d=a.__read.apply(void 0,[y.sent(),2]),p=d[0],v=d[1],u?E("getToken() completed but was canceled"):(E("getToken() completed. Creating connection."),this.authToken_=p&&p.accessToken,this.appCheckToken_=v&&v.token,c=new it(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,(function(e){A(e+" ("+m.repoInfo_.toString()+")"),m.interrupt(Ut)}),s)),[3,4];case 3:return g=y.sent(),this.log_("Failed to get token: "+g),u||(this.repoInfo_.nodeAdmin&&A(g),l()),[3,4];case 4:return[2]}}))}))},t.prototype.interrupt=function(e){E("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},t.prototype.resume=function(e){E("Resuming connection for reason: "+e),delete this.interruptReasons_[e],(0,o.isEmpty)(this.interruptReasons_)&&(this.reconnectDelay_=Ot,this.realtime_||this.scheduleConnect_(0))},t.prototype.handleTimestamp_=function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})},t.prototype.cancelSentTransactions_=function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},t.prototype.onListenRevoked_=function(e,t){var n;n=t?t.map((function(e){return F(e)})).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")},t.prototype.removeListen_=function(e,t){var n,r=new lt(e).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(t),i.delete(t),0===i.size&&this.listens.delete(r)}else n=void 0;return n},t.prototype.onAuthRevoked_=function(e,t){E("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=qt&&(this.reconnectDelay_=Lt,this.authTokenProvider_.notifyForInvalidToken()))},t.prototype.onAppCheckRevoked_=function(e,t){E("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=qt&&this.appCheckTokenProvider_.notifyForInvalidToken())},t.prototype.onSecurityDebugPacket_=function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e["msg"].replace("\n","\nFIREBASE: "))},t.prototype.restoreState_=function(){var e,t,n,r;this.tryAuth(),this.tryAppCheck();try{for(var i=(0,a.__values)(this.listens.values()),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var u=(n=void 0,(0,a.__values)(s.values())),c=u.next();!c.done;c=u.next()){var l=c.value;this.sendListen_(l)}}catch(d){n={error:d}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(p){e={error:p}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}for(var h=0;h<this.outstandingPuts_.length;h++)this.outstandingPuts_[h]&&this.sendPut_(h);while(this.onDisconnectRequestQueue_.length){var f=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(f.action,f.pathString,f.data,f.onComplete)}for(h=0;h<this.outstandingGets_.length;h++)this.outstandingGets_[h]&&this.sendGet_(h)},t.prototype.sendConnectStats_=function(){var e={},t="js";(0,o.isNodeSdk)()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+l.replace(/\./g,"-")]=1,(0,o.isMobileCordova)()?e["framework.cordova"]=1:(0,o.isReactNative)()&&(e["framework.reactnative"]=1),this.reportStats(e)},t.prototype.shouldReconnect_=function(){var e=st.getInstance().currentlyOnline();return(0,o.isEmpty)(this.interruptReasons_)&&e},t.nextPersistentConnectionId_=0,t.nextConnectionId_=0,t}(ot),Bt=function(){function e(e,t){this.name=e,this.node=t}return e.Wrap=function(t,n){return new e(t,n)},e}(),Kt=function(){function e(){}return e.prototype.getCompare=function(){return this.compare.bind(this)},e.prototype.indexedValueChanged=function(e,t){var n=new Bt(P,e),r=new Bt(P,t);return 0!==this.compare(n,r)},e.prototype.minPost=function(){return Bt.MIN},e}(),Wt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,a.__extends)(t,e),Object.defineProperty(t,"__EMPTY_NODE",{get:function(){return xt},set:function(e){xt=e},enumerable:!1,configurable:!0}),t.prototype.compare=function(e,t){return D(e.name,t.name)},t.prototype.isDefinedOn=function(e){throw(0,o.assertionError)("KeyIndex.isDefinedOn not expected to be called.")},t.prototype.indexedValueChanged=function(e,t){return!1},t.prototype.minPost=function(){return Bt.MIN},t.prototype.maxPost=function(){return new Bt(O,xt)},t.prototype.makePost=function(e,t){return(0,o.assert)("string"===typeof e,"KeyIndex indexValue must always be a string."),new Bt(e,xt)},t.prototype.toString=function(){return".key"},t}(Kt),Ht=new Wt,Gt=function(){function e(e,t,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];var o=1;while(!e.isEmpty())if(o=t?n(e.key,t):1,r&&(o*=-1),o<0)e=this.isReverse_?e.left:e.right;else{if(0===o){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}return e.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_){t=t.left;while(!t.isEmpty())this.nodeStack_.push(t),t=t.right}else{t=t.right;while(!t.isEmpty())this.nodeStack_.push(t),t=t.left}return e},e.prototype.hasNext=function(){return this.nodeStack_.length>0},e.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}},e}(),zt=function(){function e(t,n,r,i,o){this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:$t.EMPTY_NODE,this.right=null!=o?o:$t.EMPTY_NODE}return e.prototype.copy=function(t,n,r,i,o){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},e.prototype.count=function(){return this.left.count()+1+this.right.count()},e.prototype.isEmpty=function(){return!1},e.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},e.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},e.prototype.minKey=function(){return this.min_().key},e.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},e.prototype.insert=function(e,t,n){var r=this,i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp_()},e.prototype.removeMin_=function(){if(this.left.isEmpty())return $t.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()},e.prototype.remove=function(e,t){var n,r;if(n=this,t(e,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return $t.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()},e.prototype.isRed_=function(){return this.color},e.prototype.fixUp_=function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e},e.prototype.moveRedLeft_=function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e},e.prototype.moveRedRight_=function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e},e.prototype.rotateLeft_=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},e.prototype.rotateRight_=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},e.prototype.colorFlip_=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)},e.prototype.checkMaxDepth_=function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1},e.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)},e.RED=!0,e.BLACK=!1,e}(),Qt=function(){function e(){}return e.prototype.copy=function(e,t,n,r,i){return this},e.prototype.insert=function(e,t,n){return new zt(e,t,null)},e.prototype.remove=function(e,t){return this},e.prototype.count=function(){return 0},e.prototype.isEmpty=function(){return!0},e.prototype.inorderTraversal=function(e){return!1},e.prototype.reverseTraversal=function(e){return!1},e.prototype.minKey=function(){return null},e.prototype.maxKey=function(){return null},e.prototype.check_=function(){return 0},e.prototype.isRed_=function(){return!1},e}(),$t=function(){function e(t,n){void 0===n&&(n=e.EMPTY_NODE),this.comparator_=t,this.root_=n}return e.prototype.insert=function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,zt.BLACK,null,null))},e.prototype.remove=function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,zt.BLACK,null,null))},e.prototype.get=function(e){var t,n=this.root_;while(!n.isEmpty()){if(t=this.comparator_(e,n.key),0===t)return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null},e.prototype.getPredecessorKey=function(e){var t,n=this.root_,r=null;while(!n.isEmpty()){if(t=this.comparator_(e,n.key),0===t){if(n.left.isEmpty())return r?r.key:null;n=n.left;while(!n.right.isEmpty())n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},e.prototype.isEmpty=function(){return this.root_.isEmpty()},e.prototype.count=function(){return this.root_.count()},e.prototype.minKey=function(){return this.root_.minKey()},e.prototype.maxKey=function(){return this.root_.maxKey()},e.prototype.inorderTraversal=function(e){return this.root_.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.root_.reverseTraversal(e)},e.prototype.getIterator=function(e){return new Gt(this.root_,null,this.comparator_,!1,e)},e.prototype.getIteratorFrom=function(e,t){return new Gt(this.root_,e,this.comparator_,!1,t)},e.prototype.getReverseIteratorFrom=function(e,t){return new Gt(this.root_,e,this.comparator_,!0,t)},e.prototype.getReverseIterator=function(e){return new Gt(this.root_,null,this.comparator_,!0,e)},e.EMPTY_NODE=new Qt,e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Yt(e,t){return D(e.name,t.name)}function Xt(e,t){return D(e,t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jt(e){Rt=e}var Zt,en,tn,nn=function(e){return"number"===typeof e?"number:"+q(e):"string:"+e},rn=function(e){if(e.isLeafNode()){var t=e.val();(0,o.assert)("string"===typeof t||"number"===typeof t||"object"===typeof t&&(0,o.contains)(t,".sv"),"Priority must be a string or number.")}else(0,o.assert)(e===Rt||e.isEmpty(),"priority of unexpected type.");(0,o.assert)(e===Rt||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},on=function(){function e(t,n){void 0===n&&(n=e.__childrenNodeConstructor.EMPTY_NODE),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,(0,o.assert)(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),rn(this.priorityNode_)}return Object.defineProperty(e,"__childrenNodeConstructor",{get:function(){return Zt},set:function(e){Zt=e},enumerable:!1,configurable:!0}),e.prototype.isLeafNode=function(){return!0},e.prototype.getPriority=function(){return this.priorityNode_},e.prototype.updatePriority=function(t){return new e(this.value_,t)},e.prototype.getImmediateChild=function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE},e.prototype.getChild=function(t){return bt(t)?this:".priority"===ft(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE},e.prototype.hasChild=function(){return!1},e.prototype.getPredecessorChildName=function(e,t){return null},e.prototype.updateImmediateChild=function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)},e.prototype.updateChild=function(t,n){var r=ft(t);return null===r?n:n.isEmpty()&&".priority"!==r?this:((0,o.assert)(".priority"!==r||1===dt(t),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(pt(t),n)))},e.prototype.isEmpty=function(){return!1},e.prototype.numChildren=function(){return 0},e.prototype.forEachChild=function(e,t){return!1},e.prototype.val=function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},e.prototype.hash=function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+nn(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?q(this.value_):this.value_,this.lazyHash_=_(e)}return this.lazyHash_},e.prototype.getValue=function(){return this.value_},e.prototype.compareTo=function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:((0,o.assert)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))},e.prototype.compareToLeafNode_=function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),a=e.VALUE_TYPE_ORDER.indexOf(r);return(0,o.assert)(i>=0,"Unknown leaf type: "+n),(0,o.assert)(a>=0,"Unknown leaf type: "+r),i===a?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-i},e.prototype.withIndex=function(){return this},e.prototype.isIndexed=function(){return!0},e.prototype.equals=function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1},e.VALUE_TYPE_ORDER=["object","boolean","number","string"],e}();function an(e){en=e}function sn(e){tn=e}var un,cn,ln=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,a.__extends)(t,e),t.prototype.compare=function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?D(e.name,t.name):i},t.prototype.isDefinedOn=function(e){return!e.getPriority().isEmpty()},t.prototype.indexedValueChanged=function(e,t){return!e.getPriority().equals(t.getPriority())},t.prototype.minPost=function(){return Bt.MIN},t.prototype.maxPost=function(){return new Bt(O,new on("[PRIORITY-POST]",tn))},t.prototype.makePost=function(e,t){var n=en(e);return new Bt(t,new on("[PRIORITY-POST]",n))},t.prototype.toString=function(){return".priority"},t}(Kt),hn=new ln,fn=Math.log(2),dn=function(){function e(e){var t=function(e){return parseInt(Math.log(e)/fn,10)},n=function(e){return parseInt(Array(e+1).join("1"),2)};this.count=t(e+1),this.current_=this.count-1;var r=n(this.count);this.bits_=e+1&r}return e.prototype.nextBitIsOne=function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e},e}(),pn=function(e,t,n,r){e.sort(t);var i=function(t,r){var o,a,s=r-t;if(0===s)return null;if(1===s)return o=e[t],a=n?n(o):o,new zt(a,o.node,zt.BLACK,null,null);var u=parseInt(s/2,10)+t,c=i(t,u),l=i(u+1,r);return o=e[u],a=n?n(o):o,new zt(a,o.node,zt.BLACK,c,l)},o=function(t){for(var r=null,o=null,a=e.length,s=function(t,r){var o=a-t,s=a;a-=t;var c=i(o+1,s),l=e[o],h=n?n(l):l;u(new zt(h,l.node,r,null,c))},u=function(e){r?(r.left=e,r=e):(o=e,r=e)},c=0;c<t.count;++c){var l=t.nextBitIsOne(),h=Math.pow(2,t.count-(c+1));l?s(h,zt.BLACK):(s(h,zt.BLACK),s(h,zt.RED))}return o},a=new dn(e.length),s=o(a);return new $t(r||t,s)},vn={},gn=function(){function e(e,t){this.indexes_=e,this.indexSet_=t}return Object.defineProperty(e,"Default",{get:function(){return(0,o.assert)(vn&&hn,"ChildrenNode.ts has not been loaded"),un=un||new e({".priority":vn},{".priority":hn}),un},enumerable:!1,configurable:!0}),e.prototype.get=function(e){var t=(0,o.safeGet)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof $t?t:null},e.prototype.hasIndex=function(e){return(0,o.contains)(this.indexSet_,e.toString())},e.prototype.addIndex=function(t,n){(0,o.assert)(t!==Ht,"KeyIndex always exists and isn't meant to be added to the IndexMap.");var r,i=[],s=!1,u=n.getIterator(Bt.Wrap),c=u.getNext();while(c)s=s||t.isDefinedOn(c.node),i.push(c),c=u.getNext();r=s?pn(i,t.getCompare()):vn;var l=t.toString(),h=(0,a.__assign)({},this.indexSet_);h[l]=t;var f=(0,a.__assign)({},this.indexes_);return f[l]=r,new e(f,h)},e.prototype.addToIndexes=function(t,n){var r=this,i=(0,o.map)(this.indexes_,(function(e,i){var a=(0,o.safeGet)(r.indexSet_,i);if((0,o.assert)(a,"Missing index implementation for "+i),e===vn){if(a.isDefinedOn(t.node)){var s=[],u=n.getIterator(Bt.Wrap),c=u.getNext();while(c)c.name!==t.name&&s.push(c),c=u.getNext();return s.push(t),pn(s,a.getCompare())}return vn}var l=n.get(t.name),h=e;return l&&(h=h.remove(new Bt(t.name,l))),h.insert(t,t.node)}));return new e(i,this.indexSet_)},e.prototype.removeFromIndexes=function(t,n){var r=(0,o.map)(this.indexes_,(function(e){if(e===vn)return e;var r=n.get(t.name);return r?e.remove(new Bt(t.name,r)):e}));return new e(r,this.indexSet_)},e}(),mn=function(){function e(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&rn(this.priorityNode_),this.children_.isEmpty()&&(0,o.assert)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(e,"EMPTY_NODE",{get:function(){return cn||(cn=new e(new $t(Xt),null,gn.Default))},enumerable:!1,configurable:!0}),e.prototype.isLeafNode=function(){return!1},e.prototype.getPriority=function(){return this.priorityNode_||cn},e.prototype.updatePriority=function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)},e.prototype.getImmediateChild=function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?cn:t},e.prototype.getChild=function(e){var t=ft(e);return null===t?this:this.getImmediateChild(t).getChild(pt(e))},e.prototype.hasChild=function(e){return null!==this.children_.get(e)},e.prototype.updateImmediateChild=function(t,n){if((0,o.assert)(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r=new Bt(t,n),i=void 0,a=void 0;n.isEmpty()?(i=this.children_.remove(t),a=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(t,n),a=this.indexMap_.addToIndexes(r,this.children_));var s=i.isEmpty()?cn:this.priorityNode_;return new e(i,s,a)},e.prototype.updateChild=function(e,t){var n=ft(e);if(null===n)return t;(0,o.assert)(".priority"!==ft(e)||1===dt(e),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(pt(e),t);return this.updateImmediateChild(n,r)},e.prototype.isEmpty=function(){return this.children_.isEmpty()},e.prototype.numChildren=function(){return this.children_.count()},e.prototype.val=function(t){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(hn,(function(a,s){n[a]=s.val(t),r++,o&&e.INTEGER_REGEXP_.test(a)?i=Math.max(i,Number(a)):o=!1})),!t&&o&&i<2*r){var a=[];for(var s in n)a[s]=n[s];return a}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},e.prototype.hash=function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+nn(this.getPriority().val())+":"),this.forEachChild(hn,(function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":_(e)}return this.lazyHash_},e.prototype.getPredecessorChildName=function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Bt(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)},e.prototype.getFirstChildName=function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()},e.prototype.getFirstChild=function(e){var t=this.getFirstChildName(e);return t?new Bt(t,this.children_.get(t)):null},e.prototype.getLastChildName=function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()},e.prototype.getLastChild=function(e){var t=this.getLastChildName(e);return t?new Bt(t,this.children_.get(t)):null},e.prototype.forEachChild=function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal((function(e){return t(e.name,e.node)})):this.children_.inorderTraversal(t)},e.prototype.getIterator=function(e){return this.getIteratorFrom(e.minPost(),e)},e.prototype.getIteratorFrom=function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(function(e){return e}));var r=this.children_.getIteratorFrom(e.name,Bt.Wrap),i=r.peek();while(null!=i&&t.compare(i,e)<0)r.getNext(),i=r.peek();return r},e.prototype.getReverseIterator=function(e){return this.getReverseIteratorFrom(e.maxPost(),e)},e.prototype.getReverseIteratorFrom=function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(function(e){return e}));var r=this.children_.getReverseIteratorFrom(e.name,Bt.Wrap),i=r.peek();while(null!=i&&t.compare(i,e)>0)r.getNext(),i=r.peek();return r},e.prototype.compareTo=function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===_n?-1:0},e.prototype.withIndex=function(t){if(t===Ht||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)},e.prototype.isIndexed=function(e){return e===Ht||this.indexMap_.hasIndex(e)},e.prototype.equals=function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){var n=this.getIterator(hn),r=t.getIterator(hn),i=n.getNext(),o=r.getNext();while(i&&o){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},e.prototype.resolveIndex_=function(e){return e===Ht?null:this.indexMap_.get(e.toString())},e.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,e}(),yn=function(e){function t(){return e.call(this,new $t(Xt),mn.EMPTY_NODE,gn.Default)||this}return(0,a.__extends)(t,e),t.prototype.compareTo=function(e){return e===this?0:1},t.prototype.equals=function(e){return e===this},t.prototype.getPriority=function(){return this},t.prototype.getImmediateChild=function(e){return mn.EMPTY_NODE},t.prototype.isEmpty=function(){return!1},t}(mn),_n=new yn;Object.defineProperties(Bt,{MIN:{value:new Bt(P,mn.EMPTY_NODE)},MAX:{value:new Bt(O,_n)}}),Wt.__EMPTY_NODE=mn.EMPTY_NODE,on.__childrenNodeConstructor=mn,Jt(_n),sn(_n);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var bn=!0;function wn(e,t){if(void 0===t&&(t=null),null===e)return mn.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),(0,o.assert)(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){var n=e;return new on(n,wn(t))}if(e instanceof Array||!bn){var r=mn.EMPTY_NODE;return U(e,(function(t,n){if((0,o.contains)(e,t)&&"."!==t.substring(0,1)){var i=wn(n);!i.isLeafNode()&&i.isEmpty()||(r=r.updateImmediateChild(t,i))}})),r.updatePriority(wn(t))}var i=[],a=!1,s=e;if(U(s,(function(e,t){if("."!==e.substring(0,1)){var n=wn(t);n.isEmpty()||(a=a||!n.getPriority().isEmpty(),i.push(new Bt(e,n)))}})),0===i.length)return mn.EMPTY_NODE;var u=pn(i,Yt,(function(e){return e.name}),Xt);if(a){var c=pn(i,hn.getCompare());return new mn(u,wn(t),new gn({".priority":c},{".priority":hn}))}return new mn(u,wn(t),gn.Default)}an(wn);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var In=function(e){function t(t){var n=e.call(this)||this;return n.indexPath_=t,(0,o.assert)(!bt(t)&&".priority"!==ft(t),"Can't create PathIndex with empty path or .priority key"),n}return(0,a.__extends)(t,e),t.prototype.extractChild=function(e){return e.getChild(this.indexPath_)},t.prototype.isDefinedOn=function(e){return!e.getChild(this.indexPath_).isEmpty()},t.prototype.compare=function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?D(e.name,t.name):i},t.prototype.makePost=function(e,t){var n=wn(e),r=mn.EMPTY_NODE.updateChild(this.indexPath_,n);return new Bt(t,r)},t.prototype.maxPost=function(){var e=mn.EMPTY_NODE.updateChild(this.indexPath_,_n);return new Bt(O,e)},t.prototype.toString=function(){return mt(this.indexPath_,0).join("/")},t}(Kt),Tn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,a.__extends)(t,e),t.prototype.compare=function(e,t){var n=e.node.compareTo(t.node);return 0===n?D(e.name,t.name):n},t.prototype.isDefinedOn=function(e){return!0},t.prototype.indexedValueChanged=function(e,t){return!e.equals(t)},t.prototype.minPost=function(){return Bt.MIN},t.prototype.maxPost=function(){return Bt.MAX},t.prototype.makePost=function(e,t){var n=wn(e);return new Bt(t,n)},t.prototype.toString=function(){return".value"},t}(Kt),En=new Tn,kn="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Sn="-",Cn="z",An=786,Nn=function(){var e=0,t=[];return function(n){var r,i=n===e;e=n;var a=new Array(8);for(r=7;r>=0;r--)a[r]=kn.charAt(n%64),n=Math.floor(n/64);(0,o.assert)(0===n,"Cannot push at time == 0");var s=a.join("");if(i){for(r=11;r>=0&&63===t[r];r--)t[r]=0;t[r]++}else for(r=0;r<12;r++)t[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)s+=kn.charAt(t[r]);return(0,o.assert)(20===s.length,"nextPushId: Length should be 20."),s}}(),xn=function(e){if(e===""+G)return Sn;var t=z(e);if(null!=t)return""+(t+1);for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e.charAt(r);if(n.length<An)return n.push(Sn),n.join("");var i=n.length-1;while(i>=0&&n[i]===Cn)i--;if(-1===i)return O;var o=n[i],a=kn.charAt(kn.indexOf(o)+1);return n[i]=a,n.slice(0,i+1).join("")},Rn=function(e){if(e===""+H)return P;var t=z(e);if(null!=t)return""+(t-1);for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e.charAt(r);return n[n.length-1]===Sn?1===n.length?""+G:(delete n[n.length-1],n.join("")):(n[n.length-1]=kn.charAt(kn.indexOf(n[n.length-1])-1),n.join("")+Cn.repeat(An-n.length))};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Pn(e){return{type:"value",snapshotNode:e}}function On(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function Dn(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function Mn(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}function Ln(e,t){return{type:"child_moved",snapshotNode:t,childName:e}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fn=function(){function e(e){this.index_=e}return e.prototype.updateChild=function(e,t,n,r,i,a){(0,o.assert)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var s=e.getImmediateChild(t);return s.getChild(r).equals(n.getChild(r))&&s.isEmpty()===n.isEmpty()?e:(null!=a&&(n.isEmpty()?e.hasChild(t)?a.trackChildChange(Dn(t,s)):(0,o.assert)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):s.isEmpty()?a.trackChildChange(On(t,n)):a.trackChildChange(Mn(t,n,s))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))},e.prototype.updateFullNode=function(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(hn,(function(e,r){t.hasChild(e)||n.trackChildChange(Dn(e,r))})),t.isLeafNode()||t.forEachChild(hn,(function(t,r){if(e.hasChild(t)){var i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(Mn(t,r,i))}else n.trackChildChange(On(t,r))}))),t.withIndex(this.index_)},e.prototype.updatePriority=function(e,t){return e.isEmpty()?mn.EMPTY_NODE:e.updatePriority(t)},e.prototype.filtersNodes=function(){return!1},e.prototype.getIndexedFilter=function(){return this},e.prototype.getIndex=function(){return this.index_},e}(),jn=function(){function e(t){this.indexedFilter_=new Fn(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t)}return e.prototype.getStartPost=function(){return this.startPost_},e.prototype.getEndPost=function(){return this.endPost_},e.prototype.matches=function(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0},e.prototype.updateChild=function(e,t,n,r,i,o){return this.matches(new Bt(t,n))||(n=mn.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,o)},e.prototype.updateFullNode=function(e,t,n){t.isLeafNode()&&(t=mn.EMPTY_NODE);var r=t.withIndex(this.index_);r=r.updatePriority(mn.EMPTY_NODE);var i=this;return t.forEachChild(hn,(function(e,t){i.matches(new Bt(e,t))||(r=r.updateImmediateChild(e,mn.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)},e.prototype.updatePriority=function(e,t){return e},e.prototype.filtersNodes=function(){return!0},e.prototype.getIndexedFilter=function(){return this.indexedFilter_},e.prototype.getIndex=function(){return this.index_},e.getStartPost_=function(e){if(e.hasStart()){var t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()},e.getEndPost_=function(e){if(e.hasEnd()){var t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()},e}(),Un=function(){function e(e){this.rangedFilter_=new jn(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}return e.prototype.updateChild=function(e,t,n,r,i,o){return this.rangedFilter_.matches(new Bt(t,n))||(n=mn.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,o):this.fullLimitUpdateChild_(e,t,n,i,o)},e.prototype.updateFullNode=function(e,t,n){var r;if(t.isLeafNode()||t.isEmpty())r=mn.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){r=mn.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);var o=0;while(i.hasNext()&&o<this.limit_){var a=i.getNext(),s=void 0;if(s=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),a)<=0:this.index_.compare(a,this.rangedFilter_.getEndPost())<=0,!s)break;r=r.updateImmediateChild(a.name,a.node),o++}}else{r=t.withIndex(this.index_),r=r.updatePriority(mn.EMPTY_NODE);var u=void 0,c=void 0,l=void 0;i=void 0;if(this.reverse_){i=r.getReverseIterator(this.index_),u=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost();var h=this.index_.getCompare();l=function(e,t){return h(t,e)}}else i=r.getIterator(this.index_),u=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),l=this.index_.getCompare();o=0;var f=!1;while(i.hasNext()){a=i.getNext();!f&&l(u,a)<=0&&(f=!0);s=f&&o<this.limit_&&l(a,c)<=0;s?o++:r=r.updateImmediateChild(a.name,mn.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)},e.prototype.updatePriority=function(e,t){return e},e.prototype.filtersNodes=function(){return!0},e.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},e.prototype.getIndex=function(){return this.index_},e.prototype.fullLimitUpdateChild_=function(e,t,n,r,i){var a;if(this.reverse_){var s=this.index_.getCompare();a=function(e,t){return s(t,e)}}else a=this.index_.getCompare();var u=e;(0,o.assert)(u.numChildren()===this.limit_,"");var c=new Bt(t,n),l=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),h=this.rangedFilter_.matches(c);if(u.hasChild(t)){var f=u.getImmediateChild(t),d=r.getChildAfterChild(this.index_,l,this.reverse_);while(null!=d&&(d.name===t||u.hasChild(d.name)))d=r.getChildAfterChild(this.index_,d,this.reverse_);var p=null==d?1:a(d,c),v=h&&!n.isEmpty()&&p>=0;if(v)return null!=i&&i.trackChildChange(Mn(t,n,f)),u.updateImmediateChild(t,n);null!=i&&i.trackChildChange(Dn(t,f));var g=u.updateImmediateChild(t,mn.EMPTY_NODE),m=null!=d&&this.rangedFilter_.matches(d);return m?(null!=i&&i.trackChildChange(On(d.name,d.node)),g.updateImmediateChild(d.name,d.node)):g}return n.isEmpty()?e:h&&a(l,c)>=0?(null!=i&&(i.trackChildChange(Dn(l.name,l.node)),i.trackChildChange(On(t,n))),u.updateImmediateChild(t,n).updateImmediateChild(l.name,mn.EMPTY_NODE)):e},e}(),qn=function(){function e(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=hn}return e.prototype.hasStart=function(){return this.startSet_},e.prototype.hasStartAfter=function(){return this.startAfterSet_},e.prototype.hasEndBefore=function(){return this.endBeforeSet_},e.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},e.prototype.getIndexStartValue=function(){return(0,o.assert)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},e.prototype.getIndexStartName=function(){return(0,o.assert)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:P},e.prototype.hasEnd=function(){return this.endSet_},e.prototype.getIndexEndValue=function(){return(0,o.assert)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},e.prototype.getIndexEndName=function(){return(0,o.assert)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:O},e.prototype.hasLimit=function(){return this.limitSet_},e.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},e.prototype.getLimit=function(){return(0,o.assert)(this.limitSet_,"Only valid if limit has been set"),this.limit_},e.prototype.getIndex=function(){return this.index_},e.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},e.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===hn},e.prototype.copy=function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vn(e){return e.loadsAllData()?new Fn(e.getIndex()):e.hasLimit()?new Un(e):new jn(e)}function Bn(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="l",n}function Kn(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="r",n}function Wn(e,t,n){var r=e.copy();return r.startSet_=!0,void 0===t&&(t=null),r.indexStartValue_=t,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function Hn(e,t,n){var r;if(e.index_===Ht)"string"===typeof t&&(t=xn(t)),r=Wn(e,t,n);else{var i=void 0;i=null==n?O:xn(n),r=Wn(e,t,i)}return r.startAfterSet_=!0,r}function Gn(e,t,n){var r=e.copy();return r.endSet_=!0,void 0===t&&(t=null),r.indexEndValue_=t,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function zn(e,t,n){var r,i;return e.index_===Ht?("string"===typeof t&&(t=Rn(t)),i=Gn(e,t,n)):(r=null==n?P:Rn(n),i=Gn(e,t,r)),i.endBeforeSet_=!0,i}function Qn(e,t){var n=e.copy();return n.index_=t,n}function $n(e){var t,n={};return e.isDefault()||(e.index_===hn?t="$priority":e.index_===En?t="$value":e.index_===Ht?t="$key":((0,o.assert)(e.index_ instanceof In,"Unrecognized index type!"),t=e.index_.toString()),n["orderBy"]=(0,o.stringify)(t),e.startSet_&&(n["startAt"]=(0,o.stringify)(e.indexStartValue_),e.startNameSet_&&(n["startAt"]+=","+(0,o.stringify)(e.indexStartName_))),e.endSet_&&(n["endAt"]=(0,o.stringify)(e.indexEndValue_),e.endNameSet_&&(n["endAt"]+=","+(0,o.stringify)(e.indexEndName_))),e.limitSet_&&(e.isViewFromLeft()?n["limitToFirst"]=e.limit_:n["limitToLast"]=e.limit_)),n}function Yn(e){var t={};if(e.startSet_&&(t["sp"]=e.indexStartValue_,e.startNameSet_&&(t["sn"]=e.indexStartName_)),e.endSet_&&(t["ep"]=e.indexEndValue_,e.endNameSet_&&(t["en"]=e.indexEndName_)),e.limitSet_){t["l"]=e.limit_;var n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t["vf"]=n}return e.index_!==hn&&(t["i"]=e.index_.toString()),t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xn=function(e){function t(t,n,r,i){var o=e.call(this)||this;return o.repoInfo_=t,o.onDataUpdate_=n,o.authTokenProvider_=r,o.appCheckTokenProvider_=i,o.log_=k("p:rest:"),o.listens_={},o}return(0,a.__extends)(t,e),t.prototype.reportStats=function(e){throw new Error("Method not implemented.")},t.getListenId_=function(e,t){return void 0!==t?"tag$"+t:((0,o.assert)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())},t.prototype.listen=function(e,n,r,i){var a=this,s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);var u=t.getListenId_(e,r),c={};this.listens_[u]=c;var l=$n(e._queryParams);this.restRequest_(s+".json",l,(function(e,t){var n,l=t;(404===e&&(l=null,e=null),null===e&&a.onDataUpdate_(s,l,!1,r),(0,o.safeGet)(a.listens_,u)===c)&&(n=e?401===e?"permission_denied":"rest_error:"+e:"ok",i(n,null))}))},t.prototype.unlisten=function(e,n){var r=t.getListenId_(e,n);delete this.listens_[r]},t.prototype.get=function(e){var t=this,n=$n(e._queryParams),r=e._path.toString(),i=new o.Deferred;return this.restRequest_(r+".json",n,(function(e,n){var o=n;404===e&&(o=null,e=null),null===e?(t.onDataUpdate_(r,o,!1,null),i.resolve(o)):i.reject(new Error(o))})),i.promise},t.prototype.refreshAuthToken=function(e){},t.prototype.restRequest_=function(e,t,n){var r=this;return void 0===t&&(t={}),t["format"]="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(i){var s=(0,a.__read)(i,2),u=s[0],c=s[1];u&&u.accessToken&&(t["auth"]=u.accessToken),c&&c.token&&(t["ac"]=c.token);var l=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+e+"?ns="+r.repoInfo_.namespace+(0,o.querystring)(t);r.log_("Sending REST request for "+l);var h=new XMLHttpRequest;h.onreadystatechange=function(){if(n&&4===h.readyState){r.log_("REST Response for "+l+" received. status:",h.status,"response:",h.responseText);var e=null;if(h.status>=200&&h.status<300){try{e=(0,o.jsonEval)(h.responseText)}catch(t){A("Failed to parse JSON response for "+l+": "+h.responseText)}n(null,e)}else 401!==h.status&&404!==h.status&&A("Got unsuccessful REST response for "+l+" Status: "+h.status),n(h.status);n=null}},h.open("GET",l,!0),h.send()}))},t}(ot),Jn=function(){function e(){this.rootNode_=mn.EMPTY_NODE}return e.prototype.getNode=function(e){return this.rootNode_.getChild(e)},e.prototype.updateSnapshot=function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Zn(){return{value:null,children:new Map}}function er(e,t,n){if(bt(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{var r=ft(t);e.children.has(r)||e.children.set(r,Zn());var i=e.children.get(r);t=pt(t),er(i,t,n)}}function tr(e,t){if(bt(t))return e.value=null,e.children.clear(),!0;if(null!==e.value){if(e.value.isLeafNode())return!1;var n=e.value;return e.value=null,n.forEachChild(hn,(function(t,n){er(e,new lt(t),n)})),tr(e,t)}if(e.children.size>0){var r=ft(t);if(t=pt(t),e.children.has(r)){var i=tr(e.children.get(r),t);i&&e.children.delete(r)}return 0===e.children.size}return!0}function nr(e,t,n){null!==e.value?n(t,e.value):rr(e,(function(e,r){var i=new lt(t.toString()+"/"+e);nr(r,i,n)}))}function rr(e,t){e.children.forEach((function(e,n){t(n,e)}))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ir,or=function(){function e(e){this.collection_=e,this.last_=null}return e.prototype.get=function(){var e=this.collection_.get(),t=(0,a.__assign)({},e);return this.last_&&U(this.last_,(function(e,n){t[e]=t[e]-n})),this.last_=e,t},e}(),ar=1e4,sr=3e4,ur=3e5,cr=function(){function e(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new or(e);var n=ar+(sr-ar)*Math.random();Y(this.reportStats_.bind(this),Math.floor(n))}return e.prototype.reportStats_=function(){var e=this,t=this.statsListener_.get(),n={},r=!1;U(t,(function(t,i){i>0&&(0,o.contains)(e.statsToReport_,t)&&(n[t]=i,r=!0)})),r&&this.server_.reportStats(n),Y(this.reportStats_.bind(this),Math.floor(2*Math.random()*ur))},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lr(e,t){e.statsToReport_[t]=!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hr(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function fr(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function dr(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(e){e[e["OVERWRITE"]=0]="OVERWRITE",e[e["MERGE"]=1]="MERGE",e[e["ACK_USER_WRITE"]=2]="ACK_USER_WRITE",e[e["LISTEN_COMPLETE"]=3]="LISTEN_COMPLETE"})(ir||(ir={}));var pr,vr=function(){function e(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=ir.ACK_USER_WRITE,this.source=hr()}return e.prototype.operationForChild=function(t){if(bt(this.path)){if(null!=this.affectedTree.value)return(0,o.assert)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new lt(t));return new e(ht(),n,this.revert)}return(0,o.assert)(ft(this.path)===t,"operationForChild called for unrelated child."),new e(pt(this.path),this.affectedTree,this.revert)},e}(),gr=function(){function e(e,t){this.source=e,this.path=t,this.type=ir.LISTEN_COMPLETE}return e.prototype.operationForChild=function(t){return bt(this.path)?new e(this.source,ht()):new e(this.source,pt(this.path))},e}(),mr=function(){function e(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=ir.OVERWRITE}return e.prototype.operationForChild=function(t){return bt(this.path)?new e(this.source,ht(),this.snap.getImmediateChild(t)):new e(this.source,pt(this.path),this.snap)},e}(),yr=function(){function e(e,t,n){this.source=e,this.path=t,this.children=n,this.type=ir.MERGE}return e.prototype.operationForChild=function(t){if(bt(this.path)){var n=this.children.subtree(new lt(t));return n.isEmpty()?null:n.value?new mr(this.source,ht(),n.value):new e(this.source,ht(),n)}return(0,o.assert)(ft(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,pt(this.path),this.children)},e.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},e}(),_r=function(){function e(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}return e.prototype.isFullyInitialized=function(){return this.fullyInitialized_},e.prototype.isFiltered=function(){return this.filtered_},e.prototype.isCompleteForPath=function(e){if(bt(e))return this.isFullyInitialized()&&!this.filtered_;var t=ft(e);return this.isCompleteForChild(t)},e.prototype.isCompleteForChild=function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)},e.prototype.getNode=function(){return this.node_},e}(),br=function(){function e(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}return e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wr(e,t,n,r){var i=[],o=[];return t.forEach((function(t){"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push(Ln(t.childName,t.snapshotNode))})),Ir(e,i,"child_removed",t,r,n),Ir(e,i,"child_added",t,r,n),Ir(e,i,"child_moved",o,r,n),Ir(e,i,"child_changed",t,r,n),Ir(e,i,"value",t,r,n),i}function Ir(e,t,n,r,i,o){var a=r.filter((function(e){return e.type===n}));a.sort((function(t,n){return Er(e,t,n)})),a.forEach((function(n){var r=Tr(e,n,o);i.forEach((function(i){i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function Tr(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}function Er(e,t,n){if(null==t.childName||null==n.childName)throw(0,o.assertionError)("Should only compare child_ events.");var r=new Bt(t.childName,t.snapshotNode),i=new Bt(n.childName,n.snapshotNode);return e.index_.compare(r,i)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kr(e,t){return{eventCache:e,serverCache:t}}function Sr(e,t,n,r){return kr(new _r(t,n,r),e.serverCache)}function Cr(e,t,n,r){return kr(e.eventCache,new _r(t,n,r))}function Ar(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function Nr(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xr=function(){return pr||(pr=new $t(M)),pr},Rr=function(){function e(e,t){void 0===t&&(t=xr()),this.value=e,this.children=t}return e.fromObject=function(t){var n=new e(null);return U(t,(function(e,t){n=n.set(new lt(e),t)})),n},e.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},e.prototype.findRootMostMatchingPathAndValue=function(e,t){if(null!=this.value&&t(this.value))return{path:ht(),value:this.value};if(bt(e))return null;var n=ft(e),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(pt(e),t);if(null!=i){var o=_t(new lt(n),i.path);return{path:o,value:i.value}}return null}return null},e.prototype.findRootMostValueAndPath=function(e){return this.findRootMostMatchingPathAndValue(e,(function(){return!0}))},e.prototype.subtree=function(t){if(bt(t))return this;var n=ft(t),r=this.children.get(n);return null!==r?r.subtree(pt(t)):new e(null)},e.prototype.set=function(t,n){if(bt(t))return new e(n,this.children);var r=ft(t),i=this.children.get(r)||new e(null),o=i.set(pt(t),n),a=this.children.insert(r,o);return new e(this.value,a)},e.prototype.remove=function(t){if(bt(t))return this.children.isEmpty()?new e(null):new e(null,this.children);var n=ft(t),r=this.children.get(n);if(r){var i=r.remove(pt(t)),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?new e(null):new e(this.value,o)}return this},e.prototype.get=function(e){if(bt(e))return this.value;var t=ft(e),n=this.children.get(t);return n?n.get(pt(e)):null},e.prototype.setTree=function(t,n){if(bt(t))return n;var r=ft(t),i=this.children.get(r)||new e(null),o=i.setTree(pt(t),n),a=void 0;return a=o.isEmpty()?this.children.remove(r):this.children.insert(r,o),new e(this.value,a)},e.prototype.fold=function(e){return this.fold_(ht(),e)},e.prototype.fold_=function(e,t){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(_t(e,r),t)})),t(e,this.value,n)},e.prototype.findOnPath=function(e,t){return this.findOnPath_(e,ht(),t)},e.prototype.findOnPath_=function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(bt(e))return null;var i=ft(e),o=this.children.get(i);return o?o.findOnPath_(pt(e),_t(t,i),n):null},e.prototype.foreachOnPath=function(e,t){return this.foreachOnPath_(e,ht(),t)},e.prototype.foreachOnPath_=function(t,n,r){if(bt(t))return this;this.value&&r(n,this.value);var i=ft(t),o=this.children.get(i);return o?o.foreachOnPath_(pt(t),_t(n,i),r):new e(null)},e.prototype.foreach=function(e){this.foreach_(ht(),e)},e.prototype.foreach_=function(e,t){this.children.inorderTraversal((function(n,r){r.foreach_(_t(e,n),t)})),this.value&&t(e,this.value)},e.prototype.foreachChild=function(e){this.children.inorderTraversal((function(t,n){n.value&&e(t,n.value)}))},e}(),Pr=function(){function e(e){this.writeTree_=e}return e.empty=function(){return new e(new Rr(null))},e}();function Or(e,t,n){if(bt(t))return new Pr(new Rr(n));var r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){var i=r.path,o=r.value,a=wt(i,t);return o=o.updateChild(a,n),new Pr(e.writeTree_.set(i,o))}var s=new Rr(n),u=e.writeTree_.setTree(t,s);return new Pr(u)}function Dr(e,t,n){var r=e;return U(n,(function(e,n){r=Or(r,_t(t,e),n)})),r}function Mr(e,t){if(bt(t))return Pr.empty();var n=e.writeTree_.setTree(t,new Rr(null));return new Pr(n)}function Lr(e,t){return null!=Fr(e,t)}function Fr(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(wt(n.path,t)):null}function jr(e){var t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(hn,(function(e,n){t.push(new Bt(e,n))})):e.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new Bt(e,n.value))})),t}function Ur(e,t){if(bt(t))return e;var n=Fr(e,t);return new Pr(null!=n?new Rr(n):e.writeTree_.subtree(t))}function qr(e){return e.writeTree_.isEmpty()}function Vr(e,t){return Br(ht(),e.writeTree_,t)}function Br(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);var r=null;return t.children.inorderTraversal((function(t,i){".priority"===t?((0,o.assert)(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=Br(_t(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(_t(e,".priority"),r)),n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kr(e,t){return fi(t,e)}function Wr(e,t,n,r,i){(0,o.assert)(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=Or(e.visibleWrites,t,n)),e.lastWriteId=r}function Hr(e,t,n,r){(0,o.assert)(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=Dr(e.visibleWrites,t,n),e.lastWriteId=r}function Gr(e,t){for(var n=0;n<e.allWrites.length;n++){var r=e.allWrites[n];if(r.writeId===t)return r}return null}function zr(e,t){var n=e.allWrites.findIndex((function(e){return e.writeId===t}));(0,o.assert)(n>=0,"removeWrite called with nonexistent writeId.");var r=e.allWrites[n];e.allWrites.splice(n,1);var i=r.visible,a=!1,s=e.allWrites.length-1;while(i&&s>=0){var u=e.allWrites[s];u.visible&&(s>=n&&Qr(u,r.path)?i=!1:Et(r.path,u.path)&&(a=!0)),s--}if(i){if(a)return $r(e),!0;if(r.snap)e.visibleWrites=Mr(e.visibleWrites,r.path);else{var c=r.children;U(c,(function(t){e.visibleWrites=Mr(e.visibleWrites,_t(r.path,t))}))}return!0}return!1}function Qr(e,t){if(e.snap)return Et(e.path,t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&Et(_t(e.path,n),t))return!0;return!1}function $r(e){e.visibleWrites=Xr(e.allWrites,Yr,ht()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}function Yr(e){return e.visible}function Xr(e,t,n){for(var r=Pr.empty(),i=0;i<e.length;++i){var a=e[i];if(t(a)){var s=a.path,u=void 0;if(a.snap)Et(n,s)?(u=wt(n,s),r=Or(r,u,a.snap)):Et(s,n)&&(u=wt(s,n),r=Or(r,ht(),a.snap.getChild(u)));else{if(!a.children)throw(0,o.assertionError)("WriteRecord should have .snap or .children");if(Et(n,s))u=wt(n,s),r=Dr(r,u,a.children);else if(Et(s,n))if(u=wt(s,n),bt(u))r=Dr(r,ht(),a.children);else{var c=(0,o.safeGet)(a.children,ft(u));if(c){var l=c.getChild(pt(u));r=Or(r,ht(),l)}}}}}return r}function Jr(e,t,n,r,i){if(r||i){var o=Ur(e.visibleWrites,t);if(!i&&qr(o))return n;if(i||null!=n||Lr(o,ht())){var a=function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(Et(e.path,t)||Et(t,e.path))},s=Xr(e.allWrites,a,t);l=n||mn.EMPTY_NODE;return Vr(s,l)}return null}var u=Fr(e.visibleWrites,t);if(null!=u)return u;var c=Ur(e.visibleWrites,t);if(qr(c))return n;if(null!=n||Lr(c,ht())){var l=n||mn.EMPTY_NODE;return Vr(c,l)}return null}function Zr(e,t,n){var r=mn.EMPTY_NODE,i=Fr(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(hn,(function(e,t){r=r.updateImmediateChild(e,t)})),r;if(n){var o=Ur(e.visibleWrites,t);return n.forEachChild(hn,(function(e,t){var n=Vr(Ur(o,new lt(e)),t);r=r.updateImmediateChild(e,n)})),jr(o).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}var a=Ur(e.visibleWrites,t);return jr(a).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}function ei(e,t,n,r,i){(0,o.assert)(r||i,"Either existingEventSnap or existingServerSnap must exist");var a=_t(t,n);if(Lr(e.visibleWrites,a))return null;var s=Ur(e.visibleWrites,a);return qr(s)?i.getChild(n):Vr(s,i.getChild(n))}function ti(e,t,n,r){var i=_t(t,n),o=Fr(e.visibleWrites,i);if(null!=o)return o;if(r.isCompleteForChild(n)){var a=Ur(e.visibleWrites,i);return Vr(a,r.getNode().getImmediateChild(n))}return null}function ni(e,t){return Fr(e.visibleWrites,t)}function ri(e,t,n,r,i,o,a){var s,u=Ur(e.visibleWrites,t),c=Fr(u,ht());if(null!=c)s=c;else{if(null==n)return[];s=Vr(u,n)}if(s=s.withIndex(a),s.isEmpty()||s.isLeafNode())return[];var l=[],h=a.getCompare(),f=o?s.getReverseIteratorFrom(r,a):s.getIteratorFrom(r,a),d=f.getNext();while(d&&l.length<i)0!==h(d,r)&&l.push(d),d=f.getNext();return l}function ii(){return{visibleWrites:Pr.empty(),allWrites:[],lastWriteId:-1}}function oi(e,t,n,r){return Jr(e.writeTree,e.treePath,t,n,r)}function ai(e,t){return Zr(e.writeTree,e.treePath,t)}function si(e,t,n,r){return ei(e.writeTree,e.treePath,t,n,r)}function ui(e,t){return ni(e.writeTree,_t(e.treePath,t))}function ci(e,t,n,r,i,o){return ri(e.writeTree,e.treePath,t,n,r,i,o)}function li(e,t,n){return ti(e.writeTree,e.treePath,t,n)}function hi(e,t){return fi(_t(e.treePath,t),e.writeTree)}function fi(e,t){return{treePath:e,writeTree:t}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var di=function(){function e(){this.changeMap=new Map}return e.prototype.trackChildChange=function(e){var t=e.type,n=e.childName;(0,o.assert)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,o.assert)(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,Mn(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,Dn(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,On(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw(0,o.assertionError)("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,Mn(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)},e.prototype.getChanges=function(){return Array.from(this.changeMap.values())},e}(),pi=function(){function e(){}return e.prototype.getCompleteChild=function(e){return null},e.prototype.getChildAfterChild=function(e,t,n){return null},e}(),vi=new pi,gi=function(){function e(e,t,n){void 0===n&&(n=null),this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}return e.prototype.getCompleteChild=function(e){var t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new _r(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return li(this.writes_,e,n)},e.prototype.getChildAfterChild=function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Nr(this.viewCache_),i=ci(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function mi(e){return{filter:e}}function yi(e,t){(0,o.assert)(t.eventCache.getNode().isIndexed(e.filter.getIndex()),"Event snap not indexed"),(0,o.assert)(t.serverCache.getNode().isIndexed(e.filter.getIndex()),"Server snap not indexed")}function _i(e,t,n,r,i){var a,s,u=new di;if(n.type===ir.OVERWRITE){var c=n;c.source.fromUser?a=Ti(e,t,c.path,c.snap,r,i,u):((0,o.assert)(c.source.fromServer,"Unknown source."),s=c.source.tagged||t.serverCache.isFiltered()&&!bt(c.path),a=Ii(e,t,c.path,c.snap,r,i,s,u))}else if(n.type===ir.MERGE){var l=n;l.source.fromUser?a=ki(e,t,l.path,l.children,r,i,u):((0,o.assert)(l.source.fromServer,"Unknown source."),s=l.source.tagged||t.serverCache.isFiltered(),a=Ci(e,t,l.path,l.children,r,i,s,u))}else if(n.type===ir.ACK_USER_WRITE){var h=n;a=h.revert?xi(e,t,h.path,r,i,u):Ai(e,t,h.path,h.affectedTree,r,i,u)}else{if(n.type!==ir.LISTEN_COMPLETE)throw(0,o.assertionError)("Unknown operation type: "+n.type);a=Ni(e,t,n.path,r,u)}var f=u.getChanges();return bi(t,a,f),{viewCache:a,changes:f}}function bi(e,t,n){var r=t.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=Ar(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(Pn(Ar(t)))}}function wi(e,t,n,r,i,a){var s=t.eventCache;if(null!=ui(r,n))return t;var u=void 0,c=void 0;if(bt(n))if((0,o.assert)(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){var l=Nr(t),h=l instanceof mn?l:mn.EMPTY_NODE,f=ai(r,h);u=e.filter.updateFullNode(t.eventCache.getNode(),f,a)}else{var d=oi(r,Nr(t));u=e.filter.updateFullNode(t.eventCache.getNode(),d,a)}else{var p=ft(n);if(".priority"===p){(0,o.assert)(1===dt(n),"Can't have a priority with additional path components");var v=s.getNode();c=t.serverCache.getNode();var g=si(r,n,v,c);u=null!=g?e.filter.updatePriority(v,g):s.getNode()}else{var m=pt(n),y=void 0;if(s.isCompleteForChild(p)){c=t.serverCache.getNode();var _=si(r,n,s.getNode(),c);y=null!=_?s.getNode().getImmediateChild(p).updateChild(m,_):s.getNode().getImmediateChild(p)}else y=li(r,p,t.serverCache);u=null!=y?e.filter.updateChild(s.getNode(),p,y,m,i,a):s.getNode()}}return Sr(t,u,s.isFullyInitialized()||bt(n),e.filter.filtersNodes())}function Ii(e,t,n,r,i,o,a,s){var u,c=t.serverCache,l=a?e.filter:e.filter.getIndexedFilter();if(bt(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var h=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),h,null)}else{var f=ft(n);if(!c.isCompleteForPath(n)&&dt(n)>1)return t;var d=pt(n),p=c.getNode().getImmediateChild(f),v=p.updateChild(d,r);u=".priority"===f?l.updatePriority(c.getNode(),v):l.updateChild(c.getNode(),f,v,d,vi,null)}var g=Cr(t,u,c.isFullyInitialized()||bt(n),l.filtersNodes()),m=new gi(i,g,o);return wi(e,g,n,i,m,s)}function Ti(e,t,n,r,i,o,a){var s,u,c=t.eventCache,l=new gi(i,t,o);if(bt(n))u=e.filter.updateFullNode(t.eventCache.getNode(),r,a),s=Sr(t,u,!0,e.filter.filtersNodes());else{var h=ft(n);if(".priority"===h)u=e.filter.updatePriority(t.eventCache.getNode(),r),s=Sr(t,u,c.isFullyInitialized(),c.isFiltered());else{var f=pt(n),d=c.getNode().getImmediateChild(h),p=void 0;if(bt(f))p=r;else{var v=l.getCompleteChild(h);p=null!=v?".priority"===vt(f)&&v.getChild(yt(f)).isEmpty()?v:v.updateChild(f,r):mn.EMPTY_NODE}if(d.equals(p))s=t;else{var g=e.filter.updateChild(c.getNode(),h,p,f,l,a);s=Sr(t,g,c.isFullyInitialized(),e.filter.filtersNodes())}}}return s}function Ei(e,t){return e.eventCache.isCompleteForChild(t)}function ki(e,t,n,r,i,o,a){var s=t;return r.foreach((function(r,u){var c=_t(n,r);Ei(t,ft(c))&&(s=Ti(e,s,c,u,i,o,a))})),r.foreach((function(r,u){var c=_t(n,r);Ei(t,ft(c))||(s=Ti(e,s,c,u,i,o,a))})),s}function Si(e,t,n){return n.foreach((function(e,n){t=t.updateChild(e,n)})),t}function Ci(e,t,n,r,i,o,a,s){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;var u,c=t;u=bt(n)?r:new Rr(null).setTree(n,r);var l=t.serverCache.getNode();return u.children.inorderTraversal((function(n,r){if(l.hasChild(n)){var u=t.serverCache.getNode().getImmediateChild(n),h=Si(e,u,r);c=Ii(e,c,new lt(n),h,i,o,a,s)}})),u.children.inorderTraversal((function(n,r){var u=!t.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!l.hasChild(n)&&!u){var h=t.serverCache.getNode().getImmediateChild(n),f=Si(e,h,r);c=Ii(e,c,new lt(n),f,i,o,a,s)}})),c}function Ai(e,t,n,r,i,o,a){if(null!=ui(i,n))return t;var s=t.serverCache.isFiltered(),u=t.serverCache;if(null!=r.value){if(bt(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return Ii(e,t,n,u.getNode().getChild(n),i,o,s,a);if(bt(n)){var c=new Rr(null);return u.getNode().forEachChild(Ht,(function(e,t){c=c.set(new lt(e),t)})),Ci(e,t,n,c,i,o,s,a)}return t}var l=new Rr(null);return r.foreach((function(e,t){var r=_t(n,e);u.isCompleteForPath(r)&&(l=l.set(e,u.getNode().getChild(r)))})),Ci(e,t,n,l,i,o,s,a)}function Ni(e,t,n,r,i){var o=t.serverCache,a=Cr(t,o.getNode(),o.isFullyInitialized()||bt(n),o.isFiltered());return wi(e,a,n,r,vi,i)}function xi(e,t,n,r,i,a){var s;if(null!=ui(r,n))return t;var u=new gi(r,t,i),c=t.eventCache.getNode(),l=void 0;if(bt(n)||".priority"===ft(n)){var h=void 0;if(t.serverCache.isFullyInitialized())h=oi(r,Nr(t));else{var f=t.serverCache.getNode();(0,o.assert)(f instanceof mn,"serverChildren would be complete if leaf node"),h=ai(r,f)}l=e.filter.updateFullNode(c,h,a)}else{var d=ft(n),p=li(r,d,t.serverCache);null==p&&t.serverCache.isCompleteForChild(d)&&(p=c.getImmediateChild(d)),l=null!=p?e.filter.updateChild(c,d,p,pt(n),u,a):t.eventCache.getNode().hasChild(d)?e.filter.updateChild(c,d,mn.EMPTY_NODE,pt(n),u,a):c,l.isEmpty()&&t.serverCache.isFullyInitialized()&&(s=oi(r,Nr(t)),s.isLeafNode()&&(l=e.filter.updateFullNode(l,s,a)))}return s=t.serverCache.isFullyInitialized()||null!=ui(r,ht()),Sr(t,l,s,e.filter.filtersNodes())}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ri,Pi=function(){function e(e,t){this.query_=e,this.eventRegistrations_=[];var n=this.query_._queryParams,r=new Fn(n.getIndex()),i=Vn(n);this.processor_=mi(i);var o=t.serverCache,a=t.eventCache,s=r.updateFullNode(mn.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(mn.EMPTY_NODE,a.getNode(),null),c=new _r(s,o.isFullyInitialized(),r.filtersNodes()),l=new _r(u,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=kr(l,c),this.eventGenerator_=new br(this.query_)}return Object.defineProperty(e.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),e}();function Oi(e){return e.viewCache_.serverCache.getNode()}function Di(e){return Ar(e.viewCache_)}function Mi(e,t){var n=Nr(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!bt(t)&&!n.getImmediateChild(ft(t)).isEmpty())?n.getChild(t):null}function Li(e){return 0===e.eventRegistrations_.length}function Fi(e,t){e.eventRegistrations_.push(t)}function ji(e,t,n){var r=[];if(n){(0,o.assert)(null==t,"A cancel should cancel all event registrations.");var i=e.query._path;e.eventRegistrations_.forEach((function(e){var t=e.createCancelEvent(n,i);t&&r.push(t)}))}if(t){for(var a=[],s=0;s<e.eventRegistrations_.length;++s){var u=e.eventRegistrations_[s];if(u.matches(t)){if(t.hasAnyCallback()){a=a.concat(e.eventRegistrations_.slice(s+1));break}}else a.push(u)}e.eventRegistrations_=a}else e.eventRegistrations_=[];return r}function Ui(e,t,n,r){t.type===ir.MERGE&&null!==t.source.queryId&&((0,o.assert)(Nr(e.viewCache_),"We should always have a full cache before handling merges"),(0,o.assert)(Ar(e.viewCache_),"Missing event cache, even though we have a server cache"));var i=e.viewCache_,a=_i(e.processor_,i,t,n,r);return yi(e.processor_,a.viewCache),(0,o.assert)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=a.viewCache,Vi(e,a.changes,a.viewCache.eventCache.getNode(),null)}function qi(e,t){var n=e.viewCache_.eventCache,r=[];if(!n.getNode().isLeafNode()){var i=n.getNode();i.forEachChild(hn,(function(e,t){r.push(On(e,t))}))}return n.isFullyInitialized()&&r.push(Pn(n.getNode())),Vi(e,r,n.getNode(),t)}function Vi(e,t,n,r){var i=r?[r]:e.eventRegistrations_;return wr(e.eventGenerator_,t,n,i)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bi,Ki=function(){function e(){this.views=new Map}return e}();function Wi(e){(0,o.assert)(!Ri,"__referenceConstructor has already been defined"),Ri=e}function Hi(){return(0,o.assert)(Ri,"Reference.ts has not been loaded"),Ri}function Gi(e){return 0===e.views.size}function zi(e,t,n,r){var i,s,u=t.source.queryId;if(null!==u){var c=e.views.get(u);return(0,o.assert)(null!=c,"SyncTree gave us an op for an invalid query."),Ui(c,t,n,r)}var l=[];try{for(var h=(0,a.__values)(e.views.values()),f=h.next();!f.done;f=h.next()){c=f.value;l=l.concat(Ui(c,t,n,r))}}catch(d){i={error:d}}finally{try{f&&!f.done&&(s=h.return)&&s.call(h)}finally{if(i)throw i.error}}return l}function Qi(e,t,n,r,i){var o=t._queryIdentifier,a=e.views.get(o);if(!a){var s=oi(n,i?r:null),u=!1;s?u=!0:r instanceof mn?(s=ai(n,r),u=!1):(s=mn.EMPTY_NODE,u=!1);var c=kr(new _r(s,u,!1),new _r(r,i,!1));return new Pi(t,c)}return a}function $i(e,t,n,r,i,o){var a=Qi(e,t,r,i,o);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,a),Fi(a,n),qi(a,n)}function Yi(e,t,n,r){var i,o,s=t._queryIdentifier,u=[],c=[],l=to(e);if("default"===s)try{for(var h=(0,a.__values)(e.views.entries()),f=h.next();!f.done;f=h.next()){var d=(0,a.__read)(f.value,2),p=d[0],v=d[1];c=c.concat(ji(v,n,r)),Li(v)&&(e.views.delete(p),v.query._queryParams.loadsAllData()||u.push(v.query))}}catch(g){i={error:g}}finally{try{f&&!f.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}else{v=e.views.get(s);v&&(c=c.concat(ji(v,n,r)),Li(v)&&(e.views.delete(s),v.query._queryParams.loadsAllData()||u.push(v.query)))}return l&&!to(e)&&u.push(new(Hi())(t._repo,t._path)),{removed:u,events:c}}function Xi(e){var t,n,r=[];try{for(var i=(0,a.__values)(e.views.values()),o=i.next();!o.done;o=i.next()){var s=o.value;s.query._queryParams.loadsAllData()||r.push(s)}}catch(u){t={error:u}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}function Ji(e,t){var n,r,i=null;try{for(var o=(0,a.__values)(e.views.values()),s=o.next();!s.done;s=o.next()){var u=s.value;i=i||Mi(u,t)}}catch(c){n={error:c}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i}function Zi(e,t){var n=t._queryParams;if(n.loadsAllData())return no(e);var r=t._queryIdentifier;return e.views.get(r)}function eo(e,t){return null!=Zi(e,t)}function to(e){return null!=no(e)}function no(e){var t,n;try{for(var r=(0,a.__values)(e.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;if(o.query._queryParams.loadsAllData())return o}}catch(s){t={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return null}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ro(e){(0,o.assert)(!Bi,"__referenceConstructor has already been defined"),Bi=e}function io(){return(0,o.assert)(Bi,"Reference.ts has not been loaded"),Bi}var oo=1,ao=function(){function e(e){this.listenProvider_=e,this.syncPointTree_=new Rr(null),this.pendingWriteTree_=ii(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}return e}();function so(e,t,n,r,i){return Wr(e.pendingWriteTree_,t,n,r,i),i?wo(e,new mr(hr(),t,n)):[]}function uo(e,t,n,r){Hr(e.pendingWriteTree_,t,n,r);var i=Rr.fromObject(n);return wo(e,new yr(hr(),t,i))}function co(e,t,n){void 0===n&&(n=!1);var r=Gr(e.pendingWriteTree_,t),i=zr(e.pendingWriteTree_,t);if(i){var o=new Rr(null);return null!=r.snap?o=o.set(ht(),!0):U(r.children,(function(e){o=o.set(new lt(e),!0)})),wo(e,new vr(r.path,o,n))}return[]}function lo(e,t,n){return wo(e,new mr(fr(),t,n))}function ho(e,t,n){var r=Rr.fromObject(n);return wo(e,new yr(fr(),t,r))}function fo(e,t){return wo(e,new gr(fr(),t))}function po(e,t,n){var r=Co(e,n);if(r){var i=Ao(r),o=i.path,a=i.queryId,s=wt(o,t),u=new gr(dr(a),s);return No(e,o,u)}return[]}function vo(e,t,n,r){var i=t._path,o=e.syncPointTree_.get(i),a=[];if(o&&("default"===t._queryIdentifier||eo(o,t))){var s=Yi(o,t,n,r);Gi(o)&&(e.syncPointTree_=e.syncPointTree_.remove(i));var u=s.removed;a=s.events;var c=-1!==u.findIndex((function(e){return e._queryParams.loadsAllData()})),l=e.syncPointTree_.findOnPath(i,(function(e,t){return to(t)}));if(c&&!l){var h=e.syncPointTree_.subtree(i);if(!h.isEmpty())for(var f=xo(h),d=0;d<f.length;++d){var p=f[d],v=p.query,g=Eo(e,p);e.listenProvider_.startListening(Ro(v),ko(e,v),g.hashFn,g.onComplete)}}if(!l&&u.length>0&&!r)if(c){var m=null;e.listenProvider_.stopListening(Ro(t),m)}else u.forEach((function(t){var n=e.queryToTagMap.get(So(t));e.listenProvider_.stopListening(Ro(t),n)}));Po(e,u)}return a}function go(e,t,n,r){var i=Co(e,r);if(null!=i){var o=Ao(i),a=o.path,s=o.queryId,u=wt(a,t),c=new mr(dr(s),u,n);return No(e,a,c)}return[]}function mo(e,t,n,r){var i=Co(e,r);if(i){var o=Ao(i),a=o.path,s=o.queryId,u=wt(a,t),c=Rr.fromObject(n),l=new yr(dr(s),u,c);return No(e,a,l)}return[]}function yo(e,t,n){var r=t._path,i=null,a=!1;e.syncPointTree_.foreachOnPath(r,(function(e,t){var n=wt(e,r);i=i||Ji(t,n),a=a||to(t)}));var s,u=e.syncPointTree_.get(r);if(u?(a=a||to(u),i=i||Ji(u,ht())):(u=new Ki,e.syncPointTree_=e.syncPointTree_.set(r,u)),null!=i)s=!0;else{s=!1,i=mn.EMPTY_NODE;var c=e.syncPointTree_.subtree(r);c.foreachChild((function(e,t){var n=Ji(t,ht());n&&(i=i.updateImmediateChild(e,n))}))}var l=eo(u,t);if(!l&&!t._queryParams.loadsAllData()){var h=So(t);(0,o.assert)(!e.queryToTagMap.has(h),"View does not exist, but we have a tag");var f=Oo();e.queryToTagMap.set(h,f),e.tagToQueryMap.set(f,h)}var d=Kr(e.pendingWriteTree_,r),p=$i(u,t,n,d,i,s);if(!l&&!a){var v=Zi(u,t);p=p.concat(Do(e,t,v))}return p}function _o(e,t,n){var r=!0,i=e.pendingWriteTree_,o=e.syncPointTree_.findOnPath(t,(function(e,n){var r=wt(e,t),i=Ji(n,r);if(i)return i}));return Jr(i,t,o,n,r)}function bo(e,t){var n=t._path,r=null;e.syncPointTree_.foreachOnPath(n,(function(e,t){var i=wt(e,n);r=r||Ji(t,i)}));var i=e.syncPointTree_.get(n);i?r=r||Ji(i,ht()):(i=new Ki,e.syncPointTree_=e.syncPointTree_.set(n,i));var o=null!=r,a=o?new _r(r,!0,!1):null,s=Kr(e.pendingWriteTree_,t._path),u=Qi(i,t,s,o?a.getNode():mn.EMPTY_NODE,o);return Di(u)}function wo(e,t){return Io(t,e.syncPointTree_,null,Kr(e.pendingWriteTree_,ht()))}function Io(e,t,n,r){if(bt(e.path))return To(e,t,n,r);var i=t.get(ht());null==n&&null!=i&&(n=Ji(i,ht()));var o=[],a=ft(e.path),s=e.operationForChild(a),u=t.children.get(a);if(u&&s){var c=n?n.getImmediateChild(a):null,l=hi(r,a);o=o.concat(Io(s,u,c,l))}return i&&(o=o.concat(zi(i,e,r,n))),o}function To(e,t,n,r){var i=t.get(ht());null==n&&null!=i&&(n=Ji(i,ht()));var o=[];return t.children.inorderTraversal((function(t,i){var a=n?n.getImmediateChild(t):null,s=hi(r,t),u=e.operationForChild(t);u&&(o=o.concat(To(u,i,a,s)))})),i&&(o=o.concat(zi(i,e,r,n))),o}function Eo(e,t){var n=t.query,r=ko(e,n);return{hashFn:function(){var e=Oi(t)||mn.EMPTY_NODE;return e.hash()},onComplete:function(t){if("ok"===t)return r?po(e,n._path,r):fo(e,n._path);var i=K(t,n);return vo(e,n,null,i)}}}function ko(e,t){var n=So(t);return e.queryToTagMap.get(n)}function So(e){return e._path.toString()+"$"+e._queryIdentifier}function Co(e,t){return e.tagToQueryMap.get(t)}function Ao(e){var t=e.indexOf("$");return(0,o.assert)(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new lt(e.substr(0,t))}}function No(e,t,n){var r=e.syncPointTree_.get(t);(0,o.assert)(r,"Missing sync point for query tag that we're tracking");var i=Kr(e.pendingWriteTree_,t);return zi(r,n,i,null)}function xo(e){return e.fold((function(e,t,n){if(t&&to(t)){var r=no(t);return[r]}var i=[];return t&&(i=Xi(t)),U(n,(function(e,t){i=i.concat(t)})),i}))}function Ro(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(io())(e._repo,e._path):e}function Po(e,t){for(var n=0;n<t.length;++n){var r=t[n];if(!r._queryParams.loadsAllData()){var i=So(r),o=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(o)}}}function Oo(){return oo++}function Do(e,t,n){var r=t._path,i=ko(e,t),a=Eo(e,n),s=e.listenProvider_.startListening(Ro(t),i,a.hashFn,a.onComplete),u=e.syncPointTree_.subtree(r);if(i)(0,o.assert)(!to(u.value),"If we're adding a query, it shouldn't be shadowed");else for(var c=u.fold((function(e,t,n){if(!bt(e)&&t&&to(t))return[no(t).query];var r=[];return t&&(r=r.concat(Xi(t).map((function(e){return e.query})))),U(n,(function(e,t){r=r.concat(t)})),r})),l=0;l<c.length;++l){var h=c[l];e.listenProvider_.stopListening(Ro(h),ko(e,h))}return s}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mo=function(){function e(e){this.node_=e}return e.prototype.getImmediateChild=function(t){var n=this.node_.getImmediateChild(t);return new e(n)},e.prototype.node=function(){return this.node_},e}(),Lo=function(){function e(e,t){this.syncTree_=e,this.path_=t}return e.prototype.getImmediateChild=function(t){var n=_t(this.path_,t);return new e(this.syncTree_,n)},e.prototype.node=function(){return _o(this.syncTree_,this.path_)},e}(),Fo=function(e){return e=e||{},e["timestamp"]=e["timestamp"]||(new Date).getTime(),e},jo=function(e,t,n){return e&&"object"===typeof e?((0,o.assert)(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?Uo(e[".sv"],t,n):"object"===typeof e[".sv"]?qo(e[".sv"],t):void(0,o.assert)(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},Uo=function(e,t,n){switch(e){case"timestamp":return n["timestamp"];default:(0,o.assert)(!1,"Unexpected server value: "+e)}},qo=function(e,t,n){e.hasOwnProperty("increment")||(0,o.assert)(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e["increment"];"number"!==typeof r&&(0,o.assert)(!1,"Unexpected increment value: "+r);var i=t.node();if((0,o.assert)(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var a=i,s=a.getValue();return"number"!==typeof s?r:s+r},Vo=function(e,t,n,r){return Ko(t,new Lo(n,e),r)},Bo=function(e,t,n){return Ko(e,new Mo(t),n)};function Ko(e,t,n){var r,i=e.getPriority().val(),o=jo(i,t.getImmediateChild(".priority"),n);if(e.isLeafNode()){var a=e,s=jo(a.getValue(),t,n);return s!==a.getValue()||o!==a.getPriority().val()?new on(s,wn(o)):e}var u=e;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new on(o))),u.forEachChild(hn,(function(e,i){var o=Ko(i,t.getImmediateChild(e),n);o!==i&&(r=r.updateImmediateChild(e,o))})),r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wo=function(){function e(e,t,n){void 0===e&&(e=""),void 0===t&&(t=null),void 0===n&&(n={children:{},childCount:0}),this.name=e,this.parent=t,this.node=n}return e}();function Ho(e,t){var n=t instanceof lt?t:new lt(t),r=e,i=ft(n);while(null!==i){var a=(0,o.safeGet)(r.node.children,i)||{children:{},childCount:0};r=new Wo(i,r,a),n=pt(n),i=ft(n)}return r}function Go(e){return e.node.value}function zo(e,t){e.node.value=t,ea(e)}function Qo(e){return e.node.childCount>0}function $o(e){return void 0===Go(e)&&!Qo(e)}function Yo(e,t){U(e.node.children,(function(n,r){t(new Wo(n,e,r))}))}function Xo(e,t,n,r){n&&!r&&t(e),Yo(e,(function(e){Xo(e,t,!0,r)})),n&&r&&t(e)}function Jo(e,t,n){var r=n?e:e.parent;while(null!==r){if(t(r))return!0;r=r.parent}return!1}function Zo(e){return new lt(null===e.parent?e.name:Zo(e.parent)+"/"+e.name)}function ea(e){null!==e.parent&&ta(e.parent,e.name,e)}function ta(e,t,n){var r=$o(n),i=(0,o.contains)(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,ea(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,ea(e))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var na=/[\[\].#$\/\u0000-\u001F\u007F]/,ra=/[\[\].#$\u0000-\u001F\u007F]/,ia=10485760,oa=function(e){return"string"===typeof e&&0!==e.length&&!na.test(e)},aa=function(e){return"string"===typeof e&&0!==e.length&&!ra.test(e)},sa=function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),aa(e)},ua=function(e){return null===e||"string"===typeof e||"number"===typeof e&&!x(e)||e&&"object"===typeof e&&(0,o.contains)(e,".sv")},ca=function(e,t,n,r){r&&void 0===t||la((0,o.errorPrefix)(e,"value"),t,n)},la=function(e,t,n){var r=n instanceof lt?new kt(n,e):n;if(void 0===t)throw new Error(e+"contains undefined "+Nt(r));if("function"===typeof t)throw new Error(e+"contains a function "+Nt(r)+" with contents = "+t.toString());if(x(t))throw new Error(e+"contains "+t.toString()+" "+Nt(r));if("string"===typeof t&&t.length>ia/3&&(0,o.stringLength)(t)>ia)throw new Error(e+"contains a string greater than "+ia+" utf8 bytes "+Nt(r)+" ('"+t.substring(0,50)+"...')");if(t&&"object"===typeof t){var i=!1,a=!1;if(U(t,(function(t,n){if(".value"===t)i=!0;else if(".priority"!==t&&".sv"!==t&&(a=!0,!oa(t)))throw new Error(e+" contains an invalid key ("+t+") "+Nt(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');St(r,t),la(e,n,r),Ct(r)})),i&&a)throw new Error(e+' contains ".value" child '+Nt(r)+" in addition to actual children.")}},ha=function(e,t){var n,r;for(n=0;n<t.length;n++){r=t[n];for(var i=mt(r),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!oa(i[o]))throw new Error(e+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}t.sort(It);var a=null;for(n=0;n<t.length;n++){if(r=t[n],null!==a&&Et(a,r))throw new Error(e+"contains a path "+a.toString()+" that is ancestor of another path "+r.toString());a=r}},fa=function(e,t,n,r){if(!r||void 0!==t){var i=(0,o.errorPrefix)(e,"values");if(!t||"object"!==typeof t||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");var a=[];U(t,(function(e,t){var r=new lt(e);if(la(i,t,_t(n,r)),".priority"===vt(r)&&!ua(t))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(r)})),ha(i,a)}},da=function(e,t,n){if(!n||void 0!==t){if(x(t))throw new Error((0,o.errorPrefix)(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!ua(t))throw new Error((0,o.errorPrefix)(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},pa=function(e,t,n){if(!n||void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,o.errorPrefix)(e,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},va=function(e,t,n,r){if((!r||void 0!==n)&&!oa(n))throw new Error((0,o.errorPrefix)(e,t)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},ga=function(e,t,n,r){if((!r||void 0!==n)&&!aa(n))throw new Error((0,o.errorPrefix)(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},ma=function(e,t,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),ga(e,t,n,r)},ya=function(e,t){if(".info"===ft(t))throw new Error(e+" failed = Can't modify data under /.info/")},_a=function(e,t){var n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!oa(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!sa(n))throw new Error((0,o.errorPrefix)(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},ba=function(e,t,n,r){if((!r||void 0!==n)&&"boolean"!==typeof n)throw new Error((0,o.errorPrefix)(e,t)+"must be a boolean.")},wa=function(){function e(){this.eventLists_=[],this.recursionDepth_=0}return e}();function Ia(e,t){for(var n=null,r=0;r<t.length;r++){var i=t[r],o=i.getPath();null===n||Tt(o,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&e.eventLists_.push(n)}function Ta(e,t,n){Ia(e,n),ka(e,(function(e){return Tt(e,t)}))}function Ea(e,t,n){Ia(e,n),ka(e,(function(e){return Et(e,t)||Et(t,e)}))}function ka(e,t){e.recursionDepth_++;for(var n=!0,r=0;r<e.eventLists_.length;r++){var i=e.eventLists_[r];if(i){var o=i.path;t(o)?(Sa(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function Sa(e){for(var t=0;t<e.events.length;t++){var n=e.events[t];if(null!==n){e.events[t]=null;var r=n.getEventRunner();w&&E("event: "+n.toString()),Q(r)}}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ca="repo_interrupt",Aa=25,Na=function(){function e(e,t,n,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new wa,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Zn(),this.transactionQueueTree_=new Wo,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return e.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},e}();function xa(e,t,n){if(e.stats_=me(e.repoInfo_),e.forceRestClient_||$())e.server_=new Xn(e.repoInfo_,(function(t,n,r,i){Oa(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((function(){return Ma(e,!0)}),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,o.stringify)(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new Vt(e.repoInfo_,t,(function(t,n,r,i){Oa(e,t,n,r,i)}),(function(t){Ma(e,t)}),(function(t){La(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((function(t){e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((function(t){e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=ye(e.repoInfo_,(function(){return new cr(e.stats_,e.server_)})),e.infoData_=new Jn,e.infoSyncTree_=new ao({startListening:function(t,n,r,i){var o=[],a=e.infoData_.getNode(t._path);return a.isEmpty()||(o=lo(e.infoSyncTree_,t._path,a),setTimeout((function(){i("ok")}),0)),o},stopListening:function(){}}),Fa(e,"connected",!1),e.serverSyncTree_=new ao({startListening:function(t,n,r,i){return e.server_.listen(t,r,n,(function(n,r){var o=i(n,r);Ea(e.eventQueue_,t._path,o)})),[]},stopListening:function(t,n){e.server_.unlisten(t,n)}})}function Ra(e){var t=e.infoData_.getNode(new lt(".info/serverTimeOffset")),n=t.val()||0;return(new Date).getTime()+n}function Pa(e){return Fo({timestamp:Ra(e)})}function Oa(e,t,n,r,i){e.dataUpdateCount++;var a=new lt(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;var s=[];if(i)if(r){var u=(0,o.map)(n,(function(e){return wn(e)}));s=mo(e.serverSyncTree_,a,u,i)}else{var c=wn(n);s=go(e.serverSyncTree_,a,c,i)}else if(r){var l=(0,o.map)(n,(function(e){return wn(e)}));s=ho(e.serverSyncTree_,a,l)}else{var h=wn(n);s=lo(e.serverSyncTree_,a,h)}var f=a;s.length>0&&(f=os(e,a)),Ea(e.eventQueue_,f,s)}function Da(e,t){e.interceptServerDataCallback_=t}function Ma(e,t){Fa(e,"connected",t),!1===t&&Ba(e)}function La(e,t){U(t,(function(t,n){Fa(e,t,n)}))}function Fa(e,t,n){var r=new lt("/.info/"+t),i=wn(n);e.infoData_.updateSnapshot(r,i);var o=lo(e.infoSyncTree_,r,i);Ea(e.eventQueue_,r,o)}function ja(e){return e.nextWriteId_++}function Ua(e,t){var n=bo(e.serverSyncTree_,t);return null!=n?Promise.resolve(n):e.server_.get(t).then((function(n){var r=wn(n).withIndex(t._queryParams.getIndex()),i=lo(e.serverSyncTree_,t._path,r);return Ta(e.eventQueue_,t._path,i),Promise.resolve(r)}),(function(n){return Za(e,"get for query "+(0,o.stringify)(t)+" failed: "+n),Promise.reject(new Error(n))}))}function qa(e,t,n,r,i){Za(e,"set",{path:t.toString(),value:n,priority:r});var o=Pa(e),a=wn(n,r),s=_o(e.serverSyncTree_,t),u=Bo(a,s,o),c=ja(e),l=so(e.serverSyncTree_,t,u,c,!0);Ia(e.eventQueue_,l),e.server_.put(t.toString(),a.val(!0),(function(n,r){var o="ok"===n;o||A("set at "+t+" failed: "+n);var a=co(e.serverSyncTree_,c,!o);Ea(e.eventQueue_,t,a),es(e,i,n,r)}));var h=hs(e,t);os(e,h),Ea(e.eventQueue_,h,[])}function Va(e,t,n,r){Za(e,"update",{path:t.toString(),value:n});var i=!0,o=Pa(e),a={};if(U(n,(function(n,r){i=!1,a[n]=Vo(_t(t,n),wn(r),e.serverSyncTree_,o)})),i)E("update() called with empty data.  Don't do anything."),es(e,r,"ok",void 0);else{var s=ja(e),u=uo(e.serverSyncTree_,t,a,s);Ia(e.eventQueue_,u),e.server_.merge(t.toString(),n,(function(n,i){var o="ok"===n;o||A("update at "+t+" failed: "+n);var a=co(e.serverSyncTree_,s,!o),u=a.length>0?os(e,t):t;Ea(e.eventQueue_,u,a),es(e,r,n,i)})),U(n,(function(n){var r=hs(e,_t(t,n));os(e,r)})),Ea(e.eventQueue_,t,[])}}function Ba(e){Za(e,"onDisconnectEvents");var t=Pa(e),n=Zn();nr(e.onDisconnect_,ht(),(function(r,i){var o=Vo(r,i,e.serverSyncTree_,t);er(n,r,o)}));var r=[];nr(n,ht(),(function(t,n){r=r.concat(lo(e.serverSyncTree_,t,n));var i=hs(e,t);os(e,i)})),e.onDisconnect_=Zn(),Ea(e.eventQueue_,ht(),r)}function Ka(e,t,n){e.server_.onDisconnectCancel(t.toString(),(function(r,i){"ok"===r&&tr(e.onDisconnect_,t),es(e,n,r,i)}))}function Wa(e,t,n,r){var i=wn(n);e.server_.onDisconnectPut(t.toString(),i.val(!0),(function(n,o){"ok"===n&&er(e.onDisconnect_,t,i),es(e,r,n,o)}))}function Ha(e,t,n,r,i){var o=wn(n,r);e.server_.onDisconnectPut(t.toString(),o.val(!0),(function(n,r){"ok"===n&&er(e.onDisconnect_,t,o),es(e,i,n,r)}))}function Ga(e,t,n,r){if((0,o.isEmpty)(n))return E("onDisconnect().update() called with empty data.  Don't do anything."),void es(e,r,"ok",void 0);e.server_.onDisconnectMerge(t.toString(),n,(function(i,o){"ok"===i&&U(n,(function(n,r){var i=wn(r);er(e.onDisconnect_,_t(t,n),i)})),es(e,r,i,o)}))}function za(e,t,n){var r;r=".info"===ft(t._path)?yo(e.infoSyncTree_,t,n):yo(e.serverSyncTree_,t,n),Ta(e.eventQueue_,t._path,r)}function Qa(e,t,n){var r;r=".info"===ft(t._path)?vo(e.infoSyncTree_,t,n):vo(e.serverSyncTree_,t,n),Ta(e.eventQueue_,t._path,r)}function $a(e){e.persistentConnection_&&e.persistentConnection_.interrupt(Ca)}function Ya(e){e.persistentConnection_&&e.persistentConnection_.resume(Ca)}function Xa(e,t){if(void 0===t&&(t=!1),"undefined"!==typeof console){var n;t?(e.statsListener_||(e.statsListener_=new or(e.stats_)),n=e.statsListener_.get()):n=e.stats_.get();var r=Object.keys(n).reduce((function(e,t){return Math.max(t.length,e)}),0);U(n,(function(e,t){for(var n=e,i=e.length;i<r+2;i++)n+=" ";console.log(n+t)}))}}function Ja(e,t){e.stats_.incrementCounter(t),lr(e.statsReporter_,t)}function Za(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r="";e.persistentConnection_&&(r=e.persistentConnection_.id+":"),E.apply(void 0,(0,a.__spreadArray)([r],(0,a.__read)(t)))}function es(e,t,n,r){t&&Q((function(){if("ok"===n)t(null);else{var e=(n||"error").toUpperCase(),i=e;r&&(i+=": "+r);var o=new Error(i);o.code=e,t(o)}}))}function ts(e,t,n,r,i,a){Za(e,"transaction on "+t);var s={path:t,update:n,onComplete:r,status:null,order:y(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},u=ns(e,t,void 0);s.currentInputSnapshot=u;var c=s.update(u.val());if(void 0===c)s.unwatcher(),s.currentOutputSnapshotRaw=null,s.currentOutputSnapshotResolved=null,s.onComplete&&s.onComplete(null,!1,s.currentInputSnapshot);else{la("transaction failed: Data returned ",c,s.path),s.status=0;var l=Ho(e.transactionQueueTree_,t),h=Go(l)||[];h.push(s),zo(l,h);var f=void 0;if("object"===typeof c&&null!==c&&(0,o.contains)(c,".priority"))f=(0,o.safeGet)(c,".priority"),(0,o.assert)(ua(f),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.");else{var d=_o(e.serverSyncTree_,t)||mn.EMPTY_NODE;f=d.getPriority().val()}var p=Pa(e),v=wn(c,f),g=Bo(v,u,p);s.currentOutputSnapshotRaw=v,s.currentOutputSnapshotResolved=g,s.currentWriteId=ja(e);var m=so(e.serverSyncTree_,t,g,s.currentWriteId,s.applyLocally);Ea(e.eventQueue_,t,m),rs(e,e.transactionQueueTree_)}}function ns(e,t,n){return _o(e.serverSyncTree_,t,n)||mn.EMPTY_NODE}function rs(e,t){if(void 0===t&&(t=e.transactionQueueTree_),t||ls(e,t),Go(t)){var n=us(e,t);(0,o.assert)(n.length>0,"Sending zero length transaction queue");var r=n.every((function(e){return 0===e.status}));r&&is(e,Zo(t),n)}else Qo(t)&&Yo(t,(function(t){rs(e,t)}))}function is(e,t,n){for(var r=n.map((function(e){return e.currentWriteId})),i=ns(e,t,r),a=i,s=i.hash(),u=0;u<n.length;u++){var c=n[u];(0,o.assert)(0===c.status,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=1,c.retryCount++;var l=wt(t,c.path);a=a.updateChild(l,c.currentOutputSnapshotRaw)}var h=a.val(!0),f=t;e.server_.put(f.toString(),h,(function(r){Za(e,"transaction put response",{path:f.toString(),status:r});var i=[];if("ok"===r){for(var o=[],a=function(t){n[t].status=2,i=i.concat(co(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&o.push((function(){return n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)})),n[t].unwatcher()},s=0;s<n.length;s++)a(s);ls(e,Ho(e.transactionQueueTree_,t)),rs(e,e.transactionQueueTree_),Ea(e.eventQueue_,t,i);for(s=0;s<o.length;s++)Q(o[s])}else{if("datastale"===r)for(s=0;s<n.length;s++)3===n[s].status?n[s].status=4:n[s].status=0;else{A("transaction at "+f.toString()+" failed: "+r);for(s=0;s<n.length;s++)n[s].status=4,n[s].abortReason=r}os(e,t)}}),s)}function os(e,t){var n=ss(e,t),r=Zo(n),i=us(e,n);return as(e,i,r),r}function as(e,t,n){if(0!==t.length){for(var r=[],i=[],a=t.filter((function(e){return 0===e.status})),s=a.map((function(e){return e.currentWriteId})),u=function(a){var u,c=t[a],l=wt(n,c.path),h=!1;if((0,o.assert)(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===c.status)h=!0,u=c.abortReason,i=i.concat(co(e.serverSyncTree_,c.currentWriteId,!0));else if(0===c.status)if(c.retryCount>=Aa)h=!0,u="maxretry",i=i.concat(co(e.serverSyncTree_,c.currentWriteId,!0));else{var f=ns(e,c.path,s);c.currentInputSnapshot=f;var d=t[a].update(f.val());if(void 0!==d){la("transaction failed: Data returned ",d,c.path);var p=wn(d),v="object"===typeof d&&null!=d&&(0,o.contains)(d,".priority");v||(p=p.updatePriority(f.getPriority()));var g=c.currentWriteId,m=Pa(e),y=Bo(p,f,m);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=y,c.currentWriteId=ja(e),s.splice(s.indexOf(g),1),i=i.concat(so(e.serverSyncTree_,c.path,y,c.currentWriteId,c.applyLocally)),i=i.concat(co(e.serverSyncTree_,g,!0))}else h=!0,u="nodata",i=i.concat(co(e.serverSyncTree_,c.currentWriteId,!0))}Ea(e.eventQueue_,n,i),i=[],h&&(t[a].status=2,function(e){setTimeout(e,Math.floor(0))}(t[a].unwatcher),t[a].onComplete&&("nodata"===u?r.push((function(){return t[a].onComplete(null,!1,t[a].currentInputSnapshot)})):r.push((function(){return t[a].onComplete(new Error(u),!1,null)}))))},c=0;c<t.length;c++)u(c);ls(e,e.transactionQueueTree_);for(c=0;c<r.length;c++)Q(r[c]);rs(e,e.transactionQueueTree_)}}function ss(e,t){var n,r=e.transactionQueueTree_;n=ft(t);while(null!==n&&void 0===Go(r))r=Ho(r,n),t=pt(t),n=ft(t);return r}function us(e,t){var n=[];return cs(e,t,n),n.sort((function(e,t){return e.order-t.order})),n}function cs(e,t,n){var r=Go(t);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);Yo(t,(function(t){cs(e,t,n)}))}function ls(e,t){var n=Go(t);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,zo(t,n.length>0?n:void 0)}Yo(t,(function(t){ls(e,t)}))}function hs(e,t){var n=Zo(ss(e,t)),r=Ho(e.transactionQueueTree_,t);return Jo(r,(function(t){fs(e,t)})),fs(e,r),Xo(r,(function(t){fs(e,t)})),n}function fs(e,t){var n=Go(t);if(n){for(var r=[],i=[],a=-1,s=0;s<n.length;s++)3===n[s].status||(1===n[s].status?((0,o.assert)(a===s-1,"All SENT items should be at beginning of queue."),a=s,n[s].status=3,n[s].abortReason="set"):((0,o.assert)(0===n[s].status,"Unexpected transaction status in abort"),n[s].unwatcher(),i=i.concat(co(e.serverSyncTree_,n[s].currentWriteId,!0)),n[s].onComplete&&r.push(n[s].onComplete.bind(null,new Error("set"),!1,null))));-1===a?zo(t,void 0):n.length=a+1,Ea(e.eventQueue_,Zo(t),i);for(s=0;s<r.length;s++)Q(r[s])}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ds(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(o){}t+="/"+i}return t}function ps(e){var t,n,r={};"?"===e.charAt(0)&&(e=e.substring(1));try{for(var i=(0,a.__values)(e.split("&")),o=i.next();!o.done;o=i.next()){var s=o.value;if(0!==s.length){var u=s.split("=");2===u.length?r[decodeURIComponent(u[0])]=decodeURIComponent(u[1]):A("Invalid query segment '"+s+"' in query '"+e+"'")}}}catch(c){t={error:c}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}var vs=function(e,t){var n=gs(e),r=n.namespace;"firebase.com"===n.domain&&C(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||C("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||N();var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new he(n.host,n.secure,r,t,i,"",r!==n.subdomain),path:new lt(n.pathString)}},gs=function(e){var t="",n="",r="",i="",o="",a=!0,s="https",u=443;if("string"===typeof e){var c=e.indexOf("//");c>=0&&(s=e.substring(0,c-1),e=e.substring(c+2));var l=e.indexOf("/");-1===l&&(l=e.length);var h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(l,h)),l<h&&(i=ds(e.substring(l,h)));var f=ps(e.substring(Math.min(e.length,h)));c=t.indexOf(":"),c>=0?(a="https"===s||"wss"===s,u=parseInt(t.substring(c+1),10)):c=t.length;var d=t.slice(0,c);if("localhost"===d.toLowerCase())n="localhost";else if(d.split(".").length<=2)n=d;else{var p=t.indexOf(".");r=t.substring(0,p).toLowerCase(),n=t.substring(p+1),o=r}"ns"in f&&(o=f["ns"])}return{host:t,port:u,domain:n,subdomain:r,secure:a,scheme:s,pathString:i,namespace:o}},ms=function(){function e(e,t,n,r){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=r}return e.prototype.getPath=function(){var e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path},e.prototype.getEventType=function(){return this.eventType},e.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},e.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+(0,o.stringify)(this.snapshot.exportVal())},e}(),ys=function(){function e(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}return e.prototype.getPath=function(){return this.path},e.prototype.getEventType=function(){return"cancel"},e.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},e.prototype.toString=function(){return this.path.toString()+":cancel"},e}(),_s=function(){function e(e,t){this.snapshotCallback=e,this.cancelCallback=t}return e.prototype.onValue=function(e,t){this.snapshotCallback.call(null,e,t)},e.prototype.onCancel=function(e){return(0,o.assert)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)},Object.defineProperty(e.prototype,"hasCancelCallback",{get:function(){return!!this.cancelCallback},enumerable:!1,configurable:!0}),e.prototype.matches=function(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context},e}(),bs=function(){function e(e,t){this._repo=e,this._path=t}return e.prototype.cancel=function(){var e=new o.Deferred;return Ka(this._repo,this._path,e.wrapCallback((function(){}))),e.promise},e.prototype.remove=function(){ya("OnDisconnect.remove",this._path);var e=new o.Deferred;return Wa(this._repo,this._path,null,e.wrapCallback((function(){}))),e.promise},e.prototype.set=function(e){ya("OnDisconnect.set",this._path),ca("OnDisconnect.set",e,this._path,!1);var t=new o.Deferred;return Wa(this._repo,this._path,e,t.wrapCallback((function(){}))),t.promise},e.prototype.setWithPriority=function(e,t){ya("OnDisconnect.setWithPriority",this._path),ca("OnDisconnect.setWithPriority",e,this._path,!1),da("OnDisconnect.setWithPriority",t,!1);var n=new o.Deferred;return Ha(this._repo,this._path,e,t,n.wrapCallback((function(){}))),n.promise},e.prototype.update=function(e){ya("OnDisconnect.update",this._path),fa("OnDisconnect.update",e,this._path,!1);var t=new o.Deferred;return Ga(this._repo,this._path,e,t.wrapCallback((function(){}))),t.promise},e}(),ws=function(){function e(e,t,n,r){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=r}return Object.defineProperty(e.prototype,"key",{get:function(){return bt(this._path)?null:vt(this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ref",{get:function(){return new ks(this._repo,this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_queryIdentifier",{get:function(){var e=Yn(this._queryParams),t=F(e);return"{}"===t?"default":t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_queryObject",{get:function(){return Yn(this._queryParams)},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){if(t=(0,o.getModularInstance)(t),!(t instanceof e))return!1;var n=this._repo===t._repo,r=Tt(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i},e.prototype.toJSON=function(){return this.toString()},e.prototype.toString=function(){return this._repo.toString()+gt(this._path)},e}();function Is(e,t){if(!0===e._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function Ts(e){var t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===Ht){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){var a=e.getIndexStartName();if(a!==P)throw new Error(r);if("string"!==typeof t)throw new Error(i)}if(e.hasEnd()){var s=e.getIndexEndName();if(s!==O)throw new Error(r);if("string"!==typeof n)throw new Error(i)}}else if(e.getIndex()===hn){if(null!=t&&!ua(t)||null!=n&&!ua(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,o.assert)(e.getIndex()instanceof In||e.getIndex()===En,"unknown index type."),null!=t&&"object"===typeof t||null!=n&&"object"===typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Es(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var ks=function(e){function t(t,n){return e.call(this,t,n,new qn,!1)||this}return(0,a.__extends)(t,e),Object.defineProperty(t.prototype,"parent",{get:function(){var e=yt(this._path);return null===e?null:new t(this._repo,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){var e=this;while(null!==e.parent)e=e.parent;return e},enumerable:!1,configurable:!0}),t}(ws),Ss=function(){function e(e,t,n){this._node=e,this.ref=t,this._index=n}return Object.defineProperty(e.prototype,"priority",{get:function(){return this._node.getPriority().val()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this.ref.key},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._node.numChildren()},enumerable:!1,configurable:!0}),e.prototype.child=function(t){var n=new lt(t),r=Ns(this.ref,t);return new e(this._node.getChild(n),r,hn)},e.prototype.exists=function(){return!this._node.isEmpty()},e.prototype.exportVal=function(){return this._node.val(!0)},e.prototype.forEach=function(t){var n=this;if(this._node.isLeafNode())return!1;var r=this._node;return!!r.forEachChild(this._index,(function(r,i){return t(new e(i,Ns(n.ref,r),hn))}))},e.prototype.hasChild=function(e){var t=new lt(e);return!this._node.getChild(t).isEmpty()},e.prototype.hasChildren=function(){return!this._node.isLeafNode()&&!this._node.isEmpty()},e.prototype.toJSON=function(){return this.exportVal()},e.prototype.val=function(){return this._node.val()},e}();function Cs(e,t){return e=(0,o.getModularInstance)(e),e._checkNotDeleted("ref"),void 0!==t?Ns(e._root,t):e._root}function As(e,t){e=(0,o.getModularInstance)(e),e._checkNotDeleted("refFromURL");var n=vs(t,e._repo.repoInfo_.nodeAdmin);_a("refFromURL",n);var r=n.repoInfo;return e._repo.repoInfo_.isCustomHost()||r.host===e._repo.repoInfo_.host||C("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+e._repo.repoInfo_.host+")"),Cs(e,n.path.toString())}function Ns(e,t){return e=(0,o.getModularInstance)(e),null===ft(e._path)?ma("child","path",t,!1):ga("child","path",t,!1),new ks(e._repo,_t(e._path,t))}function xs(e,t){e=(0,o.getModularInstance)(e),ya("push",e._path),ca("push",t,e._path,!0);var n,r=Ra(e._repo),i=Nn(r),a=Ns(e,i),s=Ns(e,i);return n=null!=t?Ps(s,t).then((function(){return s})):Promise.resolve(s),a.then=n.then.bind(n),a.catch=n.then.bind(n,void 0),a}function Rs(e){return ya("remove",e._path),Ps(e,null)}function Ps(e,t){e=(0,o.getModularInstance)(e),ya("set",e._path),ca("set",t,e._path,!1);var n=new o.Deferred;return qa(e._repo,e._path,t,null,n.wrapCallback((function(){}))),n.promise}function Os(e,t){e=(0,o.getModularInstance)(e),ya("setPriority",e._path),da("setPriority",t,!1);var n=new o.Deferred;return qa(e._repo,_t(e._path,".priority"),t,null,n.wrapCallback((function(){}))),n.promise}function Ds(e,t,n){if(ya("setWithPriority",e._path),ca("setWithPriority",t,e._path,!1),da("setWithPriority",n,!1),".length"===e.key||".keys"===e.key)throw"setWithPriority failed: "+e.key+" is a read-only object.";var r=new o.Deferred;return qa(e._repo,e._path,t,n,r.wrapCallback((function(){}))),r.promise}function Ms(e,t){fa("update",t,e._path,!1);var n=new o.Deferred;return Va(e._repo,e._path,t,n.wrapCallback((function(){}))),n.promise}function Ls(e){return e=(0,o.getModularInstance)(e),Ua(e._repo,e).then((function(t){return new Ss(t,new ks(e._repo,e._path),e._queryParams.getIndex())}))}var Fs=function(){function e(e){this.callbackContext=e}return e.prototype.respondsTo=function(e){return"value"===e},e.prototype.createEvent=function(e,t){var n=t._queryParams.getIndex();return new ms("value",this,new Ss(e.snapshotNode,new ks(t._repo,t._path),n))},e.prototype.getEventRunner=function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,null)}},e.prototype.createCancelEvent=function(e,t){return this.callbackContext.hasCancelCallback?new ys(this,e,t):null},e.prototype.matches=function(t){return t instanceof e&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))},e.prototype.hasAnyCallback=function(){return null!==this.callbackContext},e}(),js=function(){function e(e,t){this.eventType=e,this.callbackContext=t}return e.prototype.respondsTo=function(e){var t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t},e.prototype.createCancelEvent=function(e,t){return this.callbackContext.hasCancelCallback?new ys(this,e,t):null},e.prototype.createEvent=function(e,t){(0,o.assert)(null!=e.childName,"Child events should have a childName.");var n=Ns(new ks(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new ms(e.type,this,new Ss(e.snapshotNode,n,r),e.prevName)},e.prototype.getEventRunner=function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,e.prevName)}},e.prototype.matches=function(t){return t instanceof e&&(this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)))},e.prototype.hasAnyCallback=function(){return!!this.callbackContext},e}();function Us(e,t,n,r,i){var o;if("object"===typeof r&&(o=void 0,i=r),"function"===typeof r&&(o=r),i&&i.onlyOnce){var a=n,s=function(t,n){Qa(e._repo,e,c),a(t,n)};s.userCallback=n.userCallback,s.context=n.context,n=s}var u=new _s(n,o||void 0),c="value"===t?new Fs(u):new js(t,u);return za(e._repo,e,c),function(){return Qa(e._repo,e,c)}}function qs(e,t,n,r){return Us(e,"value",t,n,r)}function Vs(e,t,n,r){return Us(e,"child_added",t,n,r)}function Bs(e,t,n,r){return Us(e,"child_changed",t,n,r)}function Ks(e,t,n,r){return Us(e,"child_moved",t,n,r)}function Ws(e,t,n,r){return Us(e,"child_removed",t,n,r)}function Hs(e,t,n){var r=null,i=n?new _s(n):null;"value"===t?r=new Fs(i):t&&(r=new js(t,i)),Qa(e._repo,e,r)}var Gs=function(){function e(){}return e}(),zs=function(e){function t(t,n){var r=e.call(this)||this;return r._value=t,r._key=n,r}return(0,a.__extends)(t,e),t.prototype._apply=function(e){ca("endAt",this._value,e._path,!0);var t=Gn(e._queryParams,this._value,this._key);if(Es(t),Ts(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ws(e._repo,e._path,t,e._orderByCalled)},t}(Gs);function Qs(e,t){return va("endAt","key",t,!0),new zs(e,t)}var $s=function(e){function t(t,n){var r=e.call(this)||this;return r._value=t,r._key=n,r}return(0,a.__extends)(t,e),t.prototype._apply=function(e){ca("endBefore",this._value,e._path,!1);var t=zn(e._queryParams,this._value,this._key);if(Es(t),Ts(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ws(e._repo,e._path,t,e._orderByCalled)},t}(Gs);function Ys(e,t){return va("endBefore","key",t,!0),new $s(e,t)}var Xs=function(e){function t(t,n){var r=e.call(this)||this;return r._value=t,r._key=n,r}return(0,a.__extends)(t,e),t.prototype._apply=function(e){ca("startAt",this._value,e._path,!0);var t=Wn(e._queryParams,this._value,this._key);if(Es(t),Ts(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new ws(e._repo,e._path,t,e._orderByCalled)},t}(Gs);function Js(e,t){return void 0===e&&(e=null),va("startAt","key",t,!0),new Xs(e,t)}var Zs=function(e){function t(t,n){var r=e.call(this)||this;return r._value=t,r._key=n,r}return(0,a.__extends)(t,e),t.prototype._apply=function(e){ca("startAfter",this._value,e._path,!1);var t=Hn(e._queryParams,this._value,this._key);if(Es(t),Ts(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new ws(e._repo,e._path,t,e._orderByCalled)},t}(Gs);function eu(e,t){return va("startAfter","key",t,!0),new Zs(e,t)}var tu=function(e){function t(t){var n=e.call(this)||this;return n._limit=t,n}return(0,a.__extends)(t,e),t.prototype._apply=function(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new ws(e._repo,e._path,Bn(e._queryParams,this._limit),e._orderByCalled)},t}(Gs);function nu(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new tu(e)}var ru=function(e){function t(t){var n=e.call(this)||this;return n._limit=t,n}return(0,a.__extends)(t,e),t.prototype._apply=function(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new ws(e._repo,e._path,Kn(e._queryParams,this._limit),e._orderByCalled)},t}(Gs);function iu(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new ru(e)}var ou=function(e){function t(t){var n=e.call(this)||this;return n._path=t,n}return(0,a.__extends)(t,e),t.prototype._apply=function(e){Is(e,"orderByChild");var t=new lt(this._path);if(bt(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var n=new In(t),r=Qn(e._queryParams,n);return Ts(r),new ws(e._repo,e._path,r,!0)},t}(Gs);function au(e){if("$key"===e)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===e)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===e)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return ga("orderByChild","path",e,!1),new ou(e)}var su=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,a.__extends)(t,e),t.prototype._apply=function(e){Is(e,"orderByKey");var t=Qn(e._queryParams,Ht);return Ts(t),new ws(e._repo,e._path,t,!0)},t}(Gs);function uu(){return new su}var cu=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,a.__extends)(t,e),t.prototype._apply=function(e){Is(e,"orderByPriority");var t=Qn(e._queryParams,hn);return Ts(t),new ws(e._repo,e._path,t,!0)},t}(Gs);function lu(){return new cu}var hu=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,a.__extends)(t,e),t.prototype._apply=function(e){Is(e,"orderByValue");var t=Qn(e._queryParams,En);return Ts(t),new ws(e._repo,e._path,t,!0)},t}(Gs);function fu(){return new hu}var du=function(e){function t(t,n){var r=e.call(this)||this;return r._value=t,r._key=n,r}return(0,a.__extends)(t,e),t.prototype._apply=function(e){if(ca("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new zs(this._value,this._key)._apply(new Xs(this._value,this._key)._apply(e))},t}(Gs);function pu(e,t){return va("equalTo","key",t,!0),new du(e,t)}function vu(e){for(var t,n,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var s=(0,o.getModularInstance)(e);try{for(var u=(0,a.__values)(r),c=u.next();!c.done;c=u.next()){var l=c.value;s=l._apply(s)}}catch(h){t={error:h}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}return s}Wi(ks),ro(ks);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var gu="FIREBASE_DATABASE_EMULATOR_HOST",mu={},yu=!1;function _u(e,t,n,r){e.repoInfo_=new he(t+":"+n,!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams),r&&(e.authTokenProvider_=r)}function bu(e,t,n,r,i){var o=r||e.options.databaseURL;void 0===o&&(e.options.projectId||C("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),E("Using default host for project ",e.options.projectId),o=e.options.projectId+"-default-rtdb.firebaseio.com");var a,s=vs(o,i),u=s.repoInfo,c=void 0;"undefined"!==typeof process&&(c={NODE_ENV:"production",BASE_URL:"/"}[gu]),c?(a=!0,o="http://"+c+"?ns="+u.namespace,s=vs(o,i),u=s.repoInfo):a=!s.repoInfo.secure;var l=i&&a?new Z(Z.OWNER):new J(e.name,e.options,t);_a("Invalid Firebase Database URL",s),bt(s.path)||C("Database URL must point to the root of a Firebase Database (not including a child path).");var h=Iu(u,e,l,new X(e.name,n));return new Eu(h,e)}function wu(e,t){var n=mu[t];n&&n[e.key]===e||C("Database "+t+"("+e.repoInfo_+") has already been deleted."),$a(e),delete n[e.key]}function Iu(e,t,n,r){var i=mu[t.name];i||(i={},mu[t.name]=i);var o=i[e.toURLString()];return o&&C("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new Na(e,yu,n,r),i[e.toURLString()]=o,o}function Tu(e){yu=e}var Eu=function(){function e(e,t){this._repoInternal=e,this.app=t,this["type"]="database",this._instanceStarted=!1}return Object.defineProperty(e.prototype,"_repo",{get:function(){return this._instanceStarted||(xa(this._repoInternal,this.app.options.appId,this.app.options["databaseAuthVariableOverride"]),this._instanceStarted=!0),this._repoInternal},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_root",{get:function(){return this._rootInternal||(this._rootInternal=new ks(this._repo,ht())),this._rootInternal},enumerable:!1,configurable:!0}),e.prototype._delete=function(){return null!==this._rootInternal&&(wu(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()},e.prototype._checkNotDeleted=function(e){null===this._rootInternal&&C("Cannot call "+e+" on a deleted database.")},e}();function ku(e,t,n,r){void 0===r&&(r={}),e=(0,o.getModularInstance)(e),e._checkNotDeleted("useEmulator"),e._instanceStarted&&C("Cannot call useEmulator() after instance has already been initialized.");var i=e._repoInternal,a=void 0;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&C('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new Z(Z.OWNER);else if(r.mockUserToken){var s="string"===typeof r.mockUserToken?r.mockUserToken:(0,o.createMockUserToken)(r.mockUserToken,e.app.options.projectId);a=new Z(s)}_u(i,t,n,a)}function Su(e){e=(0,o.getModularInstance)(e),e._checkNotDeleted("goOffline"),$a(e._repo)}function Cu(e){e=(0,o.getModularInstance)(e),e._checkNotDeleted("goOnline"),Ya(e._repo)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Au={".sv":"timestamp"};function Nu(){return Au}function xu(e){return{".sv":{increment:e}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ru=function(){function e(e,t){this.committed=e,this.snapshot=t}return e.prototype.toJSON=function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}},e}();function Pu(e,t,n){var r;if(e=(0,o.getModularInstance)(e),ya("Reference.transaction",e._path),".length"===e.key||".keys"===e.key)throw"Reference.transaction failed: "+e.key+" is a read-only object.";var i=null===(r=null===n||void 0===n?void 0:n.applyLocally)||void 0===r||r,a=new o.Deferred,s=function(t,n,r){var i=null;t?a.reject(t):(i=new Ss(r,new ks(e._repo,e._path),hn),a.resolve(new Ru(n,i)))},u=qs(e,(function(){}));return ts(e._repo,e._path,t,s,u,i),a.promise}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ou=function(){function e(e){this._delegate=e}return e.prototype.cancel=function(e){(0,o.validateArgCount)("OnDisconnect.cancel",0,1,arguments.length),(0,o.validateCallback)("OnDisconnect.cancel","onComplete",e,!0);var t=this._delegate.cancel();return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t},e.prototype.remove=function(e){(0,o.validateArgCount)("OnDisconnect.remove",0,1,arguments.length),(0,o.validateCallback)("OnDisconnect.remove","onComplete",e,!0);var t=this._delegate.remove();return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t},e.prototype.set=function(e,t){(0,o.validateArgCount)("OnDisconnect.set",1,2,arguments.length),(0,o.validateCallback)("OnDisconnect.set","onComplete",t,!0);var n=this._delegate.set(e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n},e.prototype.setWithPriority=function(e,t,n){(0,o.validateArgCount)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,o.validateCallback)("OnDisconnect.setWithPriority","onComplete",n,!0);var r=this._delegate.setWithPriority(e,t);return n&&r.then((function(){return n(null)}),(function(e){return n(e)})),r},e.prototype.update=function(e,t){if((0,o.validateArgCount)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,A("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,o.validateCallback)("OnDisconnect.update","onComplete",t,!0);var i=this._delegate.update(e);return t&&i.then((function(){return t(null)}),(function(e){return t(e)})),i},e}(),Du=function(){function e(e,t){this.committed=e,this.snapshot=t}return e.prototype.toJSON=function(){return(0,o.validateArgCount)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},e}(),Mu=function(){function e(e,t){this._database=e,this._delegate=t}return e.prototype.val=function(){return(0,o.validateArgCount)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()},e.prototype.exportVal=function(){return(0,o.validateArgCount)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()},e.prototype.toJSON=function(){return(0,o.validateArgCount)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()},e.prototype.exists=function(){return(0,o.validateArgCount)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()},e.prototype.child=function(t){return(0,o.validateArgCount)("DataSnapshot.child",0,1,arguments.length),t=String(t),ga("DataSnapshot.child","path",t,!1),new e(this._database,this._delegate.child(t))},e.prototype.hasChild=function(e){return(0,o.validateArgCount)("DataSnapshot.hasChild",1,1,arguments.length),ga("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)},e.prototype.getPriority=function(){return(0,o.validateArgCount)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority},e.prototype.forEach=function(t){var n=this;return(0,o.validateArgCount)("DataSnapshot.forEach",1,1,arguments.length),(0,o.validateCallback)("DataSnapshot.forEach","action",t,!1),this._delegate.forEach((function(r){return t(new e(n._database,r))}))},e.prototype.hasChildren=function(){return(0,o.validateArgCount)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()},Object.defineProperty(e.prototype,"key",{get:function(){return this._delegate.key},enumerable:!1,configurable:!0}),e.prototype.numChildren=function(){return(0,o.validateArgCount)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size},e.prototype.getRef=function(){return(0,o.validateArgCount)("DataSnapshot.ref",0,0,arguments.length),new Fu(this._database,this._delegate.ref)},Object.defineProperty(e.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),e}(),Lu=function(){function e(e,t){this.database=e,this._delegate=t}return e.prototype.on=function(t,n,r,i){var a,s=this;(0,o.validateArgCount)("Query.on",2,4,arguments.length),(0,o.validateCallback)("Query.on","callback",n,!1);var u=e.getCancelAndContextArgs_("Query.on",r,i),c=function(e,t){n.call(u.context,new Mu(s.database,e),t)};c.userCallback=n,c.context=u.context;var l=null===(a=u.cancel)||void 0===a?void 0:a.bind(u.context);switch(t){case"value":return qs(this._delegate,c,l),n;case"child_added":return Vs(this._delegate,c,l),n;case"child_removed":return Ws(this._delegate,c,l),n;case"child_changed":return Bs(this._delegate,c,l),n;case"child_moved":return Ks(this._delegate,c,l),n;default:throw new Error((0,o.errorPrefix)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},e.prototype.off=function(e,t,n){if((0,o.validateArgCount)("Query.off",0,3,arguments.length),pa("Query.off",e,!0),(0,o.validateCallback)("Query.off","callback",t,!0),(0,o.validateContextObject)("Query.off","context",n,!0),t){var r=function(){};r.userCallback=t,r.context=n,Hs(this._delegate,e,r)}else Hs(this._delegate,e)},e.prototype.get=function(){var e=this;return Ls(this._delegate).then((function(t){return new Mu(e.database,t)}))},e.prototype.once=function(t,n,r,i){var a=this;(0,o.validateArgCount)("Query.once",1,4,arguments.length),(0,o.validateCallback)("Query.once","callback",n,!0);var s=e.getCancelAndContextArgs_("Query.once",r,i),u=new o.Deferred,c=function(e,t){var r=new Mu(a.database,e);n&&n.call(s.context,r,t),u.resolve(r)};c.userCallback=n,c.context=s.context;var l=function(e){s.cancel&&s.cancel.call(s.context,e),u.reject(e)};switch(t){case"value":qs(this._delegate,c,l,{onlyOnce:!0});break;case"child_added":Vs(this._delegate,c,l,{onlyOnce:!0});break;case"child_removed":Ws(this._delegate,c,l,{onlyOnce:!0});break;case"child_changed":Bs(this._delegate,c,l,{onlyOnce:!0});break;case"child_moved":Ks(this._delegate,c,l,{onlyOnce:!0});break;default:throw new Error((0,o.errorPrefix)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise},e.prototype.limitToFirst=function(t){return(0,o.validateArgCount)("Query.limitToFirst",1,1,arguments.length),new e(this.database,vu(this._delegate,nu(t)))},e.prototype.limitToLast=function(t){return(0,o.validateArgCount)("Query.limitToLast",1,1,arguments.length),new e(this.database,vu(this._delegate,iu(t)))},e.prototype.orderByChild=function(t){return(0,o.validateArgCount)("Query.orderByChild",1,1,arguments.length),new e(this.database,vu(this._delegate,au(t)))},e.prototype.orderByKey=function(){return(0,o.validateArgCount)("Query.orderByKey",0,0,arguments.length),new e(this.database,vu(this._delegate,uu()))},e.prototype.orderByPriority=function(){return(0,o.validateArgCount)("Query.orderByPriority",0,0,arguments.length),new e(this.database,vu(this._delegate,lu()))},e.prototype.orderByValue=function(){return(0,o.validateArgCount)("Query.orderByValue",0,0,arguments.length),new e(this.database,vu(this._delegate,fu()))},e.prototype.startAt=function(t,n){return void 0===t&&(t=null),(0,o.validateArgCount)("Query.startAt",0,2,arguments.length),new e(this.database,vu(this._delegate,Js(t,n)))},e.prototype.startAfter=function(t,n){return void 0===t&&(t=null),(0,o.validateArgCount)("Query.startAfter",0,2,arguments.length),new e(this.database,vu(this._delegate,eu(t,n)))},e.prototype.endAt=function(t,n){return void 0===t&&(t=null),(0,o.validateArgCount)("Query.endAt",0,2,arguments.length),new e(this.database,vu(this._delegate,Qs(t,n)))},e.prototype.endBefore=function(t,n){return void 0===t&&(t=null),(0,o.validateArgCount)("Query.endBefore",0,2,arguments.length),new e(this.database,vu(this._delegate,Ys(t,n)))},e.prototype.equalTo=function(t,n){return(0,o.validateArgCount)("Query.equalTo",1,2,arguments.length),new e(this.database,vu(this._delegate,pu(t,n)))},e.prototype.toString=function(){return(0,o.validateArgCount)("Query.toString",0,0,arguments.length),this._delegate.toString()},e.prototype.toJSON=function(){return(0,o.validateArgCount)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()},e.prototype.isEqual=function(t){if((0,o.validateArgCount)("Query.isEqual",1,1,arguments.length),!(t instanceof e)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(t._delegate)},e.getCancelAndContextArgs_=function(e,t,n){var r={cancel:void 0,context:void 0};if(t&&n)r.cancel=t,(0,o.validateCallback)(e,"cancel",r.cancel,!0),r.context=n,(0,o.validateContextObject)(e,"context",r.context,!0);else if(t)if("object"===typeof t&&null!==t)r.context=t;else{if("function"!==typeof t)throw new Error((0,o.errorPrefix)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=t}return r},Object.defineProperty(e.prototype,"ref",{get:function(){return new Fu(this.database,new ks(this._delegate._repo,this._delegate._path))},enumerable:!1,configurable:!0}),e}(),Fu=function(e){function t(t,n){var r=e.call(this,t,new ws(n._repo,n._path,new qn,!1))||this;return r.database=t,r._delegate=n,r}return(0,a.__extends)(t,e),t.prototype.getKey=function(){return(0,o.validateArgCount)("Reference.key",0,0,arguments.length),this._delegate.key},t.prototype.child=function(e){return(0,o.validateArgCount)("Reference.child",1,1,arguments.length),"number"===typeof e&&(e=String(e)),new t(this.database,Ns(this._delegate,e))},t.prototype.getParent=function(){(0,o.validateArgCount)("Reference.parent",0,0,arguments.length);var e=this._delegate.parent;return e?new t(this.database,e):null},t.prototype.getRoot=function(){return(0,o.validateArgCount)("Reference.root",0,0,arguments.length),new t(this.database,this._delegate.root)},t.prototype.set=function(e,t){(0,o.validateArgCount)("Reference.set",1,2,arguments.length),(0,o.validateCallback)("Reference.set","onComplete",t,!0);var n=Ps(this._delegate,e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n},t.prototype.update=function(e,t){if((0,o.validateArgCount)("Reference.update",1,2,arguments.length),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,A("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ya("Reference.update",this._delegate._path),(0,o.validateCallback)("Reference.update","onComplete",t,!0);var i=Ms(this._delegate,e);return t&&i.then((function(){return t(null)}),(function(e){return t(e)})),i},t.prototype.setWithPriority=function(e,t,n){(0,o.validateArgCount)("Reference.setWithPriority",2,3,arguments.length),(0,o.validateCallback)("Reference.setWithPriority","onComplete",n,!0);var r=Ds(this._delegate,e,t);return n&&r.then((function(){return n(null)}),(function(e){return n(e)})),r},t.prototype.remove=function(e){(0,o.validateArgCount)("Reference.remove",0,1,arguments.length),(0,o.validateCallback)("Reference.remove","onComplete",e,!0);var t=Rs(this._delegate);return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t},t.prototype.transaction=function(e,t,n){var r=this;(0,o.validateArgCount)("Reference.transaction",1,3,arguments.length),(0,o.validateCallback)("Reference.transaction","transactionUpdate",e,!1),(0,o.validateCallback)("Reference.transaction","onComplete",t,!0),ba("Reference.transaction","applyLocally",n,!0);var i=Pu(this._delegate,e,{applyLocally:n}).then((function(e){return new Du(e.committed,new Mu(r.database,e.snapshot))}));return t&&i.then((function(e){return t(null,e.committed,e.snapshot)}),(function(e){return t(e,!1,null)})),i},t.prototype.setPriority=function(e,t){(0,o.validateArgCount)("Reference.setPriority",1,2,arguments.length),(0,o.validateCallback)("Reference.setPriority","onComplete",t,!0);var n=Os(this._delegate,e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n},t.prototype.push=function(e,n){var r=this;(0,o.validateArgCount)("Reference.push",0,2,arguments.length),(0,o.validateCallback)("Reference.push","onComplete",n,!0);var i=xs(this._delegate,e),a=i.then((function(e){return new t(r.database,e)}));n&&a.then((function(){return n(null)}),(function(e){return n(e)}));var s=new t(this.database,i);return s.then=a.then.bind(a),s.catch=a.catch.bind(a,void 0),s},t.prototype.onDisconnect=function(){return ya("Reference.onDisconnect",this._delegate._path),new Ou(new bs(this._delegate._repo,this._delegate._path))},Object.defineProperty(t.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),t}(Lu),ju=function(){function e(e,t){var n=this;this._delegate=e,this.app=t,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return e.prototype.useEmulator=function(e,t,n){void 0===n&&(n={}),ku(this._delegate,e,t,n)},e.prototype.ref=function(e){if((0,o.validateArgCount)("database.ref",0,1,arguments.length),e instanceof Fu){var t=As(this._delegate,e.toString());return new Fu(this,t)}t=Cs(this._delegate,e);return new Fu(this,t)},e.prototype.refFromURL=function(e){var t="database.refFromURL";(0,o.validateArgCount)(t,1,1,arguments.length);var n=As(this._delegate,e);return new Fu(this,n)},e.prototype.goOffline=function(){return(0,o.validateArgCount)("database.goOffline",0,0,arguments.length),Su(this._delegate)},e.prototype.goOnline=function(){return(0,o.validateArgCount)("database.goOnline",0,0,arguments.length),Cu(this._delegate)},e.ServerValue={TIMESTAMP:Nu(),increment:function(e){return xu(e)}},e}(),Uu=function(){Be.forceDisallow(),Fe.forceAllow()},qu=function(){Fe.forceDisallow()},Vu=function(){return Be["isAvailable"]()},Bu=function(e,t){var n=e._delegate._repo.persistentConnection_;n.securityDebugCallback_=t},Ku=function(e,t){Xa(e._delegate._repo,t)},Wu=function(e,t){Ja(e._delegate._repo,t)},Hu=function(e){return e._delegate._repo.dataUpdateCount},Gu=function(e,t){return Da(e._delegate._repo,t)};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zu(e){var t=e.app,n=e.url,r=e.version,o=e.customAuthImpl,a=e.namespace,s=e.nodeAdmin,u=void 0!==s&&s;h(r);var c=new i.Provider("auth-internal",new i.ComponentContainer("database-standalone"));return c.setComponent(new i.Component("auth-internal",(function(){return o}),"PRIVATE")),{instance:new ju(bu(t,c,void 0,n,u),t),namespace:a}}var Qu=Object.freeze({__proto__:null,forceLongPolling:Uu,forceWebSockets:qu,isWebSocketsAvailable:Vu,setSecurityDebugCallback:Bu,stats:Ku,statsIncrementCounter:Wu,dataUpdateCount:Hu,interceptServerData:Gu,initStandalone:zu}),$u=Vt;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vt.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},Vt.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};var Yu=it,Xu=function(e){var t=Vt.prototype.put;return Vt.prototype.put=function(n,r,i,o){void 0!==o&&(o=e()),t.call(this,n,r,i,o)},function(){Vt.prototype.put=t}},Ju=he,Zu=function(e){return e._delegate._queryIdentifier},ec=function(e){Tu(e)},tc=Object.freeze({__proto__:null,DataConnection:$u,RealTimeConnection:Yu,hijackHash:Xu,ConnectionTarget:Ju,queryIdentifier:Zu,forceRestClient:ec}),nc=ju.ServerValue;function rc(t){h(t.SDK_VERSION);var n=t.INTERNAL.registerComponent(new i.Component("database",(function(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return new ju(bu(r,i,o,n),r)}),"PUBLIC").setServiceProps({Reference:Fu,Query:Lu,Database:ju,DataSnapshot:Mu,enableLogging:T,INTERNAL:Qu,ServerValue:nc,TEST_ACCESS:tc}).setMultipleInstances(!0));t.registerVersion(u,c),(0,o.isNodeSdk)()&&(e.exports=n)}rc(r["default"])},8328:function(e,t,n){"use strict";var r=n(4552),i=n(4037),o=n(8914),a=(n(9658),n(7e3),n(6970),{Firestore:i.K,GeoPoint:i.C,Timestamp:i.M,Blob:i.L,Transaction:i.W,WriteBatch:i.G,DocumentReference:i.H,DocumentSnapshot:i.Z,Query:i.e,QueryDocumentSnapshot:i.t,QuerySnapshot:i.s,CollectionReference:i.i,FieldPath:i.o,FieldValue:i.c,setLogLevel:i.j,CACHE_SIZE_UNLIMITED:i.E});
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function s(e){!function(e,t){e.INTERNAL.registerComponent(new o.Component("firestore",(function(e){var n=e.getProvider("app").getImmediate();return t(n,e.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},a)))}(e,(function(e,t){return new i.K(e,new i.T(e,t),new i.U)})),e.registerVersion("@firebase/firestore","2.4.1")}s(r["default"])},4037:function(e,t,n){"use strict";n.d(t,{C:function(){return Xs},E:function(){return Bs},G:function(){return hc},H:function(){return dc},K:function(){return sc},L:function(){return oc},M:function(){return E},T:function(){return Ks},U:function(){return ac},W:function(){return lc},Z:function(){return mc},a:function(){return Cc},c:function(){return kc},e:function(){return _c},i:function(){return Ic},j:function(){return cc},o:function(){return Ec},s:function(){return wc},t:function(){return yc},u:function(){return Sc}});n(7658),n(2801);var r=n(2900),i=n(9658),o=n(7e3),a=n(6970),s=function(){function e(e,t){var n=this;this.previousValue=e,t&&(t.sequenceNumberHandler=function(e){return n.t(e)},this.i=function(e){return t.writeSequenceNumber(e)})}return e.prototype.t=function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue},e.prototype.next=function(){var e=++this.previousValue;return this.i&&this.i(e),e},e}();s.o=-1;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var u={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},c=function(e){function t(t,n){var r=this;return(r=e.call(this,n)||this).code=t,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return(0,r.__extends)(t,e),t}(Error),l=new o.Logger("@firebase/firestore");function h(){return l.logLevel}function f(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(l.logLevel<=o.LogLevel.DEBUG){var i=t.map(v);l.debug.apply(l,(0,r.__spreadArray)(["Firestore (8.10.1): "+e],i))}}function d(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(l.logLevel<=o.LogLevel.ERROR){var i=t.map(v);l.error.apply(l,(0,r.__spreadArray)(["Firestore (8.10.1): "+e],i))}}function p(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(l.logLevel<=o.LogLevel.WARN){var i=t.map(v);l.warn.apply(l,(0,r.__spreadArray)(["Firestore (8.10.1): "+e],i))}}function v(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g(e){void 0===e&&(e="Unexpected state");var t="FIRESTORE (8.10.1) INTERNAL ASSERTION FAILED: "+e;throw d(t),new Error(t)}function m(e,t){e||g()}function y(e,t){return e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var b=function(){function e(){}return e.u=function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=_(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n},e}();function w(e,t){return e<t?-1:e>t?1:0}function I(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function T(e){return e+"\0"}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var E=function(){function e(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new c(u.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new c(u.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new c(u.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new c(u.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}return e.now=function(){return e.fromMillis(Date.now())},e.fromDate=function(t){return e.fromMillis(t.getTime())},e.fromMillis=function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))},e.prototype.toDate=function(){return new Date(this.toMillis())},e.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},e.prototype._compareTo=function(e){return this.seconds===e.seconds?w(this.nanoseconds,e.nanoseconds):w(this.seconds,e.seconds)},e.prototype.isEqual=function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds},e.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},e.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},e.prototype.valueOf=function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},e}(),k=function(){function e(e){this.timestamp=e}return e.fromTimestamp=function(t){return new e(t)},e.min=function(){return new e(new E(0,0))},e.prototype.compareTo=function(e){return this.timestamp._compareTo(e.timestamp)},e.prototype.isEqual=function(e){return this.timestamp.isEqual(e.timestamp)},e.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},e.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},e.prototype.toTimestamp=function(){return this.timestamp},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function C(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function A(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var N=function(){function e(e,t,n){void 0===t?t=0:t>e.length&&g(),void 0===n?n=e.length-t:n>e.length-t&&g(),this.segments=e,this.offset=t,this.len=n}return Object.defineProperty(e.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return 0===e.comparator(this,t)},e.prototype.child=function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)},e.prototype.limit=function(){return this.offset+this.length},e.prototype.popFirst=function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)},e.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},e.prototype.firstSegment=function(){return this.segments[this.offset]},e.prototype.lastSegment=function(){return this.get(this.length-1)},e.prototype.get=function(e){return this.segments[this.offset+e]},e.prototype.isEmpty=function(){return 0===this.length},e.prototype.isPrefixOf=function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},e.prototype.isImmediateParentOf=function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},e.prototype.forEach=function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])},e.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},e.comparator=function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),o=t.get(r);if(i<o)return-1;if(i>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0},e}(),x=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,r.__extends)(t,e),t.prototype.construct=function(e,n,r){return new t(e,n,r)},t.prototype.canonicalString=function(){return this.toArray().join("/")},t.prototype.toString=function(){return this.canonicalString()},t.fromString=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(var r=[],i=0,o=e;i<o.length;i++){var a=o[i];if(a.indexOf("//")>=0)throw new c(u.INVALID_ARGUMENT,"Invalid segment ("+a+"). Paths must not contain // in them.");r.push.apply(r,a.split("/").filter((function(e){return e.length>0})))}return new t(r)},t.emptyPath=function(){return new t([])},t}(N),R=/^[_a-zA-Z][_a-zA-Z0-9]*$/,P=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,r.__extends)(t,e),t.prototype.construct=function(e,n,r){return new t(e,n,r)},t.isValidIdentifier=function(e){return R.test(e)},t.prototype.canonicalString=function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")},t.prototype.toString=function(){return this.canonicalString()},t.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},t.keyField=function(){return new t(["__name__"])},t.fromServerFormat=function(e){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new c(u.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},a=!1;i<e.length;){var s=e[i];if("\\"===s){if(i+1===e.length)throw new c(u.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var l=e[i+1];if("\\"!==l&&"."!==l&&"`"!==l)throw new c(u.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else"`"===s?(a=!a,i++):"."!==s||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new c(u.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)},t.emptyPath=function(){return new t([])},t}(N),O=function(){function e(e){this.fields=e,e.sort(P.comparator)}return e.prototype.covers=function(e){for(var t=0,n=this.fields;t<n.length;t++)if(n[t].isPrefixOf(e))return!0;return!1},e.prototype.isEqual=function(e){return I(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))},e}(),D=function(){function e(e){this.binaryString=e}return e.fromBase64String=function(t){return new e(atob(t))},e.fromUint8Array=function(t){return new e(function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(t))},e.prototype.toBase64=function(){return e=this.binaryString,btoa(e);var e},e.prototype.toUint8Array=function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)},e.prototype.approximateByteSize=function(){return 2*this.binaryString.length},e.prototype.compareTo=function(e){return w(this.binaryString,e.binaryString)},e.prototype.isEqual=function(e){return this.binaryString===e.binaryString},e}();D.EMPTY_BYTE_STRING=new D("");var M=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function L(e){if(m(!!e),"string"==typeof e){var t=0,n=M.exec(e);if(m(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:F(e.seconds),nanos:F(e.nanos)}}function F(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function j(e){return"string"==typeof e?D.fromBase64String(e):D.fromUint8Array(e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function q(e){var t=e.mapValue.fields.__previous_value__;return U(t)?q(t):t}function V(e){var t=L(e.mapValue.fields.__local_write_time__.timestampValue);return new E(t.seconds,t.nanos)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B(e){return null==e}function K(e){return 0===e&&1/e==-1/0}function W(e){return"number"==typeof e&&Number.isInteger(e)&&!K(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var H=function(){function e(e){this.path=e}return e.fromPath=function(t){return new e(x.fromString(t))},e.fromName=function(t){return new e(x.fromString(t).popFirst(5))},e.prototype.hasCollectionId=function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e},e.prototype.isEqual=function(e){return null!==e&&0===x.comparator(this.path,e.path)},e.prototype.toString=function(){return this.path.toString()},e.comparator=function(e,t){return x.comparator(e.path,t.path)},e.isDocumentKey=function(e){return e.length%2==0},e.fromSegments=function(t){return new e(new x(t.slice()))},e}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?U(e)?4:10:g()}function z(e,t){var n=G(e);if(n!==G(t))return!1;switch(n){case 0:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return V(e).isEqual(V(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=L(e.timestampValue),r=L(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return j(e.bytesValue).isEqual(j(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return F(e.geoPointValue.latitude)===F(t.geoPointValue.latitude)&&F(e.geoPointValue.longitude)===F(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return F(e.integerValue)===F(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=F(e.doubleValue),r=F(t.doubleValue);return n===r?K(n)===K(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return I(e.arrayValue.values||[],t.arrayValue.values||[],z);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(S(n)!==S(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!z(n[i],r[i])))return!1;return!0}(e,t);default:return g()}}function Q(e,t){return void 0!==(e.values||[]).find((function(e){return z(e,t)}))}function $(e,t){var n=G(e),r=G(t);if(n!==r)return w(n,r);switch(n){case 0:return 0;case 1:return w(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=F(e.integerValue||e.doubleValue),r=F(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Y(e.timestampValue,t.timestampValue);case 4:return Y(V(e),V(t));case 5:return w(e.stringValue,t.stringValue);case 6:return function(e,t){var n=j(e),r=j(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var o=w(n[i],r[i]);if(0!==o)return o}return w(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=w(F(e.latitude),F(t.latitude));return 0!==n?n:w(F(e.longitude),F(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var o=$(n[i],r[i]);if(o)return o}return w(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n=e.fields||{},r=Object.keys(n),i=t.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var a=0;a<r.length&&a<o.length;++a){var s=w(r[a],o[a]);if(0!==s)return s;var u=$(n[r[a]],i[o[a]]);if(0!==u)return u}return w(r.length,o.length)}(e.mapValue,t.mapValue);default:throw g()}}function Y(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return w(e,t);var n=L(e),r=L(t),i=w(n.seconds,r.seconds);return 0!==i?i:w(n.nanos,r.nanos)}function X(e){return J(e)}function J(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=L(e);return"time("+t.seconds+","+t.nanos+")"}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?j(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,H.fromName(n).toString()):"geoPointValue"in e?"geo("+(t=e.geoPointValue).latitude+","+t.longitude+")":"arrayValue"in e?function(e){for(var t="[",n=!0,r=0,i=e.values||[];r<i.length;r++)n?n=!1:t+=",",t+=J(i[r]);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){for(var t="{",n=!0,r=0,i=Object.keys(e.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:t+=",",t+=o+":"+J(e.fields[o])}return t+"}"}(e.mapValue):g();var t,n}function Z(e,t){return{referenceValue:"projects/"+e.projectId+"/databases/"+e.database+"/documents/"+t.path.canonicalString()}}function ee(e){return!!e&&"integerValue"in e}function te(e){return!!e&&"arrayValue"in e}function ne(e){return!!e&&"nullValue"in e}function re(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function ie(e){return!!e&&"mapValue"in e}function oe(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return C(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=oe(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=oe(e.arrayValue.values[r]);return n}return Object.assign({},e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ae=function(){function e(e){this.value=e}return e.empty=function(){return new e({mapValue:{}})},e.prototype.field=function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!ie(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null},e.prototype.set=function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=oe(t)},e.prototype.setAll=function(e){var t=this,n=P.emptyPath(),r={},i=[];e.forEach((function(e,o){if(!n.isImmediateParentOf(o)){var a=t.getFieldsMap(n);t.applyChanges(a,r,i),r={},i=[],n=o.popLast()}e?r[o.lastSegment()]=oe(e):i.push(o.lastSegment())}));var o=this.getFieldsMap(n);this.applyChanges(o,r,i)},e.prototype.delete=function(e){var t=this.field(e.popLast());ie(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]},e.prototype.isEqual=function(e){return z(this.value,e.value)},e.prototype.getFieldsMap=function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];ie(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields},e.prototype.applyChanges=function(e,t,n){C(t,(function(t,n){return e[t]=n}));for(var r=0,i=n;r<i.length;r++){var o=i[r];delete e[o]}},e.prototype.clone=function(){return new e(oe(this.value))},e}();function se(e){var t=[];return C(e.fields,(function(e,n){var r=new P([e]);if(ie(n)){var i=se(n.mapValue).fields;if(0===i.length)t.push(r);else for(var o=0,a=i;o<a.length;o++){var s=a[o];t.push(r.child(s))}}else t.push(r)})),new O(t)
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var ue=function(){function e(e,t,n,r,i){this.key=e,this.documentType=t,this.version=n,this.data=r,this.documentState=i}return e.newInvalidDocument=function(t){return new e(t,0,k.min(),ae.empty(),0)},e.newFoundDocument=function(t,n,r){return new e(t,1,n,r,0)},e.newNoDocument=function(t,n){return new e(t,2,n,ae.empty(),0)},e.newUnknownDocument=function(t,n){return new e(t,3,n,ae.empty(),2)},e.prototype.convertToFoundDocument=function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this},e.prototype.convertToNoDocument=function(e){return this.version=e,this.documentType=2,this.data=ae.empty(),this.documentState=0,this},e.prototype.convertToUnknownDocument=function(e){return this.version=e,this.documentType=3,this.data=ae.empty(),this.documentState=2,this},e.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},e.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(e.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isValidDocument=function(){return 0!==this.documentType},e.prototype.isFoundDocument=function(){return 1===this.documentType},e.prototype.isNoDocument=function(){return 2===this.documentType},e.prototype.isUnknownDocument=function(){return 3===this.documentType},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)},e.prototype.clone=function(){return new e(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},e}(),ce=function(e,t,n,r,i,o,a){void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.h=null};
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function le(e,t,n,r,i,o,a){return void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),new ce(e,t,n,r,i,o,a)}function he(e){var t=y(e);if(null===t.h){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return function(e){return e.field.canonicalString()+e.op.toString()+X(e.value)}(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),B(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=Ee(t.startAt)),t.endAt&&(n+="|ub:",n+=Ee(t.endAt)),t.h=n}return t.h}function fe(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!Se(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],o=t.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!z(i.value,o.value))return!1;var i,o;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Ae(e.startAt,t.startAt)&&Ae(e.endAt,t.endAt)}function de(e){return H.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}var pe=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).field=t,i.op=n,i.value=r,i}return(0,r.__extends)(t,e),t.create=function(e,n,r){return e.isKeyField()?"in"===n||"not-in"===n?this.l(e,n,r):new ve(e,n,r):"array-contains"===n?new _e(e,r):"in"===n?new be(e,r):"not-in"===n?new we(e,r):"array-contains-any"===n?new Ie(e,r):new t(e,n,r)},t.l=function(e,t,n){return"in"===t?new ge(e,n):new me(e,n)},t.prototype.matches=function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.m($(t,this.value)):null!==t&&G(this.value)===G(t)&&this.m($(t,this.value))},t.prototype.m=function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return g()}},t.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},t}((function(){})),ve=function(e){function t(t,n,r){var i=this;return(i=e.call(this,t,n,r)||this).key=H.fromName(r.referenceValue),i}return(0,r.__extends)(t,e),t.prototype.matches=function(e){var t=H.comparator(e.key,this.key);return this.m(t)},t}(pe),ge=function(e){function t(t,n){var r=this;return(r=e.call(this,t,"in",n)||this).keys=ye("in",n),r}return(0,r.__extends)(t,e),t.prototype.matches=function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))},t}(pe),me=function(e){function t(t,n){var r=this;return(r=e.call(this,t,"not-in",n)||this).keys=ye("not-in",n),r}return(0,r.__extends)(t,e),t.prototype.matches=function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))},t}(pe);function ye(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return H.fromName(e.referenceValue)}))}var _e=function(e){function t(t,n){return e.call(this,t,"array-contains",n)||this}return(0,r.__extends)(t,e),t.prototype.matches=function(e){var t=e.data.field(this.field);return te(t)&&Q(t.arrayValue,this.value)},t}(pe),be=function(e){function t(t,n){return e.call(this,t,"in",n)||this}return(0,r.__extends)(t,e),t.prototype.matches=function(e){var t=e.data.field(this.field);return null!==t&&Q(this.value.arrayValue,t)},t}(pe),we=function(e){function t(t,n){return e.call(this,t,"not-in",n)||this}return(0,r.__extends)(t,e),t.prototype.matches=function(e){if(Q(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!Q(this.value.arrayValue,t)},t}(pe),Ie=function(e){function t(t,n){return e.call(this,t,"array-contains-any",n)||this}return(0,r.__extends)(t,e),t.prototype.matches=function(e){var t=this,n=e.data.field(this.field);return!(!te(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return Q(t.value.arrayValue,e)}))},t}(pe),Te=function(e,t){this.position=e,this.before=t};function Ee(e){return(e.before?"b":"a")+":"+e.position.map((function(e){return X(e)})).join(",")}var ke=function(e,t){void 0===t&&(t="asc"),this.field=e,this.dir=t};function Se(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function Ce(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var o=t[i],a=e.position[i];if(r=o.field.isKeyField()?H.comparator(H.fromName(a.referenceValue),n.key):$(a,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return e.before?r<=0:r<0}function Ae(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.before!==t.before||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!z(e.position[n],t.position[n]))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ne=function(e,t,n,r,i,o,a,s){void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===a&&(a=null),void 0===s&&(s=null),this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=s,this.p=null,this.T=null,this.startAt,this.endAt};function xe(e,t,n,r,i,o,a,s){return new Ne(e,t,n,r,i,o,a,s)}function Re(e){return new Ne(e)}function Pe(e){return!B(e.limit)&&"F"===e.limitType}function Oe(e){return!B(e.limit)&&"L"===e.limitType}function De(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Me(e){for(var t=0,n=e.filters;t<n.length;t++){var r=n[t];if(r.g())return r.field}return null}function Le(e){return null!==e.collectionGroup}function Fe(e){var t=y(e);if(null===t.p){t.p=[];var n=Me(t),r=De(t);if(null!==n&&null===r)n.isKeyField()||t.p.push(new ke(n)),t.p.push(new ke(P.keyField(),"asc"));else{for(var i=!1,o=0,a=t.explicitOrderBy;o<a.length;o++){var s=a[o];t.p.push(s),s.field.isKeyField()&&(i=!0)}if(!i){var u=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.p.push(new ke(P.keyField(),u))}}}return t.p}function je(e){var t=y(e);if(!t.T)if("F"===t.limitType)t.T=le(t.path,t.collectionGroup,Fe(t),t.filters,t.limit,t.startAt,t.endAt);else{for(var n=[],r=0,i=Fe(t);r<i.length;r++){var o=i[r],a="desc"===o.dir?"asc":"desc";n.push(new ke(o.field,a))}var s=t.endAt?new Te(t.endAt.position,!t.endAt.before):null,u=t.startAt?new Te(t.startAt.position,!t.startAt.before):null;t.T=le(t.path,t.collectionGroup,n,t.filters,t.limit,s,u)}return t.T}function Ue(e,t,n){return new Ne(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function qe(e,t){return fe(je(e),je(t))&&e.limitType===t.limitType}function Ve(e){return he(je(e))+"|lt:"+e.limitType}function Be(e){return"Query(target="+function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: ["+e.filters.map((function(e){return(t=e).field.canonicalString()+" "+t.op+" "+X(t.value);var t})).join(", ")+"]"),B(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: ["+e.orderBy.map((function(e){return function(e){return e.field.canonicalString()+" ("+e.dir+")"}(e)})).join(", ")+"]"),e.startAt&&(t+=", startAt: "+Ee(e.startAt)),e.endAt&&(t+=", endAt: "+Ee(e.endAt)),"Target("+t+")"}(je(e))+"; limitType="+e.limitType+")"}function Ke(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):H.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(var n=0,r=e.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}return!0}(e,t)&&function(e,t){for(var n=0,r=e.filters;n<r.length;n++)if(!r[n].matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!Ce(e.startAt,Fe(e),t))&&(!e.endAt||!Ce(e.endAt,Fe(e),t))}(e,t)}function We(e){return function(t,n){for(var r=!1,i=0,o=Fe(e);i<o.length;i++){var a=o[i],s=He(a,t,n);if(0!==s)return s;r=r||a.field.isKeyField()}return 0}}function He(e,t,n){var r=e.field.isKeyField()?H.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?$(r,i):g()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return g()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ge(e,t){if(e.I){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:K(t)?"-0":t}}function ze(e){return{integerValue:""+e}}function Qe(e,t){return W(t)?ze(t):Ge(e,t)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $e=function(){this._=void 0};function Ye(e,t,n){return e instanceof Ze?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof et?tt(e,t):e instanceof nt?rt(e,t):function(e,t){var n=Je(e,t),r=ot(n)+ot(e.A);return ee(n)&&ee(e.A)?ze(r):Ge(e.R,r)}(e,t)}function Xe(e,t,n){return e instanceof et?tt(e,t):e instanceof nt?rt(e,t):n}function Je(e,t){return e instanceof it?ee(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var Ze=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,r.__extends)(t,e),t}($e),et=function(e){function t(t){var n=this;return(n=e.call(this)||this).elements=t,n}return(0,r.__extends)(t,e),t}($e);function tt(e,t){for(var n=at(t),r=function(e){n.some((function(t){return z(t,e)}))||n.push(e)},i=0,o=e.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var nt=function(e){function t(t){var n=this;return(n=e.call(this)||this).elements=t,n}return(0,r.__extends)(t,e),t}($e);function rt(e,t){for(var n=at(t),r=function(e){n=n.filter((function(t){return!z(t,e)}))},i=0,o=e.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var it=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).R=t,r.A=n,r}return(0,r.__extends)(t,e),t}($e);function ot(e){return F(e.integerValue||e.doubleValue)}function at(e){return te(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var st=function(e,t){this.field=e,this.transform=t},ut=function(e,t){this.version=e,this.transformResults=t},ct=function(){function e(e,t){this.updateTime=e,this.exists=t}return e.none=function(){return new e},e.exists=function(t){return new e(void 0,t)},e.updateTime=function(t){return new e(t)},Object.defineProperty(e.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)},e}();function lt(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var ht=function(){};function ft(e,t,n){e instanceof mt?function(e,t,n){var r=e.value.clone(),i=bt(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof yt?function(e,t,n){if(lt(e.precondition,t)){var r=bt(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(_t(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function dt(e,t,n){e instanceof mt?function(e,t,n){if(lt(e.precondition,t)){var r=e.value.clone(),i=wt(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(gt(t),r).setHasLocalMutations()}}(e,t,n):e instanceof yt?function(e,t,n){if(lt(e.precondition,t)){var r=wt(e.fieldTransforms,n,t),i=t.data;i.setAll(_t(e)),i.setAll(r),t.convertToFoundDocument(gt(t),i).setHasLocalMutations()}}(e,t,n):function(e,t){lt(e.precondition,t)&&t.convertToNoDocument(k.min())}(e,t)}function pt(e,t){for(var n=null,r=0,i=e.fieldTransforms;r<i.length;r++){var o=i[r],a=t.data.field(o.field),s=Je(o.transform,a||null);null!=s&&(null==n&&(n=ae.empty()),n.set(o.field,s))}return n||null}function vt(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&I(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof et&&t instanceof et||e instanceof nt&&t instanceof nt?I(e.elements,t.elements,z):e instanceof it&&t instanceof it?z(e.A,t.A):e instanceof Ze&&t instanceof Ze}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function gt(e){return e.isFoundDocument()?e.version:k.min()}var mt=function(e){function t(t,n,r,i){void 0===i&&(i=[]);var o=this;return(o=e.call(this)||this).key=t,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return(0,r.__extends)(t,e),t}(ht),yt=function(e){function t(t,n,r,i,o){void 0===o&&(o=[]);var a=this;return(a=e.call(this)||this).key=t,a.data=n,a.fieldMask=r,a.precondition=i,a.fieldTransforms=o,a.type=1,a}return(0,r.__extends)(t,e),t}(ht);function _t(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function bt(e,t,n){var r=new Map;m(e.length===n.length);for(var i=0;i<n.length;i++){var o=e[i],a=o.transform,s=t.data.field(o.field);r.set(o.field,Xe(a,s,n[i]))}return r}function wt(e,t,n){for(var r=new Map,i=0,o=e;i<o.length;i++){var a=o[i],s=a.transform,u=n.data.field(a.field);r.set(a.field,Ye(s,u,t))}return r}var It,Tt,Et=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).key=t,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return(0,r.__extends)(t,e),t}(ht),kt=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).key=t,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return(0,r.__extends)(t,e),t}(ht),St=function(e){this.count=e};function Ct(e){switch(e){case u.OK:return g();case u.CANCELLED:case u.UNKNOWN:case u.DEADLINE_EXCEEDED:case u.RESOURCE_EXHAUSTED:case u.INTERNAL:case u.UNAVAILABLE:case u.UNAUTHENTICATED:return!1;case u.INVALID_ARGUMENT:case u.NOT_FOUND:case u.ALREADY_EXISTS:case u.PERMISSION_DENIED:case u.FAILED_PRECONDITION:case u.ABORTED:case u.OUT_OF_RANGE:case u.UNIMPLEMENTED:case u.DATA_LOSS:return!0;default:return g()}}function At(e){if(void 0===e)return d("GRPC error has no .code"),u.UNKNOWN;switch(e){case It.OK:return u.OK;case It.CANCELLED:return u.CANCELLED;case It.UNKNOWN:return u.UNKNOWN;case It.DEADLINE_EXCEEDED:return u.DEADLINE_EXCEEDED;case It.RESOURCE_EXHAUSTED:return u.RESOURCE_EXHAUSTED;case It.INTERNAL:return u.INTERNAL;case It.UNAVAILABLE:return u.UNAVAILABLE;case It.UNAUTHENTICATED:return u.UNAUTHENTICATED;case It.INVALID_ARGUMENT:return u.INVALID_ARGUMENT;case It.NOT_FOUND:return u.NOT_FOUND;case It.ALREADY_EXISTS:return u.ALREADY_EXISTS;case It.PERMISSION_DENIED:return u.PERMISSION_DENIED;case It.FAILED_PRECONDITION:return u.FAILED_PRECONDITION;case It.ABORTED:return u.ABORTED;case It.OUT_OF_RANGE:return u.OUT_OF_RANGE;case It.UNIMPLEMENTED:return u.UNIMPLEMENTED;case It.DATA_LOSS:return u.DATA_LOSS;default:return g()}}(Tt=It||(It={}))[Tt.OK=0]="OK",Tt[Tt.CANCELLED=1]="CANCELLED",Tt[Tt.UNKNOWN=2]="UNKNOWN",Tt[Tt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Tt[Tt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Tt[Tt.NOT_FOUND=5]="NOT_FOUND",Tt[Tt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Tt[Tt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Tt[Tt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Tt[Tt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Tt[Tt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Tt[Tt.ABORTED=10]="ABORTED",Tt[Tt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Tt[Tt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Tt[Tt.INTERNAL=13]="INTERNAL",Tt[Tt.UNAVAILABLE=14]="UNAVAILABLE",Tt[Tt.DATA_LOSS=15]="DATA_LOSS";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Nt=function(){function e(e,t){this.comparator=e,this.root=t||Rt.EMPTY}return e.prototype.insert=function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Rt.BLACK,null,null))},e.prototype.remove=function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Rt.BLACK,null,null))},e.prototype.get=function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null},e.prototype.indexOf=function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1},e.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(e.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),e.prototype.minKey=function(){return this.root.minKey()},e.prototype.maxKey=function(){return this.root.maxKey()},e.prototype.inorderTraversal=function(e){return this.root.inorderTraversal(e)},e.prototype.forEach=function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))},e.prototype.toString=function(){var e=[];return this.inorderTraversal((function(t,n){return e.push(t+":"+n),!1})),"{"+e.join(", ")+"}"},e.prototype.reverseTraversal=function(e){return this.root.reverseTraversal(e)},e.prototype.getIterator=function(){return new xt(this.root,null,this.comparator,!1)},e.prototype.getIteratorFrom=function(e){return new xt(this.root,e,this.comparator,!1)},e.prototype.getReverseIterator=function(){return new xt(this.root,null,this.comparator,!0)},e.prototype.getReverseIteratorFrom=function(e){return new xt(this.root,e,this.comparator,!0)},e}(),xt=function(){function e(e,t,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!e.isEmpty();)if(i=t?n(e.key,t):1,r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}return e.prototype.getNext=function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t},e.prototype.hasNext=function(){return this.nodeStack.length>0},e.prototype.peek=function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}},e}(),Rt=function(){function e(t,n,r,i,o){this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=o?o:e.EMPTY,this.size=this.left.size+1+this.right.size}return e.prototype.copy=function(t,n,r,i,o){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},e.prototype.isEmpty=function(){return!1},e.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},e.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},e.prototype.minKey=function(){return this.min().key},e.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},e.prototype.insert=function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()},e.prototype.removeMin=function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()},e.prototype.remove=function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()},e.prototype.isRed=function(){return this.color},e.prototype.fixUp=function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e},e.prototype.moveRedLeft=function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e},e.prototype.moveRedRight=function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e},e.prototype.rotateLeft=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},e.prototype.rotateRight=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},e.prototype.colorFlip=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)},e.prototype.checkMaxDepth=function(){var e=this.check();return Math.pow(2,e)<=this.size+1},e.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw g();if(this.right.isRed())throw g();var e=this.left.check();if(e!==this.right.check())throw g();return e+(this.isRed()?0:1)},e}();Rt.EMPTY=null,Rt.RED=!0,Rt.BLACK=!1,Rt.EMPTY=new(function(){function e(){this.size=0}return Object.defineProperty(e.prototype,"key",{get:function(){throw g()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){throw g()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){throw g()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){throw g()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){throw g()},enumerable:!1,configurable:!0}),e.prototype.copy=function(e,t,n,r,i){return this},e.prototype.insert=function(e,t,n){return new Rt(e,t)},e.prototype.remove=function(e,t){return this},e.prototype.isEmpty=function(){return!0},e.prototype.inorderTraversal=function(e){return!1},e.prototype.reverseTraversal=function(e){return!1},e.prototype.minKey=function(){return null},e.prototype.maxKey=function(){return null},e.prototype.isRed=function(){return!1},e.prototype.checkMaxDepth=function(){return!0},e.prototype.check=function(){return 0},e}());
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Pt=function(){function e(e){this.comparator=e,this.data=new Nt(this.comparator)}return e.prototype.has=function(e){return null!==this.data.get(e)},e.prototype.first=function(){return this.data.minKey()},e.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(e.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),e.prototype.indexOf=function(e){return this.data.indexOf(e)},e.prototype.forEach=function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))},e.prototype.forEachInRange=function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}},e.prototype.forEachWhile=function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return},e.prototype.firstAfterOrEqual=function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null},e.prototype.getIterator=function(){return new Ot(this.data.getIterator())},e.prototype.getIteratorFrom=function(e){return new Ot(this.data.getIteratorFrom(e))},e.prototype.add=function(e){return this.copy(this.data.remove(e).insert(e,!0))},e.prototype.delete=function(e){return this.has(e)?this.copy(this.data.remove(e)):this},e.prototype.isEmpty=function(){return this.data.isEmpty()},e.prototype.unionWith=function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t},e.prototype.isEqual=function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},e.prototype.toArray=function(){var e=[];return this.forEach((function(t){e.push(t)})),e},e.prototype.toString=function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"},e.prototype.copy=function(t){var n=new e(this.comparator);return n.data=t,n},e}(),Ot=function(){function e(e){this.iter=e}return e.prototype.getNext=function(){return this.iter.getNext().key},e.prototype.hasNext=function(){return this.iter.hasNext()},e}(),Dt=new Nt(H.comparator);function Mt(){return Dt}var Lt=new Nt(H.comparator);function Ft(){return Lt}var jt=new Nt(H.comparator);function Ut(){return jt}var qt=new Pt(H.comparator);function Vt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=qt,r=0,i=e;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Bt=new Pt(w);function Kt(){return Bt}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wt=function(){function e(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return e.createSynthesizedRemoteEventForCurrentChange=function(t,n){var r=new Map;return r.set(t,Ht.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(k.min(),r,Kt(),Mt(),Vt())},e}(),Ht=function(){function e(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return e.createSynthesizedTargetChangeForCurrentChange=function(t,n){return new e(D.EMPTY_BYTE_STRING,n,Vt(),Vt(),Vt())},e}(),Gt=function(e,t,n,r){this.v=e,this.removedTargetIds=t,this.key=n,this.P=r},zt=function(e,t){this.targetId=e,this.V=t},Qt=function(e,t,n,r){void 0===n&&(n=D.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r},$t=function(){function e(){this.S=0,this.D=Jt(),this.C=D.EMPTY_BYTE_STRING,this.N=!1,this.k=!0}return Object.defineProperty(e.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"F",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"$",{get:function(){return this.k},enumerable:!1,configurable:!0}),e.prototype.O=function(e){e.approximateByteSize()>0&&(this.k=!0,this.C=e)},e.prototype.M=function(){var e=Vt(),t=Vt(),n=Vt();return this.D.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:g()}})),new Ht(this.C,this.N,e,t,n)},e.prototype.L=function(){this.k=!1,this.D=Jt()},e.prototype.B=function(e,t){this.k=!0,this.D=this.D.insert(e,t)},e.prototype.q=function(e){this.k=!0,this.D=this.D.remove(e)},e.prototype.U=function(){this.S+=1},e.prototype.K=function(){this.S-=1},e.prototype.j=function(){this.k=!0,this.N=!0},e}(),Yt=function(){function e(e){this.W=e,this.G=new Map,this.H=Mt(),this.J=Xt(),this.Y=new Pt(w)}return e.prototype.X=function(e){for(var t=0,n=e.v;t<n.length;t++){var r=n[t];e.P&&e.P.isFoundDocument()?this.Z(r,e.P):this.tt(r,e.key,e.P)}for(var i=0,o=e.removedTargetIds;i<o.length;i++)r=o[i],this.tt(r,e.key,e.P)},e.prototype.et=function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.nt(n);switch(e.state){case 0:t.st(n)&&r.O(e.resumeToken);break;case 1:r.K(),r.F||r.L(),r.O(e.resumeToken);break;case 2:r.K(),r.F||t.removeTarget(n);break;case 3:t.st(n)&&(r.j(),r.O(e.resumeToken));break;case 4:t.st(n)&&(t.it(n),r.O(e.resumeToken));break;default:g()}}))},e.prototype.forEachTarget=function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.G.forEach((function(e,r){n.st(r)&&t(r)}))},e.prototype.rt=function(e){var t=e.targetId,n=e.V.count,r=this.ot(t);if(r){var i=r.target;if(de(i))if(0===n){var o=new H(i.path);this.tt(t,o,ue.newNoDocument(o,k.min()))}else m(1===n);else this.ct(t)!==n&&(this.it(t),this.Y=this.Y.add(t))}},e.prototype.ut=function(e){var t=this,n=new Map;this.G.forEach((function(r,i){var o=t.ot(i);if(o){if(r.current&&de(o.target)){var a=new H(o.target.path);null!==t.H.get(a)||t.at(i,a)||t.tt(i,a,ue.newNoDocument(a,e))}r.$&&(n.set(i,r.M()),r.L())}}));var r=Vt();this.J.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.ot(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))}));var i=new Wt(e,n,this.Y,this.H,r);return this.H=Mt(),this.J=Xt(),this.Y=new Pt(w),i},e.prototype.Z=function(e,t){if(this.st(e)){var n=this.at(e,t.key)?2:0;this.nt(e).B(t.key,n),this.H=this.H.insert(t.key,t),this.J=this.J.insert(t.key,this.ht(t.key).add(e))}},e.prototype.tt=function(e,t,n){if(this.st(e)){var r=this.nt(e);this.at(e,t)?r.B(t,1):r.q(t),this.J=this.J.insert(t,this.ht(t).delete(e)),n&&(this.H=this.H.insert(t,n))}},e.prototype.removeTarget=function(e){this.G.delete(e)},e.prototype.ct=function(e){var t=this.nt(e).M();return this.W.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size},e.prototype.U=function(e){this.nt(e).U()},e.prototype.nt=function(e){var t=this.G.get(e);return t||(t=new $t,this.G.set(e,t)),t},e.prototype.ht=function(e){var t=this.J.get(e);return t||(t=new Pt(w),this.J=this.J.insert(e,t)),t},e.prototype.st=function(e){var t=null!==this.ot(e);return t||f("WatchChangeAggregator","Detected inactive target",e),t},e.prototype.ot=function(e){var t=this.G.get(e);return t&&t.F?null:this.W.lt(e)},e.prototype.it=function(e){var t=this;this.G.set(e,new $t),this.W.getRemoteKeysForTarget(e).forEach((function(n){t.tt(e,n,null)}))},e.prototype.at=function(e,t){return this.W.getRemoteKeysForTarget(e).has(t)},e}();function Xt(){return new Nt(H.comparator)}function Jt(){return new Nt(H.comparator)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zt={asc:"ASCENDING",desc:"DESCENDING"},en={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},tn=function(e,t){this.databaseId=e,this.I=t};function nn(e,t){return e.I?new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+t.nanoseconds).slice(-9)+"Z":{seconds:""+t.seconds,nanos:t.nanoseconds}}function rn(e,t){return e.I?t.toBase64():t.toUint8Array()}function on(e,t){return nn(e,t.toTimestamp())}function an(e){return m(!!e),k.fromTimestamp(function(e){var t=L(e);return new E(t.seconds,t.nanos)}(e))}function sn(e,t){return function(e){return new x(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function un(e){var t=x.fromString(e);return m(Pn(t)),t}function cn(e,t){return sn(e.databaseId,t.path)}function ln(e,t){var n=un(t);if(n.get(1)!==e.databaseId.projectId)throw new c(u.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new c(u.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new H(pn(n))}function hn(e,t){return sn(e.databaseId,t)}function fn(e){var t=un(e);return 4===t.length?x.emptyPath():pn(t)}function dn(e){return new x(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function pn(e){return m(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function vn(e,t,n){return{name:cn(e,t),fields:n.value.mapValue.fields}}function gn(e,t,n){var r=ln(e,t.name),i=an(t.updateTime),o=new ae({mapValue:{fields:t.fields}}),a=ue.newFoundDocument(r,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function mn(e,t){var n;if(t instanceof mt)n={update:vn(e,t.key,t.value)};else if(t instanceof Et)n={delete:cn(e,t.key)};else if(t instanceof yt)n={update:vn(e,t.key,t.data),updateMask:Rn(t.fieldMask)};else{if(!(t instanceof kt))return g();n={verify:cn(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof Ze)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof et)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof nt)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof it)return{fieldPath:t.field.canonicalString(),increment:n.A};throw g()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:on(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:g()}(e,t.precondition)),n}function yn(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?ct.updateTime(an(e.updateTime)):void 0!==e.exists?ct.exists(e.exists):ct.none()}(t.currentDocument):ct.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)m("REQUEST_TIME"===t.setToServerValue),n=new Ze;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new et(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new nt(i)}else"increment"in t?n=new it(e,t.increment):g();var o=P.fromServerFormat(t.fieldPath);return new st(o,n)}(e,t)})):[];if(t.update){t.update.name;var i=ln(e,t.update.name),o=new ae({mapValue:{fields:t.update.fields}});if(t.updateMask){var a=function(e){var t=e.fieldPaths||[];return new O(t.map((function(e){return P.fromServerFormat(e)})))}(t.updateMask);return new yt(i,o,a,n,r)}return new mt(i,o,n,r)}if(t.delete){var s=ln(e,t.delete);return new Et(s,n)}if(t.verify){var u=ln(e,t.verify);return new kt(u,n)}return g()}function _n(e,t){return{documents:[hn(e,t.path)]}}function bn(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=hn(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=hn(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(re(e.value))return{unaryFilter:{field:Cn(e.field),op:"IS_NAN"}};if(ne(e.value))return{unaryFilter:{field:Cn(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(re(e.value))return{unaryFilter:{field:Cn(e.field),op:"IS_NOT_NAN"}};if(ne(e.value))return{unaryFilter:{field:Cn(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Cn(e.field),op:Sn(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var o=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:Cn(e.field),direction:kn(e.dir)}}(e)}))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);var a=function(e,t){return e.I||B(t)?t:{value:t}}(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=Tn(t.startAt)),t.endAt&&(n.structuredQuery.endAt=Tn(t.endAt)),n}function wn(e){var t=fn(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){m(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:t=t.child(o.collectionId)}var a=[];n.where&&(a=In(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(e){return function(e){return new ke(An(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var u=null;n.limit&&(u=function(e){var t;return B(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=En(n.startAt));var l=null;return n.endAt&&(l=En(n.endAt)),xe(t,i,s,a,u,"F",c,l)}function In(e){return e?void 0!==e.unaryFilter?[xn(e)]:void 0!==e.fieldFilter?[Nn(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return In(e)})).reduce((function(e,t){return e.concat(t)})):g():[]}function Tn(e){return{before:e.before,values:e.position}}function En(e){var t=!!e.before,n=e.values||[];return new Te(n,t)}function kn(e){return Zt[e]}function Sn(e){return en[e]}function Cn(e){return{fieldPath:e.canonicalString()}}function An(e){return P.fromServerFormat(e.fieldPath)}function Nn(e){return pe.create(An(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return g()}}(e.fieldFilter.op),e.fieldFilter.value)}function xn(e){switch(e.unaryFilter.op){case"IS_NAN":var t=An(e.unaryFilter.field);return pe.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=An(e.unaryFilter.field);return pe.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=An(e.unaryFilter.field);return pe.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=An(e.unaryFilter.field);return pe.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return g()}}function Rn(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function Pn(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function On(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=Mn(t)),t=Dn(e.get(n),t);return Mn(t)}function Dn(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var o=e.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function Mn(e){return e+""}function Ln(e){var t=e.length;if(m(t>=2),2===t)return m(""===e.charAt(0)&&""===e.charAt(1)),x.emptyPath();for(var n=t-2,r=[],i="",o=0;o<t;){var a=e.indexOf("",o);switch((a<0||a>n)&&g(),e.charAt(a+1)){case"":var s=e.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"":i+=e.substring(o,a),i+="\0";break;case"":i+=e.substring(o,a+1);break;default:g()}o=a+2}return new x(r)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fn=function(e,t){this.seconds=e,this.nanoseconds=t},jn=function(e,t,n){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=n};jn.store="owner",jn.key="owner";var Un=function(e,t,n){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=n};Un.store="mutationQueues",Un.keyPath="userId";var qn=function(e,t,n,r,i){this.userId=e,this.batchId=t,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};qn.store="mutations",qn.keyPath="batchId",qn.userMutationsIndex="userMutationsIndex",qn.userMutationsKeyPath=["userId","batchId"];var Vn=function(){function e(){}return e.prefixForUser=function(e){return[e]},e.prefixForPath=function(e,t){return[e,On(t)]},e.key=function(e,t,n){return[e,On(t),n]},e}();Vn.store="documentMutations",Vn.PLACEHOLDER=new Vn;var Bn=function(e,t){this.path=e,this.readTime=t},Kn=function(e,t){this.path=e,this.version=t},Wn=function(e,t,n,r,i,o){this.unknownDocument=e,this.noDocument=t,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};Wn.store="remoteDocuments",Wn.readTimeIndex="readTimeIndex",Wn.readTimeIndexPath="readTime",Wn.collectionReadTimeIndex="collectionReadTimeIndex",Wn.collectionReadTimeIndexPath=["parentPath","readTime"];var Hn=function(e){this.byteSize=e};Hn.store="remoteDocumentGlobal",Hn.key="remoteDocumentGlobalKey";var Gn=function(e,t,n,r,i,o,a){this.targetId=e,this.canonicalId=t,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=a};Gn.store="targets",Gn.keyPath="targetId",Gn.queryTargetsIndexName="queryTargetsIndex",Gn.queryTargetsKeyPath=["canonicalId","targetId"];var zn=function(e,t,n){this.targetId=e,this.path=t,this.sequenceNumber=n};zn.store="targetDocuments",zn.keyPath=["targetId","path"],zn.documentTargetsIndex="documentTargetsIndex",zn.documentTargetsKeyPath=["path","targetId"];var Qn=function(e,t,n,r){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Qn.key="targetGlobalKey",Qn.store="targetGlobal";var $n=function(e,t){this.collectionId=e,this.parent=t};$n.store="collectionParents",$n.keyPath=["collectionId","parent"];var Yn=function(e,t,n,r){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=n,this.inForeground=r};Yn.store="clientMetadata",Yn.keyPath="clientId";var Xn=function(e,t,n){this.bundleId=e,this.createTime=t,this.version=n};Xn.store="bundles",Xn.keyPath="bundleId";var Jn=function(e,t,n){this.name=e,this.readTime=t,this.bundledQuery=n};Jn.store="namedQueries",Jn.keyPath="name";var Zn=(0,r.__spreadArray)((0,r.__spreadArray)([],(0,r.__spreadArray)((0,r.__spreadArray)([],(0,r.__spreadArray)((0,r.__spreadArray)([],(0,r.__spreadArray)((0,r.__spreadArray)([],[Un.store,qn.store,Vn.store,Wn.store,Gn.store,jn.store,Qn.store,zn.store]),[Yn.store])),[Hn.store])),[$n.store])),[Xn.store,Jn.store]),er="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",tr=function(){function e(){this.onCommittedListeners=[]}return e.prototype.addOnCommittedListener=function(e){this.onCommittedListeners.push(e)},e.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(e){return e()}))},e}(),nr=function(){var e=this;this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))},rr=function(){function e(e){var t=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((function(e){t.isDone=!0,t.result=e,t.nextCallback&&t.nextCallback(e)}),(function(e){t.isDone=!0,t.error=e,t.catchCallback&&t.catchCallback(e)}))}return e.prototype.catch=function(e){return this.next(void 0,e)},e.prototype.next=function(t,n){var r=this;return this.callbackAttached&&g(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))},e.prototype.toPromise=function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))},e.prototype.wrapUserFunction=function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}},e.prototype.wrapSuccess=function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)},e.prototype.wrapFailure=function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)},e.resolve=function(t){return new e((function(e,n){e(t)}))},e.reject=function(t){return new e((function(e,n){n(t)}))},e.waitFor=function(t){return new e((function(e,n){var r=0,i=0,o=!1;t.forEach((function(t){++r,t.next((function(){++i,o&&i===r&&e()}),(function(e){return n(e)}))})),o=!0,i===r&&e()}))},e.or=function(t){for(var n=e.resolve(!1),r=function(t){n=n.next((function(n){return n?e.resolve(n):t()}))},i=0,o=t;i<o.length;i++)r(o[i]);return n},e.forEach=function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)},e}(),ir=function(){function e(e,t){var n=this;this.action=e,this.transaction=t,this.aborted=!1,this.ft=new nr,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){t.error?n.ft.reject(new sr(e,t.error)):n.ft.resolve()},this.transaction.onerror=function(t){var r=fr(t.target.error);n.ft.reject(new sr(e,r))}}return e.open=function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new sr(n,t)}},Object.defineProperty(e.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),e.prototype.abort=function(e){e&&this.ft.reject(e),this.aborted||(f("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},e.prototype.store=function(e){var t=this.transaction.objectStore(e);return new cr(t)},e}(),or=function(){function e(t,n,r){this.name=t,this.version=n,this.wt=r,12.2===e._t((0,i.getUA)())&&d("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return e.delete=function(e){return f("SimpleDb","Removing database:",e),lr(window.indexedDB.deleteDatabase(e)).toPromise()},e.yt=function(){if("undefined"==typeof indexedDB)return!1;if(e.gt())return!0;var t=(0,i.getUA)(),n=e._t(t),r=0<n&&n<10,o=e.Et(t),a=0<o&&o<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)},e.gt=function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",BASE_URL:"/"})||void 0===e?void 0:e.Tt)},e.It=function(e,t){return e.store(t)},e._t=function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)},e.Et=function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)},e.prototype.At=function(e){return(0,r.__awaiter)(this,void 0,void 0,(function(){var t,n=this;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(f("SimpleDb","Opening database:",this.name),t=this,[4,new Promise((function(t,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(e){var n=e.target.result;t(n)},i.onblocked=function(){r(new sr(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(t){var n=t.target.error;"VersionError"===n.name?r(new c(u.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new sr(e,n))},i.onupgradeneeded=function(e){f("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.wt.Rt(t,i.transaction,e.oldVersion,n.version).next((function(){f("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:t.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(e){return n.bt(e)}),this.db)]}}))}))},e.prototype.vt=function(e){this.bt=e,this.db&&(this.db.onversionchange=function(t){return e(t)})},e.prototype.runTransaction=function(e,t,n,i){return(0,r.__awaiter)(this,void 0,void 0,(function(){var o,a,s,u,c;return(0,r.__generator)(this,(function(l){switch(l.label){case 0:o="readonly"===t,a=0,s=function(){var t,s,c,l,h;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:++a,r.label=1;case 1:return r.trys.push([1,4,,5]),[4,u.At(e)];case 2:return u.db=r.sent(),t=ir.open(u.db,e,o?"readonly":"readwrite",n),s=i(t).catch((function(e){return t.abort(e),rr.reject(e)})).toPromise(),c={},s.catch((function(){})),[4,t.dt];case 3:return[2,(c.value=(r.sent(),s),c)];case 4:return l=r.sent(),h="FirebaseError"!==l.name&&a<3,f("SimpleDb","Transaction failed with error:",l.message,"Retrying:",h),u.close(),h?[3,5]:[2,{value:Promise.reject(l)}];case 5:return[2]}}))},u=this,l.label=1;case 1:return[5,s()];case 2:if("object"==typeof(c=l.sent()))return[2,c.value];l.label=3;case 3:return[3,1];case 4:return[2]}}))}))},e.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},e}(),ar=function(){function e(e){this.Pt=e,this.Vt=!1,this.St=null}return Object.defineProperty(e.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cursor",{set:function(e){this.Pt=e},enumerable:!1,configurable:!0}),e.prototype.done=function(){this.Vt=!0},e.prototype.Ct=function(e){this.St=e},e.prototype.delete=function(){return lr(this.Pt.delete())},e}(),sr=function(e){function t(t,n){var r=this;return(r=e.call(this,u.UNAVAILABLE,"IndexedDB transaction '"+t+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return(0,r.__extends)(t,e),t}(c);function ur(e){return"IndexedDbTransactionError"===e.name}var cr=function(){function e(e){this.store=e}return e.prototype.put=function(e,t){var n;return void 0!==t?(f("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(f("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),lr(n)},e.prototype.add=function(e){return f("SimpleDb","ADD",this.store.name,e,e),lr(this.store.add(e))},e.prototype.get=function(e){var t=this;return lr(this.store.get(e)).next((function(n){return void 0===n&&(n=null),f("SimpleDb","GET",t.store.name,e,n),n}))},e.prototype.delete=function(e){return f("SimpleDb","DELETE",this.store.name,e),lr(this.store.delete(e))},e.prototype.count=function(){return f("SimpleDb","COUNT",this.store.name),lr(this.store.count())},e.prototype.Nt=function(e,t){var n=this.cursor(this.options(e,t)),r=[];return this.xt(n,(function(e,t){r.push(t)})).next((function(){return r}))},e.prototype.kt=function(e,t){f("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.Ft=!1;var r=this.cursor(n);return this.xt(r,(function(e,t,n){return n.delete()}))},e.prototype.$t=function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.xt(r,t)},e.prototype.Ot=function(e){var t=this.cursor({});return new rr((function(n,r){t.onerror=function(e){var t=fr(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))},e.prototype.xt=function(e,t){var n=[];return new rr((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var o=new ar(i),a=t(i.primaryKey,i.value,o);if(a instanceof rr){var s=a.catch((function(e){return o.done(),rr.reject(e)}));n.push(s)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}})).next((function(){return rr.waitFor(n)}))},e.prototype.options=function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}},e.prototype.cursor=function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.Ft?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)},e}();function lr(e){return new rr((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=fr(e.target.error);n(t)}}))}var hr=!1;function fr(e){var t=or._t((0,i.getUA)());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new c("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return hr||(hr=!0,setTimeout((function(){throw r}),0)),r}}return e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dr=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).Mt=t,r.currentSequenceNumber=n,r}return(0,r.__extends)(t,e),t}(tr);function pr(e,t){var n=y(e);return or.It(n.Mt,t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vr=function(){function e(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}return e.prototype.applyToRemoteDocument=function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&ft(i,e,n[r])}},e.prototype.applyToLocalView=function(e){for(var t=0,n=this.baseMutations;t<n.length;t++)(o=n[t]).key.isEqual(e.key)&&dt(o,e,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(e.key)&&dt(o,e,this.localWriteTime)}},e.prototype.applyToLocalDocumentSet=function(e){var t=this;this.mutations.forEach((function(n){var r=e.get(n.key),i=r;t.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(k.min())}))},e.prototype.keys=function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),Vt())},e.prototype.isEqual=function(e){return this.batchId===e.batchId&&I(this.mutations,e.mutations,(function(e,t){return vt(e,t)}))&&I(this.baseMutations,e.baseMutations,(function(e,t){return vt(e,t)}))},e}(),gr=function(){function e(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}return e.from=function(t,n,r){m(t.mutations.length===r.length);for(var i=Ut(),o=t.mutations,a=0;a<o.length;a++)i=i.insert(o[a].key,r[a].version);return new e(t,n,r,i)},e}(),mr=function(){function e(e,t,n,r,i,o,a){void 0===i&&(i=k.min()),void 0===o&&(o=k.min()),void 0===a&&(a=D.EMPTY_BYTE_STRING),this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}return e.prototype.withSequenceNumber=function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},e.prototype.withResumeToken=function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)},e.prototype.withLastLimboFreeSnapshotVersion=function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)},e}(),yr=function(e){this.Lt=e};function _r(e,t){if(t.document)return gn(e.Lt,t.document,!!t.hasCommittedMutations);if(t.noDocument){var n=H.fromSegments(t.noDocument.path),r=Er(t.noDocument.readTime),i=ue.newNoDocument(n,r);return t.hasCommittedMutations?i.setHasCommittedMutations():i}if(t.unknownDocument){var o=H.fromSegments(t.unknownDocument.path);return r=Er(t.unknownDocument.version),ue.newUnknownDocument(o,r)}return g()}function br(e,t,n){var r=wr(n),i=t.key.path.popLast().toArray();if(t.isFoundDocument()){var o=function(e,t){return{name:cn(e,t.key),fields:t.data.value.mapValue.fields,updateTime:nn(e,t.version.toTimestamp())}}(e.Lt,t),a=t.hasCommittedMutations;return new Wn(null,null,o,a,r,i)}if(t.isNoDocument()){var s=t.key.path.toArray(),u=Tr(t.version);return a=t.hasCommittedMutations,new Wn(null,new Bn(s,u),null,a,r,i)}if(t.isUnknownDocument()){var c=t.key.path.toArray(),l=Tr(t.version);return new Wn(new Kn(c,l),null,null,!0,r,i)}return g()}function wr(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Ir(e){var t=new E(e[0],e[1]);return k.fromTimestamp(t)}function Tr(e){var t=e.toTimestamp();return new Fn(t.seconds,t.nanoseconds)}function Er(e){var t=new E(e.seconds,e.nanoseconds);return k.fromTimestamp(t)}function kr(e,t){for(var n=(t.baseMutations||[]).map((function(t){return yn(e.Lt,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var o=t.mutations[r+1];i.updateTransforms=o.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var a=t.mutations.map((function(t){return yn(e.Lt,t)})),s=E.fromMillis(t.localWriteTimeMs);return new vr(t.batchId,s,n,a)}function Sr(e){var t,n,r=Er(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?Er(e.lastLimboFreeSnapshotVersion):k.min();return void 0!==e.query.documents?(m(1===(n=e.query).documents.length),t=je(Re(fn(n.documents[0])))):t=function(e){return je(wn(e))}(e.query),new mr(t,e.targetId,0,e.lastListenSequenceNumber,r,i,D.fromBase64String(e.resumeToken))}function Cr(e,t){var n,r=Tr(t.snapshotVersion),i=Tr(t.lastLimboFreeSnapshotVersion);n=de(t.target)?_n(e.Lt,t.target):bn(e.Lt,t.target);var o=t.resumeToken.toBase64();return new Gn(t.targetId,he(t.target),r,o,t.sequenceNumber,i,n)}function Ar(e){var t=wn({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Ue(t,t.limit,"L"):t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nr=function(){function e(){}return e.prototype.getBundleMetadata=function(e,t){return xr(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:Er(t.createTime),version:t.version};var t}))},e.prototype.saveBundleMetadata=function(e,t){return xr(e).put({bundleId:(n=t).id,createTime:Tr(an(n.createTime)),version:n.version});var n},e.prototype.getNamedQuery=function(e,t){return Rr(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:Ar(t.bundledQuery),readTime:Er(t.readTime)};var t}))},e.prototype.saveNamedQuery=function(e,t){return Rr(e).put(function(e){return{name:e.name,readTime:Tr(an(e.readTime)),bundledQuery:e.bundledQuery}}(t))},e}();function xr(e){return pr(e,Xn.store)}function Rr(e){return pr(e,Jn.store)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pr=function(){function e(){this.Bt=new Or}return e.prototype.addToCollectionParentIndex=function(e,t){return this.Bt.add(t),rr.resolve()},e.prototype.getCollectionParents=function(e,t){return rr.resolve(this.Bt.getEntries(t))},e}(),Or=function(){function e(){this.index={}}return e.prototype.add=function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Pt(x.comparator),i=!r.has(n);return this.index[t]=r.add(n),i},e.prototype.has=function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)},e.prototype.getEntries=function(e){return(this.index[e]||new Pt(x.comparator)).toArray()},e}(),Dr=function(){function e(){this.qt=new Or}return e.prototype.addToCollectionParentIndex=function(e,t){var n=this;if(!this.qt.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.qt.add(t)}));var o={collectionId:r,parent:On(i)};return Mr(e).put(o)}return rr.resolve()},e.prototype.getCollectionParents=function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[T(t),""],!1,!0);return Mr(e).Nt(r).next((function(e){for(var r=0,i=e;r<i.length;r++){var o=i[r];if(o.collectionId!==t)break;n.push(Ln(o.parent))}return n}))},e}();function Mr(e){return pr(e,$n.store)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Lr={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Fr=function(){function e(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}return e.withCacheSize=function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},e}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jr(e,t,n){var r=e.store(qn.store),i=e.store(Vn.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.$t({range:a},(function(e,t,n){return s++,n.delete()}));o.push(u.next((function(){m(1===s)})));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],d=Vn.key(t,f.key.path,n.batchId);o.push(i.delete(d)),c.push(f.key)}return rr.waitFor(o).next((function(){return c}))}function Ur(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw g();t=e.noDocument}return JSON.stringify(t).length}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Fr.DEFAULT_COLLECTION_PERCENTILE=10,Fr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Fr.DEFAULT=new Fr(41943040,Fr.DEFAULT_COLLECTION_PERCENTILE,Fr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Fr.DISABLED=new Fr(-1,0,0);var qr=function(){function e(e,t,n,r){this.userId=e,this.R=t,this.Ut=n,this.referenceDelegate=r,this.Kt={}}return e.Qt=function(t,n,r,i){return m(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)},e.prototype.checkEmpty=function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Br(e).$t({index:qn.userMutationsIndex,range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))},e.prototype.addMutationBatch=function(e,t,n,r){var i=this,o=Kr(e),a=Br(e);return a.add({}).next((function(s){m("number"==typeof s);for(var u=new vr(s,t,n,r),c=function(e,t,n){var r=n.baseMutations.map((function(t){return mn(e.Lt,t)})),i=n.mutations.map((function(t){return mn(e.Lt,t)}));return new qn(t,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),l=[],h=new Pt((function(e,t){return w(e.canonicalString(),t.canonicalString())})),f=0,d=r;f<d.length;f++){var p=d[f],v=Vn.key(i.userId,p.key.path,s);h=h.add(p.key.path.popLast()),l.push(a.put(c)),l.push(o.put(v,Vn.PLACEHOLDER))}return h.forEach((function(t){l.push(i.Ut.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.Kt[s]=u.keys()})),rr.waitFor(l).next((function(){return u}))}))},e.prototype.lookupMutationBatch=function(e,t){var n=this;return Br(e).get(t).next((function(e){return e?(m(e.userId===n.userId),kr(n.R,e)):null}))},e.prototype.jt=function(e,t){var n=this;return this.Kt[t]?rr.resolve(this.Kt[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.Kt[t]=r,r}return null}))},e.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Br(e).$t({index:qn.userMutationsIndex,range:i},(function(e,t,i){t.userId===n.userId&&(m(t.batchId>=r),o=kr(n.R,t)),i.done()})).next((function(){return o}))},e.prototype.getHighestUnacknowledgedBatchId=function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Br(e).$t({index:qn.userMutationsIndex,range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))},e.prototype.getAllMutationBatches=function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Br(e).Nt(qn.userMutationsIndex,n).next((function(e){return e.map((function(e){return kr(t.R,e)}))}))},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=Vn.prefixForPath(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return Kr(e).$t({range:i},(function(r,i,a){var s=r[0],u=r[1],c=r[2],l=Ln(u);if(s===n.userId&&t.path.isEqual(l))return Br(e).get(c).next((function(e){if(!e)throw g();m(e.userId===n.userId),o.push(kr(n.R,e))}));a.done()})).next((function(){return o}))},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var n=this,r=new Pt(w),i=[];return t.forEach((function(t){var o=Vn.prefixForPath(n.userId,t.path),a=IDBKeyRange.lowerBound(o),s=Kr(e).$t({range:a},(function(e,i,o){var a=e[0],s=e[1],u=e[2],c=Ln(s);a===n.userId&&t.path.isEqual(c)?r=r.add(u):o.done()}));i.push(s)})),rr.waitFor(i).next((function(){return n.Wt(e,r)}))},e.prototype.getAllMutationBatchesAffectingQuery=function(e,t){var n=this,r=t.path,i=r.length+1,o=Vn.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new Pt(w);return Kr(e).$t({range:a},(function(e,t,o){var a=e[0],u=e[1],c=e[2],l=Ln(u);a===n.userId&&r.isPrefixOf(l)?l.length===i&&(s=s.add(c)):o.done()})).next((function(){return n.Wt(e,s)}))},e.prototype.Wt=function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(Br(e).get(t).next((function(e){if(null===e)throw g();m(e.userId===n.userId),r.push(kr(n.R,e))})))})),rr.waitFor(i).next((function(){return r}))},e.prototype.removeMutationBatch=function(e,t){var n=this;return jr(e.Mt,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.Gt(t.batchId)})),rr.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))},e.prototype.Gt=function(e){delete this.Kt[e]},e.prototype.performConsistencyCheck=function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return rr.resolve();var r=IDBKeyRange.lowerBound(Vn.prefixForUser(t.userId)),i=[];return Kr(e).$t({range:r},(function(e,n,r){if(e[0]===t.userId){var o=Ln(e[1]);i.push(o)}else r.done()})).next((function(){m(0===i.length)}))}))},e.prototype.containsKey=function(e,t){return Vr(e,this.userId,t)},e.prototype.zt=function(e){var t=this;return Wr(e).get(this.userId).next((function(e){return e||new Un(t.userId,-1,"")}))},e}();function Vr(e,t,n){var r=Vn.prefixForPath(t,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return Kr(e).$t({range:o,Ft:!0},(function(e,n,r){var o=e[0],s=e[1];e[2],o===t&&s===i&&(a=!0),r.done()})).next((function(){return a}))}function Br(e){return pr(e,qn.store)}function Kr(e){return pr(e,Vn.store)}function Wr(e){return pr(e,Un.store)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Hr=function(){function e(e){this.Ht=e}return e.prototype.next=function(){return this.Ht+=2,this.Ht},e.Jt=function(){return new e(0)},e.Yt=function(){return new e(-1)},e}(),Gr=function(){function e(e,t){this.referenceDelegate=e,this.R=t}return e.prototype.allocateTargetId=function(e){var t=this;return this.Xt(e).next((function(n){var r=new Hr(n.highestTargetId);return n.highestTargetId=r.next(),t.Zt(e,n).next((function(){return n.highestTargetId}))}))},e.prototype.getLastRemoteSnapshotVersion=function(e){return this.Xt(e).next((function(e){return k.fromTimestamp(new E(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))},e.prototype.getHighestSequenceNumber=function(e){return this.Xt(e).next((function(e){return e.highestListenSequenceNumber}))},e.prototype.setTargetsMetadata=function(e,t,n){var r=this;return this.Xt(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.Zt(e,i)}))},e.prototype.addTargetData=function(e,t){var n=this;return this.te(e,t).next((function(){return n.Xt(e).next((function(r){return r.targetCount+=1,n.ee(t,r),n.Zt(e,r)}))}))},e.prototype.updateTargetData=function(e,t){return this.te(e,t)},e.prototype.removeTargetData=function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return zr(e).delete(t.targetId)})).next((function(){return n.Xt(e)})).next((function(t){return m(t.targetCount>0),t.targetCount-=1,n.Zt(e,t)}))},e.prototype.removeTargets=function(e,t,n){var r=this,i=0,o=[];return zr(e).$t((function(a,s){var u=Sr(s);u.sequenceNumber<=t&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(e,u)))})).next((function(){return rr.waitFor(o)})).next((function(){return i}))},e.prototype.forEachTarget=function(e,t){return zr(e).$t((function(e,n){var r=Sr(n);t(r)}))},e.prototype.Xt=function(e){return Qr(e).get(Qn.key).next((function(e){return m(null!==e),e}))},e.prototype.Zt=function(e,t){return Qr(e).put(Qn.key,t)},e.prototype.te=function(e,t){return zr(e).put(Cr(this.R,t))},e.prototype.ee=function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n},e.prototype.getTargetCount=function(e){return this.Xt(e).next((function(e){return e.targetCount}))},e.prototype.getTargetData=function(e,t){var n=he(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return zr(e).$t({range:r,index:Gn.queryTargetsIndexName},(function(e,n,r){var o=Sr(n);fe(t,o.target)&&(i=o,r.done())})).next((function(){return i}))},e.prototype.addMatchingKeys=function(e,t,n){var r=this,i=[],o=$r(e);return t.forEach((function(t){var a=On(t.path);i.push(o.put(new zn(n,a))),i.push(r.referenceDelegate.addReference(e,n,t))})),rr.waitFor(i)},e.prototype.removeMatchingKeys=function(e,t,n){var r=this,i=$r(e);return rr.forEach(t,(function(t){var o=On(t.path);return rr.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(e,n,t)])}))},e.prototype.removeMatchingKeysForTargetId=function(e,t){var n=$r(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)},e.prototype.getMatchingKeysForTargetId=function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=$r(e),i=Vt();return r.$t({range:n,Ft:!0},(function(e,t,n){var r=Ln(e[1]),o=new H(r);i=i.add(o)})).next((function(){return i}))},e.prototype.containsKey=function(e,t){var n=On(t.path),r=IDBKeyRange.bound([n],[T(n)],!1,!0),i=0;return $r(e).$t({index:zn.documentTargetsIndex,Ft:!0,range:r},(function(e,t,n){var r=e[0];e[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},e.prototype.lt=function(e,t){return zr(e).get(t).next((function(e){return e?Sr(e):null}))},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zr(e){return pr(e,Gn.store)}function Qr(e){return pr(e,Qn.store)}function $r(e){return pr(e,zn.store)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yr(e){return(0,r.__awaiter)(this,void 0,void 0,(function(){return(0,r.__generator)(this,(function(t){if(e.code!==u.FAILED_PRECONDITION||e.message!==er)throw e;return f("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xr(e,t){var n=e[0],r=e[1],i=t[0],o=t[1],a=w(n,i);return 0===a?w(r,o):a}var Jr=function(){function e(e){this.ne=e,this.buffer=new Pt(Xr),this.se=0}return e.prototype.ie=function(){return++this.se},e.prototype.re=function(e){var t=[e,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();Xr(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}},Object.defineProperty(e.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),e}(),Zr=function(){function e(e,t){this.garbageCollector=e,this.asyncQueue=t,this.oe=!1,this.ce=null}return e.prototype.start=function(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(e)},e.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(e.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),e.prototype.ue=function(e){var t=this,n=this.oe?3e5:6e4;f("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(function(){return(0,r.__awaiter)(t,void 0,void 0,(function(){var t;return(0,r.__generator)(this,(function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,e.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return ur(t=n.sent())?(f("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t),[3,6]):[3,4];case 4:return[4,Yr(t)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(e)];case 8:return n.sent(),[2]}}))}))}))},e}(),ei=function(){function e(e,t){this.ae=e,this.params=t}return e.prototype.calculateTargetCount=function(e,t){return this.ae.he(e).next((function(e){return Math.floor(t/100*e)}))},e.prototype.nthSequenceNumber=function(e,t){var n=this;if(0===t)return rr.resolve(s.o);var r=new Jr(t);return this.ae.forEachTarget(e,(function(e){return r.re(e.sequenceNumber)})).next((function(){return n.ae.le(e,(function(e){return r.re(e)}))})).next((function(){return r.maxValue}))},e.prototype.removeTargets=function(e,t,n){return this.ae.removeTargets(e,t,n)},e.prototype.removeOrphanedDocuments=function(e,t){return this.ae.removeOrphanedDocuments(e,t)},e.prototype.collect=function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(f("LruGarbageCollector","Garbage collection skipped; disabled"),rr.resolve(Lr)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(f("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),Lr):n.fe(e,t)}))},e.prototype.getCacheSize=function(e){return this.ae.getCacheSize(e)},e.prototype.fe=function(e,t){var n,r,i,a,s,u,c,l=this,d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>l.params.maximumSequenceNumbersToCollect?(f("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+l.params.maximumSequenceNumbersToCollect+" from "+t),r=l.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),l.nthSequenceNumber(e,r)})).next((function(r){return n=r,s=Date.now(),l.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),l.removeOrphanedDocuments(e,n)})).next((function(e){return c=Date.now(),h()<=o.LogLevel.DEBUG&&f("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(a-d)+"ms\n\tDetermined least recently used "+r+" in "+(s-a)+"ms\n\tRemoved "+i+" targets in "+(u-s)+"ms\n\tRemoved "+e+" documents in "+(c-u)+"ms\nTotal Duration: "+(c-d)+"ms"),rr.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))},e}(),ti=function(){function e(e,t){this.db=e,this.garbageCollector=function(e,t){return new ei(e,t)}(this,t)}return e.prototype.he=function(e){var t=this.de(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))},e.prototype.de=function(e){var t=0;return this.le(e,(function(e){t++})).next((function(){return t}))},e.prototype.forEachTarget=function(e,t){return this.db.getTargetCache().forEachTarget(e,t)},e.prototype.le=function(e,t){return this.we(e,(function(e,n){return t(n)}))},e.prototype.addReference=function(e,t,n){return ni(e,n)},e.prototype.removeReference=function(e,t,n){return ni(e,n)},e.prototype.removeTargets=function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)},e.prototype.markPotentiallyOrphaned=function(e,t){return ni(e,t)},e.prototype._e=function(e,t){return function(e,t){var n=!1;return Wr(e).Ot((function(r){return Vr(e,r,t).next((function(e){return e&&(n=!0),rr.resolve(!e)}))})).next((function(){return n}))}(e,t)},e.prototype.removeOrphanedDocuments=function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(e,(function(a,s){if(s<=t){var u=n._e(e,a).next((function(t){if(!t)return o++,r.getEntry(e,a).next((function(){return r.removeEntry(a),$r(e).delete([0,On(a.path)])}))}));i.push(u)}})).next((function(){return rr.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return o}))},e.prototype.removeTarget=function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)},e.prototype.updateLimboDocument=function(e,t){return ni(e,t)},e.prototype.we=function(e,t){var n,r=$r(e),i=s.o;return r.$t({index:zn.documentTargetsIndex},(function(e,r){var o=e[0];e[1];var a=r.path,u=r.sequenceNumber;0===o?(i!==s.o&&t(new H(Ln(n)),i),i=u,n=a):i=s.o})).next((function(){i!==s.o&&t(new H(Ln(n)),i)}))},e.prototype.getCacheSize=function(e){return this.db.getRemoteDocumentCache().getSize(e)},e}();function ni(e,t){return $r(e).put(function(e,t){return new zn(0,On(e.path),t)}(t,e.currentSequenceNumber))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ri=function(){function e(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={}}return e.prototype.get=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];if(this.equalsFn(a,e))return s}},e.prototype.has=function(e){return void 0!==this.get(e)},e.prototype.set=function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t])}else this.inner[n]=[[e,t]]},e.prototype.delete=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),!0;return!1},e.prototype.forEach=function(e){C(this.inner,(function(t,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];e(a,s)}}))},e.prototype.isEmpty=function(){return A(this.inner)},e}(),ii=function(){function e(){this.changes=new ri((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return e.prototype.getReadTime=function(e){var t=this.changes.get(e);return t?t.readTime:k.min()},e.prototype.addEntry=function(e,t){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:t})},e.prototype.removeEntry=function(e,t){void 0===t&&(t=null),this.assertNotApplied(),this.changes.set(e,{document:ue.newInvalidDocument(e),readTime:t})},e.prototype.getEntry=function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?rr.resolve(n.document):this.getFromCache(e,t)},e.prototype.getEntries=function(e,t){return this.getAllFromCache(e,t)},e.prototype.apply=function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)},e.prototype.assertNotApplied=function(){},e}(),oi=function(){function e(e,t){this.R=e,this.Ut=t}return e.prototype.addEntry=function(e,t,n){return ui(e).put(ci(t),n)},e.prototype.removeEntry=function(e,t){var n=ui(e),r=ci(t);return n.delete(r)},e.prototype.updateMetadata=function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.me(e,r)}))},e.prototype.getEntry=function(e,t){var n=this;return ui(e).get(ci(t)).next((function(e){return n.ye(t,e)}))},e.prototype.ge=function(e,t){var n=this;return ui(e).get(ci(t)).next((function(e){return{document:n.ye(t,e),size:Ur(e)}}))},e.prototype.getEntries=function(e,t){var n=this,r=Mt();return this.pe(e,t,(function(e,t){var i=n.ye(e,t);r=r.insert(e,i)})).next((function(){return r}))},e.prototype.Ee=function(e,t){var n=this,r=Mt(),i=new Nt(H.comparator);return this.pe(e,t,(function(e,t){var o=n.ye(e,t);r=r.insert(e,o),i=i.insert(e,Ur(t))})).next((function(){return{documents:r,Te:i}}))},e.prototype.pe=function(e,t,n){if(t.isEmpty())return rr.resolve();var r=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),i=t.getIterator(),o=i.getNext();return ui(e).$t({range:r},(function(e,t,r){for(var a=H.fromSegments(e);o&&H.comparator(o,a)<0;)n(o,null),o=i.getNext();o&&o.isEqual(a)&&(n(o,t),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},e.prototype.getDocumentsMatchingQuery=function(e,t,n){var r=this,i=Mt(),o=t.path.length+1,a={};if(n.isEqual(k.min())){var s=t.path.toArray();a.range=IDBKeyRange.lowerBound(s)}else{var u=t.path.toArray(),c=wr(n);a.range=IDBKeyRange.lowerBound([u,c],!0),a.index=Wn.collectionReadTimeIndex}return ui(e).$t(a,(function(e,n,a){if(e.length===o){var s=_r(r.R,n);t.path.isPrefixOf(s.key.path)?Ke(t,s)&&(i=i.insert(s.key,s)):a.done()}})).next((function(){return i}))},e.prototype.newChangeBuffer=function(e){return new ai(this,!!e&&e.trackRemovals)},e.prototype.getSize=function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))},e.prototype.getMetadata=function(e){return si(e).get(Hn.key).next((function(e){return m(!!e),e}))},e.prototype.me=function(e,t){return si(e).put(Hn.key,t)},e.prototype.ye=function(e,t){if(t){var n=_r(this.R,t);if(!n.isNoDocument()||!n.version.isEqual(k.min()))return n}return ue.newInvalidDocument(e)},e}(),ai=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).Ie=t,r.trackRemovals=n,r.Ae=new ri((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),r}return(0,r.__extends)(t,e),t.prototype.applyChanges=function(e){var t=this,n=[],r=0,i=new Pt((function(e,t){return w(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(o,a){var s=t.Ae.get(o);if(a.document.isValidDocument()){var u=br(t.Ie.R,a.document,t.getReadTime(o));i=i.add(o.path.popLast());var c=Ur(u);r+=c-s,n.push(t.Ie.addEntry(e,o,u))}else if(r-=s,t.trackRemovals){var l=br(t.Ie.R,ue.newNoDocument(o,k.min()),t.getReadTime(o));n.push(t.Ie.addEntry(e,o,l))}else n.push(t.Ie.removeEntry(e,o))})),i.forEach((function(r){n.push(t.Ie.Ut.addToCollectionParentIndex(e,r))})),n.push(this.Ie.updateMetadata(e,r)),rr.waitFor(n)},t.prototype.getFromCache=function(e,t){var n=this;return this.Ie.ge(e,t).next((function(e){return n.Ae.set(t,e.size),e.document}))},t.prototype.getAllFromCache=function(e,t){var n=this;return this.Ie.Ee(e,t).next((function(e){var t=e.documents;return e.Te.forEach((function(e,t){n.Ae.set(e,t)})),t}))},t}(ii);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function si(e){return pr(e,Hn.store)}function ui(e){return pr(e,Wn.store)}function ci(e){return e.path.toArray()}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var li=function(){function e(e){this.R=e}return e.prototype.Rt=function(e,t,n,r){var i=this;m(n<r&&n>=0&&r<=11);var o=new ir("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore(jn.store)}(e),function(e){e.createObjectStore(Un.store,{keyPath:Un.keyPath}),e.createObjectStore(qn.store,{keyPath:qn.keyPath,autoIncrement:!0}).createIndex(qn.userMutationsIndex,qn.userMutationsKeyPath,{unique:!0}),e.createObjectStore(Vn.store)}(e),hi(e),function(e){e.createObjectStore(Wn.store)}(e));var a=rr.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore(zn.store),e.deleteObjectStore(Gn.store),e.deleteObjectStore(Qn.store)}(e),hi(e)),a=a.next((function(){return function(e){var t=e.store(Qn.store),n=new Qn(0,0,k.min().toTimestamp(),0);return t.put(Qn.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(a=a.next((function(){return function(e,t){return t.store(qn.store).Nt().next((function(n){e.deleteObjectStore(qn.store),e.createObjectStore(qn.store,{keyPath:qn.keyPath,autoIncrement:!0}).createIndex(qn.userMutationsIndex,qn.userMutationsKeyPath,{unique:!0});var r=t.store(qn.store),i=n.map((function(e){return r.put(e)}));return rr.waitFor(i)}))}(e,o)}))),a=a.next((function(){!function(e){e.createObjectStore(Yn.store,{keyPath:Yn.keyPath})}(e)}))),n<5&&r>=5&&(a=a.next((function(){return i.Re(o)}))),n<6&&r>=6&&(a=a.next((function(){return function(e){e.createObjectStore(Hn.store)}(e),i.be(o)}))),n<7&&r>=7&&(a=a.next((function(){return i.ve(o)}))),n<8&&r>=8&&(a=a.next((function(){return i.Pe(e,o)}))),n<9&&r>=9&&(a=a.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e),function(e){var t=e.objectStore(Wn.store);t.createIndex(Wn.readTimeIndex,Wn.readTimeIndexPath,{unique:!1}),t.createIndex(Wn.collectionReadTimeIndex,Wn.collectionReadTimeIndexPath,{unique:!1})}(t)}))),n<10&&r>=10&&(a=a.next((function(){return i.Ve(o)}))),n<11&&r>=11&&(a=a.next((function(){!function(e){e.createObjectStore(Xn.store,{keyPath:Xn.keyPath})}(e),function(e){e.createObjectStore(Jn.store,{keyPath:Jn.keyPath})}(e)}))),a},e.prototype.be=function(e){var t=0;return e.store(Wn.store).$t((function(e,n){t+=Ur(n)})).next((function(){var n=new Hn(t);return e.store(Hn.store).put(Hn.key,n)}))},e.prototype.Re=function(e){var t=this,n=e.store(Un.store),r=e.store(qn.store);return n.Nt().next((function(n){return rr.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(qn.userMutationsIndex,i).next((function(r){return rr.forEach(r,(function(r){m(r.userId===n.userId);var i=kr(t.R,r);return jr(e,n.userId,i).next((function(){}))}))}))}))}))},e.prototype.ve=function(e){var t=e.store(zn.store),n=e.store(Wn.store);return e.store(Qn.store).get(Qn.key).next((function(e){var r=[];return n.$t((function(n,i){var o=new x(n),a=function(e){return[0,On(e)]}(o);r.push(t.get(a).next((function(n){return n?rr.resolve():function(n){return t.put(new zn(0,On(n),e.highestListenSequenceNumber))}(o)})))})).next((function(){return rr.waitFor(r)}))}))},e.prototype.Pe=function(e,t){e.createObjectStore($n.store,{keyPath:$n.keyPath});var n=t.store($n.store),r=new Or,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:On(i)})}};return t.store(Wn.store).$t({Ft:!0},(function(e,t){var n=new x(e);return i(n.popLast())})).next((function(){return t.store(Vn.store).$t({Ft:!0},(function(e,t){e[0];var n=e[1];e[2];var r=Ln(n);return i(r.popLast())}))}))},e.prototype.Ve=function(e){var t=this,n=e.store(Gn.store);return n.$t((function(e,r){var i=Sr(r),o=Cr(t.R,i);return n.put(o)}))},e}();function hi(e){e.createObjectStore(zn.store,{keyPath:zn.keyPath}).createIndex(zn.documentTargetsIndex,zn.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(Gn.store,{keyPath:Gn.keyPath}).createIndex(Gn.queryTargetsIndexName,Gn.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(Qn.store)}var fi="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",di=function(){function e(t,n,r,i,o,a,s,l,h,f){if(this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=a,this.document=s,this.De=h,this.Ce=f,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ke=null,this.inForeground=!1,this.Fe=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(e){return Promise.resolve()},!e.yt())throw new c(u.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ti(this,i),this.Le=n+"main",this.R=new yr(l),this.Be=new or(this.Le,11,new li(this.R)),this.qe=new Gr(this.referenceDelegate,this.R),this.Ut=new Dr,this.Ue=function(e,t){return new oi(e,t)}(this.R,this.Ut),this.Ke=new Nr,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,!1===f&&d("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return e.prototype.start=function(){var e=this;return this.je().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new c(u.FAILED_PRECONDITION,fi);return e.We(),e.Ge(),e.ze(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.qe.getHighestSequenceNumber(t)}))})).then((function(t){e.Ne=new s(t,e.De)})).then((function(){e.xe=!0})).catch((function(t){return e.Be&&e.Be.close(),Promise.reject(t)}))},e.prototype.He=function(e){var t=this;return this.Me=function(n){return(0,r.__awaiter)(t,void 0,void 0,(function(){return(0,r.__generator)(this,(function(t){return this.started?[2,e(n)]:[2]}))}))},e(this.isPrimary)},e.prototype.setDatabaseDeletedListener=function(e){var t=this;this.Be.vt((function(n){return(0,r.__awaiter)(t,void 0,void 0,(function(){return(0,r.__generator)(this,(function(t){switch(t.label){case 0:return null===n.newVersion?[4,e()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))},e.prototype.setNetworkEnabled=function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Se.enqueueAndForget((function(){return(0,r.__awaiter)(t,void 0,void 0,(function(){return(0,r.__generator)(this,(function(e){switch(e.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))})))},e.prototype.je=function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return vi(t).put(new Yn(e.clientId,Date.now(),e.networkEnabled,e.inForeground)).next((function(){if(e.isPrimary)return e.Je(t).next((function(t){t||(e.isPrimary=!1,e.Se.enqueueRetryable((function(){return e.Me(!1)})))}))})).next((function(){return e.Ye(t)})).next((function(n){return e.isPrimary&&!n?e.Xe(t).next((function(){return!1})):!!n&&e.Ze(t).next((function(){return!0}))}))})).catch((function(t){if(ur(t))return f("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return f("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Se.enqueueRetryable((function(){return e.Me(t)})),e.isPrimary=t}))},e.prototype.Je=function(e){var t=this;return pi(e).get(jn.key).next((function(e){return rr.resolve(t.tn(e))}))},e.prototype.en=function(e){return vi(e).delete(this.clientId)},e.prototype.nn=function(){return(0,r.__awaiter)(this,void 0,void 0,(function(){var e,t,n,i,o=this;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=pr(e,Yn.store);return t.Nt().next((function(e){var n=o.rn(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return rr.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(e=r.sent(),this.Qe)for(t=0,n=e;t<n.length;t++)i=n[t],this.Qe.removeItem(this.on(i.clientId));r.label=2;case 2:return[2]}}))}))},e.prototype.ze=function(){var e=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.je().then((function(){return e.nn()})).then((function(){return e.ze()}))}))},e.prototype.tn=function(e){return!!e&&e.ownerId===this.clientId},e.prototype.Ye=function(e){var t=this;return this.Ce?rr.resolve(!0):pi(e).get(jn.key).next((function(n){if(null!==n&&t.sn(n.leaseTimestampMs,5e3)&&!t.cn(n.ownerId)){if(t.tn(n)&&t.networkEnabled)return!0;if(!t.tn(n)){if(!n.allowTabSynchronization)throw new c(u.FAILED_PRECONDITION,fi);return!1}}return!(!t.networkEnabled||!t.inForeground)||vi(e).Nt().next((function(e){return void 0===t.rn(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&f("IndexedDbPersistence","Client "+(e?"is":"is not")+" eligible for a primary lease."),e}))},e.prototype.shutdown=function(){return(0,r.__awaiter)(this,void 0,void 0,(function(){var e=this;return(0,r.__generator)(this,(function(t){switch(t.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[jn.store,Yn.store],(function(t){var n=new dr(t,s.o);return e.Xe(n).next((function(){return e.en(n)}))}))];case 1:return t.sent(),this.Be.close(),this.ln(),[2]}}))}))},e.prototype.rn=function(e,t){var n=this;return e.filter((function(e){return n.sn(e.updateTimeMs,t)&&!n.cn(e.clientId)}))},e.prototype.fn=function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return vi(t).Nt().next((function(t){return e.rn(t,18e5).map((function(e){return e.clientId}))}))}))},Object.defineProperty(e.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),e.prototype.getMutationQueue=function(e){return qr.Qt(e,this.R,this.Ut,this.referenceDelegate)},e.prototype.getTargetCache=function(){return this.qe},e.prototype.getRemoteDocumentCache=function(){return this.Ue},e.prototype.getIndexManager=function(){return this.Ut},e.prototype.getBundleCache=function(){return this.Ke},e.prototype.runTransaction=function(e,t,n){var r=this;f("IndexedDbPersistence","Starting transaction:",e);var i,o="readonly"===t?"readonly":"readwrite";return this.Be.runTransaction(e,o,Zn,(function(o){return i=new dr(o,r.Ne?r.Ne.next():s.o),"readwrite-primary"===t?r.Je(i).next((function(e){return!!e||r.Ye(i)})).next((function(t){if(!t)throw d("Failed to obtain primary lease for action '"+e+"'."),r.isPrimary=!1,r.Se.enqueueRetryable((function(){return r.Me(!1)})),new c(u.FAILED_PRECONDITION,er);return n(i)})).next((function(e){return r.Ze(i).next((function(){return e}))})):r.dn(i).next((function(){return n(i)}))})).then((function(e){return i.raiseOnCommittedEvent(),e}))},e.prototype.dn=function(e){var t=this;return pi(e).get(jn.key).next((function(e){if(null!==e&&t.sn(e.leaseTimestampMs,5e3)&&!t.cn(e.ownerId)&&!t.tn(e)&&!(t.Ce||t.allowTabSynchronization&&e.allowTabSynchronization))throw new c(u.FAILED_PRECONDITION,fi)}))},e.prototype.Ze=function(e){var t=new jn(this.clientId,this.allowTabSynchronization,Date.now());return pi(e).put(jn.key,t)},e.yt=function(){return or.yt()},e.prototype.Xe=function(e){var t=this,n=pi(e);return n.get(jn.key).next((function(e){return t.tn(e)?(f("IndexedDbPersistence","Releasing primary lease."),n.delete(jn.key)):rr.resolve()}))},e.prototype.sn=function(e,t){var n=Date.now();return!(e<n-t||e>n&&(d("Detected an update time that is in the future: "+e+" > "+n),1))},e.prototype.We=function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Fe=function(){e.Se.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.je()}))},this.document.addEventListener("visibilitychange",this.Fe),this.inForeground="visible"===this.document.visibilityState)},e.prototype.an=function(){this.Fe&&(this.document.removeEventListener("visibilitychange",this.Fe),this.Fe=null)},e.prototype.Ge=function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ke=function(){t.un(),(0,i.isSafari)()&&navigator.appVersion.match("Version/14")&&t.Se.enterRestrictedMode(!0),t.Se.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.ke))},e.prototype.hn=function(){this.ke&&(this.window.removeEventListener("pagehide",this.ke),this.ke=null)},e.prototype.cn=function(e){var t;try{var n=null!==(null===(t=this.Qe)||void 0===t?void 0:t.getItem(this.on(e)));return f("IndexedDbPersistence","Client '"+e+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(e){return d("IndexedDbPersistence","Failed to get zombied client id.",e),!1}},e.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(e){d("Failed to set zombie client id.",e)}},e.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch(e){}},e.prototype.on=function(e){return"firestore_zombie_"+this.persistenceKey+"_"+e},e}();function pi(e){return pr(e,jn.store)}function vi(e){return pr(e,Yn.store)}function gi(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var mi=function(e,t){this.progress=e,this.wn=t},yi=function(){function e(e,t,n){this.Ue=e,this._n=t,this.Ut=n}return e.prototype.mn=function(e,t){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(e,t).next((function(r){return n.yn(e,t,r)}))},e.prototype.yn=function(e,t,n){return this.Ue.getEntry(e,t).next((function(e){for(var t=0,r=n;t<r.length;t++)r[t].applyToLocalView(e);return e}))},e.prototype.gn=function(e,t){e.forEach((function(e,n){for(var r=0,i=t;r<i.length;r++)i[r].applyToLocalView(n)}))},e.prototype.pn=function(e,t){var n=this;return this.Ue.getEntries(e,t).next((function(t){return n.En(e,t).next((function(){return t}))}))},e.prototype.En=function(e,t){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){return n.gn(t,e)}))},e.prototype.getDocumentsMatchingQuery=function(e,t,n){return function(e){return H.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.Tn(e,t.path):Le(t)?this.In(e,t,n):this.An(e,t,n)},e.prototype.Tn=function(e,t){return this.mn(e,new H(t)).next((function(e){var t=Ft();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))},e.prototype.In=function(e,t,n){var r=this,i=t.collectionGroup,o=Ft();return this.Ut.getCollectionParents(e,i).next((function(a){return rr.forEach(a,(function(a){var s=function(e,t){return new Ne(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,a.child(i));return r.An(e,s,n).next((function(e){e.forEach((function(e,t){o=o.insert(e,t)}))}))})).next((function(){return o}))}))},e.prototype.An=function(e,t,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(e,t,n).next((function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(e,t)})).next((function(t){return i=t,o.Rn(e,i,r).next((function(e){r=e;for(var t=0,n=i;t<n.length;t++)for(var o=n[t],a=0,s=o.mutations;a<s.length;a++){var u=s[a],c=u.key,l=r.get(c);null==l&&(l=ue.newInvalidDocument(c),r=r.insert(c,l)),dt(u,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}}))})).next((function(){return r.forEach((function(e,n){Ke(t,n)||(r=r.remove(e))})),r}))},e.prototype.Rn=function(e,t,n){for(var r=Vt(),i=0,o=t;i<o.length;i++)for(var a=0,s=o[i].mutations;a<s.length;a++){var u=s[a];u instanceof yt&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(e,r).next((function(e){return e.forEach((function(e,t){t.isFoundDocument()&&(c=c.insert(e,t))})),c}))},e}(),_i=function(){function e(e,t,n,r){this.targetId=e,this.fromCache=t,this.bn=n,this.vn=r}return e.Pn=function(t,n){for(var r=Vt(),i=Vt(),o=0,a=n.docChanges;o<a.length;o++){var s=a[o];switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}}return new e(t,n.fromCache,r,i)},e}(),bi=function(){function e(){}return e.prototype.Vn=function(e){this.Sn=e},e.prototype.getDocumentsMatchingQuery=function(e,t,n,r){var i=this;return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||n.isEqual(k.min())?this.Dn(e,t):this.Sn.pn(e,r).next((function(a){var s=i.Cn(t,a);return(Pe(t)||Oe(t))&&i.Nn(t.limitType,s,r,n)?i.Dn(e,t):(h()<=o.LogLevel.DEBUG&&f("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Be(t)),i.Sn.getDocumentsMatchingQuery(e,t,n).next((function(e){return s.forEach((function(t){e=e.insert(t.key,t)})),e})))}))},e.prototype.Cn=function(e,t){var n=new Pt(We(e));return t.forEach((function(t,r){Ke(e,r)&&(n=n.add(r))})),n},e.prototype.Nn=function(e,t,n,r){if(n.size!==t.size)return!0;var i="F"===e?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},e.prototype.Dn=function(e,t){return h()<=o.LogLevel.DEBUG&&f("QueryEngine","Using full collection scan to execute query:",Be(t)),this.Sn.getDocumentsMatchingQuery(e,t,k.min())},e}(),wi=function(){function e(e,t,n,r){this.persistence=e,this.xn=t,this.R=r,this.kn=new Nt(w),this.Fn=new ri((function(e){return he(e)}),fe),this.$n=k.min(),this._n=e.getMutationQueue(n),this.On=e.getRemoteDocumentCache(),this.qe=e.getTargetCache(),this.Mn=new yi(this.On,this._n,this.persistence.getIndexManager()),this.Ke=e.getBundleCache(),this.xn.Vn(this.Mn)}return e.prototype.collectGarbage=function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.kn)}))},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ii(e,t,n,r){return new wi(e,t,n,r)}function Ti(e,t){return(0,r.__awaiter)(this,void 0,void 0,(function(){var n,i,o,a;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return n=y(e),i=n._n,o=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",(function(e){var r;return n._n.getAllMutationBatches(e).next((function(a){return r=a,i=n.persistence.getMutationQueue(t),o=new yi(n.On,i,n.persistence.getIndexManager()),i.getAllMutationBatches(e)})).next((function(t){for(var n=[],i=[],a=Vt(),s=0,u=r;s<u.length;s++){var c=u[s];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++){var f=h[l];a=a.add(f.key)}}for(var d=0,p=t;d<p.length;d++){var v=p[d];i.push(v.batchId);for(var g=0,m=v.mutations;g<m.length;g++){var y=m[g];a=a.add(y.key)}}return o.pn(e,a).next((function(e){return{Ln:e,removedBatchIds:n,addedBatchIds:i}}))}))}))];case 1:return a=r.sent(),[2,(n._n=i,n.Mn=o,n.xn.Vn(n.Mn),a)]}}))}))}function Ei(e,t){var n=y(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.On.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,o=i.keys(),a=rr.resolve();return o.forEach((function(e){a=a.next((function(){return r.getEntry(t,e)})).next((function(t){var o=n.docVersions.get(e);m(null!==o),t.version.compareTo(o)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&r.addEntry(t,n.commitVersion))}))})),a.next((function(){return e._n.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n._n.performConsistencyCheck(e)})).next((function(){return n.Mn.pn(e,r)}))}))}function ki(e){var t=y(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.qe.getLastRemoteSnapshotVersion(e)}))}function Si(e,t){var n=y(e),r=t.snapshotVersion,i=n.kn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var o=n.On.newChangeBuffer({trackRemovals:!0});i=n.kn;var a=[];t.targetChanges.forEach((function(t,o){var s=i.get(o);if(s){a.push(n.qe.removeMatchingKeys(e,t.removedDocuments,o).next((function(){return n.qe.addMatchingKeys(e,t.addedDocuments,o)})));var u=t.resumeToken;if(u.approximateByteSize()>0){var c=s.withResumeToken(u,r).withSequenceNumber(e.currentSequenceNumber);i=i.insert(o,c),function(e,t,n){return m(t.resumeToken.approximateByteSize()>0),0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(s,c,t)&&a.push(n.qe.updateTargetData(e,c))}}}));var s=Mt();if(t.documentUpdates.forEach((function(r,i){t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),a.push(Ci(e,o,t.documentUpdates,r,void 0).next((function(e){s=e}))),!r.isEqual(k.min())){var u=n.qe.getLastRemoteSnapshotVersion(e).next((function(t){return n.qe.setTargetsMetadata(e,e.currentSequenceNumber,r)}));a.push(u)}return rr.waitFor(a).next((function(){return o.apply(e)})).next((function(){return n.Mn.En(e,s)})).next((function(){return s}))})).then((function(e){return n.kn=i,e}))}function Ci(e,t,n,r,i){var o=Vt();return n.forEach((function(e){return o=o.add(e)})),t.getEntries(e,o).next((function(e){var o=Mt();return n.forEach((function(n,a){var s=e.get(n),u=(null==i?void 0:i.get(n))||r;a.isNoDocument()&&a.version.isEqual(k.min())?(t.removeEntry(n,u),o=o.insert(n,a)):!s.isValidDocument()||a.version.compareTo(s.version)>0||0===a.version.compareTo(s.version)&&s.hasPendingWrites?(t.addEntry(a,u),o=o.insert(n,a)):f("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",a.version)})),o}))}function Ai(e,t){var n=y(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n._n.getNextMutationBatchAfterBatchId(e,t)}))}function Ni(e,t){var n=y(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.qe.getTargetData(e,t).next((function(i){return i?(r=i,rr.resolve(r)):n.qe.allocateTargetId(e).next((function(i){return r=new mr(t,i,0,e.currentSequenceNumber),n.qe.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.kn.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.kn=n.kn.insert(e.targetId,e),n.Fn.set(t,e.targetId)),e}))}function xi(e,t,n){return(0,r.__awaiter)(this,void 0,void 0,(function(){var i,o,a,s;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:i=y(e),o=i.kn.get(t),a=n?"readwrite":"readwrite-primary",r.label=1;case 1:return r.trys.push([1,4,,5]),n?[3,3]:[4,i.persistence.runTransaction("Release target",a,(function(e){return i.persistence.referenceDelegate.removeTarget(e,o)}))];case 2:r.sent(),r.label=3;case 3:return[3,5];case 4:if(!ur(s=r.sent()))throw s;return f("LocalStore","Failed to update sequence numbers for target "+t+": "+s),[3,5];case 5:return i.kn=i.kn.remove(t),i.Fn.delete(o.target),[2]}}))}))}function Ri(e,t,n){var r=y(e),i=k.min(),o=Vt();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=y(e),i=r.Fn.get(n);return void 0!==i?rr.resolve(r.kn.get(i)):r.qe.getTargetData(t,n)}(r,e,je(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(e,t.targetId).next((function(e){o=e}))})).next((function(){return r.xn.getDocumentsMatchingQuery(e,t,n?i:k.min(),n?o:Vt())})).next((function(e){return{documents:e,Bn:o}}))}))}function Pi(e,t){var n=y(e),r=y(n.qe),i=n.kn.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.lt(e,t).next((function(e){return e?e.target:null}))}))}function Oi(e){var t=y(e);return t.persistence.runTransaction("Get new document changes","readonly",(function(e){return function(e,t,n){var r=y(e),i=Mt(),o=wr(n),a=ui(t),s=IDBKeyRange.lowerBound(o,!0);return a.$t({index:Wn.readTimeIndex,range:s},(function(e,t){var n=_r(r.R,t);i=i.insert(n.key,n),o=t.readTime})).next((function(){return{wn:i,readTime:Ir(o)}}))}(t.On,e,t.$n)})).then((function(e){var n=e.wn,r=e.readTime;return t.$n=r,n}))}function Di(e){return(0,r.__awaiter)(this,void 0,void 0,(function(){var t;return(0,r.__generator)(this,(function(n){return[2,(t=y(e)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(e){return function(e){var t=ui(e),n=k.min();return t.$t({index:Wn.readTimeIndex,reverse:!0},(function(e,t,r){t.readTime&&(n=Ir(t.readTime)),r.done()})).next((function(){return n}))}(e)})).then((function(e){t.$n=e}))]}))}))}function Mi(e,t,n,i){return(0,r.__awaiter)(this,void 0,void 0,(function(){var o,a,s,u,c,l,h,f,d,p;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:for(o=y(e),a=Vt(),s=Mt(),u=Ut(),c=0,l=n;c<l.length;c++)h=l[c],f=t.qn(h.metadata.name),h.document&&(a=a.add(f)),s=s.insert(f,t.Un(h)),u=u.insert(f,t.Kn(h.metadata.readTime));return d=o.On.newChangeBuffer({trackRemovals:!0}),[4,Ni(o,function(e){return je(Re(x.fromString("__bundle__/docs/"+e)))}(i))];case 1:return p=r.sent(),[2,o.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return Ci(e,d,s,k.min(),u).next((function(t){return d.apply(e),t})).next((function(t){return o.qe.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return o.qe.addMatchingKeys(e,a,p.targetId)})).next((function(){return o.Mn.En(e,t)})).next((function(){return t}))}))}))]}}))}))}function Li(e,t,n){return void 0===n&&(n=Vt()),(0,r.__awaiter)(this,void 0,void 0,(function(){var i,o;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return[4,Ni(e,je(Ar(t.bundledQuery)))];case 1:return i=r.sent(),[2,(o=y(e)).persistence.runTransaction("Save named query","readwrite",(function(e){var r=an(t.readTime);if(i.snapshotVersion.compareTo(r)>=0)return o.Ke.saveNamedQuery(e,t);var a=i.withResumeToken(D.EMPTY_BYTE_STRING,r);return o.kn=o.kn.insert(a.targetId,a),o.qe.updateTargetData(e,a).next((function(){return o.qe.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return o.qe.addMatchingKeys(e,n,i.targetId)})).next((function(){return o.Ke.saveNamedQuery(e,t)}))}))]}}))}))
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var Fi=function(){function e(e){this.R=e,this.Qn=new Map,this.jn=new Map}return e.prototype.getBundleMetadata=function(e,t){return rr.resolve(this.Qn.get(t))},e.prototype.saveBundleMetadata=function(e,t){var n;return this.Qn.set(t.id,{id:(n=t).id,version:n.version,createTime:an(n.createTime)}),rr.resolve()},e.prototype.getNamedQuery=function(e,t){return rr.resolve(this.jn.get(t))},e.prototype.saveNamedQuery=function(e,t){return this.jn.set(t.name,function(e){return{name:e.name,query:Ar(e.bundledQuery),readTime:an(e.readTime)}}(t)),rr.resolve()},e}(),ji=function(){function e(){this.Wn=new Pt(Ui.Gn),this.zn=new Pt(Ui.Hn)}return e.prototype.isEmpty=function(){return this.Wn.isEmpty()},e.prototype.addReference=function(e,t){var n=new Ui(e,t);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},e.prototype.Jn=function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))},e.prototype.removeReference=function(e,t){this.Yn(new Ui(e,t))},e.prototype.Xn=function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))},e.prototype.Zn=function(e){var t=this,n=new H(new x([])),r=new Ui(n,e),i=new Ui(n,e+1),o=[];return this.zn.forEachInRange([r,i],(function(e){t.Yn(e),o.push(e.key)})),o},e.prototype.ts=function(){var e=this;this.Wn.forEach((function(t){return e.Yn(t)}))},e.prototype.Yn=function(e){this.Wn=this.Wn.delete(e),this.zn=this.zn.delete(e)},e.prototype.es=function(e){var t=new H(new x([])),n=new Ui(t,e),r=new Ui(t,e+1),i=Vt();return this.zn.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i},e.prototype.containsKey=function(e){var t=new Ui(e,0),n=this.Wn.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)},e}(),Ui=function(){function e(e,t){this.key=e,this.ns=t}return e.Gn=function(e,t){return H.comparator(e.key,t.key)||w(e.ns,t.ns)},e.Hn=function(e,t){return w(e.ns,t.ns)||H.comparator(e.key,t.key)},e}(),qi=function(){function e(e,t){this.Ut=e,this.referenceDelegate=t,this._n=[],this.ss=1,this.rs=new Pt(Ui.Gn)}return e.prototype.checkEmpty=function(e){return rr.resolve(0===this._n.length)},e.prototype.addMutationBatch=function(e,t,n,r){var i=this.ss;this.ss++,this._n.length>0&&this._n[this._n.length-1];var o=new vr(i,t,n,r);this._n.push(o);for(var a=0,s=r;a<s.length;a++){var u=s[a];this.rs=this.rs.add(new Ui(u.key,i)),this.Ut.addToCollectionParentIndex(e,u.key.path.popLast())}return rr.resolve(o)},e.prototype.lookupMutationBatch=function(e,t){return rr.resolve(this.os(t))},e.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=t+1,r=this.cs(n),i=r<0?0:r;return rr.resolve(this._n.length>i?this._n[i]:null)},e.prototype.getHighestUnacknowledgedBatchId=function(){return rr.resolve(0===this._n.length?-1:this.ss-1)},e.prototype.getAllMutationBatches=function(e){return rr.resolve(this._n.slice())},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=new Ui(t,0),i=new Ui(t,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],(function(e){var t=n.os(e.ns);o.push(t)})),rr.resolve(o)},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var n=this,r=new Pt(w);return t.forEach((function(e){var t=new Ui(e,0),i=new Ui(e,Number.POSITIVE_INFINITY);n.rs.forEachInRange([t,i],(function(e){r=r.add(e.ns)}))})),rr.resolve(this.us(r))},e.prototype.getAllMutationBatchesAffectingQuery=function(e,t){var n=t.path,r=n.length+1,i=n;H.isDocumentKey(i)||(i=i.child(""));var o=new Ui(new H(i),0),a=new Pt(w);return this.rs.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.ns)),!0)}),o),rr.resolve(this.us(a))},e.prototype.us=function(e){var t=this,n=[];return e.forEach((function(e){var r=t.os(e);null!==r&&n.push(r)})),n},e.prototype.removeMutationBatch=function(e,t){var n=this;m(0===this.hs(t.batchId,"removed")),this._n.shift();var r=this.rs;return rr.forEach(t.mutations,(function(i){var o=new Ui(i.key,t.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.rs=r}))},e.prototype.Gt=function(e){},e.prototype.containsKey=function(e,t){var n=new Ui(t,0),r=this.rs.firstAfterOrEqual(n);return rr.resolve(t.isEqual(r&&r.key))},e.prototype.performConsistencyCheck=function(e){return this._n.length,rr.resolve()},e.prototype.hs=function(e,t){return this.cs(e)},e.prototype.cs=function(e){return 0===this._n.length?0:e-this._n[0].batchId},e.prototype.os=function(e){var t=this.cs(e);return t<0||t>=this._n.length?null:this._n[t]},e}(),Vi=function(){function e(e,t){this.Ut=e,this.ls=t,this.docs=new Nt(H.comparator),this.size=0}return e.prototype.addEntry=function(e,t,n){var r=t.key,i=this.docs.get(r),o=i?i.size:0,a=this.ls(t);return this.docs=this.docs.insert(r,{document:t.clone(),size:a,readTime:n}),this.size+=a-o,this.Ut.addToCollectionParentIndex(e,r.path.popLast())},e.prototype.removeEntry=function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)},e.prototype.getEntry=function(e,t){var n=this.docs.get(t);return rr.resolve(n?n.document.clone():ue.newInvalidDocument(t))},e.prototype.getEntries=function(e,t){var n=this,r=Mt();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.clone():ue.newInvalidDocument(e))})),rr.resolve(r)},e.prototype.getDocumentsMatchingQuery=function(e,t,n){for(var r=Mt(),i=new H(t.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var a=o.getNext(),s=a.key,u=a.value,c=u.document,l=u.readTime;if(!t.path.isPrefixOf(s.path))break;l.compareTo(n)<=0||Ke(t,c)&&(r=r.insert(c.key,c.clone()))}return rr.resolve(r)},e.prototype.fs=function(e,t){return rr.forEach(this.docs,(function(e){return t(e)}))},e.prototype.newChangeBuffer=function(e){return new Bi(this)},e.prototype.getSize=function(e){return rr.resolve(this.size)},e}(),Bi=function(e){function t(t){var n=this;return(n=e.call(this)||this).Ie=t,n}return(0,r.__extends)(t,e),t.prototype.applyChanges=function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.document.isValidDocument()?n.push(t.Ie.addEntry(e,i.document,t.getReadTime(r))):t.Ie.removeEntry(r)})),rr.waitFor(n)},t.prototype.getFromCache=function(e,t){return this.Ie.getEntry(e,t)},t.prototype.getAllFromCache=function(e,t){return this.Ie.getEntries(e,t)},t}(ii),Ki=function(){function e(e){this.persistence=e,this.ds=new ri((function(e){return he(e)}),fe),this.lastRemoteSnapshotVersion=k.min(),this.highestTargetId=0,this.ws=0,this._s=new ji,this.targetCount=0,this.ys=Hr.Jt()}return e.prototype.forEachTarget=function(e,t){return this.ds.forEach((function(e,n){return t(n)})),rr.resolve()},e.prototype.getLastRemoteSnapshotVersion=function(e){return rr.resolve(this.lastRemoteSnapshotVersion)},e.prototype.getHighestSequenceNumber=function(e){return rr.resolve(this.ws)},e.prototype.allocateTargetId=function(e){return this.highestTargetId=this.ys.next(),rr.resolve(this.highestTargetId)},e.prototype.setTargetsMetadata=function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.ws&&(this.ws=t),rr.resolve()},e.prototype.te=function(e){this.ds.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.ys=new Hr(t),this.highestTargetId=t),e.sequenceNumber>this.ws&&(this.ws=e.sequenceNumber)},e.prototype.addTargetData=function(e,t){return this.te(t),this.targetCount+=1,rr.resolve()},e.prototype.updateTargetData=function(e,t){return this.te(t),rr.resolve()},e.prototype.removeTargetData=function(e,t){return this.ds.delete(t.target),this._s.Zn(t.targetId),this.targetCount-=1,rr.resolve()},e.prototype.removeTargets=function(e,t,n){var r=this,i=0,o=[];return this.ds.forEach((function(a,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.ds.delete(a),o.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)})),rr.waitFor(o).next((function(){return i}))},e.prototype.getTargetCount=function(e){return rr.resolve(this.targetCount)},e.prototype.getTargetData=function(e,t){var n=this.ds.get(t)||null;return rr.resolve(n)},e.prototype.addMatchingKeys=function(e,t,n){return this._s.Jn(t,n),rr.resolve()},e.prototype.removeMatchingKeys=function(e,t,n){this._s.Xn(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),rr.waitFor(i)},e.prototype.removeMatchingKeysForTargetId=function(e,t){return this._s.Zn(t),rr.resolve()},e.prototype.getMatchingKeysForTargetId=function(e,t){var n=this._s.es(t);return rr.resolve(n)},e.prototype.containsKey=function(e,t){return rr.resolve(this._s.containsKey(t))},e}(),Wi=function(){function e(e,t){var n=this;this.gs={},this.Ne=new s(0),this.xe=!1,this.xe=!0,this.referenceDelegate=e(this),this.qe=new Ki(this),this.Ut=new Pr,this.Ue=function(e,t){return new Vi(e,(function(e){return n.referenceDelegate.ps(e)}))}(this.Ut),this.R=new yr(t),this.Ke=new Fi(this.R)}return e.prototype.start=function(){return Promise.resolve()},e.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(e.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),e.prototype.setDatabaseDeletedListener=function(){},e.prototype.setNetworkEnabled=function(){},e.prototype.getIndexManager=function(){return this.Ut},e.prototype.getMutationQueue=function(e){var t=this.gs[e.toKey()];return t||(t=new qi(this.Ut,this.referenceDelegate),this.gs[e.toKey()]=t),t},e.prototype.getTargetCache=function(){return this.qe},e.prototype.getRemoteDocumentCache=function(){return this.Ue},e.prototype.getBundleCache=function(){return this.Ke},e.prototype.runTransaction=function(e,t,n){var r=this;f("MemoryPersistence","Starting transaction:",e);var i=new Hi(this.Ne.next());return this.referenceDelegate.Es(),n(i).next((function(e){return r.referenceDelegate.Ts(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))},e.prototype.Is=function(e,t){return rr.or(Object.values(this.gs).map((function(n){return function(){return n.containsKey(e,t)}})))},e}(),Hi=function(e){function t(t){var n=this;return(n=e.call(this)||this).currentSequenceNumber=t,n}return(0,r.__extends)(t,e),t}(tr),Gi=function(){function e(e){this.persistence=e,this.As=new ji,this.Rs=null}return e.bs=function(t){return new e(t)},Object.defineProperty(e.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw g()},enumerable:!1,configurable:!0}),e.prototype.addReference=function(e,t,n){return this.As.addReference(n,t),this.vs.delete(n.toString()),rr.resolve()},e.prototype.removeReference=function(e,t,n){return this.As.removeReference(n,t),this.vs.add(n.toString()),rr.resolve()},e.prototype.markPotentiallyOrphaned=function(e,t){return this.vs.add(t.toString()),rr.resolve()},e.prototype.removeTarget=function(e,t){var n=this;this.As.Zn(t.targetId).forEach((function(e){return n.vs.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.vs.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))},e.prototype.Es=function(){this.Rs=new Set},e.prototype.Ts=function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return rr.forEach(this.vs,(function(r){var i=H.fromPath(r);return t.Ps(e,i).next((function(e){e||n.removeEntry(i)}))})).next((function(){return t.Rs=null,n.apply(e)}))},e.prototype.updateLimboDocument=function(e,t){var n=this;return this.Ps(e,t).next((function(e){e?n.vs.delete(t.toString()):n.vs.add(t.toString())}))},e.prototype.ps=function(e){return 0},e.prototype.Ps=function(e,t){var n=this;return rr.or([function(){return rr.resolve(n.As.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Is(e,t)}])},e}(),zi=function(){function e(e){this.uid=e}return e.prototype.isAuthenticated=function(){return null!=this.uid},e.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},e.prototype.isEqual=function(e){return e.uid===this.uid},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qi(e,t){return"firestore_clients_"+e+"_"+t}function $i(e,t,n){var r="firestore_mutations_"+e+"_"+n;return t.isAuthenticated()&&(r+="_"+t.uid),r}function Yi(e,t){return"firestore_targets_"+e+"_"+t}zi.UNAUTHENTICATED=new zi(null),zi.GOOGLE_CREDENTIALS=new zi("google-credentials-uid"),zi.FIRST_PARTY=new zi("first-party-uid"),zi.MOCK_USER=new zi("mock-user");var Xi=function(){function e(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}return e.Vs=function(t,n,r){var i,o=JSON.parse(r),a="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return a&&o.error&&(a="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new c(o.error.code,o.error.message)),a?new e(t,n,o.state,i):(d("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},e.prototype.Ss=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},e}(),Ji=function(){function e(e,t,n){this.targetId=e,this.state=t,this.error=n}return e.Vs=function(t,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new c(i.error.code,i.error.message)),o?new e(t,i.state,r):(d("SharedClientState","Failed to parse target state for ID '"+t+"': "+n),null)},e.prototype.Ss=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},e}(),Zi=function(){function e(e,t){this.clientId=e,this.activeTargetIds=t}return e.Vs=function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Kt(),a=0;i&&a<r.activeTargetIds.length;++a)i=W(r.activeTargetIds[a]),o=o.add(r.activeTargetIds[a]);return i?new e(t,o):(d("SharedClientState","Failed to parse client data for instance '"+t+"': "+n),null)},e}(),eo=function(){function e(e,t){this.clientId=e,this.onlineState=t}return e.Vs=function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(d("SharedClientState","Failed to parse online state: "+t),null)},e}(),to=function(){function e(){this.activeTargetIds=Kt()}return e.prototype.Ds=function(e){this.activeTargetIds=this.activeTargetIds.add(e)},e.prototype.Cs=function(e){this.activeTargetIds=this.activeTargetIds.delete(e)},e.prototype.Ss=function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)},e}(),no=function(){function e(e,t,n,r,i){this.window=e,this.Se=t,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.ks.bind(this),this.Fs=new Nt(w),this.started=!1,this.$s=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Os=Qi(this.persistenceKey,this.Ns),this.Ms=function(e){return"firestore_sequence_number_"+e}(this.persistenceKey),this.Fs=this.Fs.insert(this.Ns,new to),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(e){return"firestore_online_state_"+e}(this.persistenceKey),this.Ks=function(e){return"firestore_bundle_loaded_"+e}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return e.yt=function(e){return!(!e||!e.localStorage)},e.prototype.start=function(){return(0,r.__awaiter)(this,void 0,void 0,(function(){var e,t,n,i,o,a,s,u,c,l,h,f=this;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return[4,this.syncEngine.fn()];case 1:for(e=r.sent(),t=0,n=e;t<n.length;t++)(i=n[t])!==this.Ns&&(o=this.getItem(Qi(this.persistenceKey,i)))&&(a=Zi.Vs(i,o))&&(this.Fs=this.Fs.insert(a.clientId,a));for(this.Qs(),(s=this.storage.getItem(this.Us))&&(u=this.js(s))&&this.Ws(u),c=0,l=this.$s;c<l.length;c++)h=l[c],this.ks(h);return this.$s=[],this.window.addEventListener("pagehide",(function(){return f.shutdown()})),this.started=!0,[2]}}))}))},e.prototype.writeSequenceNumber=function(e){this.setItem(this.Ms,JSON.stringify(e))},e.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.Fs)},e.prototype.isActiveQueryTarget=function(e){var t=!1;return this.Fs.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t},e.prototype.addPendingMutation=function(e){this.zs(e,"pending")},e.prototype.updateMutationState=function(e,t,n){this.zs(e,t,n),this.Hs(e)},e.prototype.addLocalQueryTarget=function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(Yi(this.persistenceKey,e));if(n){var r=Ji.Vs(e,n);r&&(t=r.state)}}return this.Js.Ds(e),this.Qs(),t},e.prototype.removeLocalQueryTarget=function(e){this.Js.Cs(e),this.Qs()},e.prototype.isLocalQueryTarget=function(e){return this.Js.activeTargetIds.has(e)},e.prototype.clearQueryState=function(e){this.removeItem(Yi(this.persistenceKey,e))},e.prototype.updateQueryState=function(e,t,n){this.Ys(e,t,n)},e.prototype.handleUserChange=function(e,t,n){var r=this;t.forEach((function(e){r.Hs(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))},e.prototype.setOnlineState=function(e){this.Xs(e)},e.prototype.notifyBundleLoaded=function(){this.Zs()},e.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},e.prototype.getItem=function(e){var t=this.storage.getItem(e);return f("SharedClientState","READ",e,t),t},e.prototype.setItem=function(e,t){f("SharedClientState","SET",e,t),this.storage.setItem(e,t)},e.prototype.removeItem=function(e){f("SharedClientState","REMOVE",e),this.storage.removeItem(e)},e.prototype.ks=function(e){var t=this,n=e;if(n.storageArea===this.storage){if(f("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Os)return void d("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable((function(){return(0,r.__awaiter)(t,void 0,void 0,(function(){var e,t,i,o,a,u;return(0,r.__generator)(this,(function(r){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return e=this.ti(n.key),[2,this.ei(e,null)];if(t=this.ni(n.key,n.newValue))return[2,this.ei(t.clientId,t)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(i=this.si(n.key,n.newValue)))return[2,this.ii(i)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(o=this.ri(n.key,n.newValue)))return[2,this.oi(o)]}else if(n.key===this.Us){if(null!==n.newValue&&(a=this.js(n.newValue)))return[2,this.Ws(a)]}else if(n.key===this.Ms)(u=function(e){var t=s.o;if(null!=e)try{var n=JSON.parse(e);m("number"==typeof n),t=n}catch(e){d("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue))!==s.o&&this.sequenceNumberHandler(u);else if(n.key===this.Ks)return[2,this.syncEngine.ci()]}else this.$s.push(n);return[2]}))}))}))}},Object.defineProperty(e.prototype,"Js",{get:function(){return this.Fs.get(this.Ns)},enumerable:!1,configurable:!0}),e.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},e.prototype.zs=function(e,t,n){var r=new Xi(this.currentUser,e,t,n),i=$i(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Ss())},e.prototype.Hs=function(e){var t=$i(this.persistenceKey,this.currentUser,e);this.removeItem(t)},e.prototype.Xs=function(e){var t={clientId:this.Ns,onlineState:e};this.storage.setItem(this.Us,JSON.stringify(t))},e.prototype.Ys=function(e,t,n){var r=Yi(this.persistenceKey,e),i=new Ji(e,t,n);this.setItem(r,i.Ss())},e.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},e.prototype.ti=function(e){var t=this.Ls.exec(e);return t?t[1]:null},e.prototype.ni=function(e,t){var n=this.ti(e);return Zi.Vs(n,t)},e.prototype.si=function(e,t){var n=this.Bs.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Xi.Vs(new zi(i),r,t)},e.prototype.ri=function(e,t){var n=this.qs.exec(e),r=Number(n[1]);return Ji.Vs(r,t)},e.prototype.js=function(e){return eo.Vs(e)},e.prototype.ii=function(e){return(0,r.__awaiter)(this,void 0,void 0,(function(){return(0,r.__generator)(this,(function(t){return e.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(e.batchId,e.state,e.error)]:(f("SharedClientState","Ignoring mutation for non-active user "+e.user.uid),[2])}))}))},e.prototype.oi=function(e){return this.syncEngine.ai(e.targetId,e.state,e.error)},e.prototype.ei=function(e,t){var n=this,r=t?this.Fs.insert(e,t):this.Fs.remove(e),i=this.Gs(this.Fs),o=this.Gs(r),a=[],s=[];return o.forEach((function(e){i.has(e)||a.push(e)})),i.forEach((function(e){o.has(e)||s.push(e)})),this.syncEngine.hi(a,s).then((function(){n.Fs=r}))},e.prototype.Ws=function(e){this.Fs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)},e.prototype.Gs=function(e){var t=Kt();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t},e}(),ro=function(){function e(){this.li=new to,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return e.prototype.addPendingMutation=function(e){},e.prototype.updateMutationState=function(e,t,n){},e.prototype.addLocalQueryTarget=function(e){return this.li.Ds(e),this.fi[e]||"not-current"},e.prototype.updateQueryState=function(e,t,n){this.fi[e]=t},e.prototype.removeLocalQueryTarget=function(e){this.li.Cs(e)},e.prototype.isLocalQueryTarget=function(e){return this.li.activeTargetIds.has(e)},e.prototype.clearQueryState=function(e){delete this.fi[e]},e.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},e.prototype.isActiveQueryTarget=function(e){return this.li.activeTargetIds.has(e)},e.prototype.start=function(){return this.li=new to,Promise.resolve()},e.prototype.handleUserChange=function(e,t,n){},e.prototype.setOnlineState=function(e){},e.prototype.shutdown=function(){},e.prototype.writeSequenceNumber=function(e){},e.prototype.notifyBundleLoaded=function(){},e}(),io=function(){function e(){}return e.prototype.di=function(e){},e.prototype.shutdown=function(){},e}(),oo=function(){function e(){var e=this;this.wi=function(){return e._i()},this.mi=function(){return e.yi()},this.gi=[],this.pi()}return e.prototype.di=function(e){this.gi.push(e)},e.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},e.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},e.prototype._i=function(){f("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var e=0,t=this.gi;e<t.length;e++)(0,t[e])(0)},e.prototype.yi=function(){f("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var e=0,t=this.gi;e<t.length;e++)(0,t[e])(1)},e.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},e}(),ao={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},so=function(){function e(e){this.Ei=e.Ei,this.Ti=e.Ti}return e.prototype.Ii=function(e){this.Ai=e},e.prototype.Ri=function(e){this.bi=e},e.prototype.onMessage=function(e){this.vi=e},e.prototype.close=function(){this.Ti()},e.prototype.send=function(e){this.Ei(e)},e.prototype.Pi=function(){this.Ai()},e.prototype.Vi=function(e){this.bi(e)},e.prototype.Si=function(e){this.vi(e)},e}(),uo=function(e){function t(t){var n=this;return(n=e.call(this,t)||this).forceLongPolling=t.forceLongPolling,n.autoDetectLongPolling=t.autoDetectLongPolling,n.useFetchStreams=t.useFetchStreams,n}return(0,r.__extends)(t,e),t.prototype.Fi=function(e,t,n,r){return new Promise((function(i,o){var s=new a.JJ;s.listenOnce(a.tw.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case a.jK.NO_ERROR:var t=s.getResponseJson();f("Connection","XHR received:",JSON.stringify(t)),i(t);break;case a.jK.TIMEOUT:f("Connection",'RPC "'+e+'" timed out'),o(new c(u.DEADLINE_EXCEEDED,"Request time out"));break;case a.jK.HTTP_ERROR:var n=s.getStatus();if(f("Connection",'RPC "'+e+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var l=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(u).indexOf(t)>=0?t:u.UNKNOWN}(r.status);o(new c(l,r.message))}else o(new c(u.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new c(u.UNAVAILABLE,"Connection failed."));break;default:g()}}finally{f("Connection",'RPC "'+e+'" completed.')}}));var l=JSON.stringify(r);s.send(t,"POST",l,n,15)}))},t.prototype.Oi=function(e,t){var n=[this.Di,"/","google.firestore.v1.Firestore","/",e,"/channel"],r=(0,a.UE)(),o=(0,a.FJ)(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(s.xmlHttpFactory=new a.zI({})),this.ki(s.initMessageHeaders,t),(0,i.isMobileCordova)()||(0,i.isReactNative)()||(0,i.isElectron)()||(0,i.isIE)()||(0,i.isUWP)()||(0,i.isBrowserExtension)()||(s.httpHeadersOverwriteParam="$httpHeaders");var l=n.join("");f("Connection","Creating WebChannel: "+l,s);var h=r.createWebChannel(l,s),d=!1,v=!1,g=new so({Ei:function(e){v?f("Connection","Not sending because WebChannel is closed:",e):(d||(f("Connection","Opening WebChannel transport."),h.open(),d=!0),f("Connection","WebChannel sending:",e),h.send(e))},Ti:function(){return h.close()}}),y=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return y(h,a.ii.EventType.OPEN,(function(){v||f("Connection","WebChannel transport opened.")})),y(h,a.ii.EventType.CLOSE,(function(){v||(v=!0,f("Connection","WebChannel transport closed"),g.Vi())})),y(h,a.ii.EventType.ERROR,(function(e){v||(v=!0,p("Connection","WebChannel transport errored:",e),g.Vi(new c(u.UNAVAILABLE,"The operation could not be completed")))})),y(h,a.ii.EventType.MESSAGE,(function(e){var t;if(!v){var n=e.data[0];m(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){f("Connection","WebChannel received error:",i);var o=i.status,a=function(e){var t=It[e];if(void 0!==t)return At(t)}(o),s=i.message;void 0===a&&(a=u.INTERNAL,s="Unknown error status: "+o+" with message "+i.message),v=!0,g.Vi(new c(a,s)),h.close()}else f("Connection","WebChannel received:",n),g.Si(n)}})),y(o,a.ju.STAT_EVENT,(function(e){e.stat===a.kN.PROXY?f("Connection","Detected buffering proxy"):e.stat===a.kN.NOPROXY&&f("Connection","Detected no buffering proxy")})),setTimeout((function(){g.Pi()}),0),g},t}(function(){function e(e){this.databaseInfo=e,this.databaseId=e.databaseId;var t=e.ssl?"https":"http";this.Di=t+"://"+e.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return e.prototype.Ni=function(e,t,n,r){var i=this.xi(e,t);f("RestConnection","Sending: ",i,n);var o={};return this.ki(o,r),this.Fi(e,i,o,n).then((function(e){return f("RestConnection","Received: ",e),e}),(function(t){throw p("RestConnection",e+" failed with error: ",t,"url: ",i,"request:",n),t}))},e.prototype.$i=function(e,t,n,r){return this.Ni(e,t,n,r)},e.prototype.ki=function(e,t){if(e["X-Goog-Api-Client"]="gl-js/ fire/8.10.1",e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t)for(var n in t.authHeaders)t.authHeaders.hasOwnProperty(n)&&(e[n]=t.authHeaders[n])},e.prototype.xi=function(e,t){var n=ao[e];return this.Di+"/v1/"+t+":"+n},e}());
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function co(){return"undefined"!=typeof window?window:null}function lo(){return"undefined"!=typeof document?document:null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ho(e){return new tn(e,!0)}var fo=function(){function e(e,t,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=e,this.timerId=t,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return e.prototype.reset=function(){this.qi=0},e.prototype.Qi=function(){this.qi=this.Bi},e.prototype.ji=function(e){var t=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Ki),i=Math.max(0,n-r);i>0&&f("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,(function(){return t.Ki=Date.now(),e()})),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},e.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},e.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},e.prototype.Wi=function(){return(Math.random()-.5)*this.qi},e}(),po=function(){function e(e,t,n,r,i,o){this.Se=e,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new fo(e,t)}return e.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},e.prototype.er=function(){return 2===this.state},e.prototype.start=function(){3!==this.state?this.auth():this.nr()},e.prototype.stop=function(){return(0,r.__awaiter)(this,void 0,void 0,(function(){return(0,r.__generator)(this,(function(e){switch(e.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},e.prototype.sr=function(){this.state=0,this.Zi.reset()},e.prototype.ir=function(){var e=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,(function(){return e.rr()})))},e.prototype.cr=function(e){this.ur(),this.stream.send(e)},e.prototype.rr=function(){return(0,r.__awaiter)(this,void 0,void 0,(function(){return(0,r.__generator)(this,(function(e){return this.er()?[2,this.close(0)]:[2]}))}))},e.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},e.prototype.close=function(e,t){return(0,r.__awaiter)(this,void 0,void 0,(function(){return(0,r.__generator)(this,(function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==e?this.Zi.reset():t&&t.code===u.RESOURCE_EXHAUSTED?(d(t.toString()),d("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):t&&t.code===u.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.Ri(t)];case 1:return n.sent(),[2]}}))}))},e.prototype.ar=function(){},e.prototype.auth=function(){var e=this;this.state=1;var t=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then((function(t){e.Yi===n&&e.lr(t)}),(function(n){t((function(){var t=new c(u.UNKNOWN,"Fetching auth token failed: "+n.message);return e.dr(t)}))}))},e.prototype.lr=function(e){var t=this,n=this.hr(this.Yi);this.stream=this.wr(e),this.stream.Ii((function(){n((function(){return t.state=2,t.listener.Ii()}))})),this.stream.Ri((function(e){n((function(){return t.dr(e)}))})),this.stream.onMessage((function(e){n((function(){return t.onMessage(e)}))}))},e.prototype.nr=function(){var e=this;this.state=4,this.Zi.ji((function(){return(0,r.__awaiter)(e,void 0,void 0,(function(){return(0,r.__generator)(this,(function(e){return this.state=0,this.start(),[2]}))}))}))},e.prototype.dr=function(e){return f("PersistentStream","close with error: "+e),this.stream=null,this.close(3,e)},e.prototype.hr=function(e){var t=this;return function(n){t.Se.enqueueAndForget((function(){return t.Yi===e?n():(f("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},e}(),vo=function(e){function t(t,n,r,i,o){var a=this;return(a=e.call(this,t,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,a}return(0,r.__extends)(t,e),t.prototype.wr=function(e){return this.Hi.Oi("Listen",e)},t.prototype.onMessage=function(e){this.Zi.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:g()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=function(e,t){return e.I?(m(void 0===t||"string"==typeof t),D.fromBase64String(t||"")):(m(void 0===t||t instanceof Uint8Array),D.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=(s=t.targetChange.cause)&&function(e){var t=void 0===e.code?u.UNKNOWN:At(e.code);return new c(t,e.message||"")}(s);n=new Qt(r,i,o,a||null)}else if("documentChange"in t){t.documentChange,(r=t.documentChange).document,r.document.name,r.document.updateTime,i=ln(e,r.document.name),o=an(r.document.updateTime);var s=new ae({mapValue:{fields:r.document.fields}}),l=(a=ue.newFoundDocument(i,o,s),r.targetIds||[]),h=r.removedTargetIds||[];n=new Gt(l,h,a.key,a)}else if("documentDelete"in t)t.documentDelete,(r=t.documentDelete).document,i=ln(e,r.document),o=r.readTime?an(r.readTime):k.min(),s=ue.newNoDocument(i,o),a=r.removedTargetIds||[],n=new Gt([],a,s.key,s);else if("documentRemove"in t)t.documentRemove,(r=t.documentRemove).document,i=ln(e,r.document),o=r.removedTargetIds||[],n=new Gt([],o,i,null);else{if(!("filter"in t))return g();t.filter;var f=t.filter;f.targetId,r=f.count||0,i=new St(r),o=f.targetId,n=new zt(o,i)}return n}(this.R,e),n=function(e){if(!("targetChange"in e))return k.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?k.min():t.readTime?an(t.readTime):k.min()}(e);return this.listener._r(t,n)},t.prototype.mr=function(e){var t={};t.database=dn(this.R),t.addTarget=function(e,t){var n,r=t.target;return(n=de(r)?{documents:_n(e,r)}:{query:bn(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=rn(e,t.resumeToken):t.snapshotVersion.compareTo(k.min())>0&&(n.readTime=nn(e,t.snapshotVersion.toTimestamp())),n}(this.R,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return g()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.R,e);n&&(t.labels=n),this.cr(t)},t.prototype.yr=function(e){var t={};t.database=dn(this.R),t.removeTarget=e,this.cr(t)},t}(po),go=function(e){function t(t,n,r,i,o){var a=this;return(a=e.call(this,t,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,a.gr=!1,a}return(0,r.__extends)(t,e),Object.defineProperty(t.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),t.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,e.prototype.start.call(this)},t.prototype.ar=function(){this.gr&&this.Er([])},t.prototype.wr=function(e){return this.Hi.Oi("Write",e)},t.prototype.onMessage=function(e){if(m(!!e.streamToken),this.lastStreamToken=e.streamToken,this.gr){this.Zi.reset();var t=function(e,t){return e&&e.length>0?(m(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?an(e.updateTime):an(t);return n.isEqual(k.min())&&(n=an(t)),new ut(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=an(e.commitTime);return this.listener.Tr(n,t)}return m(!e.writeResults||0===e.writeResults.length),this.gr=!0,this.listener.Ir()},t.prototype.Ar=function(){var e={};e.database=dn(this.R),this.cr(e)},t.prototype.Er=function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return mn(t.R,e)}))};this.cr(n)},t}(po),mo=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).credentials=t,i.Hi=n,i.R=r,i.Rr=!1,i}return(0,r.__extends)(t,e),t.prototype.br=function(){if(this.Rr)throw new c(u.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.Ni=function(e,t,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.Ni(e,t,n,i)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===u.UNAUTHENTICATED&&r.credentials.invalidateToken(),e):new c(u.UNKNOWN,e.toString())}))},t.prototype.$i=function(e,t,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.$i(e,t,n,i)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===u.UNAUTHENTICATED&&r.credentials.invalidateToken(),e):new c(u.UNKNOWN,e.toString())}))},t.prototype.terminate=function(){this.Rr=!0},t}((function(){})),yo=function(){function e(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return e.prototype.Sr=function(){var e=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.Pr=null,e.Cr("Backend didn't respond within 10 seconds."),e.Dr("Offline"),Promise.resolve()})))},e.prototype.Nr=function(e){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.kr(),this.Cr("Connection failed 1 times. Most recent error: "+e.toString()),this.Dr("Offline")))},e.prototype.set=function(e){this.kr(),this.vr=0,"Online"===e&&(this.Vr=!1),this.Dr(e)},e.prototype.Dr=function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))},e.prototype.Cr=function(e){var t="Could not reach Cloud Firestore backend. "+e+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(d(t),this.Vr=!1):f("OnlineStateTracker",t)},e.prototype.kr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},e}(),_o=function(e,t,n,i,o){var a=this;this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Fr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=o,this.Lr.di((function(e){n.enqueueAndForget((function(){return(0,r.__awaiter)(a,void 0,void 0,(function(){return(0,r.__generator)(this,(function(e){switch(e.label){case 0:return Ao(this)?(f("RemoteStore","Restarting streams for network reachability change."),[4,function(e){return(0,r.__awaiter)(this,void 0,void 0,(function(){var t;return(0,r.__generator)(this,(function(n){switch(n.label){case 0:return(t=y(e)).Or.add(4),[4,wo(t)];case 1:return n.sent(),t.Br.set("Unknown"),t.Or.delete(4),[4,bo(t)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))})),this.Br=new yo(n,i)};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bo(e){return(0,r.__awaiter)(this,void 0,void 0,(function(){var t,n;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:if(!Ao(e))return[3,4];t=0,n=e.Mr,r.label=1;case 1:return t<n.length?[4,(0,n[t])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return t++,[3,1];case 4:return[2]}}))}))}function wo(e){return(0,r.__awaiter)(this,void 0,void 0,(function(){var t,n;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:t=0,n=e.Mr,r.label=1;case 1:return t<n.length?[4,(0,n[t])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return t++,[3,1];case 4:return[2]}}))}))}function Io(e,t){var n=y(e);n.$r.has(t.targetId)||(n.$r.set(t.targetId,t),Co(n)?So(n):Ko(n).er()&&Eo(n,t))}function To(e,t){var n=y(e),r=Ko(n);n.$r.delete(t),r.er()&&ko(n,t),0===n.$r.size&&(r.er()?r.ir():Ao(n)&&n.Br.set("Unknown"))}function Eo(e,t){e.qr.U(t.targetId),Ko(e).mr(t)}function ko(e,t){e.qr.U(t),Ko(e).yr(t)}function So(e){e.qr=new Yt({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},lt:function(t){return e.$r.get(t)||null}}),Ko(e).start(),e.Br.Sr()}function Co(e){return Ao(e)&&!Ko(e).tr()&&e.$r.size>0}function Ao(e){return 0===y(e).Or.size}function No(e){e.qr=void 0}function xo(e){return(0,r.__awaiter)(this,void 0,void 0,(function(){return(0,r.__generator)(this,(function(t){return e.$r.forEach((function(t,n){Eo(e,t)})),[2]}))}))}function Ro(e,t){return(0,r.__awaiter)(this,void 0,void 0,(function(){return(0,r.__generator)(this,(function(n){return No(e),Co(e)?(e.Br.Nr(t),So(e)):e.Br.set("Unknown"),[2]}))}))}function Po(e,t,n){return(0,r.__awaiter)(this,void 0,void 0,(function(){var i,o,a;return(0,r.__generator)(this,(function(s){switch(s.label){case 0:if(e.Br.set("Online"),!(t instanceof Qt&&2===t.state&&t.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(e,t){return(0,r.__awaiter)(this,void 0,void 0,(function(){var n,i,o,a;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:n=t.cause,i=0,o=t.targetIds,r.label=1;case 1:return i<o.length?(a=o[i],e.$r.has(a)?[4,e.remoteSyncer.rejectListen(a,n)]:[3,3]):[3,5];case 2:r.sent(),e.$r.delete(a),e.qr.removeTarget(a),r.label=3;case 3:r.label=4;case 4:return i++,[3,1];case 5:return[2]}}))}))}(e,t)];case 2:return s.sent(),[3,5];case 3:return i=s.sent(),f("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),i),[4,Oo(e,i)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(t instanceof Gt?e.qr.X(t):t instanceof zt?e.qr.rt(t):e.qr.et(t),n.isEqual(k.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,ki(e.localStore)];case 8:return o=s.sent(),n.compareTo(o)>=0?[4,function(e,t){var n=e.qr.ut(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.$r.get(r);i&&e.$r.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.$r.get(t);if(n){e.$r.set(t,n.withResumeToken(D.EMPTY_BYTE_STRING,n.snapshotVersion)),ko(e,t);var r=new mr(n.target,t,1,n.sequenceNumber);Eo(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return f("RemoteStore","Failed to raise snapshot:",a=s.sent()),[4,Oo(e,a)];case 12:return s.sent(),[3,13];case 13:return[2]}}))}))}function Oo(e,t,n){return(0,r.__awaiter)(this,void 0,void 0,(function(){var i=this;return(0,r.__generator)(this,(function(o){switch(o.label){case 0:if(!ur(t))throw t;return e.Or.add(1),[4,wo(e)];case 1:return o.sent(),e.Br.set("Offline"),n||(n=function(){return ki(e.localStore)}),e.asyncQueue.enqueueRetryable((function(){return(0,r.__awaiter)(i,void 0,void 0,(function(){return(0,r.__generator)(this,(function(t){switch(t.label){case 0:return f("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return t.sent(),e.Or.delete(1),[4,bo(e)];case 2:return t.sent(),[2]}}))}))})),[2]}}))}))}function Do(e,t){return t().catch((function(n){return Oo(e,n,t)}))}function Mo(e){return(0,r.__awaiter)(this,void 0,void 0,(function(){var t,n,i,o,a;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:t=y(e),n=Wo(t),i=t.Fr.length>0?t.Fr[t.Fr.length-1].batchId:-1,r.label=1;case 1:if(!function(e){return Ao(e)&&e.Fr.length<10}(t))return[3,7];r.label=2;case 2:return r.trys.push([2,4,,6]),[4,Ai(t.localStore,i)];case 3:return null===(o=r.sent())?(0===t.Fr.length&&n.ir(),[3,7]):(i=o.batchId,function(e,t){e.Fr.push(t);var n=Wo(e);n.er()&&n.pr&&n.Er(t.mutations)}(t,o),[3,6]);case 4:return a=r.sent(),[4,Oo(t,a)];case 5:return r.sent(),[3,6];case 6:return[3,1];case 7:return Lo(t)&&Fo(t),[2]}}))}))}function Lo(e){return Ao(e)&&!Wo(e).tr()&&e.Fr.length>0}function Fo(e){Wo(e).start()}function jo(e){return(0,r.__awaiter)(this,void 0,void 0,(function(){return(0,r.__generator)(this,(function(t){return Wo(e).Ar(),[2]}))}))}function Uo(e){return(0,r.__awaiter)(this,void 0,void 0,(function(){var t,n,i,o;return(0,r.__generator)(this,(function(r){for(t=Wo(e),n=0,i=e.Fr;n<i.length;n++)o=i[n],t.Er(o.mutations);return[2]}))}))}function qo(e,t,n){return(0,r.__awaiter)(this,void 0,void 0,(function(){var i,o;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return i=e.Fr.shift(),o=gr.from(i,t,n),[4,Do(e,(function(){return e.remoteSyncer.applySuccessfulWrite(o)}))];case 1:return r.sent(),[4,Mo(e)];case 2:return r.sent(),[2]}}))}))}function Vo(e,t){return(0,r.__awaiter)(this,void 0,void 0,(function(){return(0,r.__generator)(this,(function(n){switch(n.label){case 0:return t&&Wo(e).pr?[4,function(e,t){return(0,r.__awaiter)(this,void 0,void 0,(function(){var n,i;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return Ct(i=t.code)&&i!==u.ABORTED?(n=e.Fr.shift(),Wo(e).sr(),[4,Do(e,(function(){return e.remoteSyncer.rejectFailedWrite(n.batchId,t)}))]):[3,3];case 1:return r.sent(),[4,Mo(e)];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))}(e,t)]:[3,2];case 1:n.sent(),n.label=2;case 2:return Lo(e)&&Fo(e),[2]}}))}))}function Bo(e,t){return(0,r.__awaiter)(this,void 0,void 0,(function(){var n;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return n=y(e),t?(n.Or.delete(2),[4,bo(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return t?[3,4]:(n.Or.add(2),[4,wo(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function Ko(e){var t=this;return e.Ur||(e.Ur=function(e,t,n){var r=y(e);return r.br(),new vo(t,r.Hi,r.credentials,r.R,n)}(e.datastore,e.asyncQueue,{Ii:xo.bind(null,e),Ri:Ro.bind(null,e),_r:Po.bind(null,e)}),e.Mr.push((function(n){return(0,r.__awaiter)(t,void 0,void 0,(function(){return(0,r.__generator)(this,(function(t){switch(t.label){case 0:return n?(e.Ur.sr(),Co(e)?So(e):e.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,e.Ur.stop()];case 2:t.sent(),No(e),t.label=3;case 3:return[2]}}))}))}))),e.Ur}function Wo(e){var t=this;return e.Kr||(e.Kr=function(e,t,n){var r=y(e);return r.br(),new go(t,r.Hi,r.credentials,r.R,n)}(e.datastore,e.asyncQueue,{Ii:jo.bind(null,e),Ri:Vo.bind(null,e),Ir:Uo.bind(null,e),Tr:qo.bind(null,e)}),e.Mr.push((function(n){return(0,r.__awaiter)(t,void 0,void 0,(function(){return(0,r.__generator)(this,(function(t){switch(t.label){case 0:return n?(e.Kr.sr(),[4,Mo(e)]):[3,2];case 1:return t.sent(),[3,4];case 2:return[4,e.Kr.stop()];case 3:t.sent(),e.Fr.length>0&&(f("RemoteStore","Stopping write stream with "+e.Fr.length+" pending writes"),e.Fr=[]),t.label=4;case 4:return[2]}}))}))}))),e.Kr
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var Ho=function(){function e(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new nr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return e.createAndSchedule=function(t,n,r,i,o){var a=new e(t,n,Date.now()+r,i,o);return a.start(r),a},e.prototype.start=function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)},e.prototype.skipDelay=function(){return this.handleDelayElapsed()},e.prototype.cancel=function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new c(u.CANCELLED,"Operation cancelled"+(e?": "+e:""))))},e.prototype.handleDelayElapsed=function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))},e.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},e}();function Go(e,t){if(d("AsyncQueue",t+": "+e),ur(e))return new c(u.UNAVAILABLE,t+": "+e);throw e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zo=function(){function e(e){this.comparator=e?function(t,n){return e(t,n)||H.comparator(t.key,n.key)}:function(e,t){return H.comparator(e.key,t.key)},this.keyedMap=Ft(),this.sortedSet=new Nt(this.comparator)}return e.emptySet=function(t){return new e(t.comparator)},e.prototype.has=function(e){return null!=this.keyedMap.get(e)},e.prototype.get=function(e){return this.keyedMap.get(e)},e.prototype.first=function(){return this.sortedSet.minKey()},e.prototype.last=function(){return this.sortedSet.maxKey()},e.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},e.prototype.indexOf=function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1},Object.defineProperty(e.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),e.prototype.forEach=function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))},e.prototype.add=function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))},e.prototype.delete=function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this},e.prototype.isEqual=function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},e.prototype.toString=function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"},e.prototype.copy=function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r},e}(),Qo=function(){function e(){this.Qr=new Nt(H.comparator)}return e.prototype.track=function(e){var t=e.doc.key,n=this.Qr.get(t);n?0!==e.type&&3===n.type?this.Qr=this.Qr.insert(t,e):3===e.type&&1!==n.type?this.Qr=this.Qr.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Qr=this.Qr.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Qr=this.Qr.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Qr=this.Qr.remove(t):1===e.type&&2===n.type?this.Qr=this.Qr.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Qr=this.Qr.insert(t,{type:2,doc:e.doc}):g():this.Qr=this.Qr.insert(t,e)},e.prototype.jr=function(){var e=[];return this.Qr.inorderTraversal((function(t,n){e.push(n)})),e},e}(),$o=function(){function e(e,t,n,r,i,o,a,s){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s}return e.fromInitialDocuments=function(t,n,r,i){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,zo.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&qe(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0},e}(),Yo=function(){this.Wr=void 0,this.listeners=[]},Xo=function(){this.queries=new ri((function(e){return Ve(e)}),qe),this.onlineState="Unknown",this.Gr=new Set};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jo(e,t){return(0,r.__awaiter)(this,void 0,void 0,(function(){var n,i,o,a,s,u,c;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:if(n=y(e),i=t.query,o=!1,(a=n.queries.get(i))||(o=!0,a=new Yo),!o)return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),s=a,[4,n.onListen(i)];case 2:return s.Wr=r.sent(),[3,4];case 3:return u=r.sent(),c=Go(u,"Initialization of query '"+Be(t.query)+"' failed"),[2,void t.onError(c)];case 4:return n.queries.set(i,a),a.listeners.push(t),t.zr(n.onlineState),a.Wr&&t.Hr(a.Wr)&&na(n),[2]}}))}))}function Zo(e,t){return(0,r.__awaiter)(this,void 0,void 0,(function(){var n,i,o,a,s;return(0,r.__generator)(this,(function(r){return n=y(e),i=t.query,o=!1,(a=n.queries.get(i))&&(s=a.listeners.indexOf(t))>=0&&(a.listeners.splice(s,1),o=0===a.listeners.length),o?[2,(n.queries.delete(i),n.onUnlisten(i))]:[2]}))}))}function ea(e,t){for(var n=y(e),r=!1,i=0,o=t;i<o.length;i++){var a=o[i],s=a.query,u=n.queries.get(s);if(u){for(var c=0,l=u.listeners;c<l.length;c++)l[c].Hr(a)&&(r=!0);u.Wr=a}}r&&na(n)}function ta(e,t,n){var r=y(e),i=r.queries.get(t);if(i)for(var o=0,a=i.listeners;o<a.length;o++)a[o].onError(n);r.queries.delete(t)}function na(e){e.Gr.forEach((function(e){e.next()}))}var ra=function(){function e(e,t,n){this.query=e,this.Jr=t,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return e.prototype.Hr=function(e){if(!this.options.includeMetadataChanges){for(var t=[],n=0,r=e.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&t.push(i)}e=new $o(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(e)&&(this.Jr.next(e),o=!0):this.eo(e,this.onlineState)&&(this.no(e),o=!0),this.Xr=e,o},e.prototype.onError=function(e){this.Jr.error(e)},e.prototype.zr=function(e){this.onlineState=e;var t=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,e)&&(this.no(this.Xr),t=!0),t},e.prototype.eo=function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return!(this.options.so&&n||e.docs.isEmpty()&&"Offline"!==t)},e.prototype.Zr=function(e){if(e.docChanges.length>0)return!0;var t=this.Xr&&this.Xr.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges},e.prototype.no=function(e){e=$o.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Yr=!0,this.Jr.next(e)},e}(),ia=function(){function e(e,t){this.payload=e,this.byteLength=t}return e.prototype.io=function(){return"metadata"in this.payload},e}(),oa=function(){function e(e){this.R=e}return e.prototype.qn=function(e){return ln(this.R,e)},e.prototype.Un=function(e){return e.metadata.exists?gn(this.R,e.document,!1):ue.newNoDocument(this.qn(e.metadata.name),this.Kn(e.metadata.readTime))},e.prototype.Kn=function(e){return an(e)},e}(),aa=function(){function e(e,t,n){this.ro=e,this.localStore=t,this.R=n,this.queries=[],this.documents=[],this.progress=sa(e)}return e.prototype.oo=function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null},e.prototype.co=function(e){for(var t=new Map,n=new oa(this.R),r=0,i=e;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var a=n.qn(o.metadata.name),s=0,u=o.metadata.queries;s<u.length;s++){var c=u[s],l=(t.get(c)||Vt()).add(a);t.set(c,l)}}return t},e.prototype.complete=function(){return(0,r.__awaiter)(this,void 0,void 0,(function(){var e,t,n,i,o;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return[4,Mi(this.localStore,new oa(this.R),this.documents,this.ro.id)];case 1:e=r.sent(),t=this.co(this.documents),n=0,i=this.queries,r.label=2;case 2:return n<i.length?(o=i[n],[4,Li(this.localStore,o,t.get(o.name))]):[3,5];case 3:r.sent(),r.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new mi(Object.assign({},this.progress),e))]}}))}))},e}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sa(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ua=function(e){this.key=e},ca=function(e){this.key=e},la=function(){function e(e,t){this.query=e,this.uo=t,this.ao=null,this.current=!1,this.ho=Vt(),this.mutatedKeys=Vt(),this.lo=We(e),this.fo=new zo(this.lo)}return Object.defineProperty(e.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),e.prototype._o=function(e,t){var n=this,r=t?t.mo:new Qo,i=t?t.fo:this.fo,o=t?t.mutatedKeys:this.mutatedKeys,a=i,s=!1,u=Pe(this.query)&&i.size===this.query.limit?i.last():null,c=Oe(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),h=Ke(n.query,t)?t:null,f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),p=!0):n.yo(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.lo(h,u)>0||c&&n.lo(h,c)<0)&&(s=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(s=!0)),p&&(h?(a=a.add(h),o=d?o.add(e):o.delete(e)):(a=a.delete(e),o=o.delete(e)))})),Pe(this.query)||Oe(this.query))for(;a.size>this.query.limit;){var l=Pe(this.query)?a.last():a.first();a=a.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{fo:a,mo:r,Nn:s,mutatedKeys:o}},e.prototype.yo=function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations},e.prototype.applyChanges=function(e,t,n){var r=this,i=this.fo;this.fo=e.fo,this.mutatedKeys=e.mutatedKeys;var o=e.mo.jr();o.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return g()}};return n(e)-n(t)}(e.type,t.type)||r.lo(e.doc,t.doc)})),this.po(n);var a=t?this.Eo():[],s=0===this.ho.size&&this.current?1:0,u=s!==this.ao;return this.ao=s,0!==o.length||u?{snapshot:new $o(this.query,e.fo,i,o,e.mutatedKeys,0===s,u,!1),To:a}:{To:a}},e.prototype.zr=function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({fo:this.fo,mo:new Qo,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},e.prototype.Io=function(e){return!this.uo.has(e)&&!!this.fo.has(e)&&!this.fo.get(e).hasLocalMutations},e.prototype.po=function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.uo=t.uo.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.uo=t.uo.delete(e)})),this.current=e.current)},e.prototype.Eo=function(){var e=this;if(!this.current)return[];var t=this.ho;this.ho=Vt(),this.fo.forEach((function(t){e.Io(t.key)&&(e.ho=e.ho.add(t.key))}));var n=[];return t.forEach((function(t){e.ho.has(t)||n.push(new ca(t))})),this.ho.forEach((function(e){t.has(e)||n.push(new ua(e))})),n},e.prototype.Ao=function(e){this.uo=e.Bn,this.ho=Vt();var t=this._o(e.documents);return this.applyChanges(t,!0)},e.prototype.Ro=function(){return $o.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},e}(),ha=function(e,t,n){this.query=e,this.targetId=t,this.view=n},fa=function(e){this.key=e,this.bo=!1},da=function(){function e(e,t,n,r,i,o){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new ri((function(e){return Ve(e)}),qe),this.Vo=new Map,this.So=new Set,this.Do=new Nt(H.comparator),this.Co=new Map,this.No=new ji,this.xo={},this.ko=new Map,this.Fo=Hr.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(e.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),e}();function pa(e,t){return(0,r.__awaiter)(this,void 0,void 0,(function(){var n,i,o,a,s,u;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return n=Ka(e),(a=n.Po.get(t))?(i=a.targetId,n.sharedClientState.addLocalQueryTarget(i),o=a.view.Ro(),[3,4]):[3,1];case 1:return[4,Ni(n.localStore,je(t))];case 2:return s=r.sent(),u=n.sharedClientState.addLocalQueryTarget(s.targetId),i=s.targetId,[4,va(n,t,i,"current"===u)];case 3:o=r.sent(),n.isPrimaryClient&&Io(n.remoteStore,s),r.label=4;case 4:return[2,o]}}))}))}function va(e,t,n,i){return(0,r.__awaiter)(this,void 0,void 0,(function(){var o,a,s,u,c,l;return(0,r.__generator)(this,(function(h){switch(h.label){case 0:return e.Oo=function(t,n,i){return function(e,t,n,i){return(0,r.__awaiter)(this,void 0,void 0,(function(){var o,a,s;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return o=t.view._o(n),o.Nn?[4,Ri(e.localStore,t.query,!1).then((function(e){var n=e.documents;return t.view._o(n,o)}))]:[3,2];case 1:o=r.sent(),r.label=2;case 2:return a=i&&i.targetChanges.get(t.targetId),s=t.view.applyChanges(o,e.isPrimaryClient,a),[2,(Aa(e,t.targetId,s.To),s.snapshot)]}}))}))}(e,t,n,i)},[4,Ri(e.localStore,t,!0)];case 1:return o=h.sent(),a=new la(t,o.Bn),s=a._o(o.documents),u=Ht.createSynthesizedTargetChangeForCurrentChange(n,i&&"Offline"!==e.onlineState),c=a.applyChanges(s,e.isPrimaryClient,u),Aa(e,n,c.To),l=new ha(t,n,a),[2,(e.Po.set(t,l),e.Vo.has(n)?e.Vo.get(n).push(t):e.Vo.set(n,[t]),c.snapshot)]}}))}))}function ga(e,t){return(0,r.__awaiter)(this,void 0,void 0,(function(){var n,i,o;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return n=y(e),i=n.Po.get(t),(o=n.Vo.get(i.targetId)).length>1?[2,(n.Vo.set(i.targetId,o.filter((function(e){return!qe(e,t)}))),void n.Po.delete(t))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)?[3,2]:[4,xi(n.localStore,i.targetId,!1).then((function(){n.sharedClientState.clearQueryState(i.targetId),To(n.remoteStore,i.targetId),Sa(n,i.targetId)})).catch(Yr)]):[3,3];case 1:r.sent(),r.label=2;case 2:return[3,5];case 3:return Sa(n,i.targetId),[4,xi(n.localStore,i.targetId,!0)];case 4:r.sent(),r.label=5;case 5:return[2]}}))}))}function ma(e,t,n){return(0,r.__awaiter)(this,void 0,void 0,(function(){var i,o,a,s;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:i=Wa(e),r.label=1;case 1:return r.trys.push([1,5,,6]),[4,function(e,t){var n,r=y(e),i=E.now(),o=t.reduce((function(e,t){return e.add(t.key)}),Vt());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(e){return r.Mn.pn(e,o).next((function(o){n=o;for(var a=[],s=0,u=t;s<u.length;s++){var c=u[s],l=pt(c,n.get(c.key));null!=l&&a.push(new yt(c.key,l,se(l.value.mapValue),ct.exists(!0)))}return r._n.addMutationBatch(e,i,a,t)}))})).then((function(e){return e.applyToLocalDocumentSet(n),{batchId:e.batchId,changes:n}}))}(i.localStore,t)];case 2:return o=r.sent(),i.sharedClientState.addPendingMutation(o.batchId),function(e,t,n){var r=e.xo[e.currentUser.toKey()];r||(r=new Nt(w)),r=r.insert(t,n),e.xo[e.currentUser.toKey()]=r}(i,o.batchId,n),[4,Ra(i,o.changes)];case 3:return r.sent(),[4,Mo(i.remoteStore)];case 4:return r.sent(),[3,6];case 5:return a=r.sent(),s=Go(a,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}}))}))}function ya(e,t){return(0,r.__awaiter)(this,void 0,void 0,(function(){var n,i;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:n=y(e),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,Si(n.localStore,t)];case 2:return i=r.sent(),t.targetChanges.forEach((function(e,t){var r=n.Co.get(t);r&&(m(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.bo=!0:e.modifiedDocuments.size>0?m(r.bo):e.removedDocuments.size>0&&(m(r.bo),r.bo=!1))})),[4,Ra(n,i,t)];case 3:return r.sent(),[3,6];case 4:return[4,Yr(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))}function _a(e,t,n){var r=y(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach((function(e,n){var r=n.view.zr(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=y(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(t)&&(r=!0)})),r&&na(n)}(r.eventManager,t),i.length&&r.vo._r(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function ba(e,t,n){return(0,r.__awaiter)(this,void 0,void 0,(function(){var i,o,a,s,u,c;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return(i=y(e)).sharedClientState.updateQueryState(t,"rejected",n),o=i.Co.get(t),(a=o&&o.key)?(s=(s=new Nt(H.comparator)).insert(a,ue.newNoDocument(a,k.min())),u=Vt().add(a),c=new Wt(k.min(),new Map,new Pt(w),s,u),[4,ya(i,c)]):[3,2];case 1:return r.sent(),i.Do=i.Do.remove(a),i.Co.delete(t),xa(i),[3,4];case 2:return[4,xi(i.localStore,t,!1).then((function(){return Sa(i,t,n)})).catch(Yr)];case 3:r.sent(),r.label=4;case 4:return[2]}}))}))}function wa(e,t){return(0,r.__awaiter)(this,void 0,void 0,(function(){var n,i,o;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:n=y(e),i=t.batch.batchId,r.label=1;case 1:return r.trys.push([1,4,,6]),[4,Ei(n.localStore,t)];case 2:return o=r.sent(),ka(n,i,null),Ea(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),[4,Ra(n,o)];case 3:return r.sent(),[3,6];case 4:return[4,Yr(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))}function Ia(e,t,n){return(0,r.__awaiter)(this,void 0,void 0,(function(){var i,o;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:i=y(e),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,function(e,t){var n=y(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n._n.lookupMutationBatch(e,t).next((function(t){return m(null!==t),r=t.keys(),n._n.removeMutationBatch(e,t)})).next((function(){return n._n.performConsistencyCheck(e)})).next((function(){return n.Mn.pn(e,r)}))}))}(i.localStore,t)];case 2:return o=r.sent(),ka(i,t,n),Ea(i,t),i.sharedClientState.updateMutationState(t,"rejected",n),[4,Ra(i,o)];case 3:return r.sent(),[3,6];case 4:return[4,Yr(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))}function Ta(e,t){return(0,r.__awaiter)(this,void 0,void 0,(function(){var n,i,o,a,s;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:Ao((n=y(e)).remoteStore)||f("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,function(e){var t=y(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t._n.getHighestUnacknowledgedBatchId(e)}))}(n.localStore)];case 2:return-1===(i=r.sent())?[2,void t.resolve()]:((o=n.ko.get(i)||[]).push(t),n.ko.set(i,o),[3,4]);case 3:return a=r.sent(),s=Go(a,"Initialization of waitForPendingWrites() operation failed"),t.reject(s),[3,4];case 4:return[2]}}))}))}function Ea(e,t){(e.ko.get(t)||[]).forEach((function(e){e.resolve()})),e.ko.delete(t)}function ka(e,t,n){var r=y(e),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(t);o&&(n?o.reject(n):o.resolve(),i=i.remove(t)),r.xo[r.currentUser.toKey()]=i}}function Sa(e,t,n){void 0===n&&(n=null),e.sharedClientState.removeLocalQueryTarget(t);for(var r=0,i=e.Vo.get(t);r<i.length;r++){var o=i[r];e.Po.delete(o),n&&e.vo.Mo(o,n)}e.Vo.delete(t),e.isPrimaryClient&&e.No.Zn(t).forEach((function(t){e.No.containsKey(t)||Ca(e,t)}))}function Ca(e,t){e.So.delete(t.path.canonicalString());var n=e.Do.get(t);null!==n&&(To(e.remoteStore,n),e.Do=e.Do.remove(t),e.Co.delete(n),xa(e))}function Aa(e,t,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof ua?(e.No.addReference(o.key,t),Na(e,o)):o instanceof ca?(f("SyncEngine","Document no longer in limbo: "+o.key),e.No.removeReference(o.key,t),e.No.containsKey(o.key)||Ca(e,o.key)):g()}}function Na(e,t){var n=t.key,r=n.path.canonicalString();e.Do.get(n)||e.So.has(r)||(f("SyncEngine","New document in limbo: "+n),e.So.add(r),xa(e))}function xa(e){for(;e.So.size>0&&e.Do.size<e.maxConcurrentLimboResolutions;){var t=e.So.values().next().value;e.So.delete(t);var n=new H(x.fromString(t)),r=e.Fo.next();e.Co.set(r,new fa(n)),e.Do=e.Do.insert(n,r),Io(e.remoteStore,new mr(je(Re(n.path)),r,2,s.o))}}function Ra(e,t,n){return(0,r.__awaiter)(this,void 0,void 0,(function(){var i,o,a,s;return(0,r.__generator)(this,(function(u){switch(u.label){case 0:return i=y(e),o=[],a=[],s=[],i.Po.isEmpty()?[3,3]:(i.Po.forEach((function(e,r){s.push(i.Oo(r,t,n).then((function(e){if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(r.targetId,e.fromCache?"not-current":"current"),o.push(e);var t=_i.Pn(r.targetId,e);a.push(t)}})))})),[4,Promise.all(s)]);case 1:return u.sent(),i.vo._r(o),[4,function(e,t){return(0,r.__awaiter)(this,void 0,void 0,(function(){var n,i,o,a,s,u,c,l,h;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:n=y(e),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return rr.forEach(t,(function(t){return rr.forEach(t.bn,(function(r){return n.persistence.referenceDelegate.addReference(e,t.targetId,r)})).next((function(){return rr.forEach(t.vn,(function(r){return n.persistence.referenceDelegate.removeReference(e,t.targetId,r)}))}))}))}))];case 2:return r.sent(),[3,4];case 3:if(!ur(i=r.sent()))throw i;return f("LocalStore","Failed to update sequence numbers: "+i),[3,4];case 4:for(o=0,a=t;o<a.length;o++)s=a[o],u=s.targetId,s.fromCache||(c=n.kn.get(u),l=c.snapshotVersion,h=c.withLastLimboFreeSnapshotVersion(l),n.kn=n.kn.insert(u,h));return[2]}}))}))}(i.localStore,a)];case 2:u.sent(),u.label=3;case 3:return[2]}}))}))}function Pa(e,t){return(0,r.__awaiter)(this,void 0,void 0,(function(){var n,i;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return(n=y(e)).currentUser.isEqual(t)?[3,3]:(f("SyncEngine","User change. New user:",t.toKey()),[4,Ti(n.localStore,t)]);case 1:return i=r.sent(),n.currentUser=t,function(e,t){e.ko.forEach((function(e){e.forEach((function(e){e.reject(new c(u.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.ko.clear()}(n),n.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),[4,Ra(n,i.Ln)];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))}function Oa(e,t){var n=y(e),r=n.Co.get(t);if(r&&r.bo)return Vt().add(r.key);var i=Vt(),o=n.Vo.get(t);if(!o)return i;for(var a=0,s=o;a<s.length;a++){var u=s[a],c=n.Po.get(u);i=i.unionWith(c.view.wo)}return i}function Da(e,t){return(0,r.__awaiter)(this,void 0,void 0,(function(){var n,i,o;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return[4,Ri((n=y(e)).localStore,t.query,!0)];case 1:return i=r.sent(),o=t.view.Ao(i),[2,(n.isPrimaryClient&&Aa(n,t.targetId,o.To),o)]}}))}))}function Ma(e){return(0,r.__awaiter)(this,void 0,void 0,(function(){var t;return(0,r.__generator)(this,(function(n){return[2,Oi((t=y(e)).localStore).then((function(e){return Ra(t,e)}))]}))}))}function La(e,t,n,i){return(0,r.__awaiter)(this,void 0,void 0,(function(){var o,a;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return[4,function(e,t){var n=y(e),r=y(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.jt(e,t).next((function(t){return t?n.Mn.pn(e,t):rr.resolve(null)}))}))}((o=y(e)).localStore,t)];case 1:return null===(a=r.sent())?[3,6]:"pending"!==n?[3,3]:[4,Mo(o.remoteStore)];case 2:return r.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(ka(o,t,i||null),Ea(o,t),function(e,t){y(y(e)._n).Gt(t)}(o.localStore,t)):g(),r.label=4;case 4:return[4,Ra(o,a)];case 5:return r.sent(),[3,7];case 6:f("SyncEngine","Cannot apply mutation batch with id: "+t),r.label=7;case 7:return[2]}}))}))}function Fa(e,t){return(0,r.__awaiter)(this,void 0,void 0,(function(){var n,i,o,a,s,u,c,l;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return Ka(n=y(e)),Wa(n),!0!==t||!0===n.$o?[3,3]:(i=n.sharedClientState.getAllActiveQueryTargets(),[4,ja(n,i.toArray())]);case 1:return o=r.sent(),n.$o=!0,[4,Bo(n.remoteStore,!0)];case 2:for(r.sent(),a=0,s=o;a<s.length;a++)u=s[a],Io(n.remoteStore,u);return[3,7];case 3:return!1!==t||!1===n.$o?[3,7]:(c=[],l=Promise.resolve(),n.Vo.forEach((function(e,t){n.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return Sa(n,t),xi(n.localStore,t,!0)})),To(n.remoteStore,t)})),[4,l]);case 4:return r.sent(),[4,ja(n,c)];case 5:return r.sent(),function(e){var t=y(e);t.Co.forEach((function(e,n){To(t.remoteStore,n)})),t.No.ts(),t.Co=new Map,t.Do=new Nt(H.comparator)}(n),n.$o=!1,[4,Bo(n.remoteStore,!1)];case 6:r.sent(),r.label=7;case 7:return[2]}}))}))}function ja(e,t,n){return(0,r.__awaiter)(this,void 0,void 0,(function(){var n,i,o,a,s,u,c,l,h,f,d,p,v,g;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:n=y(e),i=[],o=[],a=0,s=t,r.label=1;case 1:return a<s.length?(u=s[a],c=void 0,(l=n.Vo.get(u))&&0!==l.length?[4,Ni(n.localStore,je(l[0]))]:[3,7]):[3,13];case 2:c=r.sent(),h=0,f=l,r.label=3;case 3:return h<f.length?(d=f[h],p=n.Po.get(d),[4,Da(n,p)]):[3,6];case 4:(v=r.sent()).snapshot&&o.push(v.snapshot),r.label=5;case 5:return h++,[3,3];case 6:return[3,11];case 7:return[4,Pi(n.localStore,u)];case 8:return g=r.sent(),[4,Ni(n.localStore,g)];case 9:return c=r.sent(),[4,va(n,Ua(g),u,!1)];case 10:r.sent(),r.label=11;case 11:i.push(c),r.label=12;case 12:return a++,[3,1];case 13:return[2,(n.vo._r(o),i)]}}))}))}function Ua(e){return xe(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function qa(e){var t=y(e);return y(y(t.localStore).persistence).fn()}function Va(e,t,n,i){return(0,r.__awaiter)(this,void 0,void 0,(function(){var o,a,s;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return(o=y(e)).$o?(f("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!o.Vo.has(t))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Oi(o.localStore)];case 3:return a=r.sent(),s=Wt.createSynthesizedRemoteEventForCurrentChange(t,"current"===n),[4,Ra(o,a,s)];case 4:return r.sent(),[3,8];case 5:return[4,xi(o.localStore,t,!0)];case 6:return r.sent(),Sa(o,t,i),[3,8];case 7:g(),r.label=8;case 8:return[2]}}))}))}function Ba(e,t,n){return(0,r.__awaiter)(this,void 0,void 0,(function(){var i,o,a,s,u,c,l,h,d,p;return(0,r.__generator)(this,(function(v){switch(v.label){case 0:if(!(i=Ka(e)).$o)return[3,10];o=0,a=t,v.label=1;case 1:return o<a.length?(s=a[o],i.Vo.has(s)?(f("SyncEngine","Adding an already active target "+s),[3,5]):[4,Pi(i.localStore,s)]):[3,6];case 2:return u=v.sent(),[4,Ni(i.localStore,u)];case 3:return c=v.sent(),[4,va(i,Ua(u),c.targetId,!1)];case 4:v.sent(),Io(i.remoteStore,c),v.label=5;case 5:return o++,[3,1];case 6:l=function(e){return(0,r.__generator)(this,(function(t){switch(t.label){case 0:return i.Vo.has(e)?[4,xi(i.localStore,e,!1).then((function(){To(i.remoteStore,e),Sa(i,e)})).catch(Yr)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))},h=0,d=n,v.label=7;case 7:return h<d.length?(p=d[h],[5,l(p)]):[3,10];case 8:v.sent(),v.label=9;case 9:return h++,[3,7];case 10:return[2]}}))}))}function Ka(e){var t=y(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=ya.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Oa.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=ba.bind(null,t),t.vo._r=ea.bind(null,t.eventManager),t.vo.Mo=ta.bind(null,t.eventManager),t}function Wa(e){var t=y(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=wa.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Ia.bind(null,t),t}function Ha(e,t,n){var i=y(e);(function(e,t,n){return(0,r.__awaiter)(this,void 0,void 0,(function(){var i,o,a,s,u,c;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,14,,15]),[4,t.getMetadata()];case 1:return i=r.sent(),[4,function(e,t){var n=y(e),r=an(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.Ke.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(e.localStore,i)];case 2:return r.sent()?[4,t.close()]:[3,4];case 3:return[2,(r.sent(),void n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)))];case 4:return n._updateProgress(sa(i)),o=new aa(i,e.localStore,t.R),[4,t.Lo()];case 5:a=r.sent(),r.label=6;case 6:return a?[4,o.oo(a)]:[3,10];case 7:return(s=r.sent())&&n._updateProgress(s),[4,t.Lo()];case 8:a=r.sent(),r.label=9;case 9:return[3,6];case 10:return[4,o.complete()];case 11:return u=r.sent(),[4,Ra(e,u.wn,void 0)];case 12:return r.sent(),[4,function(e,t){var n=y(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.Ke.saveBundleMetadata(e,t)}))}(e.localStore,i)];case 13:return r.sent(),n._completeWith(u.progress),[3,15];case 14:return p("SyncEngine","Loading bundle failed with "+(c=r.sent())),n._failWith(c),[3,15];case 15:return[2]}}))}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */)(i,t,n).then((function(){i.sharedClientState.notifyBundleLoaded()}))}var Ga=function(){function e(){this.synchronizeTabs=!1}return e.prototype.initialize=function(e){return(0,r.__awaiter)(this,void 0,void 0,(function(){return(0,r.__generator)(this,(function(t){switch(t.label){case 0:return this.R=ho(e.databaseInfo.databaseId),this.sharedClientState=this.Bo(e),this.persistence=this.qo(e),[4,this.persistence.start()];case 1:return t.sent(),this.gcScheduler=this.Uo(e),this.localStore=this.Ko(e),[2]}}))}))},e.prototype.Uo=function(e){return null},e.prototype.Ko=function(e){return Ii(this.persistence,new bi,e.initialUser,this.R)},e.prototype.qo=function(e){return new Wi(Gi.bs,this.R)},e.prototype.Bo=function(e){return new ro},e.prototype.terminate=function(){return(0,r.__awaiter)(this,void 0,void 0,(function(){return(0,r.__generator)(this,(function(e){switch(e.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return e.sent(),[4,this.persistence.shutdown()];case 2:return e.sent(),[2]}}))}))},e}(),za=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).Qo=t,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return(0,r.__extends)(t,e),t.prototype.initialize=function(t){return(0,r.__awaiter)(this,void 0,void 0,(function(){var n=this;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return[4,e.prototype.initialize.call(this,t)];case 1:return r.sent(),[4,Di(this.localStore)];case 2:return r.sent(),[4,this.Qo.initialize(this,t)];case 3:return r.sent(),[4,Wa(this.Qo.syncEngine)];case 4:return r.sent(),[4,Mo(this.Qo.remoteStore)];case 5:return r.sent(),[4,this.persistence.He((function(){return n.gcScheduler&&!n.gcScheduler.started&&n.gcScheduler.start(n.localStore),Promise.resolve()}))];case 6:return r.sent(),[2]}}))}))},t.prototype.Ko=function(e){return Ii(this.persistence,new bi,e.initialUser,this.R)},t.prototype.Uo=function(e){var t=this.persistence.referenceDelegate.garbageCollector;return new Zr(t,e.asyncQueue)},t.prototype.qo=function(e){var t=gi(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Fr.withCacheSize(this.cacheSizeBytes):Fr.DEFAULT;return new di(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,co(),lo(),this.R,this.sharedClientState,!!this.forceOwnership)},t.prototype.Bo=function(e){return new ro},t}(Ga),Qa=function(e){function t(t,n){var r=this;return(r=e.call(this,t,n,!1)||this).Qo=t,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return(0,r.__extends)(t,e),t.prototype.initialize=function(t){return(0,r.__awaiter)(this,void 0,void 0,(function(){var n,i=this;return(0,r.__generator)(this,(function(o){switch(o.label){case 0:return[4,e.prototype.initialize.call(this,t)];case 1:return o.sent(),n=this.Qo.syncEngine,this.sharedClientState instanceof no?(this.sharedClientState.syncEngine={ui:La.bind(null,n),ai:Va.bind(null,n),hi:Ba.bind(null,n),fn:qa.bind(null,n),ci:Ma.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:o.sent(),o.label=3;case 3:return[4,this.persistence.He((function(e){return(0,r.__awaiter)(i,void 0,void 0,(function(){return(0,r.__generator)(this,(function(t){switch(t.label){case 0:return[4,Fa(this.Qo.syncEngine,e)];case 1:return t.sent(),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):e||this.gcScheduler.stop()),[2]}}))}))}))];case 4:return o.sent(),[2]}}))}))},t.prototype.Bo=function(e){var t=co();if(!no.yt(t))throw new c(u.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=gi(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new no(t,e.asyncQueue,n,e.clientId,e.initialUser)},t}(za),$a=function(){function e(){}return e.prototype.initialize=function(e,t){return(0,r.__awaiter)(this,void 0,void 0,(function(){var n=this;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return _a(n.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Pa.bind(null,this.syncEngine),[4,Bo(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},e.prototype.createEventManager=function(e){return new Xo},e.prototype.createDatastore=function(e){var t,n=ho(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new uo(t));return function(e,t,n){return new mo(e,t,n)}(e.credentials,r,n)},e.prototype.createRemoteStore=function(e){var t,n,r,i,o,a=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return _a(a.syncEngine,e,0)},o=oo.yt()?new oo:new io,new _o(t,n,r,i,o)},e.prototype.createSyncEngine=function(e,t){return function(e,t,n,r,i,o,a){var s=new da(e,t,n,r,i,o);return a&&(s.$o=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)},e.prototype.terminate=function(){return function(e){return(0,r.__awaiter)(this,void 0,void 0,(function(){var t;return(0,r.__generator)(this,(function(n){switch(n.label){case 0:return t=y(e),f("RemoteStore","RemoteStore shutting down."),t.Or.add(5),[4,wo(t)];case 1:return n.sent(),t.Lr.shutdown(),t.Br.set("Unknown"),[2]}}))}))}(this.remoteStore)},e}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ya(e,t){void 0===t&&(t=10240);var n=0;return{read:function(){return(0,r.__awaiter)(this,void 0,void 0,(function(){var i;return(0,r.__generator)(this,(function(r){return n<e.byteLength?(i={value:e.slice(n,n+t),done:!1},[2,(n+=t,i)]):[2,{done:!0}]}))}))},cancel:function(){return(0,r.__awaiter)(this,void 0,void 0,(function(){return(0,r.__generator)(this,(function(e){return[2]}))}))},releaseLock:function(){},closed:Promise.reject("unimplemented")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xa=function(){function e(e){this.observer=e,this.muted=!1}return e.prototype.next=function(e){this.observer.next&&this.jo(this.observer.next,e)},e.prototype.error=function(e){this.observer.error?this.jo(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)},e.prototype.Wo=function(){this.muted=!0},e.prototype.jo=function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)},e}(),Ja=function(){function e(e,t){var n=this;this.Go=e,this.R=t,this.metadata=new nr,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then((function(e){e&&e.io()?n.metadata.resolve(e.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==e?void 0:e.payload)))}),(function(e){return n.metadata.reject(e)}))}return e.prototype.close=function(){return this.Go.cancel()},e.prototype.getMetadata=function(){return(0,r.__awaiter)(this,void 0,void 0,(function(){return(0,r.__generator)(this,(function(e){return[2,this.metadata.promise]}))}))},e.prototype.Lo=function(){return(0,r.__awaiter)(this,void 0,void 0,(function(){return(0,r.__generator)(this,(function(e){switch(e.label){case 0:return[4,this.getMetadata()];case 1:return[2,(e.sent(),this.Ho())]}}))}))},e.prototype.Ho=function(){return(0,r.__awaiter)(this,void 0,void 0,(function(){var e,t,n,i;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return[4,this.Jo()];case 1:return null===(e=r.sent())?[2,null]:(t=this.zo.decode(e),n=Number(t),isNaN(n)&&this.Yo("length string ("+t+") is not valid number"),[4,this.Xo(n)]);case 2:return i=r.sent(),[2,new ia(JSON.parse(i),e.length+n)]}}))}))},e.prototype.Zo=function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))},e.prototype.Jo=function(){return(0,r.__awaiter)(this,void 0,void 0,(function(){var e,t;return(0,r.__generator)(this,(function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((e=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),t=this.buffer.slice(0,e),[2,(this.buffer=this.buffer.slice(e),t)])}}))}))},e.prototype.Xo=function(e){return(0,r.__awaiter)(this,void 0,void 0,(function(){var t;return(0,r.__generator)(this,(function(n){switch(n.label){case 0:return this.buffer.length<e?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return t=this.zo.decode(this.buffer.slice(0,e)),[2,(this.buffer=this.buffer.slice(e),t)]}}))}))},e.prototype.Yo=function(e){throw this.Go.cancel(),new Error("Invalid bundle format: "+e)},e.prototype.tc=function(){return(0,r.__awaiter)(this,void 0,void 0,(function(){var e,t;return(0,r.__generator)(this,(function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(e=n.sent()).done||((t=new Uint8Array(this.buffer.length+e.value.length)).set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t),[2,e.done]}}))}))},e}(),Za=function(){function e(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return e.prototype.lookup=function(e){return(0,r.__awaiter)(this,void 0,void 0,(function(){var t,n=this;return(0,r.__generator)(this,(function(i){switch(i.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new c(u.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(e,t){return(0,r.__awaiter)(this,void 0,void 0,(function(){var n,i,o,a,s,u;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return n=y(e),i=dn(n.R)+"/documents",o={documents:t.map((function(e){return cn(n.R,e)}))},[4,n.$i("BatchGetDocuments",i,o)];case 1:return a=r.sent(),s=new Map,a.forEach((function(e){var t=function(e,t){return"found"in t?function(e,t){m(!!t.found),t.found.name,t.found.updateTime;var n=ln(e,t.found.name),r=an(t.found.updateTime),i=new ae({mapValue:{fields:t.found.fields}});return ue.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){m(!!t.missing),m(!!t.readTime);var n=ln(e,t.missing),r=an(t.readTime);return ue.newNoDocument(n,r)}(e,t):g()}(n.R,e);s.set(t.key.toString(),t)})),u=[],[2,(t.forEach((function(e){var t=s.get(e.toString());m(!!t),u.push(t)})),u)]}}))}))}(this.datastore,e)];case 1:return[2,((t=i.sent()).forEach((function(e){return n.recordVersion(e)})),t)]}}))}))},e.prototype.set=function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())},e.prototype.update=function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())},e.prototype.delete=function(e){this.write(new Et(e,this.precondition(e))),this.writtenDocs.add(e.toString())},e.prototype.commit=function(){return(0,r.__awaiter)(this,void 0,void 0,(function(){var e,t=this;return(0,r.__generator)(this,(function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return e=this.readVersions,this.mutations.forEach((function(t){e.delete(t.key.toString())})),e.forEach((function(e,n){var r=H.fromPath(n);t.mutations.push(new kt(r,t.precondition(r)))})),[4,function(e,t){return(0,r.__awaiter)(this,void 0,void 0,(function(){var n,i,o;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return n=y(e),i=dn(n.R)+"/documents",o={writes:t.map((function(e){return mn(n.R,e)}))},[4,n.Ni("Commit",i,o)];case 1:return r.sent(),[2]}}))}))}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}}))}))},e.prototype.recordVersion=function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw g();t=k.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new c(u.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)},e.prototype.precondition=function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?ct.updateTime(t):ct.none()},e.prototype.preconditionForUpdate=function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(k.min()))throw new c(u.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ct.updateTime(t)}return ct.exists(!0)},e.prototype.write=function(e){this.ensureCommitNotCalled(),this.mutations.push(e)},e.prototype.ensureCommitNotCalled=function(){},e}(),es=function(){function e(e,t,n,r){this.asyncQueue=e,this.datastore=t,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new fo(this.asyncQueue,"transaction_retry")}return e.prototype.run=function(){this.ec-=1,this.nc()},e.prototype.nc=function(){var e=this;this.Zi.ji((function(){return(0,r.__awaiter)(e,void 0,void 0,(function(){var e,t,n=this;return(0,r.__generator)(this,(function(r){return e=new Za(this.datastore),(t=this.sc(e))&&t.then((function(t){n.asyncQueue.enqueueAndForget((function(){return e.commit().then((function(){n.deferred.resolve(t)})).catch((function(e){n.ic(e)}))}))})).catch((function(e){n.ic(e)})),[2]}))}))}))},e.prototype.sc=function(e){try{var t=this.updateFunction(e);return!B(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}},e.prototype.ic=function(e){var t=this;this.ec>0&&this.rc(e)?(this.ec-=1,this.asyncQueue.enqueueAndForget((function(){return t.nc(),Promise.resolve()}))):this.deferred.reject(e)},e.prototype.rc=function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!Ct(t)}return!1},e}(),ts=function(){function e(e,t,n){var i=this;this.credentials=e,this.asyncQueue=t,this.databaseInfo=n,this.user=zi.UNAUTHENTICATED,this.clientId=b.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(t,(function(e){return(0,r.__awaiter)(i,void 0,void 0,(function(){return(0,r.__generator)(this,(function(t){switch(t.label){case 0:return f("FirestoreClient","Received user=",e.uid),[4,this.credentialListener(e)];case 1:return t.sent(),this.user=e,[2]}}))}))}))}return e.prototype.getConfiguration=function(){return(0,r.__awaiter)(this,void 0,void 0,(function(){return(0,r.__generator)(this,(function(e){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]}))}))},e.prototype.setCredentialChangeListener=function(e){this.credentialListener=e},e.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new c(u.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.terminate=function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new nr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((function(){return(0,r.__awaiter)(e,void 0,void 0,(function(){var e,n;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),t.resolve(),[3,6];case 5:return e=r.sent(),n=Go(e,"Failed to shutdown persistence"),t.reject(n),[3,6];case 6:return[2]}}))}))})),t.promise},e}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ns(e,t){return(0,r.__awaiter)(this,void 0,void 0,(function(){var n,i,o=this;return(0,r.__generator)(this,(function(a){switch(a.label){case 0:return e.asyncQueue.verifyOperationInProgress(),f("FirestoreClient","Initializing OfflineComponentProvider"),[4,e.getConfiguration()];case 1:return n=a.sent(),[4,t.initialize(n)];case 2:return a.sent(),i=n.initialUser,e.setCredentialChangeListener((function(e){return(0,r.__awaiter)(o,void 0,void 0,(function(){return(0,r.__generator)(this,(function(n){switch(n.label){case 0:return i.isEqual(e)?[3,2]:[4,Ti(t.localStore,e)];case 1:n.sent(),i=e,n.label=2;case 2:return[2]}}))}))})),t.persistence.setDatabaseDeletedListener((function(){return e.terminate()})),e.offlineComponents=t,[2]}}))}))}function rs(e,t){return(0,r.__awaiter)(this,void 0,void 0,(function(){var n,i;return(0,r.__generator)(this,(function(o){switch(o.label){case 0:return e.asyncQueue.verifyOperationInProgress(),[4,is(e)];case 1:return n=o.sent(),f("FirestoreClient","Initializing OnlineComponentProvider"),[4,e.getConfiguration()];case 2:return i=o.sent(),[4,t.initialize(n,i)];case 3:return o.sent(),e.setCredentialChangeListener((function(e){return function(e,t){return(0,r.__awaiter)(this,void 0,void 0,(function(){var n,i;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return(n=y(e)).asyncQueue.verifyOperationInProgress(),f("RemoteStore","RemoteStore received new credentials"),i=Ao(n),n.Or.add(3),[4,wo(n)];case 1:return r.sent(),i&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(t)];case 2:return r.sent(),n.Or.delete(3),[4,bo(n)];case 3:return r.sent(),[2]}}))}))}(t.remoteStore,e)})),e.onlineComponents=t,[2]}}))}))}function is(e){return(0,r.__awaiter)(this,void 0,void 0,(function(){return(0,r.__generator)(this,(function(t){switch(t.label){case 0:return e.offlineComponents?[3,2]:(f("FirestoreClient","Using default OfflineComponentProvider"),[4,ns(e,new Ga)]);case 1:t.sent(),t.label=2;case 2:return[2,e.offlineComponents]}}))}))}function os(e){return(0,r.__awaiter)(this,void 0,void 0,(function(){return(0,r.__generator)(this,(function(t){switch(t.label){case 0:return e.onlineComponents?[3,2]:(f("FirestoreClient","Using default OnlineComponentProvider"),[4,rs(e,new $a)]);case 1:t.sent(),t.label=2;case 2:return[2,e.onlineComponents]}}))}))}function as(e){return is(e).then((function(e){return e.persistence}))}function ss(e){return is(e).then((function(e){return e.localStore}))}function us(e){return os(e).then((function(e){return e.remoteStore}))}function cs(e){return os(e).then((function(e){return e.syncEngine}))}function ls(e){return(0,r.__awaiter)(this,void 0,void 0,(function(){var t,n;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return[4,os(e)];case 1:return t=r.sent(),[2,((n=t.eventManager).onListen=pa.bind(null,t.syncEngine),n.onUnlisten=ga.bind(null,t.syncEngine),n)]}}))}))}function hs(e,t,n){var i=this;void 0===n&&(n={});var o=new nr;return e.asyncQueue.enqueueAndForget((function(){return(0,r.__awaiter)(i,void 0,void 0,(function(){var i;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return i=function(e,t,n,r,i){var o=new Xa({next:function(o){t.enqueueAndForget((function(){return Zo(e,a)}));var s=o.docs.has(n);!s&&o.fromCache?i.reject(new c(u.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&o.fromCache&&r&&"server"===r.source?i.reject(new c(u.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(e){return i.reject(e)}}),a=new ra(Re(n.path),o,{includeMetadataChanges:!0,so:!0});return Jo(e,a)},[4,ls(e)];case 1:return[2,i.apply(void 0,[r.sent(),e.asyncQueue,t,n,o])]}}))}))})),o.promise}function fs(e,t,n){var i=this;void 0===n&&(n={});var o=new nr;return e.asyncQueue.enqueueAndForget((function(){return(0,r.__awaiter)(i,void 0,void 0,(function(){var i;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return i=function(e,t,n,r,i){var o=new Xa({next:function(n){t.enqueueAndForget((function(){return Zo(e,a)})),n.fromCache&&"server"===r.source?i.reject(new c(u.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),a=new ra(n,o,{includeMetadataChanges:!0,so:!0});return Jo(e,a)},[4,ls(e)];case 1:return[2,i.apply(void 0,[r.sent(),e.asyncQueue,t,n,o])]}}))}))})),o.promise}var ds=function(e,t,n,r,i,o,a,s){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=s},ps=function(){function e(e,t){this.projectId=e,this.database=t||"(default)"}return Object.defineProperty(e.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database},e}(),vs=new Map,gs=function(e,t){this.user=t,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+e},ms=function(){function e(){this.changeListener=null}return e.prototype.getToken=function(){return Promise.resolve(null)},e.prototype.invalidateToken=function(){},e.prototype.setChangeListener=function(e,t){this.changeListener=t,e.enqueueRetryable((function(){return t(zi.UNAUTHENTICATED)}))},e.prototype.removeChangeListener=function(){this.changeListener=null},e}(),ys=function(){function e(e){this.token=e,this.changeListener=null}return e.prototype.getToken=function(){return Promise.resolve(this.token)},e.prototype.invalidateToken=function(){},e.prototype.setChangeListener=function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))},e.prototype.removeChangeListener=function(){this.changeListener=null},e}(),_s=function(){function e(e){var t=this;this.currentUser=zi.UNAUTHENTICATED,this.oc=new nr,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){t.cc++,t.currentUser=t.ac(),t.oc.resolve(),t.changeListener&&t.asyncQueue.enqueueRetryable((function(){return t.changeListener(t.currentUser)}))};var n=function(e){f("FirebaseCredentialsProvider","Auth detected"),t.auth=e,t.auth.addAuthTokenListener(t.uc)};e.onInit((function(e){return n(e)})),setTimeout((function(){if(!t.auth){var r=e.getImmediate({optional:!0});r?n(r):(f("FirebaseCredentialsProvider","Auth not yet detected"),t.oc.resolve())}}),0)}return e.prototype.getToken=function(){var e=this,t=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.cc!==t?(f("FirebaseCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(m("string"==typeof n.accessToken),new gs(n.accessToken,e.currentUser)):null})):Promise.resolve(null)},e.prototype.invalidateToken=function(){this.forceRefresh=!0},e.prototype.setChangeListener=function(e,t){var n=this;this.asyncQueue=e,this.asyncQueue.enqueueRetryable((function(){return(0,r.__awaiter)(n,void 0,void 0,(function(){return(0,r.__generator)(this,(function(e){switch(e.label){case 0:return[4,this.oc.promise];case 1:return e.sent(),[4,t(this.currentUser)];case 2:return e.sent(),this.changeListener=t,[2]}}))}))}))},e.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},e.prototype.ac=function(){var e=this.auth&&this.auth.getUid();return m(null===e||"string"==typeof e),new zi(e)},e}(),bs=function(){function e(e,t,n){this.hc=e,this.lc=t,this.fc=n,this.type="FirstParty",this.user=zi.FIRST_PARTY}return Object.defineProperty(e.prototype,"authHeaders",{get:function(){var e={"X-Goog-AuthUser":this.lc},t=this.hc.auth.getAuthHeaderValueForFirstParty([]);return t&&(e.Authorization=t),this.fc&&(e["X-Goog-Iam-Authorization-Token"]=this.fc),e},enumerable:!1,configurable:!0}),e}(),ws=function(){function e(e,t,n){this.hc=e,this.lc=t,this.fc=n}return e.prototype.getToken=function(){return Promise.resolve(new bs(this.hc,this.lc,this.fc))},e.prototype.setChangeListener=function(e,t){e.enqueueRetryable((function(){return t(zi.FIRST_PARTY)}))},e.prototype.removeChangeListener=function(){},e.prototype.invalidateToken=function(){},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Is(e,t,n){if(!n)throw new c(u.INVALID_ARGUMENT,"Function "+e+"() cannot be called with an empty "+t+".")}function Ts(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new c(u.INVALID_ARGUMENT,"Invalid options passed to function "+e+'(): You cannot specify both "merge" and "mergeFields".');return t}function Es(e,t,n,r){if(!0===t&&!0===r)throw new c(u.INVALID_ARGUMENT,e+" and "+n+" cannot be used together.")}function ks(e){if(!H.isDocumentKey(e))throw new c(u.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e+" has "+e.length+".")}function Ss(e){if(H.isDocumentKey(e))throw new c(u.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e+" has "+e.length+".")}function Cs(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){if(e.constructor){var t=/function\s+([^\s(]+)\s*\(/.exec(e.constructor.toString());if(t&&t.length>1)return t[1]}return null}(e);return t?"a custom "+t+" object":"an object"}return"function"==typeof e?"a function":g()}function As(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new c(u.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Cs(e);throw new c(u.INVALID_ARGUMENT,"Expected type '"+t.name+"', but it was: "+n)}return e}function Ns(e,t){if(t<=0)throw new c(u.INVALID_ARGUMENT,"Function "+e+"() requires a positive number, but it was: "+t+".")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xs=function(){function e(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new c(u.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new c(u.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Es("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}return e.prototype.isEqual=function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams},e}(),Rs=function(){function e(e,t){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new xs({}),this._settingsFrozen=!1,e instanceof ps?(this._databaseId=e,this._credentials=new ms):(this._app=e,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new c(u.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ps(e.options.projectId)}(e),this._credentials=new _s(t))}return Object.defineProperty(e.prototype,"app",{get:function(){if(!this._app)throw new c(u.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),e.prototype._setSettings=function(e){if(this._settingsFrozen)throw new c(u.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new xs(e),void 0!==e.credentials&&(this._credentials=function(e){if(!e)return new ms;switch(e.type){case"gapi":var t=e.client;return m(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new ws(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new c(u.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))},e.prototype._getSettings=function(){return this._settings},e.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},e.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},e.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},e.prototype._terminate=function(){return e=this,(t=vs.get(e))&&(f("ComponentProvider","Removing Datastore"),vs.delete(e),t.terminate()),Promise.resolve();var e,t},e}(),Ps=function(){function e(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}return Object.defineProperty(e.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new Ds(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._key)},e}(),Os=function(){function e(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}return e.prototype.withConverter=function(t){return new e(this.firestore,t,this._query)},e}(),Ds=function(e){function t(t,n,r){var i=this;return(i=e.call(this,t,n,Re(r))||this)._path=r,i.type="collection",i}return(0,r.__extends)(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._path.popLast();return e.isEmpty()?null:new Ps(this.firestore,null,new H(e))},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._path)},t}(Os);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ms(e,t){for(var n,o=[],a=2;a<arguments.length;a++)o[a-2]=arguments[a];if(e=(0,i.getModularInstance)(e),Is("collection","path",t),e instanceof Rs)return Ss(n=x.fromString.apply(x,(0,r.__spreadArray)([t],o))),new Ds(e,null,n);if(!(e instanceof Ps||e instanceof Ds))throw new c(u.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Ss(n=x.fromString.apply(x,(0,r.__spreadArray)([e.path],o)).child(x.fromString(t))),new Ds(e.firestore,null,n)}function Ls(e,t){for(var n,o=[],a=2;a<arguments.length;a++)o[a-2]=arguments[a];if(e=(0,i.getModularInstance)(e),1===arguments.length&&(t=b.u()),Is("doc","path",t),e instanceof Rs)return ks(n=x.fromString.apply(x,(0,r.__spreadArray)([t],o))),new Ps(e,null,new H(n));if(!(e instanceof Ps||e instanceof Ds))throw new c(u.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return ks(n=e._path.child(x.fromString.apply(x,(0,r.__spreadArray)([t],o)))),new Ps(e.firestore,e instanceof Ds?e.converter:null,new H(n))}function Fs(e,t){return e=(0,i.getModularInstance)(e),t=(0,i.getModularInstance)(t),(e instanceof Ps||e instanceof Ds)&&(t instanceof Ps||t instanceof Ds)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function js(e,t){return e=(0,i.getModularInstance)(e),t=(0,i.getModularInstance)(t),e instanceof Os&&t instanceof Os&&e.firestore===t.firestore&&qe(e._query,t._query)&&e.converter===t.converter
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var Us=function(){function e(){var e=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=!1,this.Tc=[],this.Zi=new fo(this,"async_queue_retry"),this.Ic=function(){var t=lo();t&&f("AsyncQueue","Visibility state changed to "+t.visibilityState),e.Zi.Gi()};var t=lo();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Ic)}return Object.defineProperty(e.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),e.prototype.enqueueAndForget=function(e){this.enqueue(e)},e.prototype.enqueueAndForgetEvenWhileRestricted=function(e){this.Ac(),this.Rc(e)},e.prototype.enterRestrictedMode=function(e){if(!this._c){this._c=!0,this.Ec=e||!1;var t=lo();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ic)}},e.prototype.enqueue=function(e){var t=this;if(this.Ac(),this._c)return new Promise((function(){}));var n=new nr;return this.Rc((function(){return t._c&&t.Ec?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))},e.prototype.enqueueRetryable=function(e){var t=this;this.enqueueAndForget((function(){return t.wc.push(e),t.bc()}))},e.prototype.bc=function(){return(0,r.__awaiter)(this,void 0,void 0,(function(){var e,t=this;return(0,r.__generator)(this,(function(n){switch(n.label){case 0:if(0===this.wc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return n.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!ur(e=n.sent()))throw e;return f("AsyncQueue","Operation failed with retryable error: "+e),[3,4];case 4:this.wc.length>0&&this.Zi.ji((function(){return t.bc()})),n.label=5;case 5:return[2]}}))}))},e.prototype.Rc=function(e){var t=this,n=this.dc.then((function(){return t.gc=!0,e().catch((function(e){throw t.yc=e,t.gc=!1,d("INTERNAL UNHANDLED ERROR: ",function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e)),e})).then((function(e){return t.gc=!1,e}))}));return this.dc=n,n},e.prototype.enqueueAfterDelay=function(e,t,n){var r=this;this.Ac(),this.Tc.indexOf(e)>-1&&(t=0);var i=Ho.createAndSchedule(this,e,t,n,(function(e){return r.vc(e)}));return this.mc.push(i),i},e.prototype.Ac=function(){this.yc&&g()},e.prototype.verifyOperationInProgress=function(){},e.prototype.Pc=function(){return(0,r.__awaiter)(this,void 0,void 0,(function(){var e;return(0,r.__generator)(this,(function(t){switch(t.label){case 0:return[4,e=this.dc];case 1:t.sent(),t.label=2;case 2:if(e!==this.dc)return[3,0];t.label=3;case 3:return[2]}}))}))},e.prototype.Vc=function(e){for(var t=0,n=this.mc;t<n.length;t++)if(n[t].timerId===e)return!0;return!1},e.prototype.Sc=function(e){var t=this;return this.Pc().then((function(){t.mc.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));for(var n=0,r=t.mc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==e&&i.timerId===e)break}return t.Pc()}))},e.prototype.Dc=function(e){this.Tc.push(e)},e.prototype.vc=function(e){var t=this.mc.indexOf(e);this.mc.splice(t,1)},e}();function qs(e){return function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=e,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(e)}var Vs=function(){function e(){this._progressObserver={},this._taskCompletionResolver=new nr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return e.prototype.onProgress=function(e,t,n){this._progressObserver={next:e,error:t,complete:n}},e.prototype.catch=function(e){return this._taskCompletionResolver.promise.catch(e)},e.prototype.then=function(e,t){return this._taskCompletionResolver.promise.then(e,t)},e.prototype._completeWith=function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)},e.prototype._failWith=function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)},e.prototype._updateProgress=function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)},e}(),Bs=-1,Ks=function(e){function t(t,n){var r=this;return(r=e.call(this,t,n)||this).type="firestore",r._queue=new Us,r._persistenceKey="name"in t?t.name:"[DEFAULT]",r}return(0,r.__extends)(t,e),t.prototype._terminate=function(){return this._firestoreClient||Hs(this),this._firestoreClient.terminate()},t}(Rs);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ws(e){return e._firestoreClient||Hs(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Hs(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new ds(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new ts(e._credentials,e._queue,r)}function Gs(e,t,n){var i=this,o=new nr;return e.asyncQueue.enqueue((function(){return(0,r.__awaiter)(i,void 0,void 0,(function(){var i;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),[4,ns(e,n)];case 1:return r.sent(),[4,rs(e,t)];case 2:return r.sent(),o.resolve(),[3,4];case 3:if(!function(e){return"FirebaseError"===e.name?e.code===u.FAILED_PRECONDITION||e.code===u.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(i=r.sent()))throw i;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),o.reject(i),[3,4];case 4:return[2]}}))}))})).then((function(){return o.promise}))}function zs(e){if(e._initialized||e._terminated)throw new c(u.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qs=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=0;n<e.length;++n)if(0===e[n].length)throw new c(u.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new P(e)}return e.prototype.isEqual=function(e){return this._internalPath.isEqual(e._internalPath)},e}(),$s=function(){function e(e){this._byteString=e}return e.fromBase64String=function(t){try{return new e(D.fromBase64String(t))}catch(t){throw new c(u.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}},e.fromUint8Array=function(t){return new e(D.fromUint8Array(t))},e.prototype.toBase64=function(){return this._byteString.toBase64()},e.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},e.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},e.prototype.isEqual=function(e){return this._byteString.isEqual(e._byteString)},e}(),Ys=function(e){this._methodName=e},Xs=function(){function e(e,t){if(!isFinite(e)||e<-90||e>90)throw new c(u.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new c(u.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}return Object.defineProperty(e.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(e){return this._lat===e._lat&&this._long===e._long},e.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},e.prototype._compareTo=function(e){return w(this._lat,e._lat)||w(this._long,e._long)},e}(),Js=/^__.*__$/,Zs=function(){function e(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}return e.prototype.toMutation=function(e,t){return null!==this.fieldMask?new yt(e,this.data,this.fieldMask,t,this.fieldTransforms):new mt(e,this.data,t,this.fieldTransforms)},e}(),eu=function(){function e(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}return e.prototype.toMutation=function(e,t){return new yt(e,this.data,this.fieldMask,t,this.fieldTransforms)},e}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tu(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw g()}}var nu=function(){function e(e,t,n,r,i,o){this.settings=e,this.databaseId=t,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Cc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(e.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Nc",{get:function(){return this.settings.Nc},enumerable:!1,configurable:!0}),e.prototype.xc=function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},e.prototype.kc=function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.xc({path:n,Fc:!1});return r.$c(e),r},e.prototype.Oc=function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.xc({path:n,Fc:!1});return r.Cc(),r},e.prototype.Mc=function(e){return this.xc({path:void 0,Fc:!0})},e.prototype.Lc=function(e){return Iu(e,this.settings.methodName,this.settings.Bc||!1,this.path,this.settings.qc)},e.prototype.contains=function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))},e.prototype.Cc=function(){if(this.path)for(var e=0;e<this.path.length;e++)this.$c(this.path.get(e))},e.prototype.$c=function(e){if(0===e.length)throw this.Lc("Document fields must not be empty");if(tu(this.Nc)&&Js.test(e))throw this.Lc('Document fields cannot begin and end with "__"')},e}(),ru=function(){function e(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.R=n||ho(e)}return e.prototype.Uc=function(e,t,n,r){return void 0===r&&(r=!1),new nu({Nc:e,methodName:t,qc:n,path:P.emptyPath(),Fc:!1,Bc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},e}();function iu(e){var t=e._freezeSettings(),n=ho(e._databaseId);return new ru(e._databaseId,!!t.ignoreUndefinedProperties,n)}function ou(e,t,n,r,i,o){void 0===o&&(o={});var a=e.Uc(o.merge||o.mergeFields?2:0,t,n,i);yu("Data must be an object, but it was:",a,r);var s,l,h=gu(r,a);if(o.merge)s=new O(a.fieldMask),l=a.fieldTransforms;else if(o.mergeFields){for(var f=[],d=0,p=o.mergeFields;d<p.length;d++){var v=_u(t,p[d],n);if(!a.contains(v))throw new c(u.INVALID_ARGUMENT,"Field '"+v+"' is specified in your field mask but missing from your input data.");Tu(f,v)||f.push(v)}s=new O(f),l=a.fieldTransforms.filter((function(e){return s.covers(e.field)}))}else s=null,l=a.fieldTransforms;return new Zs(new ae(h),s,l)}var au=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,r.__extends)(t,e),t.prototype._toFieldTransform=function(e){if(2!==e.Nc)throw 1===e.Nc?e.Lc(this._methodName+"() can only appear at the top level of your update data"):e.Lc(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return e.fieldMask.push(e.path),null},t.prototype.isEqual=function(e){return e instanceof t},t}(Ys);function su(e,t,n){return new nu({Nc:3,qc:t.settings.qc,methodName:e._methodName,Fc:n},t.databaseId,t.R,t.ignoreUndefinedProperties)}var uu=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,r.__extends)(t,e),t.prototype._toFieldTransform=function(e){return new st(e.path,new Ze)},t.prototype.isEqual=function(e){return e instanceof t},t}(Ys),cu=function(e){function t(t,n){var r=this;return(r=e.call(this,t)||this).Kc=n,r}return(0,r.__extends)(t,e),t.prototype._toFieldTransform=function(e){var t=su(this,e,!0),n=this.Kc.map((function(e){return vu(e,t)})),r=new et(n);return new st(e.path,r)},t.prototype.isEqual=function(e){return this===e},t}(Ys),lu=function(e){function t(t,n){var r=this;return(r=e.call(this,t)||this).Kc=n,r}return(0,r.__extends)(t,e),t.prototype._toFieldTransform=function(e){var t=su(this,e,!0),n=this.Kc.map((function(e){return vu(e,t)})),r=new nt(n);return new st(e.path,r)},t.prototype.isEqual=function(e){return this===e},t}(Ys),hu=function(e){function t(t,n){var r=this;return(r=e.call(this,t)||this).Qc=n,r}return(0,r.__extends)(t,e),t.prototype._toFieldTransform=function(e){var t=new it(e.R,Qe(e.R,this.Qc));return new st(e.path,t)},t.prototype.isEqual=function(e){return this===e},t}(Ys);function fu(e,t,n,r){var o=e.Uc(1,t,n);yu("Data must be an object, but it was:",o,r);var a=[],s=ae.empty();C(r,(function(e,r){var u=wu(t,e,n);r=(0,i.getModularInstance)(r);var c=o.Oc(u);if(r instanceof au)a.push(u);else{var l=vu(r,c);null!=l&&(a.push(u),s.set(u,l))}}));var u=new O(a);return new eu(s,u,o.fieldTransforms)}function du(e,t,n,r,o,a){var s=e.Uc(1,t,n),l=[_u(t,r,n)],h=[o];if(a.length%2!=0)throw new c(u.INVALID_ARGUMENT,"Function "+t+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var f=0;f<a.length;f+=2)l.push(_u(t,a[f])),h.push(a[f+1]);for(var d=[],p=ae.empty(),v=l.length-1;v>=0;--v)if(!Tu(d,l[v])){var g=l[v],m=h[v];m=(0,i.getModularInstance)(m);var y=s.Oc(g);if(m instanceof au)d.push(g);else{var _=vu(m,y);null!=_&&(d.push(g),p.set(g,_))}}var b=new O(d);return new eu(p,b,s.fieldTransforms)}function pu(e,t,n,r){return void 0===r&&(r=!1),vu(n,e.Uc(r?4:3,t))}function vu(e,t){if(mu(e=(0,i.getModularInstance)(e)))return yu("Unsupported field value:",t,e),gu(e,t);if(e instanceof Ys)return function(e,t){if(!tu(t.Nc))throw t.Lc(e._methodName+"() can only be used with update() and set()");if(!t.path)throw t.Lc(e._methodName+"() is not currently supported inside arrays");var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Fc&&4!==t.Nc)throw t.Lc("Nested arrays are not supported");return function(e,t){for(var n=[],r=0,i=0,o=e;i<o.length;i++){var a=vu(o[i],t.Mc(r));null==a&&(a={nullValue:"NULL_VALUE"}),n.push(a),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=(0,i.getModularInstance)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Qe(t.R,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=E.fromDate(e);return{timestampValue:nn(t.R,n)}}if(e instanceof E)return n=new E(e.seconds,1e3*Math.floor(e.nanoseconds/1e3)),{timestampValue:nn(t.R,n)};if(e instanceof Xs)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof $s)return{bytesValue:rn(t.R,e._byteString)};if(e instanceof Ps){n=t.databaseId;var r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Lc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:sn(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Lc("Unsupported field value: "+Cs(e))}(e,t)}function gu(e,t){var n={};return A(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):C(e,(function(e,r){var i=vu(r,t.kc(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function mu(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof E||e instanceof Xs||e instanceof $s||e instanceof Ps||e instanceof Ys)}function yu(e,t,n){if(!mu(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=Cs(n);throw"an object"===r?t.Lc(e+" a custom object"):t.Lc(e+" "+r)}}function _u(e,t,n){if((t=(0,i.getModularInstance)(t))instanceof Qs)return t._internalPath;if("string"==typeof t)return wu(e,t);throw Iu("Field path arguments must be of type string or FieldPath.",e,!1,void 0,n)}var bu=new RegExp("[~\\*/\\[\\]]");function wu(e,t,n){if(t.search(bu)>=0)throw Iu("Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'",e,!1,void 0,n);try{return(new(Qs.bind.apply(Qs,(0,r.__spreadArray)([void 0],t.split(".")))))._internalPath}catch(i){throw Iu("Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",e,!1,void 0,n)}}function Iu(e,t,n,r,i){var o=r&&!r.isEmpty(),a=void 0!==i,s="Function "+t+"() called with invalid data";n&&(s+=" (via `toFirestore()`)");var l="";return(o||a)&&(l+=" (found",o&&(l+=" in field "+r),a&&(l+=" in document "+i),l+=")"),new c(u.INVALID_ARGUMENT,(s+=". ")+e+l)}function Tu(e,t){return e.some((function(e){return e.isEqual(t)}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Eu=function(){function e(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ref",{get:function(){return new Ps(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),e.prototype.exists=function(){return null!==this._document},e.prototype.data=function(){if(this._document){if(this._converter){var e=new ku(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}},e.prototype.get=function(e){if(this._document){var t=this._document.data.field(Su("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}},e}(),ku=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,r.__extends)(t,e),t.prototype.data=function(){return e.prototype.data.call(this)},t}(Eu);function Su(e,t){return"string"==typeof t?wu(e,t):t instanceof Qs?t._internalPath:t._delegate._internalPath}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Cu=function(){function e(e,t){this.hasPendingWrites=e,this.fromCache=t}return e.prototype.isEqual=function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache},e}(),Au=function(e){function t(t,n,r,i,o,a){var s=this;return(s=e.call(this,t,n,r,i,a)||this)._firestore=t,s._firestoreImpl=t,s.metadata=o,s}return(0,r.__extends)(t,e),t.prototype.exists=function(){return e.prototype.exists.call(this)},t.prototype.data=function(e){if(void 0===e&&(e={}),this._document){if(this._converter){var t=new Nu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}},t.prototype.get=function(e,t){if(void 0===t&&(t={}),this._document){var n=this._document.data.field(Su("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}},t}(Eu),Nu=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,r.__extends)(t,e),t.prototype.data=function(t){return void 0===t&&(t={}),e.prototype.data.call(this,t)},t}(Au),xu=function(){function e(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Cu(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(e.prototype,"docs",{get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),e.prototype.forEach=function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new Nu(n._firestore,n._userDataWriter,r.key,r,new Cu(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))},e.prototype.docChanges=function(e){void 0===e&&(e={});var t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new c(u.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new Nu(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Cu(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new Nu(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Cu(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,o=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(o=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:Ru(t.type),doc:n,oldIndex:i,newIndex:o}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges},e}();function Ru(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return g()}}function Pu(e,t){return e instanceof Au&&t instanceof Au?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof xu&&t instanceof xu&&e._firestore===t._firestore&&js(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ou(e){if(Oe(e)&&0===e.explicitOrderBy.length)throw new c(u.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Du=function(){};function Mu(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0,i=t;r<i.length;r++){var o=i[r];e=o._apply(e)}return e}var Lu=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).jc=t,i.Wc=n,i.Gc=r,i.type="where",i}return(0,r.__extends)(t,e),t.prototype._apply=function(e){var t=iu(e.firestore),n=function(e,t,n,r,i,o,a){var s;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new c(u.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){Ku(a,o);for(var l=[],h=0,f=a;h<f.length;h++){var d=f[h];l.push(Bu(r,e,d))}s={arrayValue:{values:l}}}else s=Bu(r,e,a)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Ku(a,o),s=pu(n,"where",a,"in"===o||"not-in"===o);var p=pe.create(i,o,s);return function(e,t){if(t.g()){var n=Me(e);if(null!==n&&!n.isEqual(t.field))throw new c(u.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+t.field.toString()+"'");var r=De(e);null!==r&&Wu(e,t.field,r)}var i=function(e,t){for(var n=0,r=e.filters;n<r.length;n++){var i=r[n];if(t.indexOf(i.op)>=0)return i.op}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new c(u.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+t.op.toString()+"' filter."):new c(u.INVALID_ARGUMENT,"Invalid query. You cannot use '"+t.op.toString()+"' filters with '"+i.toString()+"' filters.")}(e,p),p}(e._query,0,t,e.firestore._databaseId,this.jc,this.Wc,this.Gc);return new Os(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new Ne(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))},t}(Du),Fu=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).jc=t,r.zc=n,r.type="orderBy",r}return(0,r.__extends)(t,e),t.prototype._apply=function(e){var t=function(e,t,n){if(null!==e.startAt)throw new c(u.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new c(u.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new ke(t,n);return function(e,t){if(null===De(e)){var n=Me(e);null!==n&&Wu(e,n,t.field)}}(e,r),r}(e._query,this.jc,this.zc);return new Os(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new Ne(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))},t}(Du),ju=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).type=t,i.Hc=n,i.Jc=r,i}return(0,r.__extends)(t,e),t.prototype._apply=function(e){return new Os(e.firestore,e.converter,Ue(e._query,this.Hc,this.Jc))},t}(Du),Uu=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).type=t,i.Yc=n,i.Xc=r,i}return(0,r.__extends)(t,e),t.prototype._apply=function(e){var t=Vu(e,this.type,this.Yc,this.Xc);return new Os(e.firestore,e.converter,function(e,t){return new Ne(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))},t}(Du),qu=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).type=t,i.Yc=n,i.Xc=r,i}return(0,r.__extends)(t,e),t.prototype._apply=function(e){var t=Vu(e,this.type,this.Yc,this.Xc);return new Os(e.firestore,e.converter,function(e,t){return new Ne(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))},t}(Du);function Vu(e,t,n,r){if(n[0]=(0,i.getModularInstance)(n[0]),n[0]instanceof Eu)return function(e,t,n,r,i){if(!r)throw new c(u.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],a=0,s=Fe(e);a<s.length;a++){var l=s[a];if(l.field.isKeyField())o.push(Z(t,r.key));else{var h=r.data.field(l.field);if(U(h))throw new c(u.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+l.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===h){var f=l.field.canonicalString();throw new c(u.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+f+"' (used as the orderBy) does not exist.")}o.push(h)}}return new Te(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var o=iu(e.firestore);return function(e,t,n,r,i,o){var a=e.explicitOrderBy;if(i.length>a.length)throw new c(u.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var s=[],l=0;l<i.length;l++){var h=i[l];if(a[l].field.isKeyField()){if("string"!=typeof h)throw new c(u.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof h);if(!Le(e)&&-1!==h.indexOf("/"))throw new c(u.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+h+"' contains a slash.");var f=e.path.child(x.fromString(h));if(!H.isDocumentKey(f))throw new c(u.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+f+"' is not because it contains an odd number of segments.");var d=new H(f);s.push(Z(t,d))}else{var p=pu(n,r,h);s.push(p)}}return new Te(s,o)}(e._query,e.firestore._databaseId,o,t,n,r)}function Bu(e,t,n){if("string"==typeof(n=(0,i.getModularInstance)(n))){if(""===n)throw new c(u.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Le(t)&&-1!==n.indexOf("/"))throw new c(u.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=t.path.child(x.fromString(n));if(!H.isDocumentKey(r))throw new c(u.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Z(e,new H(r))}if(n instanceof Ps)return Z(e,n._key);throw new c(u.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Cs(n)+".")}function Ku(e,t){if(!Array.isArray(e)||0===e.length)throw new c(u.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+t.toString()+"' filters.");if(e.length>10)throw new c(u.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters support a maximum of 10 elements in the value array.")}function Wu(e,t,n){if(!n.isEqual(t))throw new c(u.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Hu=function(){function e(){}return e.prototype.convertValue=function(e,t){switch(void 0===t&&(t="none"),G(e)){case 0:return null;case 1:return e.booleanValue;case 2:return F(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(j(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw g()}},e.prototype.convertObject=function(e,t){var n=this,r={};return C(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r},e.prototype.convertGeoPoint=function(e){return new Xs(F(e.latitude),F(e.longitude))},e.prototype.convertArray=function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))},e.prototype.convertServerTimestamp=function(e,t){switch(t){case"previous":var n=q(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(V(e));default:return null}},e.prototype.convertTimestamp=function(e){var t=L(e);return new E(t.seconds,t.nanos)},e.prototype.convertDocumentKey=function(e,t){var n=x.fromString(e);m(Pn(n));var r=new ps(n.get(1),n.get(3)),i=new H(n.popFirst(5));return r.isEqual(t)||d("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+t.projectId+"/"+t.database+") instead."),i},e}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gu(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var zu=function(e){function t(t){var n=this;return(n=e.call(this)||this).firestore=t,n}return(0,r.__extends)(t,e),t.prototype.convertBytes=function(e){return new $s(e)},t.prototype.convertReference=function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ps(this.firestore,null,t)},t}(Hu),Qu=function(){function e(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=iu(e)}return e.prototype.set=function(e,t,n){this._verifyNotCommitted();var r=$u(e,this._firestore),i=Gu(r.converter,t,n),o=ou(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,ct.none())),this},e.prototype.update=function(e,t,n){for(var r=[],o=3;o<arguments.length;o++)r[o-3]=arguments[o];this._verifyNotCommitted();var a,s=$u(e,this._firestore);return a="string"==typeof(t=(0,i.getModularInstance)(t))||t instanceof Qs?du(this._dataReader,"WriteBatch.update",s._key,t,n,r):fu(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(a.toMutation(s._key,ct.exists(!0))),this},e.prototype.delete=function(e){this._verifyNotCommitted();var t=$u(e,this._firestore);return this._mutations=this._mutations.concat(new Et(t._key,ct.none())),this},e.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},e.prototype._verifyNotCommitted=function(){if(this._committed)throw new c(u.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},e}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $u(e,t){if((e=(0,i.getModularInstance)(e)).firestore!==t)throw new c(u.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Yu=function(e){function t(t){var n=this;return(n=e.call(this)||this).firestore=t,n}return(0,r.__extends)(t,e),t.prototype.convertBytes=function(e){return new $s(e)},t.prototype.convertReference=function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ps(this.firestore,null,t)},t}(Hu);function Xu(e,t,n){e=As(e,Ps);var r=As(e.firestore,Ks),i=Gu(e.converter,t,n);return ec(r,[ou(iu(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,ct.none())])}function Ju(e,t,n){for(var r=[],o=3;o<arguments.length;o++)r[o-3]=arguments[o];e=As(e,Ps);var a=As(e.firestore,Ks),s=iu(a);return ec(a,[("string"==typeof(t=(0,i.getModularInstance)(t))||t instanceof Qs?du(s,"updateDoc",e._key,t,n,r):fu(s,"updateDoc",e._key,t)).toMutation(e._key,ct.exists(!0))])}function Zu(e){for(var t,n,o,a=[],s=1;s<arguments.length;s++)a[s-1]=arguments[s];e=(0,i.getModularInstance)(e);var u={includeMetadataChanges:!1},c=0;"object"!=typeof a[c]||qs(a[c])||(u=a[c],c++);var l,h,f,d={includeMetadataChanges:u.includeMetadataChanges};if(qs(a[c])){var p=a[c];a[c]=null===(t=p.next)||void 0===t?void 0:t.bind(p),a[c+1]=null===(n=p.error)||void 0===n?void 0:n.bind(p),a[c+2]=null===(o=p.complete)||void 0===o?void 0:o.bind(p)}if(e instanceof Ps)h=As(e.firestore,Ks),f=Re(e._key.path),l={next:function(t){a[c]&&a[c](tc(h,e,t))},error:a[c+1],complete:a[c+2]};else{var v=As(e,Os);h=As(v.firestore,Ks),f=v._query;var g=new Yu(h);l={next:function(e){a[c]&&a[c](new xu(h,g,v,e))},error:a[c+1],complete:a[c+2]},Ou(e._query)}return function(e,t,n,i){var o=this,a=new Xa(i),s=new ra(t,a,n);return e.asyncQueue.enqueueAndForget((function(){return(0,r.__awaiter)(o,void 0,void 0,(function(){var t;return(0,r.__generator)(this,(function(n){switch(n.label){case 0:return t=Jo,[4,ls(e)];case 1:return[2,t.apply(void 0,[n.sent(),s])]}}))}))})),function(){a.Wo(),e.asyncQueue.enqueueAndForget((function(){return(0,r.__awaiter)(o,void 0,void 0,(function(){var t;return(0,r.__generator)(this,(function(n){switch(n.label){case 0:return t=Zo,[4,ls(e)];case 1:return[2,t.apply(void 0,[n.sent(),s])]}}))}))}))}}(Ws(h),f,d,l)}function ec(e,t){return function(e,t){var n=this,i=new nr;return e.asyncQueue.enqueueAndForget((function(){return(0,r.__awaiter)(n,void 0,void 0,(function(){var n;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return n=ma,[4,cs(e)];case 1:return[2,n.apply(void 0,[r.sent(),t,i])]}}))}))})),i.promise}(Ws(e),t)}function tc(e,t,n){var r=n.docs.get(t._key),i=new Yu(e);return new Au(e,i,t._key,r,new Cu(n.hasPendingWrites,n.fromCache),t.converter)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nc=function(e){function t(t,n){var r=this;return(r=e.call(this,t,n)||this)._firestore=t,r}return(0,r.__extends)(t,e),t.prototype.get=function(t){var n=this,r=$u(t,this._firestore),i=new Yu(this._firestore);return e.prototype.get.call(this,t).then((function(e){return new Au(n._firestore,i,r._key,e._document,new Cu(!1,!1),r.converter)}))},t}(function(){function e(e,t){this._firestore=e,this._transaction=t,this._dataReader=iu(e)}return e.prototype.get=function(e){var t=this,n=$u(e,this._firestore),r=new zu(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return g();var i=e[0];if(i.isFoundDocument())return new Eu(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new Eu(t._firestore,r,n._key,null,n.converter);throw g()}))},e.prototype.set=function(e,t,n){var r=$u(e,this._firestore),i=Gu(r.converter,t,n),o=ou(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this},e.prototype.update=function(e,t,n){for(var r=[],o=3;o<arguments.length;o++)r[o-3]=arguments[o];var a,s=$u(e,this._firestore);return a="string"==typeof(t=(0,i.getModularInstance)(t))||t instanceof Qs?du(this._dataReader,"Transaction.update",s._key,t,n,r):fu(this._dataReader,"Transaction.update",s._key,t),this._transaction.update(s._key,a),this},e.prototype.delete=function(e){var t=$u(e,this._firestore);return this._transaction.delete(t._key),this},e}());
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rc(){if("undefined"==typeof Uint8Array)throw new c(u.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function ic(){if("undefined"==typeof atob)throw new c(u.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var oc=function(){function e(e){this._delegate=e}return e.fromBase64String=function(t){return ic(),new e($s.fromBase64String(t))},e.fromUint8Array=function(t){return rc(),new e($s.fromUint8Array(t))},e.prototype.toBase64=function(){return ic(),this._delegate.toBase64()},e.prototype.toUint8Array=function(){return rc(),this._delegate.toUint8Array()},e.prototype.isEqual=function(e){return this._delegate.isEqual(e._delegate)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(),ac=function(){function e(){}return e.prototype.enableIndexedDbPersistence=function(e,t){return function(e,t){zs(e=As(e,Ks));var n=Ws(e),r=e._freezeSettings(),i=new $a;return Gs(n,i,new za(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})},e.prototype.enableMultiTabIndexedDbPersistence=function(e){return function(e){zs(e=As(e,Ks));var t=Ws(e),n=e._freezeSettings(),r=new $a;return Gs(t,r,new Qa(r,n.cacheSizeBytes))}(e._delegate)},e.prototype.clearIndexedDbPersistence=function(e){return function(e){var t=this;if(e._initialized&&!e._terminated)throw new c(u.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new nr;return e._queue.enqueueAndForgetEvenWhileRestricted((function(){return(0,r.__awaiter)(t,void 0,void 0,(function(){var t;return(0,r.__generator)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,function(e){return(0,r.__awaiter)(this,void 0,void 0,(function(){var t;return(0,r.__generator)(this,(function(n){switch(n.label){case 0:return or.yt()?(t=e+"main",[4,or.delete(t)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(gi(e._databaseId,e._persistenceKey))];case 1:return i.sent(),n.resolve(),[3,3];case 2:return t=i.sent(),n.reject(t),[3,3];case 3:return[2]}}))}))})),n.promise}(e._delegate)},e}(),sc=function(){function e(e,t,n){var r=this;this._delegate=t,this.Zc=n,this.INTERNAL={delete:function(){return r.terminate()}},e instanceof ps||(this.tu=e)}return Object.defineProperty(e.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),e.prototype.settings=function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||p("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)},e.prototype.useEmulator=function(e,t,n){void 0===n&&(n={}),function(e,t,n,r){var o;void 0===r&&(r={});var a=(e=As(e,Rs))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&p("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:t+":"+n,ssl:!1})),r.mockUserToken){var s,l;if("string"==typeof r.mockUserToken)s=r.mockUserToken,l=zi.MOCK_USER;else{s=(0,i.createMockUserToken)(r.mockUserToken,null===(o=e._app)||void 0===o?void 0:o.options.projectId);var h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new c(u.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new zi(h)}e._credentials=new ys(new gs(s,l))}}(this._delegate,e,t,n)},e.prototype.enableNetwork=function(){return function(e){var t=this;return e.asyncQueue.enqueue((function(){return(0,r.__awaiter)(t,void 0,void 0,(function(){var t,n;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return[4,as(e)];case 1:return t=r.sent(),[4,us(e)];case 2:return n=r.sent(),[2,(t.setNetworkEnabled(!0),function(e){var t=y(e);return t.Or.delete(0),bo(t)}(n))]}}))}))}))}(Ws(As(this._delegate,Ks)))},e.prototype.disableNetwork=function(){return function(e){var t=this;return e.asyncQueue.enqueue((function(){return(0,r.__awaiter)(t,void 0,void 0,(function(){var t,n;return(0,r.__generator)(this,(function(i){switch(i.label){case 0:return[4,as(e)];case 1:return t=i.sent(),[4,us(e)];case 2:return n=i.sent(),[2,(t.setNetworkEnabled(!1),function(e){return(0,r.__awaiter)(this,void 0,void 0,(function(){var t;return(0,r.__generator)(this,(function(n){switch(n.label){case 0:return(t=y(e)).Or.add(0),[4,wo(t)];case 1:return n.sent(),t.Br.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(Ws(As(this._delegate,Ks)))},e.prototype.enablePersistence=function(e){var t=!1,n=!1;return e&&Es("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this.Zc.enableMultiTabIndexedDbPersistence(this):this.Zc.enableIndexedDbPersistence(this,n)},e.prototype.clearPersistence=function(){return this.Zc.clearIndexedDbPersistence(this)},e.prototype.terminate=function(){return this.tu&&(this.tu._removeServiceInstance("firestore"),this.tu._removeServiceInstance("firestore-exp")),this._delegate._delete()},e.prototype.waitForPendingWrites=function(){return function(e){var t=this,n=new nr;return e.asyncQueue.enqueueAndForget((function(){return(0,r.__awaiter)(t,void 0,void 0,(function(){var t;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return t=Ta,[4,cs(e)];case 1:return[2,t.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(Ws(As(this._delegate,Ks)))},e.prototype.onSnapshotsInSync=function(e){return function(e,t){return function(e,t){var n=this,i=new Xa(t);return e.asyncQueue.enqueueAndForget((function(){return(0,r.__awaiter)(n,void 0,void 0,(function(){var t;return(0,r.__generator)(this,(function(n){switch(n.label){case 0:return t=function(e,t){y(e).Gr.add(t),t.next()},[4,ls(e)];case 1:return[2,t.apply(void 0,[n.sent(),i])]}}))}))})),function(){i.Wo(),e.asyncQueue.enqueueAndForget((function(){return(0,r.__awaiter)(n,void 0,void 0,(function(){var t;return(0,r.__generator)(this,(function(n){switch(n.label){case 0:return t=function(e,t){y(e).Gr.delete(t)},[4,ls(e)];case 1:return[2,t.apply(void 0,[n.sent(),i])]}}))}))}))}}(Ws(e=As(e,Ks)),qs(t)?t:{next:t})}(this._delegate,e)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this.tu)throw new c(u.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.tu},enumerable:!1,configurable:!0}),e.prototype.collection=function(e){try{return new Ic(this,Ms(this._delegate,e))}catch(e){throw pc(e,"collection()","Firestore.collection()")}},e.prototype.doc=function(e){try{return new dc(this,Ls(this._delegate,e))}catch(e){throw pc(e,"doc()","Firestore.doc()")}},e.prototype.collectionGroup=function(e){try{return new _c(this,function(e,t){if(e=As(e,Rs),Is("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new c(u.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Os(e,null,function(e){return new Ne(x.emptyPath(),e)}(t))}(this._delegate,e))}catch(e){throw pc(e,"collectionGroup()","Firestore.collectionGroup()")}},e.prototype.runTransaction=function(e){var t=this;return function(e,t){return function(e,t){var n=this,i=new nr;return e.asyncQueue.enqueueAndForget((function(){return(0,r.__awaiter)(n,void 0,void 0,(function(){var n;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return[4,function(e){return os(e).then((function(e){return e.datastore}))}(e)];case 1:return n=r.sent(),new es(e.asyncQueue,n,t,i).run(),[2]}}))}))})),i.promise}(Ws(e),(function(n){return t(new nc(e,n))}))}(this._delegate,(function(n){return e(new lc(t,n))}))},e.prototype.batch=function(){var e=this;return Ws(this._delegate),new hc(new Qu(this._delegate,(function(t){return ec(e._delegate,t)})))},e.prototype.loadBundle=function(e){throw new c(u.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},e.prototype.namedQuery=function(e){throw new c(u.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},e}(),uc=function(e){function t(t){var n=this;return(n=e.call(this)||this).firestore=t,n}return(0,r.__extends)(t,e),t.prototype.convertBytes=function(e){return new oc(new $s(e))},t.prototype.convertReference=function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return dc.eu(t,this.firestore,null)},t}(Hu);function cc(e){var t;t=e,l.setLogLevel(t)}var lc=function(){function e(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new uc(e)}return e.prototype.get=function(e){var t=this,n=Tc(e);return this._delegate.get(n).then((function(e){return new mc(t._firestore,new Au(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))},e.prototype.set=function(e,t,n){var r=Tc(e);return n?(Ts("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this},e.prototype.update=function(e,t,n){for(var i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];var s=Tc(e);return 2===arguments.length?this._delegate.update(s,t):(i=this._delegate).update.apply(i,(0,r.__spreadArray)([s,t,n],o)),this},e.prototype.delete=function(e){var t=Tc(e);return this._delegate.delete(t),this},e}(),hc=function(){function e(e){this._delegate=e}return e.prototype.set=function(e,t,n){var r=Tc(e);return n?(Ts("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this},e.prototype.update=function(e,t,n){for(var i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];var s=Tc(e);return 2===arguments.length?this._delegate.update(s,t):(i=this._delegate).update.apply(i,(0,r.__spreadArray)([s,t,n],o)),this},e.prototype.delete=function(e){var t=Tc(e);return this._delegate.delete(t),this},e.prototype.commit=function(){return this._delegate.commit()},e}(),fc=function(){function e(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}return e.prototype.fromFirestore=function(e,t){var n=new Nu(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new yc(this._firestore,n),null!=t?t:{})},e.prototype.toFirestore=function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)},e.nu=function(t,n){var r=e.su,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var o=i.get(n);return o||(o=new e(t,new uc(t),n),i.set(n,o)),o},e}();fc.su=new WeakMap;var dc=function(){function e(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new uc(e)}return e.iu=function(t,n,r){if(t.length%2!=0)throw new c(u.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.canonicalString()+" has "+t.length);return new e(n,new Ps(n._delegate,r,new H(t)))},e.eu=function(t,n,r){return new e(n,new Ps(n._delegate,r,t))},Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new Ic(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),e.prototype.collection=function(e){try{return new Ic(this.firestore,Ms(this._delegate,e))}catch(e){throw pc(e,"collection()","DocumentReference.collection()")}},e.prototype.isEqual=function(e){return(e=(0,i.getModularInstance)(e))instanceof Ps&&Fs(this._delegate,e)},e.prototype.set=function(e,t){t=Ts("DocumentReference.set",t);try{return t?Xu(this._delegate,e,t):Xu(this._delegate,e)}catch(e){throw pc(e,"setDoc()","DocumentReference.set()")}},e.prototype.update=function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];try{return 1===arguments.length?Ju(this._delegate,e):Ju.apply(void 0,(0,r.__spreadArray)([this._delegate,e,t],n))}catch(e){throw pc(e,"updateDoc()","DocumentReference.update()")}},e.prototype.delete=function(){return ec(As((e=this._delegate).firestore,Ks),[new Et(e._key,ct.none())]);var e},e.prototype.onSnapshot=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=vc(t),i=gc(t,(function(t){return new mc(e.firestore,new Au(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return Zu(this._delegate,r,i)},e.prototype.get=function(e){var t=this;return("cache"===(null==e?void 0:e.source)?function(e){e=As(e,Ps);var t=As(e.firestore,Ks),n=Ws(t),i=new Yu(t);return function(e,t){var n=this,i=new nr;return e.asyncQueue.enqueueAndForget((function(){return(0,r.__awaiter)(n,void 0,void 0,(function(){var n;return(0,r.__generator)(this,(function(o){switch(o.label){case 0:return n=function(e,t,n){return(0,r.__awaiter)(this,void 0,void 0,(function(){var i,o;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(e,t){var n=y(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.Mn.mn(e,t)}))}(e,t)];case 1:return(o=r.sent()).isFoundDocument()?n.resolve(o):o.isNoDocument()?n.resolve(null):n.reject(new c(u.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return i=r.sent(),o=Go(i,"Failed to get document '"+t+" from cache"),n.reject(o),[3,3];case 3:return[2]}}))}))},[4,ss(e)];case 1:return[2,n.apply(void 0,[o.sent(),t,i])]}}))}))})),i.promise}(n,e._key).then((function(n){return new Au(t,i,e._key,n,new Cu(null!==n&&n.hasLocalMutations,!0),e.converter)}))}(this._delegate):"server"===(null==e?void 0:e.source)?function(e){e=As(e,Ps);var t=As(e.firestore,Ks);return hs(Ws(t),e._key,{source:"server"}).then((function(n){return tc(t,e,n)}))}(this._delegate):function(e){e=As(e,Ps);var t=As(e.firestore,Ks);return hs(Ws(t),e._key).then((function(n){return tc(t,e,n)}))}(this._delegate)).then((function(e){return new mc(t.firestore,new Au(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}))},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(fc.nu(this.firestore,t)):this._delegate.withConverter(null))},e}();function pc(e,t,n){return e.message=e.message.replace(t,n),e}function vc(e){for(var t=0,n=e;t<n.length;t++){var r=n[t];if("object"==typeof r&&!qs(r))return r}return{}}function gc(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=qs(e[0])?e[0]:qs(e[1])?e[1]:"function"==typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var mc=function(){function e(e,t){this._firestore=e,this._delegate=t}return Object.defineProperty(e.prototype,"ref",{get:function(){return new dc(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),e.prototype.data=function(e){return this._delegate.data(e)},e.prototype.get=function(e,t){return this._delegate.get(e,t)},e.prototype.isEqual=function(e){return Pu(this._delegate,e._delegate)},e}(),yc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,r.__extends)(t,e),t.prototype.data=function(e){return this._delegate.data(e)},t}(mc),_c=function(){function e(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new uc(e)}return e.prototype.where=function(t,n,r){try{return new e(this.firestore,Mu(this._delegate,function(e,t,n){var r=t,i=Su("where",e);return new Lu(i,r,n)}(t,n,r)))}catch(t){throw pc(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.orderBy=function(t,n){try{return new e(this.firestore,Mu(this._delegate,function(e,t){void 0===t&&(t="asc");var n=t,r=Su("orderBy",e);return new Fu(r,n)}(t,n)))}catch(t){throw pc(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.limit=function(t){try{return new e(this.firestore,Mu(this._delegate,function(e){return Ns("limit",e),new ju("limit",e,"F")}(t)))}catch(t){throw pc(t,"limit()","Query.limit()")}},e.prototype.limitToLast=function(t){try{return new e(this.firestore,Mu(this._delegate,function(e){return Ns("limitToLast",e),new ju("limitToLast",e,"L")}(t)))}catch(t){throw pc(t,"limitToLast()","Query.limitToLast()")}},e.prototype.startAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Mu(this._delegate,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new Uu("startAt",e,!0)}.apply(void 0,t)))}catch(t){throw pc(t,"startAt()","Query.startAt()")}},e.prototype.startAfter=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Mu(this._delegate,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new Uu("startAfter",e,!1)}.apply(void 0,t)))}catch(t){throw pc(t,"startAfter()","Query.startAfter()")}},e.prototype.endBefore=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Mu(this._delegate,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new qu("endBefore",e,!0)}.apply(void 0,t)))}catch(t){throw pc(t,"endBefore()","Query.endBefore()")}},e.prototype.endAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Mu(this._delegate,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new qu("endAt",e,!1)}.apply(void 0,t)))}catch(t){throw pc(t,"endAt()","Query.endAt()")}},e.prototype.isEqual=function(e){return js(this._delegate,e._delegate)},e.prototype.get=function(e){var t=this;return("cache"===(null==e?void 0:e.source)?function(e){e=As(e,Os);var t=As(e.firestore,Ks),n=Ws(t),i=new Yu(t);return function(e,t){var n=this,i=new nr;return e.asyncQueue.enqueueAndForget((function(){return(0,r.__awaiter)(n,void 0,void 0,(function(){var n;return(0,r.__generator)(this,(function(o){switch(o.label){case 0:return n=function(e,t,n){return(0,r.__awaiter)(this,void 0,void 0,(function(){var i,o,a,s,u;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,Ri(e,t,!0)];case 1:return u=r.sent(),i=new la(t,u.Bn),o=i._o(u.documents),a=i.applyChanges(o,!1),n.resolve(a.snapshot),[3,3];case 2:return s=r.sent(),u=Go(s,"Failed to execute query '"+t+" against cache"),n.reject(u),[3,3];case 3:return[2]}}))}))},[4,ss(e)];case 1:return[2,n.apply(void 0,[o.sent(),t,i])]}}))}))})),i.promise}(n,e._query).then((function(n){return new xu(t,i,e,n)}))}(this._delegate):"server"===(null==e?void 0:e.source)?function(e){e=As(e,Os);var t=As(e.firestore,Ks),n=Ws(t),r=new Yu(t);return fs(n,e._query,{source:"server"}).then((function(n){return new xu(t,r,e,n)}))}(this._delegate):function(e){e=As(e,Os);var t=As(e.firestore,Ks),n=Ws(t),r=new Yu(t);return Ou(e._query),fs(n,e._query).then((function(n){return new xu(t,r,e,n)}))}(this._delegate)).then((function(e){return new wc(t.firestore,new xu(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}))},e.prototype.onSnapshot=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=vc(t),i=gc(t,(function(t){return new wc(e.firestore,new xu(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return Zu(this._delegate,r,i)},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(fc.nu(this.firestore,t)):this._delegate.withConverter(null))},e}(),bc=function(){function e(e,t){this._firestore=e,this._delegate=t}return Object.defineProperty(e.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return new yc(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),e}(),wc=function(){function e(e,t){this._firestore=e,this._delegate=t}return Object.defineProperty(e.prototype,"query",{get:function(){return new _c(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"docs",{get:function(){var e=this;return this._delegate.docs.map((function(t){return new yc(e._firestore,t)}))},enumerable:!1,configurable:!0}),e.prototype.docChanges=function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new bc(t._firestore,e)}))},e.prototype.forEach=function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new yc(n._firestore,r))}))},e.prototype.isEqual=function(e){return Pu(this._delegate,e._delegate)},e}(),Ic=function(e){function t(t,n){var r=this;return(r=e.call(this,t,n)||this).firestore=t,r._delegate=n,r}return(0,r.__extends)(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return e?new dc(this.firestore,e):null},enumerable:!1,configurable:!0}),t.prototype.doc=function(e){try{return new dc(this.firestore,void 0===e?Ls(this._delegate):Ls(this._delegate,e))}catch(e){throw pc(e,"doc()","CollectionReference.doc()")}},t.prototype.add=function(e){var t=this;return function(e,t){var n=As(e.firestore,Ks),r=Ls(e),i=Gu(e.converter,t);return ec(n,[ou(iu(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,ct.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new dc(t.firestore,e)}))},t.prototype.isEqual=function(e){return Fs(this._delegate,e._delegate)},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(fc.nu(this.firestore,e)):this._delegate.withConverter(null))},t}(_c);function Tc(e){return As(e,Ps)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ec=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._delegate=new(Qs.bind.apply(Qs,(0,r.__spreadArray)([void 0],e)))}return e.documentId=function(){return new e(P.keyField().canonicalString())},e.prototype.isEqual=function(e){return(e=(0,i.getModularInstance)(e))instanceof Qs&&this._delegate._internalPath.isEqual(e._internalPath)},e}(),kc=function(){function e(e){this._delegate=e}return e.serverTimestamp=function(){var t=new uu("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new au("deleteField");return t._methodName="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new cu("arrayUnion",e)}.apply(void 0,t);return r._methodName="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new lu("arrayRemove",e)}.apply(void 0,t);return r._methodName="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=function(e){return new hu("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)},e.prototype.isEqual=function(e){return this._delegate.isEqual(e._delegate)},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sc(e){return function(e,t){var n=Ws(e=As(e,Ks)),i=new Vs;return function(e,t,n,i){var o=this,a=function(e,t){return function(e,t){return new Ja(e,t)}(function(e,t){if(e instanceof Uint8Array)return Ya(e,t);if(e instanceof ArrayBuffer)return Ya(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,ho(t));e.asyncQueue.enqueueAndForget((function(){return(0,r.__awaiter)(o,void 0,void 0,(function(){var t;return(0,r.__generator)(this,(function(n){switch(n.label){case 0:return t=Ha,[4,cs(e)];case 1:return t.apply(void 0,[n.sent(),a,i]),[2]}}))}))}))}(n,e._databaseId,t,i),i}(this._delegate,e)}function Cc(e){var t,n,i=this;return(t=this._delegate,n=e,function(e,t){var n=this;return e.asyncQueue.enqueue((function(){return(0,r.__awaiter)(n,void 0,void 0,(function(){var n;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return n=function(e,t){var n=y(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.Ke.getNamedQuery(e,t)}))},[4,ss(e)];case 1:return[2,n.apply(void 0,[r.sent(),t])]}}))}))}))}(Ws(t=As(t,Ks)),n).then((function(e){return e?new Os(t,null,e.query):null}))).then((function(e){return e?new _c(i,e):null}))}},7e3:function(e,t,n){"use strict";n.r(t),n.d(t,{LogLevel:function(){return o},Logger:function(){return h},setLogLevel:function(){return f},setUserLogHandler:function(){return d}});var r;n(7658);
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
function i(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var o,a=[];(function(e){e[e["DEBUG"]=0]="DEBUG",e[e["VERBOSE"]=1]="VERBOSE",e[e["INFO"]=2]="INFO",e[e["WARN"]=3]="WARN",e[e["ERROR"]=4]="ERROR",e[e["SILENT"]=5]="SILENT"})(o||(o={}));var s={debug:o.DEBUG,verbose:o.VERBOSE,info:o.INFO,warn:o.WARN,error:o.ERROR,silent:o.SILENT},u=o.INFO,c=(r={},r[o.DEBUG]="log",r[o.VERBOSE]="log",r[o.INFO]="info",r[o.WARN]="warn",r[o.ERROR]="error",r),l=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(t<e.logLevel)){var o=(new Date).toISOString(),a=c[t];if(!a)throw new Error("Attempted to log a message with an invalid logType (value: "+t+")");console[a].apply(console,i(["["+o+"]  "+e.name+":"],n))}},h=function(){function e(e){this.name=e,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,a.push(this)}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in o))throw new TypeError('Invalid value "'+e+'" assigned to `logLevel`');this._logLevel=e},enumerable:!1,configurable:!0}),e.prototype.setLogLevel=function(e){this._logLevel="string"===typeof e?s[e]:e},Object.defineProperty(e.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e},enumerable:!1,configurable:!0}),e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,i([this,o.DEBUG],e)),this._logHandler.apply(this,i([this,o.DEBUG],e))},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,i([this,o.VERBOSE],e)),this._logHandler.apply(this,i([this,o.VERBOSE],e))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,i([this,o.INFO],e)),this._logHandler.apply(this,i([this,o.INFO],e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,i([this,o.WARN],e)),this._logHandler.apply(this,i([this,o.WARN],e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,i([this,o.ERROR],e)),this._logHandler.apply(this,i([this,o.ERROR],e))},e}();function f(e){a.forEach((function(t){t.setLogLevel(e)}))}function d(e,t){for(var n=function(n){var r=null;t&&t.level&&(r=s[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];var s=i.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==r&&void 0!==r?r:t.logLevel)&&e({level:o[n].toLowerCase(),message:s,args:i,type:t.name})}},r=0,i=a;r<i.length;r++){var u=i[r];n(u)}}},9658:function(e,t,n){"use strict";n.r(t),n.d(t,{CONSTANTS:function(){return i},Deferred:function(){return g},ErrorFactory:function(){return M},FirebaseError:function(){return D},MAX_VALUE_MILLIS:function(){return ve},RANDOM_FACTOR:function(){return ge},Sha1:function(){return ee},areCookiesEnabled:function(){return R},assert:function(){return o},assertionError:function(){return a},async:function(){return re},base64:function(){return c},base64Decode:function(){return f},base64Encode:function(){return l},base64urlEncodeWithoutPadding:function(){return h},calculateBackoffMillis:function(){return me},contains:function(){return H},createMockUserToken:function(){return m},createSubscribe:function(){return te},decode:function(){return q},deepCopy:function(){return d},deepEqual:function(){return $},deepExtend:function(){return p},errorPrefix:function(){return se},extractQuerystring:function(){return Z},getGlobal:function(){return P},getModularInstance:function(){return be},getUA:function(){return y},isAdmin:function(){return W},isBrowser:function(){return w},isBrowserExtension:function(){return I},isElectron:function(){return E},isEmpty:function(){return z},isIE:function(){return k},isIndexedDBAvailable:function(){return N},isMobileCordova:function(){return _},isNode:function(){return b},isNodeSdk:function(){return C},isReactNative:function(){return T},isSafari:function(){return A},isUWP:function(){return S},isValidFormat:function(){return K},isValidTimestamp:function(){return V},issuedAtTime:function(){return B},jsonEval:function(){return j},map:function(){return Q},ordinal:function(){return ye},querystring:function(){return X},querystringDecode:function(){return J},safeGet:function(){return G},stringLength:function(){return fe},stringToByteArray:function(){return he},stringify:function(){return U},validateArgCount:function(){return ae},validateCallback:function(){return ce},validateContextObject:function(){return le},validateIndexedDBOpenable:function(){return x},validateNamespace:function(){return ue}});n(2801),n(7658);var r=n(2900),i={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},o=function(e,t){if(!e)throw a(t)},a=function(e){return new Error("Firebase Database ("+i.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)},s=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},u=function(e){var t=[],n=0,r=0;while(n<e.length){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){o=e[n++];var a=e[n++],s=e[n++],u=((7&i)<<18|(63&o)<<12|(63&a)<<6|63&s)-65536;t[r++]=String.fromCharCode(55296+(u>>10)),t[r++]=String.fromCharCode(56320+(1023&u))}else{o=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return t.join("")},c={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var o=e[i],a=i+1<e.length,s=a?e[i+1]:0,u=i+2<e.length,c=u?e[i+2]:0,l=o>>2,h=(3&o)<<4|s>>4,f=(15&s)<<2|c>>6,d=63&c;u||(d=64,a||(f=64)),r.push(n[l],n[h],n[f],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(s(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):u(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var o=n[e.charAt(i++)],a=i<e.length,s=a?n[e.charAt(i)]:0;++i;var u=i<e.length,c=u?n[e.charAt(i)]:64;++i;var l=i<e.length,h=l?n[e.charAt(i)]:64;if(++i,null==o||null==s||null==c||null==h)throw Error();var f=o<<2|s>>4;if(r.push(f),64!==c){var d=s<<4&240|c>>2;if(r.push(d),64!==h){var p=c<<6&192|h;r.push(p)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},l=function(e){var t=s(e);return c.encodeByteArray(t,!0)},h=function(e){return l(e).replace(/\./g,"")},f=function(e){try{return c.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function d(e){return p(void 0,e)}function p(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:var n=t;return new Date(n.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var r in t)t.hasOwnProperty(r)&&v(r)&&(e[r]=p(e[r],t[r]));return e}function v(e){return"__proto__"!==e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var g=function(){function e(){var e=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))}return e.prototype.wrapCallback=function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}},e}();
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n={alg:"none",type:"JWT"},i=t||"demo-project",o=e.iat||0,a=e.sub||e.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var s=(0,r.__assign)({iss:"https://securetoken.google.com/"+i,aud:i,iat:o,exp:o+3600,auth_time:o,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},e),u="";return[h(JSON.stringify(n)),h(JSON.stringify(s)),u].join(".")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y(){return"undefined"!==typeof navigator&&"string"===typeof navigator["userAgent"]?navigator["userAgent"]:""}function _(){return"undefined"!==typeof window&&!!(window["cordova"]||window["phonegap"]||window["PhoneGap"])&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(y())}function b(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}function w(){return"object"===typeof self&&self.self===self}function I(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function T(){return"object"===typeof navigator&&"ReactNative"===navigator["product"]}function E(){return y().indexOf("Electron/")>=0}function k(){var e=y();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function S(){return y().indexOf("MSAppHost/")>=0}function C(){return!0===i.NODE_CLIENT||!0===i.NODE_ADMIN}function A(){return!b()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function N(){return"indexedDB"in self&&null!=indexedDB}function x(){return new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(o){t(o)}}))}function R(){return!(!navigator||!navigator.cookieEnabled)}function P(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var O="FirebaseError",D=function(e){function t(n,r,i){var o=e.call(this,r)||this;return o.code=n,o.customData=i,o.name=O,Object.setPrototypeOf(o,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,M.prototype.create),o}return(0,r.__extends)(t,e),t}(Error),M=function(){function e(e,t,n){this.service=e,this.serviceName=t,this.errors=n}return e.prototype.create=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=t[0]||{},i=this.service+"/"+e,o=this.errors[e],a=o?L(o,r):"Error",s=this.serviceName+": "+a+" ("+i+").",u=new D(i,s,r);return u},e}();function L(e,t){return e.replace(F,(function(e,n){var r=t[n];return null!=r?String(r):"<"+n+"?>"}))}var F=/\{\$([^}]+)}/g;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j(e){return JSON.parse(e)}function U(e){return JSON.stringify(e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var q=function(e){var t={},n={},r={},i="";try{var o=e.split(".");t=j(f(o[0])||""),n=j(f(o[1])||""),i=o[2],r=n["d"]||{},delete n["d"]}catch(a){}return{header:t,claims:n,data:r,signature:i}},V=function(e){var t=q(e).claims,n=Math.floor((new Date).getTime()/1e3),r=0,i=0;return"object"===typeof t&&(t.hasOwnProperty("nbf")?r=t["nbf"]:t.hasOwnProperty("iat")&&(r=t["iat"]),i=t.hasOwnProperty("exp")?t["exp"]:r+86400),!!n&&!!r&&!!i&&n>=r&&n<=i},B=function(e){var t=q(e).claims;return"object"===typeof t&&t.hasOwnProperty("iat")?t["iat"]:null},K=function(e){var t=q(e),n=t.claims;return!!n&&"object"===typeof n&&n.hasOwnProperty("iat")},W=function(e){var t=q(e).claims;return"object"===typeof t&&!0===t["admin"]};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function H(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function G(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function z(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Q(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function $(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,o=n;i<o.length;i++){var a=o[i];if(!r.includes(a))return!1;var s=e[a],u=t[a];if(Y(s)&&Y(u)){if(!$(s,u))return!1}else if(s!==u)return!1}for(var c=0,l=r;c<l.length;c++){a=l[c];if(!n.includes(a))return!1}return!0}function Y(e){return null!==e&&"object"===typeof e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X(e){for(var t=[],n=function(e,n){Array.isArray(n)?n.forEach((function(n){t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))})):t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))},r=0,i=Object.entries(e);r<i.length;r++){var o=i[r],a=o[0],s=o[1];n(a,s)}return t.length?"&"+t.join("&"):""}function J(e){var t={},n=e.replace(/^\?/,"").split("&");return n.forEach((function(e){if(e){var n=e.split("="),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function Z(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ee=function(){function e(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}return e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(e,t){t||(t=0);var n=this.W_;if("string"===typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(r=0;r<16;r++)n[r]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,a,s=this.chain_[0],u=this.chain_[1],c=this.chain_[2],l=this.chain_[3],h=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(o=l^u&(c^l),a=1518500249):(o=u^c^l,a=1859775393):r<60?(o=u&c|l&(u|c),a=2400959708):(o=u^c^l,a=3395469782);i=(s<<5|s>>>27)+o+h+a+n[r]&4294967295;h=l,l=c,c=4294967295&(u<<30|u>>>2),u=s,s=i}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},e.prototype.update=function(e,t){if(null!=e){void 0===t&&(t=e.length);var n=t-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;while(r<t){if(0===o)while(r<=n)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){while(r<t)if(i[o]=e.charCodeAt(r),++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}else while(r<t)if(i[o]=e[r],++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=t}},e.prototype.digest=function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)e[r]=this.chain_[n]>>i&255,++r;return e},e}();function te(e,t){var n=new ne(e,t);return n.subscribe.bind(n)}var ne=function(){function e(e,t){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((function(){e(n)})).catch((function(e){n.error(e)}))}return e.prototype.next=function(e){this.forEachObserver((function(t){t.next(e)}))},e.prototype.error=function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)},e.prototype.complete=function(){this.forEachObserver((function(e){e.complete()})),this.close()},e.prototype.subscribe=function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=ie(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=oe),void 0===r.error&&(r.error=oe),void 0===r.complete&&(r.complete=oe);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),o},e.prototype.unsubscribeOne=function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},e.prototype.forEachObserver=function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)},e.prototype.sendOne=function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))},e.prototype.close=function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))},e}();function re(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then((function(){e.apply(void 0,n)})).catch((function(e){t&&t(e)}))}}function ie(e,t){if("object"!==typeof e||null===e)return!1;for(var n=0,r=t;n<r.length;n++){var i=r[n];if(i in e&&"function"===typeof e[i])return!0}return!1}function oe(){}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ae=function(e,t,n,r){var i;if(r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i){var o=e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".";throw new Error(o)}};function se(e,t){return e+" failed: "+t+" argument "}function ue(e,t,n){if((!n||t)&&"string"!==typeof t)throw new Error(se(e,"namespace")+"must be a valid firebase namespace.")}function ce(e,t,n,r){if((!r||n)&&"function"!==typeof n)throw new Error(se(e,t)+"must be a valid function.")}function le(e,t,n,r){if((!r||n)&&("object"!==typeof n||null===n))throw new Error(se(e,t)+"must be a valid context object.")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var he=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;r++,o(r<e.length,"Surrogate pair missing trail surrogate.");var s=e.charCodeAt(r)-56320;i=65536+(a<<10)+s}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},fe=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t},de=1e3,pe=2,ve=144e5,ge=.5;function me(e,t,n){void 0===t&&(t=de),void 0===n&&(n=pe);var r=t*Math.pow(n,e),i=Math.round(ge*r*(Math.random()-.5)*2);return Math.min(ve,r+i)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ye(e){return Number.isFinite(e)?e+_e(e):""+e}function _e(e){e=Math.abs(e);var t=e%100;if(t>=10&&t<=20)return"th";var n=e%10;return 1===n?"st":2===n?"nd":3===n?"rd":"th"}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function be(e){return e&&e._delegate?e._delegate:e}},6970:function(e,t,n){"use strict";n.d(t,{FJ:function(){return Nr},JJ:function(){return Lr},UE:function(){return Ar},ii:function(){return Mr},jK:function(){return xr},ju:function(){return Pr},kN:function(){return Or},tw:function(){return Rr},zI:function(){return Dr}});n(541),n(7658);var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)};function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function o(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}var a,s="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},u=u||{},c=s||self;function l(){}function h(e){var t=typeof e;return t="object"!=t?t:e?Array.isArray(e)?"array":t:"null","array"==t||"object"==t&&"number"==typeof e.length}function f(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function d(e){return Object.prototype.hasOwnProperty.call(e,p)&&e[p]||(e[p]=++v)}var p="closure_uid_"+(1e9*Math.random()>>>0),v=0;function g(e,t,n){return e.call.apply(e.bind,arguments)}function m(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function y(e,t,n){return y=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?g:m,y.apply(null,arguments)}function _(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function b(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function w(){this.s=this.s,this.o=this.o}var I=0,T={};w.prototype.s=!1,w.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0!=I)){var e=d(this);delete T[e]}},w.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var E=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},k=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,o=0;o<r;o++)o in i&&t.call(n,i[o],o,e)};function S(e){e:{for(var t=Wn,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}function C(e){return Array.prototype.concat.apply([],arguments)}function A(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function N(e){return/^[\s\xa0]*$/.test(e)}var x,R=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function P(e,t){return-1!=e.indexOf(t)}function O(e,t){return e<t?-1:e>t?1:0}e:{var D=c.navigator;if(D){var M=D.userAgent;if(M){x=M;break e}}x=""}function L(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function F(e){var t={};for(var n in e)t[n]=e[n];return t}var j="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function U(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(var o=0;o<j.length;o++)n=j[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function q(e){return q[" "](e),e}function V(e){var t=ee;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}q[" "]=l;var B,K=P(x,"Opera"),W=P(x,"Trident")||P(x,"MSIE"),H=P(x,"Edge"),G=H||W,z=P(x,"Gecko")&&!(P(x.toLowerCase(),"webkit")&&!P(x,"Edge"))&&!(P(x,"Trident")||P(x,"MSIE"))&&!P(x,"Edge"),Q=P(x.toLowerCase(),"webkit")&&!P(x,"Edge");function $(){var e=c.document;return e?e.documentMode:void 0}e:{var Y="",X=function(){var e=x;return z?/rv:([^\);]+)(\)|;)/.exec(e):H?/Edge\/([\d\.]+)/.exec(e):W?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Q?/WebKit\/(\S+)/.exec(e):K?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(X&&(Y=X?X[1]:""),W){var J=$();if(null!=J&&J>parseFloat(Y)){B=String(J);break e}}B=Y}var Z,ee={};function te(){return V((function(){for(var e=0,t=R(String(B)).split("."),n=R("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var o=t[i]||"",a=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==o[0].length&&0==a[0].length)break;e=O(0==o[1].length?0:parseInt(o[1],10),0==a[1].length?0:parseInt(a[1],10))||O(0==o[2].length,0==a[2].length)||O(o[2],a[2]),o=o[3],a=a[3]}while(0==e)}return 0<=e}))}if(c.document&&W){var ne=$();Z=ne||(parseInt(B,10)||void 0)}else Z=void 0;var re=Z,ie=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{c.addEventListener("test",l,t),c.removeEventListener("test",l,t)}catch(n){}return e}();function oe(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function ae(e,t){if(oe.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(z){e:{try{q(t.nodeName);var i=!0;break e}catch(o){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:se[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&ae.Z.h.call(this)}}oe.prototype.h=function(){this.defaultPrevented=!0},b(ae,oe);var se={2:"touch",3:"pen",4:"mouse"};ae.prototype.h=function(){ae.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var ue="closure_listenable_"+(1e6*Math.random()|0),ce=0;function le(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++ce,this.ca=this.fa=!1}function he(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function fe(e){this.src=e,this.g={},this.h=0}function de(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],o=E(i,t);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(he(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function pe(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.ca&&o.listener==t&&o.capture==!!n&&o.ia==r)return i}return-1}fe.prototype.add=function(e,t,n,r,i){var o=e.toString();e=this.g[o],e||(e=this.g[o]=[],this.h++);var a=pe(e,t,r,i);return-1<a?(t=e[a],n||(t.fa=!1)):(t=new le(t,this.src,o,!!r,i),t.fa=n,e.push(t)),t};var ve="closure_lm_"+(1e6*Math.random()|0),ge={};function me(e,t,n,r,i){if(r&&r.once)return be(e,t,n,r,i);if(Array.isArray(t)){for(var o=0;o<t.length;o++)me(e,t[o],n,r,i);return null}return n=Ce(n),e&&e[ue]?e.N(t,n,f(r)?!!r.capture:!!r,i):ye(e,t,n,!1,r,i)}function ye(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var a=f(i)?!!i.capture:!!i,s=ke(e);if(s||(e[ve]=s=new fe(e)),n=s.add(t,n,r,a,o),n.proxy)return n;if(r=_e(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)ie||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Te(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function _e(){function e(n){return t.call(e.src,e.listener,n)}var t=Ee;return e}function be(e,t,n,r,i){if(Array.isArray(t)){for(var o=0;o<t.length;o++)be(e,t[o],n,r,i);return null}return n=Ce(n),e&&e[ue]?e.O(t,n,f(r)?!!r.capture:!!r,i):ye(e,t,n,!0,r,i)}function we(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)we(e,t[o],n,r,i);else r=f(r)?!!r.capture:!!r,n=Ce(n),e&&e[ue]?(e=e.i,t=String(t).toString(),t in e.g&&(o=e.g[t],n=pe(o,n,r,i),-1<n&&(he(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.g[t],e.h--)))):e&&(e=ke(e))&&(t=e.g[t.toString()],e=-1,t&&(e=pe(t,n,r,i)),(n=-1<e?t[e]:null)&&Ie(n))}function Ie(e){if("number"!==typeof e&&e&&!e.ca){var t=e.src;if(t&&t[ue])de(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Te(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=ke(t))?(de(n,e),0==n.h&&(n.src=null,t[ve]=null)):he(e)}}}function Te(e){return e in ge?ge[e]:ge[e]="on"+e}function Ee(e,t){if(e.ca)e=!0;else{t=new ae(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&Ie(e),e=n.call(r,t)}return e}function ke(e){return e=e[ve],e instanceof fe?e:null}var Se="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ce(e){return"function"===typeof e?e:(e[Se]||(e[Se]=function(t){return e.handleEvent(t)}),e[Se])}function Ae(){w.call(this),this.i=new fe(this),this.P=this,this.I=null}function Ne(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new oe(t,e);else if(t instanceof oe)t.target=t.target||e;else{var i=t;t=new oe(r,e),U(t,i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var a=t.g=n[o];i=xe(a,r,!0,t)&&i}if(a=t.g=e,i=xe(a,r,!0,t)&&i,i=xe(a,r,!1,t)&&i,n)for(o=0;o<n.length;o++)a=t.g=n[o],i=xe(a,r,!1,t)&&i}function xe(e,t,n,r){if(t=e.i.g[String(t)],!t)return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var a=t[o];if(a&&!a.ca&&a.capture==n){var s=a.listener,u=a.ia||a.src;a.fa&&de(e.i,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}b(Ae,w),Ae.prototype[ue]=!0,Ae.prototype.removeEventListener=function(e,t,n,r){we(this,e,t,n,r)},Ae.prototype.M=function(){if(Ae.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)he(n[r]);delete t.g[e],t.h--}}this.I=null},Ae.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Ae.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Re=c.JSON.stringify;function Pe(){var e=Ve,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Oe,De=function(){function e(){this.h=this.g=null}return e.prototype.add=function(e,t){var n=Me.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n},e}(),Me=new(function(){function e(e,t){this.i=e,this.j=t,this.h=0,this.g=null}return e.prototype.get=function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e},e}())((function(){return new Le}),(function(e){return e.reset()})),Le=function(){function e(){this.next=this.g=this.h=null}return e.prototype.set=function(e,t){this.h=e,this.g=t,this.next=null},e.prototype.reset=function(){this.next=this.g=this.h=null},e}();function Fe(e){c.setTimeout((function(){throw e}),0)}function je(e,t){Oe||Ue(),qe||(Oe(),qe=!0),Ve.add(e,t)}function Ue(){var e=c.Promise.resolve(void 0);Oe=function(){e.then(Be)}}var qe=!1,Ve=new De;function Be(){for(var e;e=Pe();){try{e.h.call(e.g)}catch(n){Fe(n)}var t=Me;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}qe=!1}function Ke(e,t){Ae.call(this),this.h=e||1,this.g=t||c,this.j=y(this.kb,this),this.l=Date.now()}function We(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function He(e,t,n){if("function"===typeof e)n&&(e=y(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=y(e.handleEvent,e)}return 2147483647<Number(t)?-1:c.setTimeout(e,t||0)}function Ge(e){e.g=He((function(){e.g=null,e.i&&(e.i=!1,Ge(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}b(Ke,Ae),a=Ke.prototype,a.da=!1,a.S=null,a.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Ne(this,"tick"),this.da&&(We(this),this.start()))}},a.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},a.M=function(){Ke.Z.M.call(this),We(this),delete this.g};var ze=function(e){function t(t,n){var r=e.call(this)||this;return r.m=t,r.j=n,r.h=null,r.i=!1,r.g=null,r}return i(t,e),t.prototype.l=function(e){this.h=arguments,this.g?this.i=!0:Ge(this)},t.prototype.M=function(){e.prototype.M.call(this),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},t}(w);function Qe(e){w.call(this),this.h=e,this.g={}}b(Qe,w);var $e=[];function Ye(e,t,n,r){Array.isArray(n)||(n&&($e[0]=n.toString()),n=$e);for(var i=0;i<n.length;i++){var o=me(t,n[i],r||e.handleEvent,!1,e.h||e);if(!o)break;e.g[o.key]=o}}function Xe(e){L(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Ie(e)}),e),e.g={}}function Je(){this.g=!0}function Ze(e,t,n,r,i,o){e.info((function(){if(e.g)if(o)for(var a="",s=o.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");a=2<=h.length&&"type"==h[1]?a+(l+"=")+c+"&":a+(l+"=redacted&")}}else a=null;else a=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+a}))}function et(e,t,n,r,i,o,a){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+o+" "+a}))}function tt(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+rt(e,n)+(r?" "+r:"")}))}function nt(e,t){e.info((function(){return"TIMEOUT: "+t}))}function rt(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var a=1;a<i.length;a++)i[a]=""}}}return Re(n)}catch(s){return t}}Qe.prototype.M=function(){Qe.Z.M.call(this),Xe(this)},Qe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Je.prototype.Aa=function(){this.g=!1},Je.prototype.info=function(){};var it={},ot=null;function at(){return ot=ot||new Ae}function st(e){oe.call(this,it.Ma,e)}function ut(e){var t=at();Ne(t,new st(t,e))}function ct(e,t){oe.call(this,it.STAT_EVENT,e),this.stat=t}function lt(e){var t=at();Ne(t,new ct(t,e))}function ht(e,t){oe.call(this,it.Na,e),this.size=t}function ft(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return c.setTimeout((function(){e()}),t)}it.Ma="serverreachability",b(st,oe),it.STAT_EVENT="statevent",b(ct,oe),it.Na="timingevent",b(ht,oe);var dt={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},pt={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function vt(){}function gt(e){return e.h||(e.h=e.i())}function mt(){}vt.prototype.h=null;var yt,_t={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function bt(){oe.call(this,"d")}function wt(){oe.call(this,"c")}function It(){}function Tt(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new Qe(this),this.P=kt,e=G?125:void 0,this.W=new Ke(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Et}function Et(){this.i=null,this.g="",this.h=!1}b(bt,oe),b(wt,oe),b(It,vt),It.prototype.g=function(){return new XMLHttpRequest},It.prototype.i=function(){return{}},yt=new It;var kt=45e3,St={},Ct={};function At(e,t,n){e.K=1,e.v=Zt(zt(t)),e.s=n,e.U=!0,Nt(e,null)}function Nt(e,t){e.F=Date.now(),Ot(e),e.A=zt(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),vn(n.h,"t",r),e.C=0,n=e.l.H,e.h=new Et,e.g=wr(e.l,n?t:null,!e.s),0<e.O&&(e.L=new ze(y(e.Ia,e,e.g),e.O)),Ye(e.V,e.g,"readystatechange",e.gb),t=e.H?F(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),ut(1),Ze(e.j,e.u,e.A,e.m,e.X,e.s)}function xt(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function Rt(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if(r=Pt(e,n),r==Ct){4==t&&(e.o=4,lt(14),i=!1),tt(e.j,e.m,null,"[Incomplete Response]");break}if(r==St){e.o=4,lt(15),tt(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}tt(e.j,e.m,r,null),jt(e,r)}xt(e)&&r!=Ct&&r!=St&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,lt(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,t=e.l,t.g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),dr(t),t.L=!0,lt(11))):(tt(e.j,e.m,n,"[Invalid Chunked Response]"),Ft(e),Lt(e))}function Pt(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Ct:(n=Number(t.substring(n,r)),isNaN(n)?St:(r+=1,r+n>t.length?Ct:(t=t.substr(r,n),e.C=r+n,t)))}function Ot(e){e.Y=Date.now()+e.P,Dt(e,e.P)}function Dt(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=ft(y(e.eb,e),t)}function Mt(e){e.B&&(c.clearTimeout(e.B),e.B=null)}function Lt(e){0==e.l.G||e.I||gr(e.l,e)}function Ft(e){Mt(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,We(e.W),Xe(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function jt(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||Tn(n.i,e)))if(n.I=e.N,!e.J&&Tn(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(o){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;vr(n),rr(n)}fr(n),lt(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=ft(y(n.ab,n),6e3));if(1>=In(n.i)&&n.ka){try{n.ka()}catch(o){}n.ka=void 0}}else yr(n,11)}else if((e.J||n.g==e)&&vr(n),!N(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var o=i[t];if(n.U=o[0],o=o[1],2==n.G)if("c"==o[0]){n.J=o[1],n.la=o[2];var a=o[3];null!=a&&(n.ma=a,n.h.info("VER="+n.ma));var s=o[4];null!=s&&(n.za=s,n.h.info("SVER="+n.za));var u=o[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=r.i;!h.g&&(P(l,"spdy")||P(l,"quic")||P(l,"h2"))&&(h.j=h.l,h.g=new Set,h.h&&(En(h,h.h),h.h=null))}if(r.D){var f=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.sa=f,Jt(r.F,r.D,f))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms")),r=n;var d=e;if(r.oa=br(r,r.H?r.la:null,r.W),d.J){kn(r.i,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(Mt(p),Ot(p)),r.g=d}else hr(r);0<n.l.length&&ar(n)}else"stop"!=o[0]&&"close"!=o[0]||yr(n,7);else 3==n.G&&("stop"==o[0]||"close"==o[0]?"stop"==o[0]?yr(n,7):nr(n):"noop"!=o[0]&&n.j&&n.j.wa(o),n.A=0)}ut(4)}catch(o){}}function Ut(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"===typeof e)return e.split("");if(h(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}function qt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(h(e)||"string"===typeof e)k(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(h(e)||"string"===typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=Ut(e),i=r.length;for(var o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}}function Vt(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Vt)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function Bt(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];Kt(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)r=e.g[t],Kt(i,r)||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function Kt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}a=Tt.prototype,a.setTimeout=function(e){this.P=e},a.gb=function(e){e=e.target;var t=this.L;t&&3==Yn(e)?t.l():this.Ia(e)},a.Ia=function(e){try{if(e==this.g)e:{var t=Yn(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||G||this.g&&(this.h.h||this.g.ga()||Xn(this.g)))){this.I||4!=t||7==n||ut(8==n||0>=r?3:2),Mt(this);var i=this.g.ba();this.N=i;t:if(xt(this)){var o=Xn(this.g);e="";var a=o.length,s=4==Yn(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ft(this),Lt(this);var u="";break t}this.h.i=new c.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(o[n],{stream:s&&n==a-1});o.splice(0,a),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,et(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var l,h=this.g;if((l=h.g?h.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(l)){var f=l;break t}}f=null}if(!(i=f)){this.i=!1,this.o=3,lt(12),Ft(this),Lt(this);break e}tt(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,jt(this,i)}this.U?(Rt(this,t,u),G&&this.i&&3==t&&(Ye(this.V,this.W,"tick",this.fb),this.W.start())):(tt(this.j,this.m,u,null),jt(this,u)),4==t&&Ft(this),this.i&&!this.I&&(4==t?gr(this.l,this):(this.i=!1,Ot(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,lt(12)):(this.o=0,lt(13)),Ft(this),Lt(this)}}}catch(t){}},a.fb=function(){if(this.g){var e=Yn(this.g),t=this.g.ga();this.C<t.length&&(Mt(this),Rt(this,e,t),this.i&&4!=e&&Ot(this))}},a.cancel=function(){this.I=!0,Ft(this)},a.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(nt(this.j,this.A),2!=this.K&&(ut(3),lt(17)),Ft(this),this.o=2,Lt(this)):Dt(this,this.Y-e)},a=Vt.prototype,a.R=function(){Bt(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},a.T=function(){return Bt(this),this.g.concat()},a.get=function(e,t){return Kt(this.h,e)?this.h[e]:t},a.set=function(e,t){Kt(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},a.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);e.call(t,o,i,this)}};var Wt=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ht(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Gt(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof Gt){this.g=void 0!==t?t:e.g,Qt(this,e.j),this.s=e.s,$t(this,e.i),Yt(this,e.m),this.l=e.l,t=e.h;var n=new hn;n.i=t.i,t.g&&(n.g=new Vt(t.g),n.h=t.h),Xt(this,n),this.o=e.o}else e&&(n=String(e).match(Wt))?(this.g=!!t,Qt(this,n[1]||"",!0),this.s=nn(n[2]||""),$t(this,n[3]||"",!0),Yt(this,n[4]),this.l=nn(n[5]||"",!0),Xt(this,n[6]||"",!0),this.o=nn(n[7]||"")):(this.g=!!t,this.h=new hn(null,this.g))}function zt(e){return new Gt(e)}function Qt(e,t,n){e.j=n?nn(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function $t(e,t,n){e.i=n?nn(t,!0):t}function Yt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Xt(e,t,n){t instanceof hn?(e.h=t,mn(e.h,e.g)):(n||(t=rn(t,cn)),e.h=new hn(t,e.g))}function Jt(e,t,n){e.h.set(t,n)}function Zt(e){return Jt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function en(e){return e instanceof Gt?zt(e):new Gt(e,void 0)}function tn(e,t,n,r){var i=new Gt(null,void 0);return e&&Qt(i,e),t&&$t(i,t),n&&Yt(i,n),r&&(i.l=r),i}function nn(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function rn(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,on),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function on(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(15&e).toString(16)}Gt.prototype.toString=function(){var e=[],t=this.j;t&&e.push(rn(t,an,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(rn(t,an,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,null!=n&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(rn(n,"/"==n.charAt(0)?un:sn,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",rn(n,ln)),e.join("")};var an=/[#\/\?@]/g,sn=/[#\?:]/g,un=/[#\?]/g,cn=/[#\?@]/g,ln=/#/g;function hn(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function fn(e){e.g||(e.g=new Vt,e.h=0,e.i&&Ht(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function dn(e,t){fn(e),t=gn(e,t),Kt(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,e=e.g,Kt(e.h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&Bt(e)))}function pn(e,t){return fn(e),t=gn(e,t),Kt(e.g.h,t)}function vn(e,t,n){dn(e,t),0<n.length&&(e.i=null,e.g.set(gn(e,t),A(n)),e.h+=n.length)}function gn(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function mn(e,t){t&&!e.j&&(fn(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(dn(this,t),vn(this,n,e))}),e)),e.j=t}a=hn.prototype,a.add=function(e,t){fn(this),this.i=null,e=gn(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},a.forEach=function(e,t){fn(this),this.g.forEach((function(n,r){k(n,(function(n){e.call(t,n,r,this)}),this)}),this)},a.T=function(){fn(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(t[r]);return n},a.R=function(e){fn(this);var t=[];if("string"===typeof e)pn(this,e)&&(t=C(t,this.g.get(gn(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=C(t,e[n])}return t},a.set=function(e,t){return fn(this),this.i=null,e=gn(this,e),pn(this,e)&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},a.get=function(e,t){return e?(e=this.R(e),0<e.length?String(e[0]):t):t},a.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),e.push(a)}}return this.i=e.join("&")};var yn=function(){function e(e,t){this.h=e,this.g=t}return e}();function _n(e){this.l=e||bn,c.PerformanceNavigationTiming?(e=c.performance.getEntriesByType("navigation"),e=0<e.length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol)):e=!!(c.g&&c.g.Ea&&c.g.Ea()&&c.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var bn=10;function wn(e){return!!e.h||!!e.g&&e.g.size>=e.j}function In(e){return e.h?1:e.g?e.g.size:0}function Tn(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function En(e,t){e.g?e.g.add(t):e.h=t}function kn(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Sn(e){var t,n;if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var r=e.i;try{for(var i=o(e.g.values()),a=i.next();!a.done;a=i.next()){var s=a.value;r=r.concat(s.D)}}catch(u){t={error:u}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}return A(e.i)}function Cn(){}function An(){this.g=new Cn}function Nn(e,t,n){var r=n||"";try{qt(e,(function(e,n){var i=e;f(e)&&(i=Re(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function xn(e,t){var n=new Je;if(c.Image){var r=new Image;r.onload=_(Rn,n,r,"TestLoadImage: loaded",!0,t),r.onerror=_(Rn,n,r,"TestLoadImage: error",!1,t),r.onabort=_(Rn,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=_(Rn,n,r,"TestLoadImage: timeout",!1,t),c.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}function Rn(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(o){}}function Pn(e){this.l=e.$b||null,this.j=e.ib||!1}function On(e,t){Ae.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=Dn,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}_n.prototype.cancel=function(){var e,t;if(this.i=Sn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var n=o(this.g.values()),r=n.next();!r.done;r=n.next()){var i=r.value;i.cancel()}}catch(a){e={error:a}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}this.g.clear()}},Cn.prototype.stringify=function(e){return c.JSON.stringify(e,void 0)},Cn.prototype.parse=function(e){return c.JSON.parse(e,void 0)},b(Pn,vt),Pn.prototype.g=function(){return new On(this.l,this.j)},Pn.prototype.i=function(e){return function(){return e}}({}),b(On,Ae);var Dn=0;function Mn(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function Ln(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Fn(e)}function Fn(e){e.onreadystatechange&&e.onreadystatechange.call(e)}a=On.prototype,a.open=function(e,t){if(this.readyState!=Dn)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Fn(this)},a.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||c).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},a.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ln(this)),this.readyState=Dn},a.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Fn(this)),this.g&&(this.readyState=3,Fn(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof c.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Mn(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},a.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Ln(this):Fn(this),3==this.readyState&&Mn(this)}},a.Ua=function(e){this.g&&(this.response=this.responseText=e,Ln(this))},a.Ta=function(e){this.g&&(this.response=e,Ln(this))},a.ha=function(){this.g&&Ln(this)},a.setRequestHeader=function(e,t){this.v.append(e,t)},a.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},a.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(On.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var jn=c.JSON.parse;function Un(e){Ae.call(this),this.headers=new Vt,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=qn,this.K=this.L=!1}b(Un,Ae);var qn="",Vn=/^https?$/i,Bn=["POST","PUT"];function Kn(e){return W&&te()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}function Wn(e){return"content-type"==e.toLowerCase()}function Hn(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Gn(e),Qn(e)}function Gn(e){e.D||(e.D=!0,Ne(e,"complete"),Ne(e,"error"))}function zn(e){if(e.h&&"undefined"!=typeof u&&(!e.C[1]||4!=Yn(e)||2!=e.ba()))if(e.v&&4==Yn(e))He(e.Fa,0,e);else if(Ne(e,"readystatechange"),4==Yn(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var o=String(e.H).match(Wt)[1]||null;if(!o&&c.self&&c.self.location){var a=c.self.location.protocol;o=a.substr(0,a.length-1)}i=!Vn.test(o?o.toLowerCase():"")}t=i}if(t)Ne(e,"complete"),Ne(e,"success");else{e.m=6;try{var s=2<Yn(e)?e.g.statusText:""}catch(l){s=""}e.j=s+" ["+e.ba()+"]",Gn(e)}}finally{Qn(e)}}}function Qn(e,t){if(e.g){$n(e);var n=e.g,r=e.C[0]?l:null;e.g=null,e.C=null,t||Ne(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function $n(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(c.clearTimeout(e.A),e.A=null)}function Yn(e){return e.g?e.g.readyState:0}function Xn(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case qn:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Jn(e){var t="";return L(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Zn(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Jn(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Jt(e,t,n))}function er(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function tr(e){this.za=0,this.l=[],this.h=new Je,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=er("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=er("baseRetryDelayMs",5e3,e),this.$a=er("retryDelaySeedMs",1e4,e),this.Ya=er("forwardChannelMaxRetries",2,e),this.ra=er("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new _n(e&&e.concurrentRequestLimit),this.Ca=new An,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function nr(e){if(ir(e),3==e.G){var t=e.V++,n=zt(e.F);Jt(n,"SID",e.J),Jt(n,"RID",t),Jt(n,"TYPE","terminate"),cr(e,n),t=new Tt(e,e.h,t,void 0),t.K=2,t.v=Zt(zt(n)),n=!1,c.navigator&&c.navigator.sendBeacon&&(n=c.navigator.sendBeacon(t.v.toString(),"")),!n&&c.Image&&((new Image).src=t.v,n=!0),n||(t.g=wr(t.l,null),t.g.ea(t.v)),t.F=Date.now(),Ot(t)}_r(e)}function rr(e){e.g&&(dr(e),e.g.cancel(),e.g=null)}function ir(e){rr(e),e.u&&(c.clearTimeout(e.u),e.u=null),vr(e),e.i.cancel(),e.m&&("number"===typeof e.m&&c.clearTimeout(e.m),e.m=null)}function or(e,t){e.l.push(new yn(e.Za++,t)),3==e.G&&ar(e)}function ar(e){wn(e.i)||e.m||(e.m=!0,je(e.Ha,e),e.C=0)}function sr(e,t){return!(In(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.l=t.D.concat(e.l),!0):!(1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya))&&(e.m=ft(y(e.Ha,e,t),mr(e,e.C)),e.C++,!0))}function ur(e,t){var n;n=t?t.m:e.V++;var r=zt(e.F);Jt(r,"SID",e.J),Jt(r,"RID",n),Jt(r,"AID",e.U),cr(e,r),e.o&&e.s&&Zn(r,e.o,e.s),n=new Tt(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=lr(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),En(e.i,n),At(n,r,t)}function cr(e,t){e.j&&qt({},(function(e,n){Jt(t,n,e)}))}function lr(e,t,n){n=Math.min(e.l.length,n);var r=e.j?y(e.j.Oa,e.j,e):null;e:for(var i=e.l,o=-1;;){var a=["count="+n];-1==o?0<n?(o=i[0].h,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var c=i[u].h,l=i[u].g;if(c-=o,0>c)o=Math.max(0,i[u].h-100),s=!1;else try{Nn(l,a,"req"+c+"_")}catch(h){r&&r(l)}}if(s){r=a.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function hr(e){e.g||e.u||(e.Y=1,je(e.Ga,e),e.A=0)}function fr(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=ft(y(e.Ga,e),mr(e,e.A)),e.A++,!0)}function dr(e){null!=e.B&&(c.clearTimeout(e.B),e.B=null)}function pr(e){e.g=new Tt(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=zt(e.oa);Jt(t,"RID","rpc"),Jt(t,"SID",e.J),Jt(t,"CI",e.N?"0":"1"),Jt(t,"AID",e.U),cr(e,t),Jt(t,"TYPE","xmlhttp"),e.o&&e.s&&Zn(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=Zt(zt(t)),n.s=null,n.U=!0,Nt(n,e)}function vr(e){null!=e.v&&(c.clearTimeout(e.v),e.v=null)}function gr(e,t){var n=null;if(e.g==t){vr(e),dr(e),e.g=null;var r=2}else{if(!Tn(e.i,t))return;n=t.D,kn(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;r=at(),Ne(r,new ht(r,n,t,i)),ar(e)}else hr(e);else if(i=t.o,3==i||0==i&&0<e.I||!(1==r&&sr(e,t)||2==r&&fr(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:yr(e,5);break;case 4:yr(e,10);break;case 3:yr(e,6);break;default:yr(e,2)}}function mr(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function yr(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=y(e.jb,e);n||(n=new Gt("//www.google.com/images/cleardot.gif"),c.location&&"http"==c.location.protocol||Qt(n,"https"),Zt(n)),xn(n.toString(),r)}else lt(2);e.G=0,e.j&&e.j.va(t),_r(e),ir(e)}function _r(e){e.G=0,e.I=-1,e.j&&(0==Sn(e.i).length&&0==e.l.length||(e.i.i.length=0,A(e.l),e.l.length=0),e.j.ua())}function br(e,t,n){var r=en(n);if(""!=r.i)t&&$t(r,t+"."+r.i),Yt(r,r.m);else{var i=c.location;r=tn(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&L(e.aa,(function(e,t){Jt(r,t,e)})),t=e.D,n=e.sa,t&&n&&Jt(r,t,n),Jt(r,"VER",e.ma),cr(e,r),r}function wr(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return t=n&&e.Ba&&!e.qa?new Un(new Pn({ib:!0})):new Un(e.qa),t.L=e.H,t}function Ir(){}function Tr(){if(W&&!(10<=Number(re)))throw Error("Environmental error: no available transport.")}function Er(e,t){Ae.call(this),this.g=new tr(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!N(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!N(t)&&(this.g.D=t,e=this.h,null!==e&&t in e&&(e=this.h,t in e&&delete e[t])),this.j=new Cr(this)}function kr(e){bt.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Sr(){wt.call(this),this.status=1}function Cr(e){this.g=e}a=Un.prototype,a.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():yt.g(),this.C=this.u?gt(this.u):gt(yt),this.g.onreadystatechange=y(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(o){return void Hn(this,o)}e=n||"";var i=new Vt(this.headers);r&&qt(r,(function(e,t){i.set(t,e)})),r=S(i.T()),n=c.FormData&&e instanceof c.FormData,!(0<=E(Bn,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{$n(this),0<this.B&&((this.K=Kn(this.g))?(this.g.timeout=this.B,this.g.ontimeout=y(this.pa,this)):this.A=He(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(o){Hn(this,o)}},a.pa=function(){"undefined"!=typeof u&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ne(this,"timeout"),this.abort(8))},a.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Ne(this,"complete"),Ne(this,"abort"),Qn(this))},a.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Qn(this,!0)),Un.Z.M.call(this)},a.Fa=function(){this.s||(this.F||this.v||this.l?zn(this):this.cb())},a.cb=function(){zn(this)},a.ba=function(){try{return 2<Yn(this)?this.g.status:-1}catch(e){return-1}},a.ga=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},a.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),jn(t)}},a.Da=function(){return this.m},a.La=function(){return"string"===typeof this.j?this.j:String(this.j)},a=tr.prototype,a.ma=8,a.G=1,a.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},a.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new Tt(this,this.h,e,void 0),n=this.s;if(this.P&&(n?(n=F(n),U(n,this.P)):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var o=this.l[i];if(o="__data__"in o.g&&(o=o.g.__data__,"string"===typeof o)?o.length:void 0,void 0===o)break;if(r+=o,4096<r){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=lr(this,t,r),i=zt(this.F),Jt(i,"RID",e),Jt(i,"CVER",22),this.D&&Jt(i,"X-HTTP-Session-Id",this.D),cr(this,i),this.o&&n&&Zn(i,this.o,n),En(this.i,t),this.Ra&&Jt(i,"TYPE","init"),this.ja?(Jt(i,"$req",r),Jt(i,"SID","null"),t.$=!0,At(t,i,null)):At(t,i,r),this.G=2}}else 3==this.G&&(e?ur(this,e):0==this.l.length||wn(this.i)||ur(this))},a.Ga=function(){if(this.u=null,pr(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=ft(y(this.bb,this),e)}},a.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,lt(10),rr(this),pr(this))},a.ab=function(){null!=this.v&&(this.v=null,rr(this),fr(this),lt(19))},a.jb=function(e){e?(this.h.info("Successfully pinged google.com"),lt(2)):(this.h.info("Failed to ping google.com"),lt(1))},a=Ir.prototype,a.xa=function(){},a.wa=function(){},a.va=function(){},a.ua=function(){},a.Oa=function(){},Tr.prototype.g=function(e,t){return new Er(e,t)},b(Er,Ae),Er.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),je(y(e.hb,e,t))),lt(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=br(e,null,e.W),ar(e)},Er.prototype.close=function(){nr(this.g)},Er.prototype.u=function(e){if("string"===typeof e){var t={};t.__data__=e,or(this.g,t)}else this.v?(t={},t.__data__=Re(e),or(this.g,t)):or(this.g,e)},Er.prototype.M=function(){this.g.j=null,delete this.j,nr(this.g),delete this.g,Er.Z.M.call(this)},b(kr,bt),b(Sr,wt),b(Cr,Ir),Cr.prototype.xa=function(){Ne(this.g,"a")},Cr.prototype.wa=function(e){Ne(this.g,new kr(e))},Cr.prototype.va=function(e){Ne(this.g,new Sr(e))},Cr.prototype.ua=function(){Ne(this.g,"b")},Tr.prototype.createWebChannel=Tr.prototype.g,Er.prototype.send=Er.prototype.u,Er.prototype.open=Er.prototype.m,Er.prototype.close=Er.prototype.close,dt.NO_ERROR=0,dt.TIMEOUT=8,dt.HTTP_ERROR=6,pt.COMPLETE="complete",mt.EventType=_t,_t.OPEN="a",_t.CLOSE="b",_t.ERROR="c",_t.MESSAGE="d",Ae.prototype.listen=Ae.prototype.N,Un.prototype.listenOnce=Un.prototype.O,Un.prototype.getLastError=Un.prototype.La,Un.prototype.getLastErrorCode=Un.prototype.Da,Un.prototype.getStatus=Un.prototype.ba,Un.prototype.getResponseJson=Un.prototype.Qa,Un.prototype.getResponseText=Un.prototype.ga,Un.prototype.send=Un.prototype.ea;var Ar=function(){return new Tr},Nr=function(){return at()},xr=dt,Rr=pt,Pr=it,Or={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Dr=Pn,Mr=mt,Lr=Un},4870:function(e,t,n){"use strict";n.d(t,{Bj:function(){return o},Fl:function(){return We},IU:function(){return Ae},Jd:function(){return T},PG:function(){return Ee},SU:function(){return Ue},Um:function(){return we},WL:function(){return Ve},X$:function(){return C},X3:function(){return Ce},XI:function(){return Le},Xl:function(){return Ne},dq:function(){return De},iH:function(){return Me},j:function(){return k},lk:function(){return E},qj:function(){return be},qq:function(){return _},yT:function(){return Se}});n(7658);var r=n(7139);let i;class o{constructor(e=!1){this.detached=e,this.active=!0,this.effects=[],this.cleanups=[],this.parent=i,!e&&i&&(this.index=(i.scopes||(i.scopes=[])).push(this)-1)}run(e){if(this.active){const t=i;try{return i=this,e()}finally{i=t}}else 0}on(){i=this}off(){i=this.parent}stop(e){if(this.active){let t,n;for(t=0,n=this.effects.length;t<n;t++)this.effects[t].stop();for(t=0,n=this.cleanups.length;t<n;t++)this.cleanups[t]();if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].stop(!0);if(!this.detached&&this.parent&&!e){const e=this.parent.scopes.pop();e&&e!==this&&(this.parent.scopes[this.index]=e,e.index=this.index)}this.parent=void 0,this.active=!1}}}function a(e,t=i){t&&t.active&&t.effects.push(e)}const s=e=>{const t=new Set(e);return t.w=0,t.n=0,t},u=e=>(e.w&p)>0,c=e=>(e.n&p)>0,l=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=p},h=e=>{const{deps:t}=e;if(t.length){let n=0;for(let r=0;r<t.length;r++){const i=t[r];u(i)&&!c(i)?i.delete(e):t[n++]=i,i.w&=~p,i.n&=~p}t.length=n}},f=new WeakMap;let d=0,p=1;const v=30;let g;const m=Symbol(""),y=Symbol("");class _{constructor(e,t=null,n){this.fn=e,this.scheduler=t,this.active=!0,this.deps=[],this.parent=void 0,a(this,n)}run(){if(!this.active)return this.fn();let e=g,t=w;while(e){if(e===this)return;e=e.parent}try{return this.parent=g,g=this,w=!0,p=1<<++d,d<=v?l(this):b(this),this.fn()}finally{d<=v&&h(this),p=1<<--d,g=this.parent,w=t,this.parent=void 0,this.deferStop&&this.stop()}}stop(){g===this?this.deferStop=!0:this.active&&(b(this),this.onStop&&this.onStop(),this.active=!1)}}function b(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}let w=!0;const I=[];function T(){I.push(w),w=!1}function E(){const e=I.pop();w=void 0===e||e}function k(e,t,n){if(w&&g){let t=f.get(e);t||f.set(e,t=new Map);let r=t.get(n);r||t.set(n,r=s());const i=void 0;S(r,i)}}function S(e,t){let n=!1;d<=v?c(e)||(e.n|=p,n=!u(e)):n=!e.has(g),n&&(e.add(g),g.deps.push(e))}function C(e,t,n,i,o,a){const u=f.get(e);if(!u)return;let c=[];if("clear"===t)c=[...u.values()];else if("length"===n&&(0,r.kJ)(e)){const e=(0,r.He)(i);u.forEach(((t,n)=>{("length"===n||n>=e)&&c.push(t)}))}else switch(void 0!==n&&c.push(u.get(n)),t){case"add":(0,r.kJ)(e)?(0,r.S0)(n)&&c.push(u.get("length")):(c.push(u.get(m)),(0,r._N)(e)&&c.push(u.get(y)));break;case"delete":(0,r.kJ)(e)||(c.push(u.get(m)),(0,r._N)(e)&&c.push(u.get(y)));break;case"set":(0,r._N)(e)&&c.push(u.get(m));break}if(1===c.length)c[0]&&A(c[0]);else{const e=[];for(const t of c)t&&e.push(...t);A(s(e))}}function A(e,t){const n=(0,r.kJ)(e)?e:[...e];for(const r of n)r.computed&&N(r,t);for(const r of n)r.computed||N(r,t)}function N(e,t){(e!==g||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const x=(0,r.fY)("__proto__,__v_isRef,__isVue"),R=new Set(Object.getOwnPropertyNames(Symbol).filter((e=>"arguments"!==e&&"caller"!==e)).map((e=>Symbol[e])).filter(r.yk)),P=F(),O=F(!1,!0),D=F(!0),M=L();function L(){const e={};return["includes","indexOf","lastIndexOf"].forEach((t=>{e[t]=function(...e){const n=Ae(this);for(let t=0,i=this.length;t<i;t++)k(n,"get",t+"");const r=n[t](...e);return-1===r||!1===r?n[t](...e.map(Ae)):r}})),["push","pop","shift","unshift","splice"].forEach((t=>{e[t]=function(...e){T();const n=Ae(this)[t].apply(this,e);return E(),n}})),e}function F(e=!1,t=!1){return function(n,i,o){if("__v_isReactive"===i)return!e;if("__v_isReadonly"===i)return e;if("__v_isShallow"===i)return t;if("__v_raw"===i&&o===(e?t?me:ge:t?ve:pe).get(n))return n;const a=(0,r.kJ)(n);if(!e&&a&&(0,r.RI)(M,i))return Reflect.get(M,i,o);const s=Reflect.get(n,i,o);return((0,r.yk)(i)?R.has(i):x(i))?s:(e||k(n,"get",i),t?s:De(s)?a&&(0,r.S0)(i)?s:s.value:(0,r.Kn)(s)?e?Ie(s):be(s):s)}}const j=q(),U=q(!0);function q(e=!1){return function(t,n,i,o){let a=t[n];if(ke(a)&&De(a)&&!De(i))return!1;if(!e&&(Se(i)||ke(i)||(a=Ae(a),i=Ae(i)),!(0,r.kJ)(t)&&De(a)&&!De(i)))return a.value=i,!0;const s=(0,r.kJ)(t)&&(0,r.S0)(n)?Number(n)<t.length:(0,r.RI)(t,n),u=Reflect.set(t,n,i,o);return t===Ae(o)&&(s?(0,r.aU)(i,a)&&C(t,"set",n,i,a):C(t,"add",n,i)),u}}function V(e,t){const n=(0,r.RI)(e,t),i=e[t],o=Reflect.deleteProperty(e,t);return o&&n&&C(e,"delete",t,void 0,i),o}function B(e,t){const n=Reflect.has(e,t);return(0,r.yk)(t)&&R.has(t)||k(e,"has",t),n}function K(e){return k(e,"iterate",(0,r.kJ)(e)?"length":m),Reflect.ownKeys(e)}const W={get:P,set:j,deleteProperty:V,has:B,ownKeys:K},H={get:D,set(e,t){return!0},deleteProperty(e,t){return!0}},G=(0,r.l7)({},W,{get:O,set:U}),z=e=>e,Q=e=>Reflect.getPrototypeOf(e);function $(e,t,n=!1,r=!1){e=e["__v_raw"];const i=Ae(e),o=Ae(t);n||(t!==o&&k(i,"get",t),k(i,"get",o));const{has:a}=Q(i),s=r?z:n?Re:xe;return a.call(i,t)?s(e.get(t)):a.call(i,o)?s(e.get(o)):void(e!==i&&e.get(t))}function Y(e,t=!1){const n=this["__v_raw"],r=Ae(n),i=Ae(e);return t||(e!==i&&k(r,"has",e),k(r,"has",i)),e===i?n.has(e):n.has(e)||n.has(i)}function X(e,t=!1){return e=e["__v_raw"],!t&&k(Ae(e),"iterate",m),Reflect.get(e,"size",e)}function J(e){e=Ae(e);const t=Ae(this),n=Q(t),r=n.has.call(t,e);return r||(t.add(e),C(t,"add",e,e)),this}function Z(e,t){t=Ae(t);const n=Ae(this),{has:i,get:o}=Q(n);let a=i.call(n,e);a||(e=Ae(e),a=i.call(n,e));const s=o.call(n,e);return n.set(e,t),a?(0,r.aU)(t,s)&&C(n,"set",e,t,s):C(n,"add",e,t),this}function ee(e){const t=Ae(this),{has:n,get:r}=Q(t);let i=n.call(t,e);i||(e=Ae(e),i=n.call(t,e));const o=r?r.call(t,e):void 0,a=t.delete(e);return i&&C(t,"delete",e,void 0,o),a}function te(){const e=Ae(this),t=0!==e.size,n=void 0,r=e.clear();return t&&C(e,"clear",void 0,void 0,n),r}function ne(e,t){return function(n,r){const i=this,o=i["__v_raw"],a=Ae(o),s=t?z:e?Re:xe;return!e&&k(a,"iterate",m),o.forEach(((e,t)=>n.call(r,s(e),s(t),i)))}}function re(e,t,n){return function(...i){const o=this["__v_raw"],a=Ae(o),s=(0,r._N)(a),u="entries"===e||e===Symbol.iterator&&s,c="keys"===e&&s,l=o[e](...i),h=n?z:t?Re:xe;return!t&&k(a,"iterate",c?y:m),{next(){const{value:e,done:t}=l.next();return t?{value:e,done:t}:{value:u?[h(e[0]),h(e[1])]:h(e),done:t}},[Symbol.iterator](){return this}}}}function ie(e){return function(...t){return"delete"!==e&&this}}function oe(){const e={get(e){return $(this,e)},get size(){return X(this)},has:Y,add:J,set:Z,delete:ee,clear:te,forEach:ne(!1,!1)},t={get(e){return $(this,e,!1,!0)},get size(){return X(this)},has:Y,add:J,set:Z,delete:ee,clear:te,forEach:ne(!1,!0)},n={get(e){return $(this,e,!0)},get size(){return X(this,!0)},has(e){return Y.call(this,e,!0)},add:ie("add"),set:ie("set"),delete:ie("delete"),clear:ie("clear"),forEach:ne(!0,!1)},r={get(e){return $(this,e,!0,!0)},get size(){return X(this,!0)},has(e){return Y.call(this,e,!0)},add:ie("add"),set:ie("set"),delete:ie("delete"),clear:ie("clear"),forEach:ne(!0,!0)},i=["keys","values","entries",Symbol.iterator];return i.forEach((i=>{e[i]=re(i,!1,!1),n[i]=re(i,!0,!1),t[i]=re(i,!1,!0),r[i]=re(i,!0,!0)})),[e,n,t,r]}const[ae,se,ue,ce]=oe();function le(e,t){const n=t?e?ce:ue:e?se:ae;return(t,i,o)=>"__v_isReactive"===i?!e:"__v_isReadonly"===i?e:"__v_raw"===i?t:Reflect.get((0,r.RI)(n,i)&&i in t?n:t,i,o)}const he={get:le(!1,!1)},fe={get:le(!1,!0)},de={get:le(!0,!1)};const pe=new WeakMap,ve=new WeakMap,ge=new WeakMap,me=new WeakMap;function ye(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function _e(e){return e["__v_skip"]||!Object.isExtensible(e)?0:ye((0,r.W7)(e))}function be(e){return ke(e)?e:Te(e,!1,W,he,pe)}function we(e){return Te(e,!1,G,fe,ve)}function Ie(e){return Te(e,!0,H,de,ge)}function Te(e,t,n,i,o){if(!(0,r.Kn)(e))return e;if(e["__v_raw"]&&(!t||!e["__v_isReactive"]))return e;const a=o.get(e);if(a)return a;const s=_e(e);if(0===s)return e;const u=new Proxy(e,2===s?i:n);return o.set(e,u),u}function Ee(e){return ke(e)?Ee(e["__v_raw"]):!(!e||!e["__v_isReactive"])}function ke(e){return!(!e||!e["__v_isReadonly"])}function Se(e){return!(!e||!e["__v_isShallow"])}function Ce(e){return Ee(e)||ke(e)}function Ae(e){const t=e&&e["__v_raw"];return t?Ae(t):e}function Ne(e){return(0,r.Nj)(e,"__v_skip",!0),e}const xe=e=>(0,r.Kn)(e)?be(e):e,Re=e=>(0,r.Kn)(e)?Ie(e):e;function Pe(e){w&&g&&(e=Ae(e),S(e.dep||(e.dep=s())))}function Oe(e,t){e=Ae(e),e.dep&&A(e.dep)}function De(e){return!(!e||!0!==e.__v_isRef)}function Me(e){return Fe(e,!1)}function Le(e){return Fe(e,!0)}function Fe(e,t){return De(e)?e:new je(e,t)}class je{constructor(e,t){this.__v_isShallow=t,this.dep=void 0,this.__v_isRef=!0,this._rawValue=t?e:Ae(e),this._value=t?e:xe(e)}get value(){return Pe(this),this._value}set value(e){const t=this.__v_isShallow||Se(e)||ke(e);e=t?e:Ae(e),(0,r.aU)(e,this._rawValue)&&(this._rawValue=e,this._value=t?e:xe(e),Oe(this,e))}}function Ue(e){return De(e)?e.value:e}const qe={get:(e,t,n)=>Ue(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const i=e[t];return De(i)&&!De(n)?(i.value=n,!0):Reflect.set(e,t,n,r)}};function Ve(e){return Ee(e)?e:new Proxy(e,qe)}var Be;class Ke{constructor(e,t,n,r){this._setter=t,this.dep=void 0,this.__v_isRef=!0,this[Be]=!1,this._dirty=!0,this.effect=new _(e,(()=>{this._dirty||(this._dirty=!0,Oe(this))})),this.effect.computed=this,this.effect.active=this._cacheable=!r,this["__v_isReadonly"]=n}get value(){const e=Ae(this);return Pe(e),!e._dirty&&e._cacheable||(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function We(e,t,n=!1){let i,o;const a=(0,r.mf)(e);a?(i=e,o=r.dG):(i=e.get,o=e.set);const s=new Ke(i,o,a||!o,n);return s}Be="__v_isReadonly"},3396:function(e,t,n){"use strict";n.d(t,{$d:function(){return a},FN:function(){return fn},Fl:function(){return An},HY:function(){return Rt},JJ:function(){return W},Ko:function(){return je},P$:function(){return ne},Q6:function(){return ue},U2:function(){return ie},Uk:function(){return en},Us:function(){return kt},Wm:function(){return Yt},Y3:function(){return y},Y8:function(){return Z},YP:function(){return Q},_:function(){return $t},aZ:function(){return ce},f3:function(){return H},h:function(){return Nn},iD:function(){return Bt},ic:function(){return Ee},j4:function(){return Kt},kq:function(){return tn},m0:function(){return G},nK:function(){return se},up:function(){return De},wg:function(){return Ft},wy:function(){return Re}});n(7658),n(541);var r=n(4870),i=n(7139);function o(e,t,n,r){let i;try{i=r?e(...r):e()}catch(o){s(o,t,n)}return i}function a(e,t,n,r){if((0,i.mf)(e)){const a=o(e,t,n,r);return a&&(0,i.tI)(a)&&a.catch((e=>{s(e,t,n)})),a}const u=[];for(let i=0;i<e.length;i++)u.push(a(e[i],t,n,r));return u}function s(e,t,n,r=!0){const i=t?t.vnode:null;if(t){let r=t.parent;const i=t.proxy,a=n;while(r){const t=r.ec;if(t)for(let n=0;n<t.length;n++)if(!1===t[n](e,i,a))return;r=r.parent}const s=t.appContext.config.errorHandler;if(s)return void o(s,null,10,[e,i,a])}u(e,n,i,r)}function u(e,t,n,r=!0){console.error(e)}let c=!1,l=!1;const h=[];let f=0;const d=[];let p=null,v=0;const g=Promise.resolve();let m=null;function y(e){const t=m||g;return e?t.then(this?e.bind(this):e):t}function _(e){let t=f+1,n=h.length;while(t<n){const r=t+n>>>1,i=S(h[r]);i<e?t=r+1:n=r}return t}function b(e){h.length&&h.includes(e,c&&e.allowRecurse?f+1:f)||(null==e.id?h.push(e):h.splice(_(e.id),0,e),w())}function w(){c||l||(l=!0,m=g.then(A))}function I(e){const t=h.indexOf(e);t>f&&h.splice(t,1)}function T(e){(0,i.kJ)(e)?d.push(...e):p&&p.includes(e,e.allowRecurse?v+1:v)||d.push(e),w()}function E(e,t=(c?f+1:0)){for(0;t<h.length;t++){const e=h[t];e&&e.pre&&(h.splice(t,1),t--,e())}}function k(e){if(d.length){const e=[...new Set(d)];if(d.length=0,p)return void p.push(...e);for(p=e,p.sort(((e,t)=>S(e)-S(t))),v=0;v<p.length;v++)p[v]();p=null,v=0}}const S=e=>null==e.id?1/0:e.id,C=(e,t)=>{const n=S(e)-S(t);if(0===n){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return n};function A(e){l=!1,c=!0,h.sort(C);i.dG;try{for(f=0;f<h.length;f++){const e=h[f];e&&!1!==e.active&&o(e,null,14)}}finally{f=0,h.length=0,k(e),c=!1,m=null,(h.length||d.length)&&A(e)}}new Set;new Map;function N(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||i.kT;let o=n;const s=t.startsWith("update:"),u=s&&t.slice(7);if(u&&u in r){const e=`${"modelValue"===u?"model":u}Modifiers`,{number:t,trim:a}=r[e]||i.kT;a&&(o=n.map((e=>(0,i.HD)(e)?e.trim():e))),t&&(o=n.map(i.He))}let c;let l=r[c=(0,i.hR)(t)]||r[c=(0,i.hR)((0,i._A)(t))];!l&&s&&(l=r[c=(0,i.hR)((0,i.rs)(t))]),l&&a(l,e,6,o);const h=r[c+"Once"];if(h){if(e.emitted){if(e.emitted[c])return}else e.emitted={};e.emitted[c]=!0,a(h,e,6,o)}}function x(e,t,n=!1){const r=t.emitsCache,o=r.get(e);if(void 0!==o)return o;const a=e.emits;let s={},u=!1;if(!(0,i.mf)(e)){const r=e=>{const n=x(e,t,!0);n&&(u=!0,(0,i.l7)(s,n))};!n&&t.mixins.length&&t.mixins.forEach(r),e.extends&&r(e.extends),e.mixins&&e.mixins.forEach(r)}return a||u?((0,i.kJ)(a)?a.forEach((e=>s[e]=null)):(0,i.l7)(s,a),(0,i.Kn)(e)&&r.set(e,s),s):((0,i.Kn)(e)&&r.set(e,null),null)}function R(e,t){return!(!e||!(0,i.F7)(t))&&(t=t.slice(2).replace(/Once$/,""),(0,i.RI)(e,t[0].toLowerCase()+t.slice(1))||(0,i.RI)(e,(0,i.rs)(t))||(0,i.RI)(e,t))}let P=null,O=null;function D(e){const t=P;return P=e,O=e&&e.type.__scopeId||null,t}function M(e,t=P,n){if(!t)return e;if(e._n)return e;const r=(...n)=>{r._d&&qt(-1);const i=D(t);let o;try{o=e(...n)}finally{D(i),r._d&&qt(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function L(e){const{type:t,vnode:n,proxy:r,withProxy:o,props:a,propsOptions:[u],slots:c,attrs:l,emit:h,render:f,renderCache:d,data:p,setupState:v,ctx:g,inheritAttrs:m}=e;let y,_;const b=D(e);try{if(4&n.shapeFlag){const e=o||r;y=nn(f.call(e,e,d,a,v,p,g)),_=l}else{const e=t;0,y=nn(e.length>1?e(a,{attrs:l,slots:c,emit:h}):e(a,null)),_=t.props?l:F(l)}}catch(I){Mt.length=0,s(I,e,1),y=Yt(Ot)}let w=y;if(_&&!1!==m){const e=Object.keys(_),{shapeFlag:t}=w;e.length&&7&t&&(u&&e.some(i.tR)&&(_=j(_,u)),w=Zt(w,_))}return n.dirs&&(w=Zt(w),w.dirs=w.dirs?w.dirs.concat(n.dirs):n.dirs),n.transition&&(w.transition=n.transition),y=w,D(b),y}const F=e=>{let t;for(const n in e)("class"===n||"style"===n||(0,i.F7)(n))&&((t||(t={}))[n]=e[n]);return t},j=(e,t)=>{const n={};for(const r in e)(0,i.tR)(r)&&r.slice(9)in t||(n[r]=e[r]);return n};function U(e,t,n){const{props:r,children:i,component:o}=e,{props:a,children:s,patchFlag:u}=t,c=o.emitsOptions;if(t.dirs||t.transition)return!0;if(!(n&&u>=0))return!(!i&&!s||s&&s.$stable)||r!==a&&(r?!a||q(r,a,c):!!a);if(1024&u)return!0;if(16&u)return r?q(r,a,c):!!a;if(8&u){const e=t.dynamicProps;for(let t=0;t<e.length;t++){const n=e[t];if(a[n]!==r[n]&&!R(c,n))return!0}}return!1}function q(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let i=0;i<r.length;i++){const o=r[i];if(t[o]!==e[o]&&!R(n,o))return!0}return!1}function V({vnode:e,parent:t},n){while(t&&t.subTree===e)(e=t.vnode).el=n,t=t.parent}const B=e=>e.__isSuspense;function K(e,t){t&&t.pendingBranch?(0,i.kJ)(e)?t.effects.push(...e):t.effects.push(e):T(e)}function W(e,t){if(hn){let n=hn.provides;const r=hn.parent&&hn.parent.provides;r===n&&(n=hn.provides=Object.create(r)),n[e]=t}else 0}function H(e,t,n=!1){const r=hn||P;if(r){const o=null==r.parent?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides;if(o&&e in o)return o[e];if(arguments.length>1)return n&&(0,i.mf)(t)?t.call(r.proxy):t}else 0}function G(e,t){return $(e,null,t)}const z={};function Q(e,t,n){return $(e,t,n)}function $(e,t,{immediate:n,deep:s,flush:u,onTrack:c,onTrigger:l}=i.kT){const h=hn;let f,d,p=!1,v=!1;if((0,r.dq)(e)?(f=()=>e.value,p=(0,r.yT)(e)):(0,r.PG)(e)?(f=()=>e,s=!0):(0,i.kJ)(e)?(v=!0,p=e.some((e=>(0,r.PG)(e)||(0,r.yT)(e))),f=()=>e.map((e=>(0,r.dq)(e)?e.value:(0,r.PG)(e)?J(e):(0,i.mf)(e)?o(e,h,2):void 0))):f=(0,i.mf)(e)?t?()=>o(e,h,2):()=>{if(!h||!h.isUnmounted)return d&&d(),a(e,h,3,[m])}:i.dG,t&&s){const e=f;f=()=>J(e())}let g,m=e=>{d=I.onStop=()=>{o(e,h,4)}};if(yn){if(m=i.dG,t?n&&a(t,h,3,[f(),v?[]:void 0,m]):f(),"sync"!==u)return i.dG;{const e=Rn();g=e.__watcherHandles||(e.__watcherHandles=[])}}let y=v?new Array(e.length).fill(z):z;const _=()=>{if(I.active)if(t){const e=I.run();(s||p||(v?e.some(((e,t)=>(0,i.aU)(e,y[t]))):(0,i.aU)(e,y)))&&(d&&d(),a(t,h,3,[e,y===z?void 0:v&&y[0]===z?[]:y,m]),y=e)}else I.run()};let w;_.allowRecurse=!!t,"sync"===u?w=_:"post"===u?w=()=>Et(_,h&&h.suspense):(_.pre=!0,h&&(_.id=h.uid),w=()=>b(_));const I=new r.qq(f,w);t?n?_():y=I.run():"post"===u?Et(I.run.bind(I),h&&h.suspense):I.run();const T=()=>{I.stop(),h&&h.scope&&(0,i.Od)(h.scope.effects,I)};return g&&g.push(T),T}function Y(e,t,n){const r=this.proxy,o=(0,i.HD)(e)?e.includes(".")?X(r,e):()=>r[e]:e.bind(r,r);let a;(0,i.mf)(t)?a=t:(a=t.handler,n=t);const s=hn;dn(this);const u=$(o,a.bind(r),n);return s?dn(s):pn(),u}function X(e,t){const n=t.split(".");return()=>{let t=e;for(let e=0;e<n.length&&t;e++)t=t[n[e]];return t}}function J(e,t){if(!(0,i.Kn)(e)||e["__v_skip"])return e;if(t=t||new Set,t.has(e))return e;if(t.add(e),(0,r.dq)(e))J(e.value,t);else if((0,i.kJ)(e))for(let n=0;n<e.length;n++)J(e[n],t);else if((0,i.DM)(e)||(0,i._N)(e))e.forEach((e=>{J(e,t)}));else if((0,i.PO)(e))for(const n in e)J(e[n],t);return e}function Z(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Ie((()=>{e.isMounted=!0})),ke((()=>{e.isUnmounting=!0})),e}const ee=[Function,Array],te={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:ee,onEnter:ee,onAfterEnter:ee,onEnterCancelled:ee,onBeforeLeave:ee,onLeave:ee,onAfterLeave:ee,onLeaveCancelled:ee,onBeforeAppear:ee,onAppear:ee,onAfterAppear:ee,onAppearCancelled:ee},setup(e,{slots:t}){const n=fn(),i=Z();let o;return()=>{const a=t.default&&ue(t.default(),!0);if(!a||!a.length)return;let s=a[0];if(a.length>1){let e=!1;for(const t of a)if(t.type!==Ot){0,s=t,e=!0;break}}const u=(0,r.IU)(e),{mode:c}=u;if(i.isLeaving)return oe(s);const l=ae(s);if(!l)return oe(s);const h=ie(l,u,i,n);se(l,h);const f=n.subTree,d=f&&ae(f);let p=!1;const{getTransitionKey:v}=l.type;if(v){const e=v();void 0===o?o=e:e!==o&&(o=e,p=!0)}if(d&&d.type!==Ot&&(!Ht(l,d)||p)){const e=ie(d,u,i,n);if(se(d,e),"out-in"===c)return i.isLeaving=!0,e.afterLeave=()=>{i.isLeaving=!1,!1!==n.update.active&&n.update()},oe(s);"in-out"===c&&l.type!==Ot&&(e.delayLeave=(e,t,n)=>{const r=re(i,d);r[String(d.key)]=d,e._leaveCb=()=>{t(),e._leaveCb=void 0,delete h.delayedLeave},h.delayedLeave=n})}return s}}},ne=te;function re(e,t){const{leavingVNodes:n}=e;let r=n.get(t.type);return r||(r=Object.create(null),n.set(t.type,r)),r}function ie(e,t,n,r){const{appear:o,mode:s,persisted:u=!1,onBeforeEnter:c,onEnter:l,onAfterEnter:h,onEnterCancelled:f,onBeforeLeave:d,onLeave:p,onAfterLeave:v,onLeaveCancelled:g,onBeforeAppear:m,onAppear:y,onAfterAppear:_,onAppearCancelled:b}=t,w=String(e.key),I=re(n,e),T=(e,t)=>{e&&a(e,r,9,t)},E=(e,t)=>{const n=t[1];T(e,t),(0,i.kJ)(e)?e.every((e=>e.length<=1))&&n():e.length<=1&&n()},k={mode:s,persisted:u,beforeEnter(t){let r=c;if(!n.isMounted){if(!o)return;r=m||c}t._leaveCb&&t._leaveCb(!0);const i=I[w];i&&Ht(e,i)&&i.el._leaveCb&&i.el._leaveCb(),T(r,[t])},enter(e){let t=l,r=h,i=f;if(!n.isMounted){if(!o)return;t=y||l,r=_||h,i=b||f}let a=!1;const s=e._enterCb=t=>{a||(a=!0,T(t?i:r,[e]),k.delayedLeave&&k.delayedLeave(),e._enterCb=void 0)};t?E(t,[e,s]):s()},leave(t,r){const i=String(e.key);if(t._enterCb&&t._enterCb(!0),n.isUnmounting)return r();T(d,[t]);let o=!1;const a=t._leaveCb=n=>{o||(o=!0,r(),T(n?g:v,[t]),t._leaveCb=void 0,I[i]===e&&delete I[i])};I[i]=e,p?E(p,[t,a]):a()},clone(e){return ie(e,t,n,r)}};return k}function oe(e){if(he(e))return e=Zt(e),e.children=null,e}function ae(e){return he(e)?e.children?e.children[0]:void 0:e}function se(e,t){6&e.shapeFlag&&e.component?se(e.component.subTree,t):128&e.shapeFlag?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function ue(e,t=!1,n){let r=[],i=0;for(let o=0;o<e.length;o++){let a=e[o];const s=null==n?a.key:String(n)+String(null!=a.key?a.key:o);a.type===Rt?(128&a.patchFlag&&i++,r=r.concat(ue(a.children,t,s))):(t||a.type!==Ot)&&r.push(null!=s?Zt(a,{key:s}):a)}if(i>1)for(let o=0;o<r.length;o++)r[o].patchFlag=-2;return r}function ce(e){return(0,i.mf)(e)?{setup:e,name:e.name}:e}const le=e=>!!e.type.__asyncLoader;const he=e=>e.type.__isKeepAlive;RegExp,RegExp;function fe(e,t){return(0,i.kJ)(e)?e.some((e=>fe(e,t))):(0,i.HD)(e)?e.split(",").includes(t):!!e.test&&e.test(t)}function de(e,t){ve(e,"a",t)}function pe(e,t){ve(e,"da",t)}function ve(e,t,n=hn){const r=e.__wdc||(e.__wdc=()=>{let t=n;while(t){if(t.isDeactivated)return;t=t.parent}return e()});if(_e(t,r,n),n){let e=n.parent;while(e&&e.parent)he(e.parent.vnode)&&ge(r,t,n,e),e=e.parent}}function ge(e,t,n,r){const o=_e(t,e,r,!0);Se((()=>{(0,i.Od)(r[t],o)}),n)}function me(e){e.shapeFlag&=-257,e.shapeFlag&=-513}function ye(e){return 128&e.shapeFlag?e.ssContent:e}function _e(e,t,n=hn,i=!1){if(n){const o=n[e]||(n[e]=[]),s=t.__weh||(t.__weh=(...i)=>{if(n.isUnmounted)return;(0,r.Jd)(),dn(n);const o=a(t,n,e,i);return pn(),(0,r.lk)(),o});return i?o.unshift(s):o.push(s),s}}const be=e=>(t,n=hn)=>(!yn||"sp"===e)&&_e(e,((...e)=>t(...e)),n),we=be("bm"),Ie=be("m"),Te=be("bu"),Ee=be("u"),ke=be("bum"),Se=be("um"),Ce=be("sp"),Ae=be("rtg"),Ne=be("rtc");function xe(e,t=hn){_e("ec",e,t)}function Re(e,t){const n=P;if(null===n)return e;const r=kn(n)||n.proxy,o=e.dirs||(e.dirs=[]);for(let a=0;a<t.length;a++){let[e,n,s,u=i.kT]=t[a];e&&((0,i.mf)(e)&&(e={mounted:e,updated:e}),e.deep&&J(n),o.push({dir:e,instance:r,value:n,oldValue:void 0,arg:s,modifiers:u}))}return e}function Pe(e,t,n,i){const o=e.dirs,s=t&&t.dirs;for(let u=0;u<o.length;u++){const c=o[u];s&&(c.oldValue=s[u].value);let l=c.dir[i];l&&((0,r.Jd)(),a(l,n,8,[e.el,c,e,t]),(0,r.lk)())}}const Oe="components";function De(e,t){return Le(Oe,e,!0,t)||e}const Me=Symbol();function Le(e,t,n=!0,r=!1){const o=P||hn;if(o){const n=o.type;if(e===Oe){const e=Sn(n,!1);if(e&&(e===t||e===(0,i._A)(t)||e===(0,i.kC)((0,i._A)(t))))return n}const a=Fe(o[e]||n[e],t)||Fe(o.appContext[e],t);return!a&&r?n:a}}function Fe(e,t){return e&&(e[t]||e[(0,i._A)(t)]||e[(0,i.kC)((0,i._A)(t))])}function je(e,t,n,r){let o;const a=n&&n[r];if((0,i.kJ)(e)||(0,i.HD)(e)){o=new Array(e.length);for(let n=0,r=e.length;n<r;n++)o[n]=t(e[n],n,void 0,a&&a[n])}else if("number"===typeof e){0,o=new Array(e);for(let n=0;n<e;n++)o[n]=t(n+1,n,void 0,a&&a[n])}else if((0,i.Kn)(e))if(e[Symbol.iterator])o=Array.from(e,((e,n)=>t(e,n,void 0,a&&a[n])));else{const n=Object.keys(e);o=new Array(n.length);for(let r=0,i=n.length;r<i;r++){const i=n[r];o[r]=t(e[i],i,r,a&&a[r])}}else o=[];return n&&(n[r]=o),o}const Ue=e=>e?vn(e)?kn(e)||e.proxy:Ue(e.parent):null,qe=(0,i.l7)(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Ue(e.parent),$root:e=>Ue(e.root),$emit:e=>e.emit,$options:e=>Qe(e),$forceUpdate:e=>e.f||(e.f=()=>b(e.update)),$nextTick:e=>e.n||(e.n=y.bind(e.proxy)),$watch:e=>Y.bind(e)}),Ve=(e,t)=>e!==i.kT&&!e.__isScriptSetup&&(0,i.RI)(e,t),Be={get({_:e},t){const{ctx:n,setupState:o,data:a,props:s,accessCache:u,type:c,appContext:l}=e;let h;if("$"!==t[0]){const r=u[t];if(void 0!==r)switch(r){case 1:return o[t];case 2:return a[t];case 4:return n[t];case 3:return s[t]}else{if(Ve(o,t))return u[t]=1,o[t];if(a!==i.kT&&(0,i.RI)(a,t))return u[t]=2,a[t];if((h=e.propsOptions[0])&&(0,i.RI)(h,t))return u[t]=3,s[t];if(n!==i.kT&&(0,i.RI)(n,t))return u[t]=4,n[t];Ke&&(u[t]=0)}}const f=qe[t];let d,p;return f?("$attrs"===t&&(0,r.j)(e,"get",t),f(e)):(d=c.__cssModules)&&(d=d[t])?d:n!==i.kT&&(0,i.RI)(n,t)?(u[t]=4,n[t]):(p=l.config.globalProperties,(0,i.RI)(p,t)?p[t]:void 0)},set({_:e},t,n){const{data:r,setupState:o,ctx:a}=e;return Ve(o,t)?(o[t]=n,!0):r!==i.kT&&(0,i.RI)(r,t)?(r[t]=n,!0):!(0,i.RI)(e.props,t)&&(("$"!==t[0]||!(t.slice(1)in e))&&(a[t]=n,!0))},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:o,propsOptions:a}},s){let u;return!!n[s]||e!==i.kT&&(0,i.RI)(e,s)||Ve(t,s)||(u=a[0])&&(0,i.RI)(u,s)||(0,i.RI)(r,s)||(0,i.RI)(qe,s)||(0,i.RI)(o.config.globalProperties,s)},defineProperty(e,t,n){return null!=n.get?e._.accessCache[t]=0:(0,i.RI)(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};let Ke=!0;function We(e){const t=Qe(e),n=e.proxy,o=e.ctx;Ke=!1,t.beforeCreate&&Ge(t.beforeCreate,e,"bc");const{data:a,computed:s,methods:u,watch:c,provide:l,inject:h,created:f,beforeMount:d,mounted:p,beforeUpdate:v,updated:g,activated:m,deactivated:y,beforeDestroy:_,beforeUnmount:b,destroyed:w,unmounted:I,render:T,renderTracked:E,renderTriggered:k,errorCaptured:S,serverPrefetch:C,expose:A,inheritAttrs:N,components:x,directives:R,filters:P}=t,O=null;if(h&&He(h,o,O,e.appContext.config.unwrapInjectedRef),u)for(const r in u){const e=u[r];(0,i.mf)(e)&&(o[r]=e.bind(n))}if(a){0;const t=a.call(n,n);0,(0,i.Kn)(t)&&(e.data=(0,r.qj)(t))}if(Ke=!0,s)for(const r in s){const e=s[r],t=(0,i.mf)(e)?e.bind(n,n):(0,i.mf)(e.get)?e.get.bind(n,n):i.dG;0;const a=!(0,i.mf)(e)&&(0,i.mf)(e.set)?e.set.bind(n):i.dG,u=An({get:t,set:a});Object.defineProperty(o,r,{enumerable:!0,configurable:!0,get:()=>u.value,set:e=>u.value=e})}if(c)for(const r in c)ze(c[r],o,n,r);if(l){const e=(0,i.mf)(l)?l.call(n):l;Reflect.ownKeys(e).forEach((t=>{W(t,e[t])}))}function D(e,t){(0,i.kJ)(t)?t.forEach((t=>e(t.bind(n)))):t&&e(t.bind(n))}if(f&&Ge(f,e,"c"),D(we,d),D(Ie,p),D(Te,v),D(Ee,g),D(de,m),D(pe,y),D(xe,S),D(Ne,E),D(Ae,k),D(ke,b),D(Se,I),D(Ce,C),(0,i.kJ)(A))if(A.length){const t=e.exposed||(e.exposed={});A.forEach((e=>{Object.defineProperty(t,e,{get:()=>n[e],set:t=>n[e]=t})}))}else e.exposed||(e.exposed={});T&&e.render===i.dG&&(e.render=T),null!=N&&(e.inheritAttrs=N),x&&(e.components=x),R&&(e.directives=R)}function He(e,t,n=i.dG,o=!1){(0,i.kJ)(e)&&(e=Ze(e));for(const a in e){const n=e[a];let s;s=(0,i.Kn)(n)?"default"in n?H(n.from||a,n.default,!0):H(n.from||a):H(n),(0,r.dq)(s)&&o?Object.defineProperty(t,a,{enumerable:!0,configurable:!0,get:()=>s.value,set:e=>s.value=e}):t[a]=s}}function Ge(e,t,n){a((0,i.kJ)(e)?e.map((e=>e.bind(t.proxy))):e.bind(t.proxy),t,n)}function ze(e,t,n,r){const o=r.includes(".")?X(n,r):()=>n[r];if((0,i.HD)(e)){const n=t[e];(0,i.mf)(n)&&Q(o,n)}else if((0,i.mf)(e))Q(o,e.bind(n));else if((0,i.Kn)(e))if((0,i.kJ)(e))e.forEach((e=>ze(e,t,n,r)));else{const r=(0,i.mf)(e.handler)?e.handler.bind(n):t[e.handler];(0,i.mf)(r)&&Q(o,r,e)}else 0}function Qe(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:o,optionsCache:a,config:{optionMergeStrategies:s}}=e.appContext,u=a.get(t);let c;return u?c=u:o.length||n||r?(c={},o.length&&o.forEach((e=>$e(c,e,s,!0))),$e(c,t,s)):c=t,(0,i.Kn)(t)&&a.set(t,c),c}function $e(e,t,n,r=!1){const{mixins:i,extends:o}=t;o&&$e(e,o,n,!0),i&&i.forEach((t=>$e(e,t,n,!0)));for(const a in t)if(r&&"expose"===a);else{const r=Ye[a]||n&&n[a];e[a]=r?r(e[a],t[a]):t[a]}return e}const Ye={data:Xe,props:tt,emits:tt,methods:tt,computed:tt,beforeCreate:et,created:et,beforeMount:et,mounted:et,beforeUpdate:et,updated:et,beforeDestroy:et,beforeUnmount:et,destroyed:et,unmounted:et,activated:et,deactivated:et,errorCaptured:et,serverPrefetch:et,components:tt,directives:tt,watch:nt,provide:Xe,inject:Je};function Xe(e,t){return t?e?function(){return(0,i.l7)((0,i.mf)(e)?e.call(this,this):e,(0,i.mf)(t)?t.call(this,this):t)}:t:e}function Je(e,t){return tt(Ze(e),Ze(t))}function Ze(e){if((0,i.kJ)(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function et(e,t){return e?[...new Set([].concat(e,t))]:t}function tt(e,t){return e?(0,i.l7)((0,i.l7)(Object.create(null),e),t):t}function nt(e,t){if(!e)return t;if(!t)return e;const n=(0,i.l7)(Object.create(null),e);for(const r in t)n[r]=et(e[r],t[r]);return n}function rt(e,t,n,o=!1){const a={},s={};(0,i.Nj)(s,Gt,1),e.propsDefaults=Object.create(null),ot(e,t,a,s);for(const r in e.propsOptions[0])r in a||(a[r]=void 0);n?e.props=o?a:(0,r.Um)(a):e.type.props?e.props=a:e.props=s,e.attrs=s}function it(e,t,n,o){const{props:a,attrs:s,vnode:{patchFlag:u}}=e,c=(0,r.IU)(a),[l]=e.propsOptions;let h=!1;if(!(o||u>0)||16&u){let r;ot(e,t,a,s)&&(h=!0);for(const o in c)t&&((0,i.RI)(t,o)||(r=(0,i.rs)(o))!==o&&(0,i.RI)(t,r))||(l?!n||void 0===n[o]&&void 0===n[r]||(a[o]=at(l,c,o,void 0,e,!0)):delete a[o]);if(s!==c)for(const e in s)t&&(0,i.RI)(t,e)||(delete s[e],h=!0)}else if(8&u){const n=e.vnode.dynamicProps;for(let r=0;r<n.length;r++){let o=n[r];if(R(e.emitsOptions,o))continue;const u=t[o];if(l)if((0,i.RI)(s,o))u!==s[o]&&(s[o]=u,h=!0);else{const t=(0,i._A)(o);a[t]=at(l,c,t,u,e,!1)}else u!==s[o]&&(s[o]=u,h=!0)}}h&&(0,r.X$)(e,"set","$attrs")}function ot(e,t,n,o){const[a,s]=e.propsOptions;let u,c=!1;if(t)for(let r in t){if((0,i.Gg)(r))continue;const l=t[r];let h;a&&(0,i.RI)(a,h=(0,i._A)(r))?s&&s.includes(h)?(u||(u={}))[h]=l:n[h]=l:R(e.emitsOptions,r)||r in o&&l===o[r]||(o[r]=l,c=!0)}if(s){const t=(0,r.IU)(n),o=u||i.kT;for(let r=0;r<s.length;r++){const u=s[r];n[u]=at(a,t,u,o[u],e,!(0,i.RI)(o,u))}}return c}function at(e,t,n,r,o,a){const s=e[n];if(null!=s){const e=(0,i.RI)(s,"default");if(e&&void 0===r){const e=s.default;if(s.type!==Function&&(0,i.mf)(e)){const{propsDefaults:i}=o;n in i?r=i[n]:(dn(o),r=i[n]=e.call(null,t),pn())}else r=e}s[0]&&(a&&!e?r=!1:!s[1]||""!==r&&r!==(0,i.rs)(n)||(r=!0))}return r}function st(e,t,n=!1){const r=t.propsCache,o=r.get(e);if(o)return o;const a=e.props,s={},u=[];let c=!1;if(!(0,i.mf)(e)){const r=e=>{c=!0;const[n,r]=st(e,t,!0);(0,i.l7)(s,n),r&&u.push(...r)};!n&&t.mixins.length&&t.mixins.forEach(r),e.extends&&r(e.extends),e.mixins&&e.mixins.forEach(r)}if(!a&&!c)return(0,i.Kn)(e)&&r.set(e,i.Z6),i.Z6;if((0,i.kJ)(a))for(let h=0;h<a.length;h++){0;const e=(0,i._A)(a[h]);ut(e)&&(s[e]=i.kT)}else if(a){0;for(const e in a){const t=(0,i._A)(e);if(ut(t)){const n=a[e],r=s[t]=(0,i.kJ)(n)||(0,i.mf)(n)?{type:n}:Object.assign({},n);if(r){const e=ht(Boolean,r.type),n=ht(String,r.type);r[0]=e>-1,r[1]=n<0||e<n,(e>-1||(0,i.RI)(r,"default"))&&u.push(t)}}}}const l=[s,u];return(0,i.Kn)(e)&&r.set(e,l),l}function ut(e){return"$"!==e[0]}function ct(e){const t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:null===e?"null":""}function lt(e,t){return ct(e)===ct(t)}function ht(e,t){return(0,i.kJ)(t)?t.findIndex((t=>lt(t,e))):(0,i.mf)(t)&&lt(t,e)?0:-1}const ft=e=>"_"===e[0]||"$stable"===e,dt=e=>(0,i.kJ)(e)?e.map(nn):[nn(e)],pt=(e,t,n)=>{if(t._n)return t;const r=M(((...e)=>dt(t(...e))),n);return r._c=!1,r},vt=(e,t,n)=>{const r=e._ctx;for(const o in e){if(ft(o))continue;const n=e[o];if((0,i.mf)(n))t[o]=pt(o,n,r);else if(null!=n){0;const e=dt(n);t[o]=()=>e}}},gt=(e,t)=>{const n=dt(t);e.slots.default=()=>n},mt=(e,t)=>{if(32&e.vnode.shapeFlag){const n=t._;n?(e.slots=(0,r.IU)(t),(0,i.Nj)(t,"_",n)):vt(t,e.slots={})}else e.slots={},t&&gt(e,t);(0,i.Nj)(e.slots,Gt,1)},yt=(e,t,n)=>{const{vnode:r,slots:o}=e;let a=!0,s=i.kT;if(32&r.shapeFlag){const e=t._;e?n&&1===e?a=!1:((0,i.l7)(o,t),n||1!==e||delete o._):(a=!t.$stable,vt(t,o)),s=t}else t&&(gt(e,t),s={default:1});if(a)for(const i in o)ft(i)||i in s||delete o[i]};function _t(){return{app:null,config:{isNativeTag:i.NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let bt=0;function wt(e,t){return function(n,r=null){(0,i.mf)(n)||(n=Object.assign({},n)),null==r||(0,i.Kn)(r)||(r=null);const o=_t(),a=new Set;let s=!1;const u=o.app={_uid:bt++,_component:n,_props:r,_container:null,_context:o,_instance:null,version:Pn,get config(){return o.config},set config(e){0},use(e,...t){return a.has(e)||(e&&(0,i.mf)(e.install)?(a.add(e),e.install(u,...t)):(0,i.mf)(e)&&(a.add(e),e(u,...t))),u},mixin(e){return o.mixins.includes(e)||o.mixins.push(e),u},component(e,t){return t?(o.components[e]=t,u):o.components[e]},directive(e,t){return t?(o.directives[e]=t,u):o.directives[e]},mount(i,a,c){if(!s){0;const l=Yt(n,r);return l.appContext=o,a&&t?t(l,i):e(l,i,c),s=!0,u._container=i,i.__vue_app__=u,kn(l.component)||l.component.proxy}},unmount(){s&&(e(null,u._container),delete u._container.__vue_app__)},provide(e,t){return o.provides[e]=t,u}};return u}}function It(e,t,n,a,s=!1){if((0,i.kJ)(e))return void e.forEach(((e,r)=>It(e,t&&((0,i.kJ)(t)?t[r]:t),n,a,s)));if(le(a)&&!s)return;const u=4&a.shapeFlag?kn(a.component)||a.component.proxy:a.el,c=s?null:u,{i:l,r:h}=e;const f=t&&t.r,d=l.refs===i.kT?l.refs={}:l.refs,p=l.setupState;if(null!=f&&f!==h&&((0,i.HD)(f)?(d[f]=null,(0,i.RI)(p,f)&&(p[f]=null)):(0,r.dq)(f)&&(f.value=null)),(0,i.mf)(h))o(h,l,12,[c,d]);else{const t=(0,i.HD)(h),o=(0,r.dq)(h);if(t||o){const r=()=>{if(e.f){const n=t?(0,i.RI)(p,h)?p[h]:d[h]:h.value;s?(0,i.kJ)(n)&&(0,i.Od)(n,u):(0,i.kJ)(n)?n.includes(u)||n.push(u):t?(d[h]=[u],(0,i.RI)(p,h)&&(p[h]=d[h])):(h.value=[u],e.k&&(d[e.k]=h.value))}else t?(d[h]=c,(0,i.RI)(p,h)&&(p[h]=c)):o&&(h.value=c,e.k&&(d[e.k]=c))};c?(r.id=-1,Et(r,n)):r()}else 0}}function Tt(){}const Et=K;function kt(e){return St(e)}function St(e,t){Tt();const n=(0,i.E9)();n.__VUE__=!0;const{insert:o,remove:a,patchProp:s,createElement:u,createText:c,createComment:l,setText:h,setElementText:f,parentNode:d,nextSibling:p,setScopeId:v=i.dG,insertStaticContent:g}=e,m=(e,t,n,r=null,i=null,o=null,a=!1,s=null,u=!!t.dynamicChildren)=>{if(e===t)return;e&&!Ht(e,t)&&(r=J(e),z(e,i,o,!0),e=null),-2===t.patchFlag&&(u=!1,t.dynamicChildren=null);const{type:c,ref:l,shapeFlag:h}=t;switch(c){case Pt:y(e,t,n,r);break;case Ot:_(e,t,n,r);break;case Dt:null==e&&w(t,n,r,a);break;case Rt:D(e,t,n,r,i,o,a,s,u);break;default:1&h?C(e,t,n,r,i,o,a,s,u):6&h?M(e,t,n,r,i,o,a,s,u):(64&h||128&h)&&c.process(e,t,n,r,i,o,a,s,u,ee)}null!=l&&i&&It(l,e&&e.ref,o,t||e,!t)},y=(e,t,n,r)=>{if(null==e)o(t.el=c(t.children),n,r);else{const n=t.el=e.el;t.children!==e.children&&h(n,t.children)}},_=(e,t,n,r)=>{null==e?o(t.el=l(t.children||""),n,r):t.el=e.el},w=(e,t,n,r)=>{[e.el,e.anchor]=g(e.children,t,n,r,e.el,e.anchor)},T=({el:e,anchor:t},n,r)=>{let i;while(e&&e!==t)i=p(e),o(e,n,r),e=i;o(t,n,r)},S=({el:e,anchor:t})=>{let n;while(e&&e!==t)n=p(e),a(e),e=n;a(t)},C=(e,t,n,r,i,o,a,s,u)=>{a=a||"svg"===t.type,null==e?A(t,n,r,i,o,a,s,u):R(e,t,i,o,a,s,u)},A=(e,t,n,r,a,c,l,h)=>{let d,p;const{type:v,props:g,shapeFlag:m,transition:y,dirs:_}=e;if(d=e.el=u(e.type,c,g&&g.is,g),8&m?f(d,e.children):16&m&&x(e.children,d,null,r,a,c&&"foreignObject"!==v,l,h),_&&Pe(e,null,r,"created"),g){for(const t in g)"value"===t||(0,i.Gg)(t)||s(d,t,null,g[t],c,e.children,r,a,X);"value"in g&&s(d,"value",null,g.value),(p=g.onVnodeBeforeMount)&&sn(p,r,e)}N(d,e,e.scopeId,l,r),_&&Pe(e,null,r,"beforeMount");const b=(!a||a&&!a.pendingBranch)&&y&&!y.persisted;b&&y.beforeEnter(d),o(d,t,n),((p=g&&g.onVnodeMounted)||b||_)&&Et((()=>{p&&sn(p,r,e),b&&y.enter(d),_&&Pe(e,null,r,"mounted")}),a)},N=(e,t,n,r,i)=>{if(n&&v(e,n),r)for(let o=0;o<r.length;o++)v(e,r[o]);if(i){let n=i.subTree;if(t===n){const t=i.vnode;N(e,t,t.scopeId,t.slotScopeIds,i.parent)}}},x=(e,t,n,r,i,o,a,s,u=0)=>{for(let c=u;c<e.length;c++){const u=e[c]=s?rn(e[c]):nn(e[c]);m(null,u,t,n,r,i,o,a,s)}},R=(e,t,n,r,o,a,u)=>{const c=t.el=e.el;let{patchFlag:l,dynamicChildren:h,dirs:d}=t;l|=16&e.patchFlag;const p=e.props||i.kT,v=t.props||i.kT;let g;n&&Ct(n,!1),(g=v.onVnodeBeforeUpdate)&&sn(g,n,t,e),d&&Pe(t,e,n,"beforeUpdate"),n&&Ct(n,!0);const m=o&&"foreignObject"!==t.type;if(h?P(e.dynamicChildren,h,c,n,r,m,a):u||K(e,t,c,null,n,r,m,a,!1),l>0){if(16&l)O(c,t,p,v,n,r,o);else if(2&l&&p.class!==v.class&&s(c,"class",null,v.class,o),4&l&&s(c,"style",p.style,v.style,o),8&l){const i=t.dynamicProps;for(let t=0;t<i.length;t++){const a=i[t],u=p[a],l=v[a];l===u&&"value"!==a||s(c,a,u,l,o,e.children,n,r,X)}}1&l&&e.children!==t.children&&f(c,t.children)}else u||null!=h||O(c,t,p,v,n,r,o);((g=v.onVnodeUpdated)||d)&&Et((()=>{g&&sn(g,n,t,e),d&&Pe(t,e,n,"updated")}),r)},P=(e,t,n,r,i,o,a)=>{for(let s=0;s<t.length;s++){const u=e[s],c=t[s],l=u.el&&(u.type===Rt||!Ht(u,c)||70&u.shapeFlag)?d(u.el):n;m(u,c,l,null,r,i,o,a,!0)}},O=(e,t,n,r,o,a,u)=>{if(n!==r){if(n!==i.kT)for(const c in n)(0,i.Gg)(c)||c in r||s(e,c,n[c],null,u,t.children,o,a,X);for(const c in r){if((0,i.Gg)(c))continue;const l=r[c],h=n[c];l!==h&&"value"!==c&&s(e,c,h,l,u,t.children,o,a,X)}"value"in r&&s(e,"value",n.value,r.value)}},D=(e,t,n,r,i,a,s,u,l)=>{const h=t.el=e?e.el:c(""),f=t.anchor=e?e.anchor:c("");let{patchFlag:d,dynamicChildren:p,slotScopeIds:v}=t;v&&(u=u?u.concat(v):v),null==e?(o(h,n,r),o(f,n,r),x(t.children,n,f,i,a,s,u,l)):d>0&&64&d&&p&&e.dynamicChildren?(P(e.dynamicChildren,p,n,i,a,s,u),(null!=t.key||i&&t===i.subTree)&&At(e,t,!0)):K(e,t,n,f,i,a,s,u,l)},M=(e,t,n,r,i,o,a,s,u)=>{t.slotScopeIds=s,null==e?512&t.shapeFlag?i.ctx.activate(t,n,r,a,u):F(t,n,r,i,o,a,u):j(e,t,u)},F=(e,t,n,r,i,o,a)=>{const s=e.component=ln(e,r,i);if(he(e)&&(s.ctx.renderer=ee),_n(s),s.asyncDep){if(i&&i.registerDep(s,q),!e.el){const e=s.subTree=Yt(Ot);_(null,e,t,n)}}else q(s,e,t,n,i,o,a)},j=(e,t,n)=>{const r=t.component=e.component;if(U(e,t,n)){if(r.asyncDep&&!r.asyncResolved)return void B(r,t,n);r.next=t,I(r.update),r.update()}else t.el=e.el,r.vnode=t},q=(e,t,n,o,a,s,u)=>{const c=()=>{if(e.isMounted){let t,{next:n,bu:r,u:o,parent:c,vnode:l}=e,h=n;0,Ct(e,!1),n?(n.el=l.el,B(e,n,u)):n=l,r&&(0,i.ir)(r),(t=n.props&&n.props.onVnodeBeforeUpdate)&&sn(t,c,n,l),Ct(e,!0);const f=L(e);0;const p=e.subTree;e.subTree=f,m(p,f,d(p.el),J(p),e,a,s),n.el=f.el,null===h&&V(e,f.el),o&&Et(o,a),(t=n.props&&n.props.onVnodeUpdated)&&Et((()=>sn(t,c,n,l)),a)}else{let r;const{el:u,props:c}=t,{bm:l,m:h,parent:f}=e,d=le(t);if(Ct(e,!1),l&&(0,i.ir)(l),!d&&(r=c&&c.onVnodeBeforeMount)&&sn(r,f,t),Ct(e,!0),u&&ne){const n=()=>{e.subTree=L(e),ne(u,e.subTree,e,a,null)};d?t.type.__asyncLoader().then((()=>!e.isUnmounted&&n())):n()}else{0;const r=e.subTree=L(e);0,m(null,r,n,o,e,a,s),t.el=r.el}if(h&&Et(h,a),!d&&(r=c&&c.onVnodeMounted)){const e=t;Et((()=>sn(r,f,e)),a)}(256&t.shapeFlag||f&&le(f.vnode)&&256&f.vnode.shapeFlag)&&e.a&&Et(e.a,a),e.isMounted=!0,t=n=o=null}},l=e.effect=new r.qq(c,(()=>b(h)),e.scope),h=e.update=()=>l.run();h.id=e.uid,Ct(e,!0),h()},B=(e,t,n)=>{t.component=e;const i=e.vnode.props;e.vnode=t,e.next=null,it(e,t.props,i,n),yt(e,t.children,n),(0,r.Jd)(),E(),(0,r.lk)()},K=(e,t,n,r,i,o,a,s,u=!1)=>{const c=e&&e.children,l=e?e.shapeFlag:0,h=t.children,{patchFlag:d,shapeFlag:p}=t;if(d>0){if(128&d)return void H(c,h,n,r,i,o,a,s,u);if(256&d)return void W(c,h,n,r,i,o,a,s,u)}8&p?(16&l&&X(c,i,o),h!==c&&f(n,h)):16&l?16&p?H(c,h,n,r,i,o,a,s,u):X(c,i,o,!0):(8&l&&f(n,""),16&p&&x(h,n,r,i,o,a,s,u))},W=(e,t,n,r,o,a,s,u,c)=>{e=e||i.Z6,t=t||i.Z6;const l=e.length,h=t.length,f=Math.min(l,h);let d;for(d=0;d<f;d++){const r=t[d]=c?rn(t[d]):nn(t[d]);m(e[d],r,n,null,o,a,s,u,c)}l>h?X(e,o,a,!0,!1,f):x(t,n,r,o,a,s,u,c,f)},H=(e,t,n,r,o,a,s,u,c)=>{let l=0;const h=t.length;let f=e.length-1,d=h-1;while(l<=f&&l<=d){const r=e[l],i=t[l]=c?rn(t[l]):nn(t[l]);if(!Ht(r,i))break;m(r,i,n,null,o,a,s,u,c),l++}while(l<=f&&l<=d){const r=e[f],i=t[d]=c?rn(t[d]):nn(t[d]);if(!Ht(r,i))break;m(r,i,n,null,o,a,s,u,c),f--,d--}if(l>f){if(l<=d){const e=d+1,i=e<h?t[e].el:r;while(l<=d)m(null,t[l]=c?rn(t[l]):nn(t[l]),n,i,o,a,s,u,c),l++}}else if(l>d)while(l<=f)z(e[l],o,a,!0),l++;else{const p=l,v=l,g=new Map;for(l=v;l<=d;l++){const e=t[l]=c?rn(t[l]):nn(t[l]);null!=e.key&&g.set(e.key,l)}let y,_=0;const b=d-v+1;let w=!1,I=0;const T=new Array(b);for(l=0;l<b;l++)T[l]=0;for(l=p;l<=f;l++){const r=e[l];if(_>=b){z(r,o,a,!0);continue}let i;if(null!=r.key)i=g.get(r.key);else for(y=v;y<=d;y++)if(0===T[y-v]&&Ht(r,t[y])){i=y;break}void 0===i?z(r,o,a,!0):(T[i-v]=l+1,i>=I?I=i:w=!0,m(r,t[i],n,null,o,a,s,u,c),_++)}const E=w?Nt(T):i.Z6;for(y=E.length-1,l=b-1;l>=0;l--){const e=v+l,i=t[e],f=e+1<h?t[e+1].el:r;0===T[l]?m(null,i,n,f,o,a,s,u,c):w&&(y<0||l!==E[y]?G(i,n,f,2):y--)}}},G=(e,t,n,r,i=null)=>{const{el:a,type:s,transition:u,children:c,shapeFlag:l}=e;if(6&l)return void G(e.component.subTree,t,n,r);if(128&l)return void e.suspense.move(t,n,r);if(64&l)return void s.move(e,t,n,ee);if(s===Rt){o(a,t,n);for(let e=0;e<c.length;e++)G(c[e],t,n,r);return void o(e.anchor,t,n)}if(s===Dt)return void T(e,t,n);const h=2!==r&&1&l&&u;if(h)if(0===r)u.beforeEnter(a),o(a,t,n),Et((()=>u.enter(a)),i);else{const{leave:e,delayLeave:r,afterLeave:i}=u,s=()=>o(a,t,n),c=()=>{e(a,(()=>{s(),i&&i()}))};r?r(a,s,c):c()}else o(a,t,n)},z=(e,t,n,r=!1,i=!1)=>{const{type:o,props:a,ref:s,children:u,dynamicChildren:c,shapeFlag:l,patchFlag:h,dirs:f}=e;if(null!=s&&It(s,null,n,e,!0),256&l)return void t.ctx.deactivate(e);const d=1&l&&f,p=!le(e);let v;if(p&&(v=a&&a.onVnodeBeforeUnmount)&&sn(v,t,e),6&l)Y(e.component,n,r);else{if(128&l)return void e.suspense.unmount(n,r);d&&Pe(e,null,t,"beforeUnmount"),64&l?e.type.remove(e,t,n,i,ee,r):c&&(o!==Rt||h>0&&64&h)?X(c,t,n,!1,!0):(o===Rt&&384&h||!i&&16&l)&&X(u,t,n),r&&Q(e)}(p&&(v=a&&a.onVnodeUnmounted)||d)&&Et((()=>{v&&sn(v,t,e),d&&Pe(e,null,t,"unmounted")}),n)},Q=e=>{const{type:t,el:n,anchor:r,transition:i}=e;if(t===Rt)return void $(n,r);if(t===Dt)return void S(e);const o=()=>{a(n),i&&!i.persisted&&i.afterLeave&&i.afterLeave()};if(1&e.shapeFlag&&i&&!i.persisted){const{leave:t,delayLeave:r}=i,a=()=>t(n,o);r?r(e.el,o,a):a()}else o()},$=(e,t)=>{let n;while(e!==t)n=p(e),a(e),e=n;a(t)},Y=(e,t,n)=>{const{bum:r,scope:o,update:a,subTree:s,um:u}=e;r&&(0,i.ir)(r),o.stop(),a&&(a.active=!1,z(s,e,t,n)),u&&Et(u,t),Et((()=>{e.isUnmounted=!0}),t),t&&t.pendingBranch&&!t.isUnmounted&&e.asyncDep&&!e.asyncResolved&&e.suspenseId===t.pendingId&&(t.deps--,0===t.deps&&t.resolve())},X=(e,t,n,r=!1,i=!1,o=0)=>{for(let a=o;a<e.length;a++)z(e[a],t,n,r,i)},J=e=>6&e.shapeFlag?J(e.component.subTree):128&e.shapeFlag?e.suspense.next():p(e.anchor||e.el),Z=(e,t,n)=>{null==e?t._vnode&&z(t._vnode,null,null,!0):m(t._vnode||null,e,t,null,null,null,n),E(),k(),t._vnode=e},ee={p:m,um:z,m:G,r:Q,mt:F,mc:x,pc:K,pbc:P,n:J,o:e};let te,ne;return t&&([te,ne]=t(ee)),{render:Z,hydrate:te,createApp:wt(Z,te)}}function Ct({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function At(e,t,n=!1){const r=e.children,o=t.children;if((0,i.kJ)(r)&&(0,i.kJ)(o))for(let i=0;i<r.length;i++){const e=r[i];let t=o[i];1&t.shapeFlag&&!t.dynamicChildren&&((t.patchFlag<=0||32===t.patchFlag)&&(t=o[i]=rn(o[i]),t.el=e.el),n||At(e,t)),t.type===Pt&&(t.el=e.el)}}function Nt(e){const t=e.slice(),n=[0];let r,i,o,a,s;const u=e.length;for(r=0;r<u;r++){const u=e[r];if(0!==u){if(i=n[n.length-1],e[i]<u){t[r]=i,n.push(r);continue}o=0,a=n.length-1;while(o<a)s=o+a>>1,e[n[s]]<u?o=s+1:a=s;u<e[n[o]]&&(o>0&&(t[r]=n[o-1]),n[o]=r)}}o=n.length,a=n[o-1];while(o-- >0)n[o]=a,a=t[a];return n}const xt=e=>e.__isTeleport;const Rt=Symbol(void 0),Pt=Symbol(void 0),Ot=Symbol(void 0),Dt=Symbol(void 0),Mt=[];let Lt=null;function Ft(e=!1){Mt.push(Lt=e?null:[])}function jt(){Mt.pop(),Lt=Mt[Mt.length-1]||null}let Ut=1;function qt(e){Ut+=e}function Vt(e){return e.dynamicChildren=Ut>0?Lt||i.Z6:null,jt(),Ut>0&&Lt&&Lt.push(e),e}function Bt(e,t,n,r,i,o){return Vt($t(e,t,n,r,i,o,!0))}function Kt(e,t,n,r,i){return Vt(Yt(e,t,n,r,i,!0))}function Wt(e){return!!e&&!0===e.__v_isVNode}function Ht(e,t){return e.type===t.type&&e.key===t.key}const Gt="__vInternal",zt=({key:e})=>null!=e?e:null,Qt=({ref:e,ref_key:t,ref_for:n})=>null!=e?(0,i.HD)(e)||(0,r.dq)(e)||(0,i.mf)(e)?{i:P,r:e,k:t,f:!!n}:e:null;function $t(e,t=null,n=null,r=0,o=null,a=(e===Rt?0:1),s=!1,u=!1){const c={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&zt(t),ref:t&&Qt(t),scopeId:O,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:r,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:P};return u?(on(c,n),128&a&&e.normalize(c)):n&&(c.shapeFlag|=(0,i.HD)(n)?8:16),Ut>0&&!s&&Lt&&(c.patchFlag>0||6&a)&&32!==c.patchFlag&&Lt.push(c),c}const Yt=Xt;function Xt(e,t=null,n=null,o=0,a=null,s=!1){if(e&&e!==Me||(e=Ot),Wt(e)){const r=Zt(e,t,!0);return n&&on(r,n),Ut>0&&!s&&Lt&&(6&r.shapeFlag?Lt[Lt.indexOf(e)]=r:Lt.push(r)),r.patchFlag|=-2,r}if(Cn(e)&&(e=e.__vccOpts),t){t=Jt(t);let{class:e,style:n}=t;e&&!(0,i.HD)(e)&&(t.class=(0,i.C_)(e)),(0,i.Kn)(n)&&((0,r.X3)(n)&&!(0,i.kJ)(n)&&(n=(0,i.l7)({},n)),t.style=(0,i.j5)(n))}const u=(0,i.HD)(e)?1:B(e)?128:xt(e)?64:(0,i.Kn)(e)?4:(0,i.mf)(e)?2:0;return $t(e,t,n,o,a,u,s,!0)}function Jt(e){return e?(0,r.X3)(e)||Gt in e?(0,i.l7)({},e):e:null}function Zt(e,t,n=!1){const{props:r,ref:o,patchFlag:a,children:s}=e,u=t?an(r||{},t):r,c={__v_isVNode:!0,__v_skip:!0,type:e.type,props:u,key:u&&zt(u),ref:t&&t.ref?n&&o?(0,i.kJ)(o)?o.concat(Qt(t)):[o,Qt(t)]:Qt(t):o,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:s,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Rt?-1===a?16:16|a:a,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Zt(e.ssContent),ssFallback:e.ssFallback&&Zt(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx};return c}function en(e=" ",t=0){return Yt(Pt,null,e,t)}function tn(e="",t=!1){return t?(Ft(),Kt(Ot,null,e)):Yt(Ot,null,e)}function nn(e){return null==e||"boolean"===typeof e?Yt(Ot):(0,i.kJ)(e)?Yt(Rt,null,e.slice()):"object"===typeof e?rn(e):Yt(Pt,null,String(e))}function rn(e){return null===e.el&&-1!==e.patchFlag||e.memo?e:Zt(e)}function on(e,t){let n=0;const{shapeFlag:r}=e;if(null==t)t=null;else if((0,i.kJ)(t))n=16;else if("object"===typeof t){if(65&r){const n=t.default;return void(n&&(n._c&&(n._d=!1),on(e,n()),n._c&&(n._d=!0)))}{n=32;const r=t._;r||Gt in t?3===r&&P&&(1===P.slots._?t._=1:(t._=2,e.patchFlag|=1024)):t._ctx=P}}else(0,i.mf)(t)?(t={default:t,_ctx:P},n=32):(t=String(t),64&r?(n=16,t=[en(t)]):n=8);e.children=t,e.shapeFlag|=n}function an(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const e in r)if("class"===e)t.class!==r.class&&(t.class=(0,i.C_)([t.class,r.class]));else if("style"===e)t.style=(0,i.j5)([t.style,r.style]);else if((0,i.F7)(e)){const n=t[e],o=r[e];!o||n===o||(0,i.kJ)(n)&&n.includes(o)||(t[e]=n?[].concat(n,o):o)}else""!==e&&(t[e]=r[e])}return t}function sn(e,t,n,r=null){a(e,t,7,[n,r])}const un=_t();let cn=0;function ln(e,t,n){const o=e.type,a=(t?t.appContext:e.appContext)||un,s={uid:cn++,vnode:e,type:o,parent:t,appContext:a,root:null,next:null,subTree:null,effect:null,update:null,scope:new r.Bj(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(a.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:st(o,a),emitsOptions:x(o,a),emit:null,emitted:null,propsDefaults:i.kT,inheritAttrs:o.inheritAttrs,ctx:i.kT,data:i.kT,props:i.kT,attrs:i.kT,slots:i.kT,refs:i.kT,setupState:i.kT,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=t?t.root:s,s.emit=N.bind(null,s),e.ce&&e.ce(s),s}let hn=null;const fn=()=>hn||P,dn=e=>{hn=e,e.scope.on()},pn=()=>{hn&&hn.scope.off(),hn=null};function vn(e){return 4&e.vnode.shapeFlag}let gn,mn,yn=!1;function _n(e,t=!1){yn=t;const{props:n,children:r}=e.vnode,i=vn(e);rt(e,n,i,t),mt(e,r);const o=i?bn(e,t):void 0;return yn=!1,o}function bn(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=(0,r.Xl)(new Proxy(e.ctx,Be));const{setup:a}=n;if(a){const n=e.setupContext=a.length>1?En(e):null;dn(e),(0,r.Jd)();const u=o(a,e,0,[e.props,n]);if((0,r.lk)(),pn(),(0,i.tI)(u)){if(u.then(pn,pn),t)return u.then((n=>{wn(e,n,t)})).catch((t=>{s(t,e,0)}));e.asyncDep=u}else wn(e,u,t)}else In(e,t)}function wn(e,t,n){(0,i.mf)(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:(0,i.Kn)(t)&&(e.setupState=(0,r.WL)(t)),In(e,n)}function In(e,t,n){const o=e.type;if(!e.render){if(!t&&gn&&!o.render){const t=o.template||Qe(e).template;if(t){0;const{isCustomElement:n,compilerOptions:r}=e.appContext.config,{delimiters:a,compilerOptions:s}=o,u=(0,i.l7)((0,i.l7)({isCustomElement:n,delimiters:a},r),s);o.render=gn(t,u)}}e.render=o.render||i.dG,mn&&mn(e)}dn(e),(0,r.Jd)(),We(e),(0,r.lk)(),pn()}function Tn(e){return new Proxy(e.attrs,{get(t,n){return(0,r.j)(e,"get","$attrs"),t[n]}})}function En(e){const t=t=>{e.exposed=t||{}};let n;return{get attrs(){return n||(n=Tn(e))},slots:e.slots,emit:e.emit,expose:t}}function kn(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy((0,r.WL)((0,r.Xl)(e.exposed)),{get(t,n){return n in t?t[n]:n in qe?qe[n](e):void 0},has(e,t){return t in e||t in qe}}))}function Sn(e,t=!0){return(0,i.mf)(e)?e.displayName||e.name:e.name||t&&e.__name}function Cn(e){return(0,i.mf)(e)&&"__vccOpts"in e}const An=(e,t)=>(0,r.Fl)(e,t,yn);function Nn(e,t,n){const r=arguments.length;return 2===r?(0,i.Kn)(t)&&!(0,i.kJ)(t)?Wt(t)?Yt(e,null,[t]):Yt(e,t):Yt(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):3===r&&Wt(n)&&(n=[n]),Yt(e,t,n))}const xn=Symbol(""),Rn=()=>{{const e=H(xn);return e}};const Pn="3.2.45"},9242:function(e,t,n){"use strict";n.d(t,{D2:function(){return ie},iM:function(){return ne},nr:function(){return Z},ri:function(){return ue}});n(7658);var r=n(7139),i=n(3396);n(4870);const o="http://www.w3.org/2000/svg",a="undefined"!==typeof document?document:null,s=a&&a.createElement("template"),u={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const i=t?a.createElementNS(o,e):a.createElement(e,n?{is:n}:void 0);return"select"===e&&r&&null!=r.multiple&&i.setAttribute("multiple",r.multiple),i},createText:e=>a.createTextNode(e),createComment:e=>a.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>a.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,i,o){const a=n?n.previousSibling:t.lastChild;if(i&&(i===o||i.nextSibling)){while(1)if(t.insertBefore(i.cloneNode(!0),n),i===o||!(i=i.nextSibling))break}else{s.innerHTML=r?`<svg>${e}</svg>`:e;const i=s.content;if(r){const e=i.firstChild;while(e.firstChild)i.appendChild(e.firstChild);i.removeChild(e)}t.insertBefore(i,n)}return[a?a.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}};function c(e,t,n){const r=e._vtc;r&&(t=(t?[t,...r]:[...r]).join(" ")),null==t?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}function l(e,t,n){const i=e.style,o=(0,r.HD)(n);if(n&&!o){for(const e in n)f(i,e,n[e]);if(t&&!(0,r.HD)(t))for(const e in t)null==n[e]&&f(i,e,"")}else{const r=i.display;o?t!==n&&(i.cssText=n):t&&e.removeAttribute("style"),"_vod"in e&&(i.display=r)}}const h=/\s*!important$/;function f(e,t,n){if((0,r.kJ)(n))n.forEach((n=>f(e,t,n)));else if(null==n&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const i=v(e,t);h.test(n)?e.setProperty((0,r.rs)(i),n.replace(h,""),"important"):e[i]=n}}const d=["Webkit","Moz","ms"],p={};function v(e,t){const n=p[t];if(n)return n;let i=(0,r._A)(t);if("filter"!==i&&i in e)return p[t]=i;i=(0,r.kC)(i);for(let r=0;r<d.length;r++){const n=d[r]+i;if(n in e)return p[t]=n}return t}const g="http://www.w3.org/1999/xlink";function m(e,t,n,i,o){if(i&&t.startsWith("xlink:"))null==n?e.removeAttributeNS(g,t.slice(6,t.length)):e.setAttributeNS(g,t,n);else{const i=(0,r.Pq)(t);null==n||i&&!(0,r.yA)(n)?e.removeAttribute(t):e.setAttribute(t,i?"":n)}}function y(e,t,n,i,o,a,s){if("innerHTML"===t||"textContent"===t)return i&&s(i,o,a),void(e[t]=null==n?"":n);if("value"===t&&"PROGRESS"!==e.tagName&&!e.tagName.includes("-")){e._value=n;const r=null==n?"":n;return e.value===r&&"OPTION"!==e.tagName||(e.value=r),void(null==n&&e.removeAttribute(t))}let u=!1;if(""===n||null==n){const i=typeof e[t];"boolean"===i?n=(0,r.yA)(n):null==n&&"string"===i?(n="",u=!0):"number"===i&&(n=0,u=!0)}try{e[t]=n}catch(c){0}u&&e.removeAttribute(t)}function _(e,t,n,r){e.addEventListener(t,n,r)}function b(e,t,n,r){e.removeEventListener(t,n,r)}function w(e,t,n,r,i=null){const o=e._vei||(e._vei={}),a=o[t];if(r&&a)a.value=r;else{const[n,s]=T(t);if(r){const a=o[t]=C(r,i);_(e,n,a,s)}else a&&(b(e,n,a,s),o[t]=void 0)}}const I=/(?:Once|Passive|Capture)$/;function T(e){let t;if(I.test(e)){let n;t={};while(n=e.match(I))e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}const n=":"===e[2]?e.slice(3):(0,r.rs)(e.slice(2));return[n,t]}let E=0;const k=Promise.resolve(),S=()=>E||(k.then((()=>E=0)),E=Date.now());function C(e,t){const n=e=>{if(e._vts){if(e._vts<=n.attached)return}else e._vts=Date.now();(0,i.$d)(A(e,n.value),t,5,[e])};return n.value=e,n.attached=S(),n}function A(e,t){if((0,r.kJ)(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map((e=>t=>!t._stopped&&e&&e(t)))}return t}const N=/^on[a-z]/,x=(e,t,n,i,o=!1,a,s,u,h)=>{"class"===t?c(e,i,o):"style"===t?l(e,n,i):(0,r.F7)(t)?(0,r.tR)(t)||w(e,t,n,i,s):("."===t[0]?(t=t.slice(1),1):"^"===t[0]?(t=t.slice(1),0):R(e,t,i,o))?y(e,t,i,a,s,u,h):("true-value"===t?e._trueValue=i:"false-value"===t&&(e._falseValue=i),m(e,t,i,o))};function R(e,t,n,i){return i?"innerHTML"===t||"textContent"===t||!!(t in e&&N.test(t)&&(0,r.mf)(n)):"spellcheck"!==t&&"draggable"!==t&&"translate"!==t&&("form"!==t&&(("list"!==t||"INPUT"!==e.tagName)&&(("type"!==t||"TEXTAREA"!==e.tagName)&&((!N.test(t)||!(0,r.HD)(n))&&t in e))))}"undefined"!==typeof HTMLElement&&HTMLElement;const P="transition",O="animation",D=(e,{slots:t})=>(0,i.h)(i.P$,j(e),t);D.displayName="Transition";const M={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},L=(D.props=(0,r.l7)({},i.P$.props,M),(e,t=[])=>{(0,r.kJ)(e)?e.forEach((e=>e(...t))):e&&e(...t)}),F=e=>!!e&&((0,r.kJ)(e)?e.some((e=>e.length>1)):e.length>1);function j(e){const t={};for(const r in e)r in M||(t[r]=e[r]);if(!1===e.css)return t;const{name:n="v",type:i,duration:o,enterFromClass:a=`${n}-enter-from`,enterActiveClass:s=`${n}-enter-active`,enterToClass:u=`${n}-enter-to`,appearFromClass:c=a,appearActiveClass:l=s,appearToClass:h=u,leaveFromClass:f=`${n}-leave-from`,leaveActiveClass:d=`${n}-leave-active`,leaveToClass:p=`${n}-leave-to`}=e,v=U(o),g=v&&v[0],m=v&&v[1],{onBeforeEnter:y,onEnter:_,onEnterCancelled:b,onLeave:w,onLeaveCancelled:I,onBeforeAppear:T=y,onAppear:E=_,onAppearCancelled:k=b}=t,S=(e,t,n)=>{B(e,t?h:u),B(e,t?l:s),n&&n()},C=(e,t)=>{e._isLeaving=!1,B(e,f),B(e,p),B(e,d),t&&t()},A=e=>(t,n)=>{const r=e?E:_,o=()=>S(t,e,n);L(r,[t,o]),K((()=>{B(t,e?c:a),V(t,e?h:u),F(r)||H(t,i,g,o)}))};return(0,r.l7)(t,{onBeforeEnter(e){L(y,[e]),V(e,a),V(e,s)},onBeforeAppear(e){L(T,[e]),V(e,c),V(e,l)},onEnter:A(!1),onAppear:A(!0),onLeave(e,t){e._isLeaving=!0;const n=()=>C(e,t);V(e,f),$(),V(e,d),K((()=>{e._isLeaving&&(B(e,f),V(e,p),F(w)||H(e,i,m,n))})),L(w,[e,n])},onEnterCancelled(e){S(e,!1),L(b,[e])},onAppearCancelled(e){S(e,!0),L(k,[e])},onLeaveCancelled(e){C(e),L(I,[e])}})}function U(e){if(null==e)return null;if((0,r.Kn)(e))return[q(e.enter),q(e.leave)];{const t=q(e);return[t,t]}}function q(e){const t=(0,r.He)(e);return t}function V(e,t){t.split(/\s+/).forEach((t=>t&&e.classList.add(t))),(e._vtc||(e._vtc=new Set)).add(t)}function B(e,t){t.split(/\s+/).forEach((t=>t&&e.classList.remove(t)));const{_vtc:n}=e;n&&(n.delete(t),n.size||(e._vtc=void 0))}function K(e){requestAnimationFrame((()=>{requestAnimationFrame(e)}))}let W=0;function H(e,t,n,r){const i=e._endId=++W,o=()=>{i===e._endId&&r()};if(n)return setTimeout(o,n);const{type:a,timeout:s,propCount:u}=G(e,t);if(!a)return r();const c=a+"end";let l=0;const h=()=>{e.removeEventListener(c,f),o()},f=t=>{t.target===e&&++l>=u&&h()};setTimeout((()=>{l<u&&h()}),s+1),e.addEventListener(c,f)}function G(e,t){const n=window.getComputedStyle(e),r=e=>(n[e]||"").split(", "),i=r(`${P}Delay`),o=r(`${P}Duration`),a=z(i,o),s=r(`${O}Delay`),u=r(`${O}Duration`),c=z(s,u);let l=null,h=0,f=0;t===P?a>0&&(l=P,h=a,f=o.length):t===O?c>0&&(l=O,h=c,f=u.length):(h=Math.max(a,c),l=h>0?a>c?P:O:null,f=l?l===P?o.length:u.length:0);const d=l===P&&/\b(transform|all)(,|$)/.test(r(`${P}Property`).toString());return{type:l,timeout:h,propCount:f,hasTransform:d}}function z(e,t){while(e.length<t.length)e=e.concat(e);return Math.max(...t.map(((t,n)=>Q(t)+Q(e[n]))))}function Q(e){return 1e3*Number(e.slice(0,-1).replace(",","."))}function $(){return document.body.offsetHeight}new WeakMap,new WeakMap;const Y=e=>{const t=e.props["onUpdate:modelValue"]||!1;return(0,r.kJ)(t)?e=>(0,r.ir)(t,e):t};function X(e){e.target.composing=!0}function J(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Z={created(e,{modifiers:{lazy:t,trim:n,number:i}},o){e._assign=Y(o);const a=i||o.props&&"number"===o.props.type;_(e,t?"change":"input",(t=>{if(t.target.composing)return;let i=e.value;n&&(i=i.trim()),a&&(i=(0,r.He)(i)),e._assign(i)})),n&&_(e,"change",(()=>{e.value=e.value.trim()})),t||(_(e,"compositionstart",X),_(e,"compositionend",J),_(e,"change",J))},mounted(e,{value:t}){e.value=null==t?"":t},beforeUpdate(e,{value:t,modifiers:{lazy:n,trim:i,number:o}},a){if(e._assign=Y(a),e.composing)return;if(document.activeElement===e&&"range"!==e.type){if(n)return;if(i&&e.value.trim()===t)return;if((o||"number"===e.type)&&(0,r.He)(e.value)===t)return}const s=null==t?"":t;e.value!==s&&(e.value=s)}};const ee=["ctrl","shift","alt","meta"],te={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&0!==e.button,middle:e=>"button"in e&&1!==e.button,right:e=>"button"in e&&2!==e.button,exact:(e,t)=>ee.some((n=>e[`${n}Key`]&&!t.includes(n)))},ne=(e,t)=>(n,...r)=>{for(let e=0;e<t.length;e++){const r=te[t[e]];if(r&&r(n,t))return}return e(n,...r)},re={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},ie=(e,t)=>n=>{if(!("key"in n))return;const i=(0,r.rs)(n.key);return t.some((e=>e===i||re[e]===i))?e(n):void 0};const oe=(0,r.l7)({patchProp:x},u);let ae;function se(){return ae||(ae=(0,i.Us)(oe))}const ue=(...e)=>{const t=se().createApp(...e);const{mount:n}=t;return t.mount=e=>{const i=ce(e);if(!i)return;const o=t._component;(0,r.mf)(o)||o.render||o.template||(o.template=i.innerHTML),i.innerHTML="";const a=n(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),a},t};function ce(e){if((0,r.HD)(e)){const t=document.querySelector(e);return t}return e}},7139:function(e,t,n){"use strict";n.d(t,{C_:function(){return h},DM:function(){return O},E9:function(){return ie},F7:function(){return k},Gg:function(){return H},HD:function(){return L},He:function(){return ne},Kn:function(){return j},NO:function(){return T},Nj:function(){return te},Od:function(){return A},PO:function(){return K},Pq:function(){return d},RI:function(){return x},S0:function(){return W},W7:function(){return B},WV:function(){return g},Z6:function(){return w},_A:function(){return Q},_N:function(){return P},aU:function(){return Z},dG:function(){return I},e1:function(){return o},fY:function(){return r},hR:function(){return J},hq:function(){return m},ir:function(){return ee},j5:function(){return a},kC:function(){return X},kJ:function(){return R},kT:function(){return b},l7:function(){return C},mf:function(){return M},rs:function(){return Y},tI:function(){return U},tR:function(){return S},yA:function(){return p},yk:function(){return F},zw:function(){return y}});n(7658);function r(e,t){const n=Object.create(null),r=e.split(",");for(let i=0;i<r.length;i++)n[r[i]]=!0;return t?e=>!!n[e.toLowerCase()]:e=>!!n[e]}const i="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt",o=r(i);function a(e){if(R(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],i=L(r)?l(r):a(r);if(i)for(const e in i)t[e]=i[e]}return t}return L(e)||j(e)?e:void 0}const s=/;(?![^(]*\))/g,u=/:([^]+)/,c=/\/\*.*?\*\//gs;function l(e){const t={};return e.replace(c,"").split(s).forEach((e=>{if(e){const n=e.split(u);n.length>1&&(t[n[0].trim()]=n[1].trim())}})),t}function h(e){let t="";if(L(e))t=e;else if(R(e))for(let n=0;n<e.length;n++){const r=h(e[n]);r&&(t+=r+" ")}else if(j(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const f="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",d=r(f);function p(e){return!!e||""===e}function v(e,t){if(e.length!==t.length)return!1;let n=!0;for(let r=0;n&&r<e.length;r++)n=g(e[r],t[r]);return n}function g(e,t){if(e===t)return!0;let n=D(e),r=D(t);if(n||r)return!(!n||!r)&&e.getTime()===t.getTime();if(n=F(e),r=F(t),n||r)return e===t;if(n=R(e),r=R(t),n||r)return!(!n||!r)&&v(e,t);if(n=j(e),r=j(t),n||r){if(!n||!r)return!1;const i=Object.keys(e).length,o=Object.keys(t).length;if(i!==o)return!1;for(const n in e){const r=e.hasOwnProperty(n),i=t.hasOwnProperty(n);if(r&&!i||!r&&i||!g(e[n],t[n]))return!1}}return String(e)===String(t)}function m(e,t){return e.findIndex((e=>g(e,t)))}const y=e=>L(e)?e:null==e?"":R(e)||j(e)&&(e.toString===q||!M(e.toString))?JSON.stringify(e,_,2):String(e),_=(e,t)=>t&&t.__v_isRef?_(e,t.value):P(t)?{[`Map(${t.size})`]:[...t.entries()].reduce(((e,[t,n])=>(e[`${t} =>`]=n,e)),{})}:O(t)?{[`Set(${t.size})`]:[...t.values()]}:!j(t)||R(t)||K(t)?t:String(t),b={},w=[],I=()=>{},T=()=>!1,E=/^on[^a-z]/,k=e=>E.test(e),S=e=>e.startsWith("onUpdate:"),C=Object.assign,A=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},N=Object.prototype.hasOwnProperty,x=(e,t)=>N.call(e,t),R=Array.isArray,P=e=>"[object Map]"===V(e),O=e=>"[object Set]"===V(e),D=e=>"[object Date]"===V(e),M=e=>"function"===typeof e,L=e=>"string"===typeof e,F=e=>"symbol"===typeof e,j=e=>null!==e&&"object"===typeof e,U=e=>j(e)&&M(e.then)&&M(e.catch),q=Object.prototype.toString,V=e=>q.call(e),B=e=>V(e).slice(8,-1),K=e=>"[object Object]"===V(e),W=e=>L(e)&&"NaN"!==e&&"-"!==e[0]&&""+parseInt(e,10)===e,H=r(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),G=e=>{const t=Object.create(null);return n=>{const r=t[n];return r||(t[n]=e(n))}},z=/-(\w)/g,Q=G((e=>e.replace(z,((e,t)=>t?t.toUpperCase():"")))),$=/\B([A-Z])/g,Y=G((e=>e.replace($,"-$1").toLowerCase())),X=G((e=>e.charAt(0).toUpperCase()+e.slice(1))),J=G((e=>e?`on${X(e)}`:"")),Z=(e,t)=>!Object.is(e,t),ee=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},te=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},ne=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let re;const ie=()=>re||(re="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:{})},6085:function(e,t,n){"use strict";n.d(t,{Z:function(){return ge}});var r={};function i(){return r}function o(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function a(e){return a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function s(e){o(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===a(e)&&"[object Date]"===t?new Date(e.getTime()):"number"===typeof e||"[object Number]"===t?new Date(e):("string"!==typeof e&&"[object String]"!==t||"undefined"===typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}function u(e,t){o(2,arguments);var n=s(e),r=s(t),i=n.getTime()-r.getTime();return i<0?-1:i>0?1:i}function c(e,t){o(2,arguments);var n=s(e),r=s(t),i=n.getFullYear()-r.getFullYear(),a=n.getMonth()-r.getMonth();return 12*i+a}function l(e){o(1,arguments);var t=s(e);return t.setHours(23,59,59,999),t}function h(e){o(1,arguments);var t=s(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function f(e){o(1,arguments);var t=s(e);return l(t).getTime()===h(t).getTime()}function d(e,t){o(2,arguments);var n,r=s(e),i=s(t),a=u(r,i),l=Math.abs(c(r,i));if(l<1)n=0;else{1===r.getMonth()&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-a*l);var h=u(r,i)===-a;f(s(e))&&1===l&&1===u(e,i)&&(h=!1),n=a*(l-Number(h))}return 0===n?0:n}function p(e,t){return o(2,arguments),s(e).getTime()-s(t).getTime()}var v={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(e){return e<0?Math.ceil(e):Math.floor(e)}},g="trunc";function m(e){return e?v[e]:v[g]}function y(e,t,n){o(2,arguments);var r=p(e,t)/1e3;return m(null===n||void 0===n?void 0:n.roundingMethod)(r)}var _={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},b=function(e,t,n){var r,i=_[e];return r="string"===typeof i?i:1===t?i.one:i.other.replace("{{count}}",t.toString()),null!==n&&void 0!==n&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r},w=b;function I(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.width?String(t.width):e.defaultWidth,r=e.formats[n]||e.formats[e.defaultWidth];return r}}var T={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},E={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},k={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},S={date:I({formats:T,defaultWidth:"full"}),time:I({formats:E,defaultWidth:"full"}),dateTime:I({formats:k,defaultWidth:"full"})},C=S,A={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},N=function(e,t,n,r){return A[e]},x=N;function R(e){return function(t,n){var r,i=null!==n&&void 0!==n&&n.context?String(n.context):"standalone";if("formatting"===i&&e.formattingValues){var o=e.defaultFormattingWidth||e.defaultWidth,a=null!==n&&void 0!==n&&n.width?String(n.width):o;r=e.formattingValues[a]||e.formattingValues[o]}else{var s=e.defaultWidth,u=null!==n&&void 0!==n&&n.width?String(n.width):e.defaultWidth;r=e.values[u]||e.values[s]}var c=e.argumentCallback?e.argumentCallback(t):t;return r[c]}}var P={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},O={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},D={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},M={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},L={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},F={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},j=function(e,t){var n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},U={ordinalNumber:j,era:R({values:P,defaultWidth:"wide"}),quarter:R({values:O,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:R({values:D,defaultWidth:"wide"}),day:R({values:M,defaultWidth:"wide"}),dayPeriod:R({values:L,defaultWidth:"wide",formattingValues:F,defaultFormattingWidth:"wide"})},q=U;function V(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.width,i=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],o=t.match(i);if(!o)return null;var a,s=o[0],u=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(u)?K(u,(function(e){return e.test(s)})):B(u,(function(e){return e.test(s)}));a=e.valueCallback?e.valueCallback(c):c,a=n.valueCallback?n.valueCallback(a):a;var l=t.slice(s.length);return{value:a,rest:l}}}function B(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return n}function K(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n}function W(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.match(e.matchPattern);if(!r)return null;var i=r[0],o=t.match(e.parsePattern);if(!o)return null;var a=e.valueCallback?e.valueCallback(o[0]):o[0];a=n.valueCallback?n.valueCallback(a):a;var s=t.slice(i.length);return{value:a,rest:s}}}var H=/^(\d+)(th|st|nd|rd)?/i,G=/\d+/i,z={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Q={any:[/^b/i,/^(a|c)/i]},$={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Y={any:[/1/i,/2/i,/3/i,/4/i]},X={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},J={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Z={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},ee={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},te={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},ne={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},re={ordinalNumber:W({matchPattern:H,parsePattern:G,valueCallback:function(e){return parseInt(e,10)}}),era:V({matchPatterns:z,defaultMatchWidth:"wide",parsePatterns:Q,defaultParseWidth:"any"}),quarter:V({matchPatterns:$,defaultMatchWidth:"wide",parsePatterns:Y,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:V({matchPatterns:X,defaultMatchWidth:"wide",parsePatterns:J,defaultParseWidth:"any"}),day:V({matchPatterns:Z,defaultMatchWidth:"wide",parsePatterns:ee,defaultParseWidth:"any"}),dayPeriod:V({matchPatterns:te,defaultMatchWidth:"any",parsePatterns:ne,defaultParseWidth:"any"})},ie=re,oe={code:"en-US",formatDistance:w,formatLong:C,formatRelative:x,localize:q,match:ie,options:{weekStartsOn:0,firstWeekContainsDate:1}},ae=oe,se=ae;function ue(e,t){if(null==e)throw new TypeError("assign requires that input parameter not be null or undefined");for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}function ce(e){return ue({},e)}function le(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}var he=1440,fe=2520,de=43200,pe=86400;function ve(e,t,n){var r,a;o(2,arguments);var c=i(),l=null!==(r=null!==(a=null===n||void 0===n?void 0:n.locale)&&void 0!==a?a:c.locale)&&void 0!==r?r:se;if(!l.formatDistance)throw new RangeError("locale must contain formatDistance property");var h=u(e,t);if(isNaN(h))throw new RangeError("Invalid time value");var f,p,v=ue(ce(n),{addSuffix:Boolean(null===n||void 0===n?void 0:n.addSuffix),comparison:h});h>0?(f=s(t),p=s(e)):(f=s(e),p=s(t));var g,m=y(p,f),_=(le(p)-le(f))/1e3,b=Math.round((m-_)/60);if(b<2)return null!==n&&void 0!==n&&n.includeSeconds?m<5?l.formatDistance("lessThanXSeconds",5,v):m<10?l.formatDistance("lessThanXSeconds",10,v):m<20?l.formatDistance("lessThanXSeconds",20,v):m<40?l.formatDistance("halfAMinute",0,v):m<60?l.formatDistance("lessThanXMinutes",1,v):l.formatDistance("xMinutes",1,v):0===b?l.formatDistance("lessThanXMinutes",1,v):l.formatDistance("xMinutes",b,v);if(b<45)return l.formatDistance("xMinutes",b,v);if(b<90)return l.formatDistance("aboutXHours",1,v);if(b<he){var w=Math.round(b/60);return l.formatDistance("aboutXHours",w,v)}if(b<fe)return l.formatDistance("xDays",1,v);if(b<de){var I=Math.round(b/he);return l.formatDistance("xDays",I,v)}if(b<pe)return g=Math.round(b/de),l.formatDistance("aboutXMonths",g,v);if(g=d(p,f),g<12){var T=Math.round(b/de);return l.formatDistance("xMonths",T,v)}var E=g%12,k=Math.floor(g/12);return E<3?l.formatDistance("aboutXYears",k,v):E<9?l.formatDistance("overXYears",k,v):l.formatDistance("almostXYears",k+1,v)}function ge(e,t){return o(1,arguments),ve(e,Date.now(),t)}},5866:function(e,t,n){"use strict";n(3753)},3581:function(e,t,n){"use strict";n.d(t,{Z:function(){return r["default"]}});var r=n(4552),i=(n(3753),n(5706),n(8328),n(4037)),o=n(9658),a=n(7e3);n(6970);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function s(e){e.prototype.loadBundle=i.u,e.prototype.namedQuery=i.a}s(i.K);n(7658);var u=n(2900),c=n(8914),l={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},h=function(e){function t(n,r,i){var o=e.call(this,r)||this;return Object.setPrototypeOf(o,t.prototype),o.code=n,o.details=i,o}return(0,u.__extends)(t,e),t}(Error);function f(e){if(e>=200&&e<300)return"ok";switch(e){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function d(e,t,n){var r=f(e),i=r,o=void 0;try{var a=t&&t.error;if(a){var s=a.status;if("string"===typeof s){if(!l[s])return new h("internal","internal");r=l[s],i=s}var u=a.message;"string"===typeof u&&(i=u),o=a.details,void 0!==o&&(o=n.decode(o))}}catch(c){}return"ok"===r?null:new h(r,i,o)}var p=function(){function e(e,t){var n=this;this.auth=null,this.messaging=null,this.auth=e.getImmediate({optional:!0}),this.messaging=t.getImmediate({optional:!0}),this.auth||e.get().then((function(e){return n.auth=e}),(function(){})),this.messaging||t.get().then((function(e){return n.messaging=e}),(function(){}))}return e.prototype.getAuthToken=function(){return(0,u.__awaiter)(this,void 0,void 0,(function(){var e;return(0,u.__generator)(this,(function(t){switch(t.label){case 0:if(!this.auth)return[2,void 0];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return e=t.sent(),e?[2,e.accessToken]:[2,void 0];case 3:return t.sent(),[2,void 0];case 4:return[2]}}))}))},e.prototype.getInstanceIdToken=function(){return(0,u.__awaiter)(this,void 0,void 0,(function(){return(0,u.__generator)(this,(function(e){switch(e.label){case 0:if(!this.messaging||!("Notification"in self)||"granted"!==Notification.permission)return[2,void 0];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.messaging.getToken()];case 2:return[2,e.sent()];case 3:return e.sent(),[2,void 0];case 4:return[2]}}))}))},e.prototype.getContext=function(){return(0,u.__awaiter)(this,void 0,void 0,(function(){var e,t;return(0,u.__generator)(this,(function(n){switch(n.label){case 0:return[4,this.getAuthToken()];case 1:return e=n.sent(),[4,this.getInstanceIdToken()];case 2:return t=n.sent(),[2,{authToken:e,instanceIdToken:t}]}}))}))},e}(),v="type.googleapis.com/google.protobuf.Int64Value",g="type.googleapis.com/google.protobuf.UInt64Value";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m(e,t){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=t(e[r]));return n}var y=function(){function e(){}return e.prototype.encode=function(e){var t=this;if(null==e)return null;if(e instanceof Number&&(e=e.valueOf()),"number"===typeof e&&isFinite(e))return e;if(!0===e||!1===e)return e;if("[object String]"===Object.prototype.toString.call(e))return e;if(e instanceof Date)return e.toISOString();if(Array.isArray(e))return e.map((function(e){return t.encode(e)}));if("function"===typeof e||"object"===typeof e)return m(e,(function(e){return t.encode(e)}));throw new Error("Data cannot be encoded in JSON: "+e)},e.prototype.decode=function(e){var t=this;if(null==e)return e;if(e["@type"])switch(e["@type"]){case v:case g:var n=Number(e["value"]);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+e);return n;default:throw new Error("Data cannot be decoded from JSON: "+e)}return Array.isArray(e)?e.map((function(e){return t.decode(e)})):"function"===typeof e||"object"===typeof e?m(e,(function(e){return t.decode(e)})):e},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _(e){var t,n=new Promise((function(n,r){t=setTimeout((function(){r(new h("deadline-exceeded","deadline-exceeded"))}),e)}));return{timer:t,promise:n}}var b=function(){function e(e,t,n,r,i,o){var a=this;void 0===i&&(i="us-central1"),this.app_=e,this.appCheckProvider=r,this.fetchImpl=o,this.serializer=new y,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return Promise.resolve(a.deleteService())}},this.contextProvider=new p(t,n),this.cancelAllRequests=new Promise((function(e){a.deleteService=function(){return e()}}));try{var s=new URL(i);this.customDomain=s.origin,this.region="us-central1"}catch(u){this.customDomain=null,this.region=i}}return Object.defineProperty(e.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),e.prototype._url=function(e){var t=this.app_.options.projectId;if(null!==this.emulatorOrigin){var n=this.emulatorOrigin;return n+"/"+t+"/"+this.region+"/"+e}return null!==this.customDomain?this.customDomain+"/"+e:"https://"+this.region+"-"+t+".cloudfunctions.net/"+e},e.prototype.useEmulator=function(e,t){this.emulatorOrigin="http://"+e+":"+t},e.prototype.useFunctionsEmulator=function(e){this.emulatorOrigin=e},e.prototype.httpsCallable=function(e,t){var n=this;return function(r){return n.call(e,r,t||{})}},e.prototype.postJSON=function(e,t,n){return(0,u.__awaiter)(this,void 0,void 0,(function(){var r,i,o;return(0,u.__generator)(this,(function(a){switch(a.label){case 0:return n["Content-Type"]="application/json",[4,this.getAppCheckToken()];case 1:r=a.sent(),null!==r&&(n["X-Firebase-AppCheck"]=r),a.label=2;case 2:return a.trys.push([2,4,,5]),[4,this.fetchImpl(e,{method:"POST",body:JSON.stringify(t),headers:n})];case 3:return i=a.sent(),[3,5];case 4:return a.sent(),[2,{status:0,json:null}];case 5:o=null,a.label=6;case 6:return a.trys.push([6,8,,9]),[4,i.json()];case 7:return o=a.sent(),[3,9];case 8:return a.sent(),[3,9];case 9:return[2,{status:i.status,json:o}]}}))}))},e.prototype.getAppCheckToken=function(){return(0,u.__awaiter)(this,void 0,void 0,(function(){var e,t;return(0,u.__generator)(this,(function(n){switch(n.label){case 0:return e=this.appCheckProvider.getImmediate({optional:!0}),e?[4,e.getToken()]:[3,2];case 1:return t=n.sent(),[2,t.token];case 2:return[2,null]}}))}))},e.prototype.call=function(e,t,n){return(0,u.__awaiter)(this,void 0,void 0,(function(){var r,i,o,a,s,c,l,f,p,v,g,m;return(0,u.__generator)(this,(function(u){switch(u.label){case 0:return r=this._url(e),t=this.serializer.encode(t),i={data:t},o={},[4,this.contextProvider.getContext()];case 1:return a=u.sent(),a.authToken&&(o["Authorization"]="Bearer "+a.authToken),a.instanceIdToken&&(o["Firebase-Instance-ID-Token"]=a.instanceIdToken),s=n.timeout||7e4,c=_(s),l=c.timer,f=c.promise,[4,Promise.race([w(l,this.postJSON(r,i,o)),f,w(l,this.cancelAllRequests)])];case 2:if(p=u.sent(),!p)throw new h("cancelled","Firebase Functions instance was deleted.");if(v=d(p.status,p.json,this.serializer),v)throw v;if(!p.json)throw new h("internal","Response is not valid JSON object.");if(g=p.json.data,"undefined"===typeof g&&(g=p.json.result),"undefined"===typeof g)throw new h("internal","Response is missing data field.");return m=this.serializer.decode(g),[2,{data:m}]}}))}))},e}();function w(e,t){return(0,u.__awaiter)(this,void 0,void 0,(function(){var n;return(0,u.__generator)(this,(function(r){switch(r.label){case 0:return[4,t];case 1:return n=r.sent(),clearTimeout(e),[2,n]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var I="functions";function T(e,t){var n={Functions:b};function r(e,n){var r=n.instanceIdentifier,i=e.getProvider("app").getImmediate(),o=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal"),s=e.getProvider("messaging");return new b(i,o,s,a,r,t)}e.INTERNAL.registerComponent(new c.Component(I,r,"PUBLIC").setServiceProps(n).setMultipleInstances(!0))}var E="@firebase/functions",k="0.6.16";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
T(r["default"],fetch.bind(self)),r["default"].registerVersion(E,k);n(2801);var S,C=n(7920),A="@firebase/installations",N="0.4.32",x=1e4,R="w:"+N,P="FIS_v2",O="https://firebaseinstallations.googleapis.com/v1",D=36e5,M="installations",L="Installations",F=(S={},S["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',S["not-registered"]="Firebase Installation is not registered.",S["installation-not-found"]="Firebase Installation not found.",S["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',S["app-offline"]="Could not process request. Application offline.",S["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",S),j=new o.ErrorFactory(M,L,F);function U(e){return e instanceof o.FirebaseError&&e.code.includes("request-failed")}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q(e){var t=e.projectId;return O+"/projects/"+t+"/installations"}function V(e){return{token:e.token,requestStatus:2,expiresIn:G(e.expiresIn),creationTime:Date.now()}}function B(e,t){return(0,u.__awaiter)(this,void 0,void 0,(function(){var n,r;return(0,u.__generator)(this,(function(i){switch(i.label){case 0:return[4,t.json()];case 1:return n=i.sent(),r=n.error,[2,j.create("request-failed",{requestName:e,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})]}}))}))}function K(e){var t=e.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function W(e,t){var n=t.refreshToken,r=K(e);return r.append("Authorization",z(n)),r}function H(e){return(0,u.__awaiter)(this,void 0,void 0,(function(){var t;return(0,u.__generator)(this,(function(n){switch(n.label){case 0:return[4,e()];case 1:return t=n.sent(),t.status>=500&&t.status<600?[2,e()]:[2,t]}}))}))}function G(e){return Number(e.replace("s","000"))}function z(e){return P+" "+e}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q(e,t){var n=t.fid;return(0,u.__awaiter)(this,void 0,void 0,(function(){var t,r,i,o,a,s,c;return(0,u.__generator)(this,(function(u){switch(u.label){case 0:return t=q(e),r=K(e),i={fid:n,authVersion:P,appId:e.appId,sdkVersion:R},o={method:"POST",headers:r,body:JSON.stringify(i)},[4,H((function(){return fetch(t,o)}))];case 1:return a=u.sent(),a.ok?[4,a.json()]:[3,3];case 2:return s=u.sent(),c={fid:s.fid||n,registrationStatus:2,refreshToken:s.refreshToken,authToken:V(s.authToken)},[2,c];case 3:return[4,B("Create Installation",a)];case 4:throw u.sent()}}))}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $(e){return new Promise((function(t){setTimeout(t,e)}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y(e){var t=btoa(String.fromCharCode.apply(String,(0,u.__spreadArray)([],(0,u.__read)(e))));return t.replace(/\+/g,"-").replace(/\//g,"_")}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var X=/^[cdef][\w-]{21}$/,J="";function Z(){try{var e=new Uint8Array(17),t=self.crypto||self.msCrypto;t.getRandomValues(e),e[0]=112+e[0]%16;var n=ee(e);return X.test(n)?n:J}catch(S){return J}}function ee(e){var t=Y(e);return t.substr(0,22)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function te(e){return e.appName+"!"+e.appId}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ne=new Map;function re(e,t){var n=te(e);ae(n,t),se(n,t)}function ie(e,t){ce();var n=te(e),r=ne.get(n);r||(r=new Set,ne.set(n,r)),r.add(t)}function oe(e,t){var n=te(e),r=ne.get(n);r&&(r.delete(t),0===r.size&&ne.delete(n),le())}function ae(e,t){var n,r,i=ne.get(e);if(i)try{for(var o=(0,u.__values)(i),a=o.next();!a.done;a=o.next()){var s=a.value;s(t)}}catch(c){n={error:c}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}function se(e,t){var n=ce();n&&n.postMessage({key:e,fid:t}),le()}var ue=null;function ce(){return!ue&&"BroadcastChannel"in self&&(ue=new BroadcastChannel("[Firebase] FID Change"),ue.onmessage=function(e){ae(e.data.key,e.data.fid)}),ue}function le(){0===ne.size&&ue&&(ue.close(),ue=null)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var he,fe="firebase-installations-database",de=1,pe="firebase-installations-store",ve=null;function ge(){return ve||(ve=(0,C.openDb)(fe,de,(function(e){switch(e.oldVersion){case 0:e.createObjectStore(pe)}}))),ve}function me(e,t){return(0,u.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,a;return(0,u.__generator)(this,(function(s){switch(s.label){case 0:return n=te(e),[4,ge()];case 1:return r=s.sent(),i=r.transaction(pe,"readwrite"),o=i.objectStore(pe),[4,o.get(n)];case 2:return a=s.sent(),[4,o.put(t,n)];case 3:return s.sent(),[4,i.complete];case 4:return s.sent(),a&&a.fid===t.fid||re(e,t.fid),[2,t]}}))}))}function ye(e){return(0,u.__awaiter)(this,void 0,void 0,(function(){var t,n,r;return(0,u.__generator)(this,(function(i){switch(i.label){case 0:return t=te(e),[4,ge()];case 1:return n=i.sent(),r=n.transaction(pe,"readwrite"),[4,r.objectStore(pe).delete(t)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}}))}))}function _e(e,t){return(0,u.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,a,s;return(0,u.__generator)(this,(function(u){switch(u.label){case 0:return n=te(e),[4,ge()];case 1:return r=u.sent(),i=r.transaction(pe,"readwrite"),o=i.objectStore(pe),[4,o.get(n)];case 2:return a=u.sent(),s=t(a),void 0!==s?[3,4]:[4,o.delete(n)];case 3:return u.sent(),[3,6];case 4:return[4,o.put(s,n)];case 5:u.sent(),u.label=6;case 6:return[4,i.complete];case 7:return u.sent(),!s||a&&a.fid===s.fid||re(e,s.fid),[2,s]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function be(e){return(0,u.__awaiter)(this,void 0,void 0,(function(){var t,n,r;return(0,u.__generator)(this,(function(i){switch(i.label){case 0:return[4,_e(e,(function(n){var r=we(n),i=Ie(e,r);return t=i.registrationPromise,i.installationEntry}))];case 1:return n=i.sent(),n.fid!==J?[3,3]:(r={},[4,t]);case 2:return[2,(r.installationEntry=i.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:t}]}}))}))}function we(e){var t=e||{fid:Z(),registrationStatus:0};return Se(t)}function Ie(e,t){if(0===t.registrationStatus){if(!navigator.onLine){var n=Promise.reject(j.create("app-offline"));return{installationEntry:t,registrationPromise:n}}var r={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},i=Te(e,r);return{installationEntry:r,registrationPromise:i}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:Ee(e)}:{installationEntry:t}}function Te(e,t){return(0,u.__awaiter)(this,void 0,void 0,(function(){var n,r;return(0,u.__generator)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,Q(e,t)];case 1:return n=i.sent(),[2,me(e,n)];case 2:return r=i.sent(),U(r)&&409===r.customData.serverCode?[4,ye(e)]:[3,4];case 3:return i.sent(),[3,6];case 4:return[4,me(e,{fid:t.fid,registrationStatus:0})];case 5:i.sent(),i.label=6;case 6:throw r;case 7:return[2]}}))}))}function Ee(e){return(0,u.__awaiter)(this,void 0,void 0,(function(){var t,n,r,i;return(0,u.__generator)(this,(function(o){switch(o.label){case 0:return[4,ke(e)];case 1:t=o.sent(),o.label=2;case 2:return 1!==t.registrationStatus?[3,5]:[4,$(100)];case 3:return o.sent(),[4,ke(e)];case 4:return t=o.sent(),[3,2];case 5:return 0!==t.registrationStatus?[3,7]:[4,be(e)];case 6:return n=o.sent(),r=n.installationEntry,i=n.registrationPromise,i?[2,i]:[2,r];case 7:return[2,t]}}))}))}function ke(e){return _e(e,(function(e){if(!e)throw j.create("installation-not-found");return Se(e)}))}function Se(e){return Ce(e)?{fid:e.fid,registrationStatus:0}:e}function Ce(e){return 1===e.registrationStatus&&e.registrationTime+x<Date.now()}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ae(e,t){var n=e.appConfig,r=e.platformLoggerProvider;return(0,u.__awaiter)(this,void 0,void 0,(function(){var e,i,o,a,s,c,l,h;return(0,u.__generator)(this,(function(u){switch(u.label){case 0:return e=Ne(n,t),i=W(n,t),o=r.getImmediate({optional:!0}),o&&i.append("x-firebase-client",o.getPlatformInfoString()),a={installation:{sdkVersion:R}},s={method:"POST",headers:i,body:JSON.stringify(a)},[4,H((function(){return fetch(e,s)}))];case 1:return c=u.sent(),c.ok?[4,c.json()]:[3,3];case 2:return l=u.sent(),h=V(l),[2,h];case 3:return[4,B("Generate Auth Token",c)];case 4:throw u.sent()}}))}))}function Ne(e,t){var n=t.fid;return q(e)+"/"+n+"/authTokens:generate"}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xe(e,t){return void 0===t&&(t=!1),(0,u.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o;return(0,u.__generator)(this,(function(a){switch(a.label){case 0:return[4,_e(e.appConfig,(function(r){if(!De(r))throw j.create("not-registered");var i=r.authToken;if(!t&&Me(i))return r;if(1===i.requestStatus)return n=Re(e,t),r;if(!navigator.onLine)throw j.create("app-offline");var o=Fe(r);return n=Oe(e,o),o}))];case 1:return r=a.sent(),n?[4,n]:[3,3];case 2:return o=a.sent(),[3,4];case 3:o=r.authToken,a.label=4;case 4:return i=o,[2,i]}}))}))}function Re(e,t){return(0,u.__awaiter)(this,void 0,void 0,(function(){var n,r;return(0,u.__generator)(this,(function(i){switch(i.label){case 0:return[4,Pe(e.appConfig)];case 1:n=i.sent(),i.label=2;case 2:return 1!==n.authToken.requestStatus?[3,5]:[4,$(100)];case 3:return i.sent(),[4,Pe(e.appConfig)];case 4:return n=i.sent(),[3,2];case 5:return r=n.authToken,0===r.requestStatus?[2,xe(e,t)]:[2,r]}}))}))}function Pe(e){return _e(e,(function(e){if(!De(e))throw j.create("not-registered");var t=e.authToken;return je(t)?(0,u.__assign)((0,u.__assign)({},e),{authToken:{requestStatus:0}}):e}))}function Oe(e,t){return(0,u.__awaiter)(this,void 0,void 0,(function(){var n,r,i;return(0,u.__generator)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,8]),[4,Ae(e,t)];case 1:return n=o.sent(),i=(0,u.__assign)((0,u.__assign)({},t),{authToken:n}),[4,me(e.appConfig,i)];case 2:return o.sent(),[2,n];case 3:return r=o.sent(),!U(r)||401!==r.customData.serverCode&&404!==r.customData.serverCode?[3,5]:[4,ye(e.appConfig)];case 4:return o.sent(),[3,7];case 5:return i=(0,u.__assign)((0,u.__assign)({},t),{authToken:{requestStatus:0}}),[4,me(e.appConfig,i)];case 6:o.sent(),o.label=7;case 7:throw r;case 8:return[2]}}))}))}function De(e){return void 0!==e&&2===e.registrationStatus}function Me(e){return 2===e.requestStatus&&!Le(e)}function Le(e){var t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+D}function Fe(e){var t={requestStatus:1,requestTime:Date.now()};return(0,u.__assign)((0,u.__assign)({},e),{authToken:t})}function je(e){return 1===e.requestStatus&&e.requestTime+x<Date.now()}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ue(e){return(0,u.__awaiter)(this,void 0,void 0,(function(){var t,n,r;return(0,u.__generator)(this,(function(i){switch(i.label){case 0:return[4,be(e.appConfig)];case 1:return t=i.sent(),n=t.installationEntry,r=t.registrationPromise,r?r.catch(console.error):xe(e).catch(console.error),[2,n.fid]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qe(e,t){return void 0===t&&(t=!1),(0,u.__awaiter)(this,void 0,void 0,(function(){var n;return(0,u.__generator)(this,(function(r){switch(r.label){case 0:return[4,Ve(e.appConfig)];case 1:return r.sent(),[4,xe(e,t)];case 2:return n=r.sent(),[2,n.token]}}))}))}function Ve(e){return(0,u.__awaiter)(this,void 0,void 0,(function(){var t;return(0,u.__generator)(this,(function(n){switch(n.label){case 0:return[4,be(e)];case 1:return t=n.sent().registrationPromise,t?[4,t]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Be(e,t){return(0,u.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o;return(0,u.__generator)(this,(function(a){switch(a.label){case 0:return n=Ke(e,t),r=W(e,t),i={method:"DELETE",headers:r},[4,H((function(){return fetch(n,i)}))];case 1:return o=a.sent(),o.ok?[3,3]:[4,B("Delete Installation",o)];case 2:throw a.sent();case 3:return[2]}}))}))}function Ke(e,t){var n=t.fid;return q(e)+"/"+n}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function We(e){return(0,u.__awaiter)(this,void 0,void 0,(function(){var t,n;return(0,u.__generator)(this,(function(r){switch(r.label){case 0:return t=e.appConfig,[4,_e(t,(function(e){if(!e||0!==e.registrationStatus)return e}))];case 1:if(n=r.sent(),!n)return[3,6];if(1!==n.registrationStatus)return[3,2];throw j.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw j.create("app-offline");case 3:return[4,Be(t,n)];case 4:return r.sent(),[4,ye(t)];case 5:r.sent(),r.label=6;case 6:return[2]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function He(e,t){var n=e.appConfig;return ie(n,t),function(){oe(n,t)}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ge(e){var t,n;if(!e||!e.options)throw ze("App Configuration");if(!e.name)throw ze("App Name");var r=["projectId","apiKey","appId"];try{for(var i=(0,u.__values)(r),o=i.next();!o.done;o=i.next()){var a=o.value;if(!e.options[a])throw ze(a)}}catch(s){t={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}function ze(e){return j.create("missing-app-config-values",{valueName:e})}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qe(e){var t="installations";e.INTERNAL.registerComponent(new c.Component(t,(function(e){var t=e.getProvider("app").getImmediate(),n=Ge(t),r=e.getProvider("platform-logger"),i={appConfig:n,platformLoggerProvider:r},o={app:t,getId:function(){return Ue(i)},getToken:function(e){return qe(i,e)},delete:function(){return We(i)},onIdChange:function(e){return He(i,e)}};return o}),"PUBLIC")),e.registerVersion(A,N)}Qe(r["default"]);var $e,Ye=(he={},he["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',he["only-available-in-window"]="This method is available in a Window context.",he["only-available-in-sw"]="This method is available in a service worker context.",he["permission-default"]="The notification permission was not granted and dismissed instead.",he["permission-blocked"]="The notification permission was not granted and blocked instead.",he["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",he["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",he["token-subscribe-failed"]="A problem occurred while subscribing the user to FCM: {$errorInfo}",he["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",he["token-unsubscribe-failed"]="A problem occurred while unsubscribing the user from FCM: {$errorInfo}",he["token-update-failed"]="A problem occurred while updating the user from FCM: {$errorInfo}",he["token-update-no-token"]="FCM returned no token when updating the user to push.",he["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",he["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",he["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",he["invalid-vapid-key"]="The public VAPID key must be a string.",he["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",he),Xe=new o.ErrorFactory("messaging","Messaging",Ye),Je="/firebase-messaging-sw.js",Ze="/firebase-cloud-messaging-push-scope",et="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",tt="https://fcmregistrations.googleapis.com/v1",nt="FCM_MSG",rt="FirebaseMessaging: ",it="google.c.a.e",ot="google.c.a.c_id",at="google.c.a.ts",st="google.c.a.c_l",ut=1e3,ct=3e3;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function lt(e){var t=new Uint8Array(e),n=btoa(String.fromCharCode.apply(String,(0,u.__spreadArray)([],(0,u.__read)(t))));return n.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function ht(e){for(var t="=".repeat((4-e.length%4)%4),n=(e+t).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),i=new Uint8Array(r.length),o=0;o<r.length;++o)i[o]=r.charCodeAt(o);return i}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(e){e["PUSH_RECEIVED"]="push-received",e["NOTIFICATION_CLICKED"]="notification-clicked"})($e||($e={}));var ft="fcm_token_details_db",dt=5,pt="fcm_token_object_Store";function vt(e){return(0,u.__awaiter)(this,void 0,void 0,(function(){var t,n,r,i,o=this;return(0,u.__generator)(this,(function(a){switch(a.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(t=a.sent(),n=t.map((function(e){return e.name})),!n.includes(ft))return[2,null];a.label=2;case 2:return r=null,[4,(0,C.openDb)(ft,dt,(function(t){return(0,u.__awaiter)(o,void 0,void 0,(function(){var n,i,o,a;return(0,u.__generator)(this,(function(s){switch(s.label){case 0:return t.oldVersion<2?[2]:t.objectStoreNames.contains(pt)?(n=t.transaction.objectStore(pt),[4,n.index("fcmSenderId").get(e)]):[2];case 1:return i=s.sent(),[4,n.clear()];case 2:if(s.sent(),!i)return[2];if(2===t.oldVersion){if(o=i,!o.auth||!o.p256dh||!o.endpoint)return[2];r={token:o.fcmToken,createTime:null!==(a=o.createTime)&&void 0!==a?a:Date.now(),subscriptionOptions:{auth:o.auth,p256dh:o.p256dh,endpoint:o.endpoint,swScope:o.swScope,vapidKey:"string"===typeof o.vapidKey?o.vapidKey:lt(o.vapidKey)}}}else(3===t.oldVersion||4===t.oldVersion)&&(o=i,r={token:o.fcmToken,createTime:o.createTime,subscriptionOptions:{auth:lt(o.auth),p256dh:lt(o.p256dh),endpoint:o.endpoint,swScope:o.swScope,vapidKey:lt(o.vapidKey)}});return[2]}}))}))}))];case 3:return i=a.sent(),i.close(),[4,(0,C.deleteDb)(ft)];case 4:return a.sent(),[4,(0,C.deleteDb)("fcm_vapid_details_db")];case 5:return a.sent(),[4,(0,C.deleteDb)("undefined")];case 6:return a.sent(),[2,gt(r)?r:null]}}))}))}function gt(e){if(!e||!e.subscriptionOptions)return!1;var t=e.subscriptionOptions;return"number"===typeof e.createTime&&e.createTime>0&&"string"===typeof e.token&&e.token.length>0&&"string"===typeof t.auth&&t.auth.length>0&&"string"===typeof t.p256dh&&t.p256dh.length>0&&"string"===typeof t.endpoint&&t.endpoint.length>0&&"string"===typeof t.swScope&&t.swScope.length>0&&"string"===typeof t.vapidKey&&t.vapidKey.length>0}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mt="firebase-messaging-database",yt=1,_t="firebase-messaging-store",bt=null;function wt(){return bt||(bt=(0,C.openDb)(mt,yt,(function(e){switch(e.oldVersion){case 0:e.createObjectStore(_t)}}))),bt}function It(e){return(0,u.__awaiter)(this,void 0,void 0,(function(){var t,n,r,i;return(0,u.__generator)(this,(function(o){switch(o.label){case 0:return t=kt(e),[4,wt()];case 1:return n=o.sent(),[4,n.transaction(_t).objectStore(_t).get(t)];case 2:return r=o.sent(),r?[2,r]:[3,3];case 3:return[4,vt(e.appConfig.senderId)];case 4:return i=o.sent(),i?[4,Tt(e,i)]:[3,6];case 5:return o.sent(),[2,i];case 6:return[2]}}))}))}function Tt(e,t){return(0,u.__awaiter)(this,void 0,void 0,(function(){var n,r,i;return(0,u.__generator)(this,(function(o){switch(o.label){case 0:return n=kt(e),[4,wt()];case 1:return r=o.sent(),i=r.transaction(_t,"readwrite"),[4,i.objectStore(_t).put(t,n)];case 2:return o.sent(),[4,i.complete];case 3:return o.sent(),[2,t]}}))}))}function Et(e){return(0,u.__awaiter)(this,void 0,void 0,(function(){var t,n,r;return(0,u.__generator)(this,(function(i){switch(i.label){case 0:return t=kt(e),[4,wt()];case 1:return n=i.sent(),r=n.transaction(_t,"readwrite"),[4,r.objectStore(_t).delete(t)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}}))}))}function kt(e){var t=e.appConfig;return t.appId}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function St(e,t){return(0,u.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,a,s,c;return(0,u.__generator)(this,(function(u){switch(u.label){case 0:return[4,xt(e)];case 1:n=u.sent(),r=Rt(t),i={method:"POST",headers:n,body:JSON.stringify(r)},u.label=2;case 2:return u.trys.push([2,5,,6]),[4,fetch(Nt(e.appConfig),i)];case 3:return a=u.sent(),[4,a.json()];case 4:return o=u.sent(),[3,6];case 5:throw s=u.sent(),Xe.create("token-subscribe-failed",{errorInfo:s});case 6:if(o.error)throw c=o.error.message,Xe.create("token-subscribe-failed",{errorInfo:c});if(!o.token)throw Xe.create("token-subscribe-no-token");return[2,o.token]}}))}))}function Ct(e,t){return(0,u.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,a,s,c;return(0,u.__generator)(this,(function(u){switch(u.label){case 0:return[4,xt(e)];case 1:n=u.sent(),r=Rt(t.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)},u.label=2;case 2:return u.trys.push([2,5,,6]),[4,fetch(Nt(e.appConfig)+"/"+t.token,i)];case 3:return a=u.sent(),[4,a.json()];case 4:return o=u.sent(),[3,6];case 5:throw s=u.sent(),Xe.create("token-update-failed",{errorInfo:s});case 6:if(o.error)throw c=o.error.message,Xe.create("token-update-failed",{errorInfo:c});if(!o.token)throw Xe.create("token-update-no-token");return[2,o.token]}}))}))}function At(e,t){return(0,u.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,a,s;return(0,u.__generator)(this,(function(u){switch(u.label){case 0:return[4,xt(e)];case 1:n=u.sent(),r={method:"DELETE",headers:n},u.label=2;case 2:return u.trys.push([2,5,,6]),[4,fetch(Nt(e.appConfig)+"/"+t,r)];case 3:return i=u.sent(),[4,i.json()];case 4:if(o=u.sent(),o.error)throw a=o.error.message,Xe.create("token-unsubscribe-failed",{errorInfo:a});return[3,6];case 5:throw s=u.sent(),Xe.create("token-unsubscribe-failed",{errorInfo:s});case 6:return[2]}}))}))}function Nt(e){var t=e.projectId;return tt+"/projects/"+t+"/registrations"}function xt(e){var t=e.appConfig,n=e.installations;return(0,u.__awaiter)(this,void 0,void 0,(function(){var e;return(0,u.__generator)(this,(function(r){switch(r.label){case 0:return[4,n.getToken()];case 1:return e=r.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":"FIS "+e})]}}))}))}function Rt(e){var t=e.p256dh,n=e.auth,r=e.endpoint,i=e.vapidKey,o={web:{endpoint:r,auth:n,p256dh:t}};return i!==et&&(o.web.applicationPubKey=i),o}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pt=6048e5;function Ot(e,t,n){return(0,u.__awaiter)(this,void 0,void 0,(function(){var r,i,o,a;return(0,u.__generator)(this,(function(s){switch(s.label){case 0:if("granted"!==Notification.permission)throw Xe.create("permission-blocked");return[4,Ft(t,n)];case 1:return r=s.sent(),[4,It(e)];case 2:return i=s.sent(),o={vapidKey:n,swScope:t.scope,endpoint:r.endpoint,auth:lt(r.getKey("auth")),p256dh:lt(r.getKey("p256dh"))},i?[3,3]:[2,Lt(e,o)];case 3:if(jt(i.subscriptionOptions,o))return[3,8];s.label=4;case 4:return s.trys.push([4,6,,7]),[4,At(e,i.token)];case 5:return s.sent(),[3,7];case 6:return a=s.sent(),console.warn(a),[3,7];case 7:return[2,Lt(e,o)];case 8:return Date.now()>=i.createTime+Pt?[2,Mt({token:i.token,createTime:Date.now(),subscriptionOptions:o},e,t)]:[2,i.token];case 9:return[2]}}))}))}function Dt(e,t){return(0,u.__awaiter)(this,void 0,void 0,(function(){var n,r;return(0,u.__generator)(this,(function(i){switch(i.label){case 0:return[4,It(e)];case 1:return n=i.sent(),n?[4,At(e,n.token)]:[3,4];case 2:return i.sent(),[4,Et(e)];case 3:i.sent(),i.label=4;case 4:return[4,t.pushManager.getSubscription()];case 5:return r=i.sent(),r?[2,r.unsubscribe()]:[2,!0]}}))}))}function Mt(e,t,n){return(0,u.__awaiter)(this,void 0,void 0,(function(){var r,i,o;return(0,u.__generator)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,,5]),[4,Ct(t,e)];case 1:return r=a.sent(),i=(0,u.__assign)((0,u.__assign)({},e),{token:r,createTime:Date.now()}),[4,Tt(t,i)];case 2:return a.sent(),[2,r];case 3:return o=a.sent(),[4,Dt(t,n)];case 4:throw a.sent(),o;case 5:return[2]}}))}))}function Lt(e,t){return(0,u.__awaiter)(this,void 0,void 0,(function(){var n,r;return(0,u.__generator)(this,(function(i){switch(i.label){case 0:return[4,St(e,t)];case 1:return n=i.sent(),r={token:n,createTime:Date.now(),subscriptionOptions:t},[4,Tt(e,r)];case 2:return i.sent(),[2,r.token]}}))}))}function Ft(e,t){return(0,u.__awaiter)(this,void 0,void 0,(function(){var n;return(0,u.__generator)(this,(function(r){switch(r.label){case 0:return[4,e.pushManager.getSubscription()];case 1:return n=r.sent(),n?[2,n]:[2,e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:ht(t)})]}}))}))}function jt(e,t){var n=t.vapidKey===e.vapidKey,r=t.endpoint===e.endpoint,i=t.auth===e.auth,o=t.p256dh===e.p256dh;return n&&r&&i&&o}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ut(e){var t={from:e.from,collapseKey:e.collapse_key,messageId:e.fcm_message_id};return qt(t,e),Vt(t,e),Bt(t,e),t}function qt(e,t){if(t.notification){e.notification={};var n=t.notification.title;n&&(e.notification.title=n);var r=t.notification.body;r&&(e.notification.body=r);var i=t.notification.image;i&&(e.notification.image=i)}}function Vt(e,t){t.data&&(e.data=t.data)}function Bt(e,t){if(t.fcmOptions){e.fcmOptions={};var n=t.fcmOptions.link;n&&(e.fcmOptions.link=n);var r=t.fcmOptions.analytics_label;r&&(e.fcmOptions.analyticsLabel=r)}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kt(e){return"object"===typeof e&&!!e&&ot in e}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wt(e){return new Promise((function(t){setTimeout(t,e)}))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ht=function(){function e(e){var t=this;this.firebaseDependencies=e,this.isOnBackgroundMessageUsed=null,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",(function(e){e.waitUntil(t.onPush(e))})),self.addEventListener("pushsubscriptionchange",(function(e){e.waitUntil(t.onSubChange(e))})),self.addEventListener("notificationclick",(function(e){e.waitUntil(t.onNotificationClick(e))}))}return Object.defineProperty(e.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),e.prototype.setBackgroundMessageHandler=function(e){if(this.isOnBackgroundMessageUsed=!1,!e||"function"!==typeof e)throw Xe.create("invalid-bg-handler");this.bgMessageHandler=e},e.prototype.onBackgroundMessage=function(e){var t=this;return this.isOnBackgroundMessageUsed=!0,this.bgMessageHandler=e,function(){t.bgMessageHandler=null}},e.prototype.getToken=function(){var e,t;return(0,u.__awaiter)(this,void 0,void 0,(function(){var n;return(0,u.__generator)(this,(function(r){switch(r.label){case 0:return this.vapidKey?[3,2]:[4,It(this.firebaseDependencies)];case 1:n=r.sent(),this.vapidKey=null!==(t=null===(e=null===n||void 0===n?void 0:n.subscriptionOptions)||void 0===e?void 0:e.vapidKey)&&void 0!==t?t:et,r.label=2;case 2:return[2,Ot(this.firebaseDependencies,self.registration,this.vapidKey)]}}))}))},e.prototype.deleteToken=function(){return Dt(this.firebaseDependencies,self.registration)},e.prototype.requestPermission=function(){throw Xe.create("only-available-in-window")},e.prototype.usePublicVapidKey=function(e){if(null!==this.vapidKey)throw Xe.create("use-vapid-key-after-get-token");if("string"!==typeof e||0===e.length)throw Xe.create("invalid-vapid-key");this.vapidKey=e},e.prototype.useServiceWorker=function(){throw Xe.create("only-available-in-window")},e.prototype.onMessage=function(){throw Xe.create("only-available-in-window")},e.prototype.onTokenRefresh=function(){throw Xe.create("only-available-in-window")},e.prototype.onPush=function(e){return(0,u.__awaiter)(this,void 0,void 0,(function(){var t,n,r,i;return(0,u.__generator)(this,(function(o){switch(o.label){case 0:return t=zt(e),t?[4,Xt()]:(console.debug(rt+"failed to get parsed MessagePayload from the PushEvent. Skip handling the push."),[2]);case 1:return n=o.sent(),$t(n)?[2,Yt(n,t)]:(r=!1,t.notification?[4,Jt(Gt(t))]:[3,3]);case 2:o.sent(),r=!0,o.label=3;case 3:return!0===r&&!1===this.isOnBackgroundMessageUsed?[2]:(this.bgMessageHandler&&(i=Ut(t),"function"===typeof this.bgMessageHandler?this.bgMessageHandler(i):this.bgMessageHandler.next(i)),[4,Wt(ut)]);case 4:return o.sent(),[2]}}))}))},e.prototype.onSubChange=function(e){var t,n;return(0,u.__awaiter)(this,void 0,void 0,(function(){var r,i;return(0,u.__generator)(this,(function(o){switch(o.label){case 0:return r=e.newSubscription,r?[3,2]:[4,Dt(this.firebaseDependencies,self.registration)];case 1:return o.sent(),[2];case 2:return[4,It(this.firebaseDependencies)];case 3:return i=o.sent(),[4,Dt(this.firebaseDependencies,self.registration)];case 4:return o.sent(),[4,Ot(this.firebaseDependencies,self.registration,null!==(n=null===(t=null===i||void 0===i?void 0:i.subscriptionOptions)||void 0===t?void 0:t.vapidKey)&&void 0!==n?n:et)];case 5:return o.sent(),[2]}}))}))},e.prototype.onNotificationClick=function(e){var t,n;return(0,u.__awaiter)(this,void 0,void 0,(function(){var r,i,o,a,s;return(0,u.__generator)(this,(function(u){switch(u.label){case 0:return r=null===(n=null===(t=e.notification)||void 0===t?void 0:t.data)||void 0===n?void 0:n[nt],r?e.action?[2]:(e.stopImmediatePropagation(),e.notification.close(),i=Zt(r),i?(o=new URL(i,self.location.href),a=new URL(self.location.origin),o.host!==a.host?[2]:[4,Qt(o)]):[2]):[2];case 1:return s=u.sent(),s?[3,4]:[4,self.clients.openWindow(i)];case 2:return s=u.sent(),[4,Wt(ct)];case 3:return u.sent(),[3,6];case 4:return[4,s.focus()];case 5:s=u.sent(),u.label=6;case 6:return s?(r.messageType=$e.NOTIFICATION_CLICKED,r.isFirebaseMessaging=!0,[2,s.postMessage(r)]):[2]}}))}))},e}();function Gt(e){var t,n=(0,u.__assign)({},e.notification);return n.data=(t={},t[nt]=e,t),n}function zt(e){var t=e.data;if(!t)return null;try{return t.json()}catch(n){return null}}function Qt(e){return(0,u.__awaiter)(this,void 0,void 0,(function(){var t,n,r,i,o,a,s;return(0,u.__generator)(this,(function(c){switch(c.label){case 0:return[4,Xt()];case 1:t=c.sent();try{for(n=(0,u.__values)(t),r=n.next();!r.done;r=n.next())if(i=r.value,o=new URL(i.url,self.location.href),e.host===o.host)return[2,i]}catch(l){a={error:l}}finally{try{r&&!r.done&&(s=n.return)&&s.call(n)}finally{if(a)throw a.error}}return[2,null]}}))}))}function $t(e){return e.some((function(e){return"visible"===e.visibilityState&&!e.url.startsWith("chrome-extension://")}))}function Yt(e,t){var n,r;t.isFirebaseMessaging=!0,t.messageType=$e.PUSH_RECEIVED;try{for(var i=(0,u.__values)(e),o=i.next();!o.done;o=i.next()){var a=o.value;a.postMessage(t)}}catch(s){n={error:s}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}function Xt(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function Jt(e){var t,n=e.actions,r=Notification.maxActions;return n&&r&&n.length>r&&console.warn("This browser only supports "+r+" actions. The remaining actions will not be displayed."),self.registration.showNotification(null!==(t=e.title)&&void 0!==t?t:"",e)}function Zt(e){var t,n,r,i=null!==(n=null===(t=e.fcmOptions)||void 0===t?void 0:t.link)&&void 0!==n?n:null===(r=e.notification)||void 0===r?void 0:r.click_action;return i||(Kt(e.data)?self.location.origin:null)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var en=function(){function e(e){var t=this;this.firebaseDependencies=e,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",(function(e){return t.messageEventListener(e)}))}return Object.defineProperty(e.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),e.prototype.messageEventListener=function(e){return(0,u.__awaiter)(this,void 0,void 0,(function(){var t,n;return(0,u.__generator)(this,(function(r){switch(r.label){case 0:return t=e.data,t.isFirebaseMessaging?(this.onMessageCallback&&t.messageType===$e.PUSH_RECEIVED&&("function"===typeof this.onMessageCallback?this.onMessageCallback(nn(Object.assign({},t))):this.onMessageCallback.next(Object.assign({},t))),n=t.data,Kt(n)&&"1"===n[it]?[4,this.logEvent(t.messageType,n)]:[3,2]):[2];case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},e.prototype.getVapidKey=function(){return this.vapidKey},e.prototype.getSwReg=function(){return this.swRegistration},e.prototype.getToken=function(e){return(0,u.__awaiter)(this,void 0,void 0,(function(){return(0,u.__generator)(this,(function(t){switch(t.label){case 0:return"default"!==Notification.permission?[3,2]:[4,Notification.requestPermission()];case 1:t.sent(),t.label=2;case 2:if("granted"!==Notification.permission)throw Xe.create("permission-blocked");return[4,this.updateVapidKey(null===e||void 0===e?void 0:e.vapidKey)];case 3:return t.sent(),[4,this.updateSwReg(null===e||void 0===e?void 0:e.serviceWorkerRegistration)];case 4:return t.sent(),[2,Ot(this.firebaseDependencies,this.swRegistration,this.vapidKey)]}}))}))},e.prototype.updateVapidKey=function(e){return(0,u.__awaiter)(this,void 0,void 0,(function(){return(0,u.__generator)(this,(function(t){return e?this.vapidKey=e:this.vapidKey||(this.vapidKey=et),[2]}))}))},e.prototype.updateSwReg=function(e){return(0,u.__awaiter)(this,void 0,void 0,(function(){return(0,u.__generator)(this,(function(t){switch(t.label){case 0:return e||this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:if(!e&&this.swRegistration)return[2];if(!(e instanceof ServiceWorkerRegistration))throw Xe.create("invalid-sw-registration");return this.swRegistration=e,[2]}}))}))},e.prototype.registerDefaultSw=function(){return(0,u.__awaiter)(this,void 0,void 0,(function(){var e,t;return(0,u.__generator)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),e=this,[4,navigator.serviceWorker.register(Je,{scope:Ze})];case 1:return e.swRegistration=n.sent(),this.swRegistration.update().catch((function(){})),[3,3];case 2:throw t=n.sent(),Xe.create("failed-service-worker-registration",{browserErrorMessage:t.message});case 3:return[2]}}))}))},e.prototype.deleteToken=function(){return(0,u.__awaiter)(this,void 0,void 0,(function(){return(0,u.__generator)(this,(function(e){switch(e.label){case 0:return this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:e.sent(),e.label=2;case 2:return[2,Dt(this.firebaseDependencies,this.swRegistration)]}}))}))},e.prototype.requestPermission=function(){return(0,u.__awaiter)(this,void 0,void 0,(function(){var e;return(0,u.__generator)(this,(function(t){switch(t.label){case 0:return"granted"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if(e=t.sent(),"granted"===e)return[2];throw"denied"===e?Xe.create("permission-blocked"):Xe.create("permission-default")}}))}))},e.prototype.usePublicVapidKey=function(e){if(null!==this.vapidKey)throw Xe.create("use-vapid-key-after-get-token");if("string"!==typeof e||0===e.length)throw Xe.create("invalid-vapid-key");this.vapidKey=e},e.prototype.useServiceWorker=function(e){if(!(e instanceof ServiceWorkerRegistration))throw Xe.create("invalid-sw-registration");if(this.swRegistration)throw Xe.create("use-sw-after-get-token");this.swRegistration=e},e.prototype.onMessage=function(e){var t=this;return this.onMessageCallback=e,function(){t.onMessageCallback=null}},e.prototype.setBackgroundMessageHandler=function(){throw Xe.create("only-available-in-sw")},e.prototype.onBackgroundMessage=function(){throw Xe.create("only-available-in-sw")},e.prototype.onTokenRefresh=function(){return function(){}},e.prototype.logEvent=function(e,t){return(0,u.__awaiter)(this,void 0,void 0,(function(){var n,r;return(0,u.__generator)(this,(function(i){switch(i.label){case 0:return n=tn(e),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return r=i.sent(),r.logEvent(n,{message_id:t[ot],message_name:t[st],message_time:t[at],message_device_time:Math.floor(Date.now()/1e3)}),[2]}}))}))},e}();function tn(e){switch(e){case $e.NOTIFICATION_CLICKED:return"notification_open";case $e.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function nn(e){return delete e.messageType,delete e.isFirebaseMessaging,e}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rn(e){var t,n;if(!e||!e.options)throw on("App Configuration Object");if(!e.name)throw on("App Name");var r=["projectId","apiKey","appId","messagingSenderId"],i=e.options;try{for(var o=(0,u.__values)(r),a=o.next();!a.done;a=o.next()){var s=a.value;if(!i[s])throw on(s)}}catch(c){t={error:c}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return{appName:e.name,projectId:i.projectId,apiKey:i.apiKey,appId:i.appId,senderId:i.messagingSenderId}}function on(e){return Xe.create("missing-app-config-values",{valueName:e})}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var an="messaging";function sn(e){var t=e.getProvider("app").getImmediate(),n=rn(t),r=e.getProvider("installations").getImmediate(),i=e.getProvider("analytics-internal"),o={app:t,appConfig:n,installations:r,analyticsProvider:i};if(!cn())throw Xe.create("unsupported-browser");return self&&"ServiceWorkerGlobalScope"in self?new Ht(o):new en(o)}var un={isSupported:cn};function cn(){return self&&"ServiceWorkerGlobalScope"in self?hn():ln()}function ln(){return"indexedDB"in window&&null!==indexedDB&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}function hn(){return"indexedDB"in self&&null!==indexedDB&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}r["default"].INTERNAL.registerComponent(new c.Component(an,sn,"PUBLIC").setServiceProps(un));
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var fn="firebasestorage.googleapis.com",dn="storageBucket",pn=12e4,vn=6e5,gn=function(e){function t(n,r){var i=e.call(this,mn(n),"Firebase Storage: "+r+" ("+mn(n)+")")||this;return i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(i,t.prototype),i}return(0,u.__extends)(t,e),t.prototype._codeEquals=function(e){return mn(e)===this.code},Object.defineProperty(t.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=this._baseMessage+"\n"+this.customData.serverResponse:this.message=this._baseMessage},enumerable:!1,configurable:!0}),t}(o.FirebaseError);function mn(e){return"storage/"+e}function yn(){var e="An unknown error occurred, please check the error payload for server response.";return new gn("unknown",e)}function _n(e){return new gn("object-not-found","Object '"+e+"' does not exist.")}function bn(e){return new gn("quota-exceeded","Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function wn(){var e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new gn("unauthenticated",e)}function In(){return new gn("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}function Tn(e){return new gn("unauthorized","User does not have permission to access '"+e+"'.")}function En(){return new gn("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function kn(){return new gn("canceled","User canceled the upload/download.")}function Sn(e){return new gn("invalid-url","Invalid URL '"+e+"'.")}function Cn(e){return new gn("invalid-default-bucket","Invalid default bucket '"+e+"'.")}function An(){return new gn("no-default-bucket","No default bucket found. Did you set the '"+dn+"' property when initializing the app?")}function Nn(){return new gn("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function xn(){return new gn("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}function Rn(){return new gn("no-download-url","The given file does not have any download URLs.")}function Pn(e){return new gn("invalid-argument",e)}function On(){return new gn("app-deleted","The Firebase app was deleted.")}function Dn(e){return new gn("invalid-root-operation","The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Mn(e,t){return new gn("invalid-format","String does not match format '"+e+"': "+t)}function Ln(e){throw new gn("internal-error","Internal error: "+e)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fn(e){return atob(e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},Un=function(){function e(e,t){this.data=e,this.contentType=t||null}return e}();function qn(e,t){switch(e){case jn.RAW:return new Un(Vn(t));case jn.BASE64:case jn.BASE64URL:return new Un(Kn(e,t));case jn.DATA_URL:return new Un(Hn(t),Gn(t))}throw yn()}function Vn(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r)){var i=n<e.length-1&&56320===(64512&e.charCodeAt(n+1));if(i){var o=r,a=e.charCodeAt(++n);r=65536|(1023&o)<<10|1023&a,t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189)}else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function Bn(e){var t;try{t=decodeURIComponent(e)}catch(n){throw Mn(jn.DATA_URL,"Malformed data URL.")}return Vn(t)}function Kn(e,t){switch(e){case jn.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r){var i=n?"-":"_";throw Mn(e,"Invalid character '"+i+"' found: is it base64url encoded?")}break;case jn.BASE64URL:var o=-1!==t.indexOf("+"),a=-1!==t.indexOf("/");if(o||a){i=o?"+":"/";throw Mn(e,"Invalid character '"+i+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}var s;try{s=Fn(t)}catch(l){throw Mn(e,"Invalid character found")}for(var u=new Uint8Array(s.length),c=0;c<s.length;c++)u[c]=s.charCodeAt(c);return u}var Wn=function(){function e(e){this.base64=!1,this.contentType=null;var t=e.match(/^data:([^,]+)?,/);if(null===t)throw Mn(jn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n=t[1]||null;null!=n&&(this.base64=zn(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-";base64".length):n),this.rest=e.substring(e.indexOf(",")+1)}return e}();function Hn(e){var t=new Wn(e);return t.base64?Kn(jn.BASE64,t.rest):Bn(t.rest)}function Gn(e){var t=new Wn(e);return t.contentType}function zn(e,t){var n=e.length>=t.length;return!!n&&e.substring(e.length-t.length)===t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qn,$n={STATE_CHANGED:"state_changed"},Yn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Xn(e){switch(e){case"running":case"pausing":case"canceling":return Yn.RUNNING;case"paused":return Yn.PAUSED;case"success":return Yn.SUCCESS;case"canceled":return Yn.CANCELED;case"error":return Yn.ERROR;default:return Yn.ERROR}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(e){e[e["NO_ERROR"]=0]="NO_ERROR",e[e["NETWORK_ERROR"]=1]="NETWORK_ERROR",e[e["ABORT"]=2]="ABORT"})(Qn||(Qn={}));
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Jn=function(){function e(){var e=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=Qn.NO_ERROR,this.sendPromise_=new Promise((function(t){e.xhr_.addEventListener("abort",(function(){e.errorCode_=Qn.ABORT,t()})),e.xhr_.addEventListener("error",(function(){e.errorCode_=Qn.NETWORK_ERROR,t()})),e.xhr_.addEventListener("load",(function(){t()}))}))}return e.prototype.send=function(e,t,n,r){if(this.sent_)throw Ln("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},e.prototype.getErrorCode=function(){if(!this.sent_)throw Ln("cannot .getErrorCode() before sending");return this.errorCode_},e.prototype.getStatus=function(){if(!this.sent_)throw Ln("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}},e.prototype.getResponseText=function(){if(!this.sent_)throw Ln("cannot .getResponseText() before sending");return this.xhr_.responseText},e.prototype.abort=function(){this.xhr_.abort()},e.prototype.getResponseHeader=function(e){return this.xhr_.getResponseHeader(e)},e.prototype.addUploadProgressListener=function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)},e.prototype.removeUploadProgressListener=function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)},e}();function Zn(){return new Jn}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var er=function(){function e(){}return e.prototype.createConnection=function(){return Zn()},e}(),tr=function(){function e(e,t){this.bucket=e,this.path_=t}return Object.defineProperty(e.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),e.prototype.fullServerUrl=function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)},e.prototype.bucketOnlyServerUrl=function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o"},e.makeFromBucketSpec=function(t,n){var r;try{r=e.makeFromUrl(t,n)}catch(i){return new e(t,"")}if(""===r.path)return r;throw Cn(t)},e.makeFromUrl=function(t,n){var r=null,i="([A-Za-z0-9.\\-_]+)";function o(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}var a="(/(.*))?$",s=new RegExp("^gs://"+i+a,"i"),u={bucket:1,path:3};function c(e){e.path_=decodeURIComponent(e.path)}for(var l="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",d=new RegExp("^https?://"+h+"/"+l+"/b/"+i+"/o"+f,"i"),p={bucket:1,path:3},v=n===fn?"(?:storage.googleapis.com|storage.cloud.google.com)":n,g="([^?#]*)",m=new RegExp("^https?://"+v+"/"+i+"/"+g,"i"),y={bucket:1,path:2},_=[{regex:s,indices:u,postModify:o},{regex:d,indices:p,postModify:c},{regex:m,indices:y,postModify:c}],b=0;b<_.length;b++){var w=_[b],I=w.regex.exec(t);if(I){var T=I[w.indices.bucket],E=I[w.indices.path];E||(E=""),r=new e(T,E),w.postModify(r);break}}if(null==r)throw Sn(t);return r},e}(),nr=function(){function e(e){this.promise_=Promise.reject(e)}return e.prototype.getPromise=function(){return this.promise_},e.prototype.cancel=function(e){},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function rr(e,t,n){var r=1,i=null,o=!1,a=0;function s(){return 2===a}var c=!1;function l(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];c||(c=!0,t.apply(null,e))}function h(t){i=setTimeout((function(){i=null,e(f,s())}),t)}function f(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(!c)if(e)l.call.apply(l,(0,u.__spreadArray)([null,e],t));else{var i,f=s()||o;if(f)l.call.apply(l,(0,u.__spreadArray)([null,e],t));else r<64&&(r*=2),1===a?(a=2,i=0):i=1e3*(r+Math.random()),h(i)}}var d=!1;function p(e){d||(d=!0,c||(null!==i?(e||(a=2),clearTimeout(i),h(0)):e||(a=1)))}return h(0),setTimeout((function(){o=!0,p(!0)}),n),p}function ir(e){e(!1)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function or(e){return void 0!==e}function ar(e){return"function"===typeof e}function sr(e){return"object"===typeof e&&!Array.isArray(e)}function ur(e){return"string"===typeof e||e instanceof String}function cr(e){return lr()&&e instanceof Blob}function lr(){return"undefined"!==typeof Blob}function hr(e,t,n,r){if(r<t)throw Pn("Invalid value for '"+e+"'. Expected "+t+" or greater.");if(r>n)throw Pn("Invalid value for '"+e+"'. Expected "+n+" or less.")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fr(e,t){var n=t.match(/^(\w+):\/\/.+/),r=null===n||void 0===n?void 0:n[1],i=t;return null==r&&(i="https://"+t),i+"/v0"+e}function dr(e){var t=encodeURIComponent,n="?";for(var r in e)if(e.hasOwnProperty(r)){var i=t(r)+"="+t(e[r]);n=n+i+"&"}return n=n.slice(0,-1),n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pr=function(){function e(e,t,n,r,i,o,a,s,u,c,l){var h=this;this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=a,this.errorCallback_=s,this.progressCallback_=c,this.timeout_=u,this.pool_=l,this.promise_=new Promise((function(e,t){h.resolve_=e,h.reject_=t,h.start_()}))}return e.prototype.start_=function(){var e=this;function t(t,n){if(n)t(!1,new vr(!1,null,!0));else{var r=e.pool_.createConnection();e.pendingConnection_=r,null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then((function(){null!==e.progressCallback_&&r.removeUploadProgressListener(i),e.pendingConnection_=null;var n=r.getErrorCode()===Qn.NO_ERROR,o=r.getStatus();if(n&&!e.isRetryStatusCode_(o)){var a=-1!==e.successCodes_.indexOf(o);t(!0,new vr(a,r))}else{var s=r.getErrorCode()===Qn.ABORT;t(!1,new vr(!1,null,s))}}))}function i(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)}}function n(t,n){var r=e.resolve_,i=e.reject_,o=n.connection;if(n.wasSuccessCode)try{var a=e.callback_(o,o.getResponseText());or(a)?r(a):r()}catch(u){i(u)}else if(null!==o){var s=yn();s.serverResponse=o.getResponseText(),e.errorCallback_?i(e.errorCallback_(o,s)):i(s)}else if(n.canceled){s=e.appDelete_?On():kn();i(s)}else{s=En();i(s)}}this.canceled_?n(!1,new vr(!1,null,!0)):this.backoffId_=rr(t,n,this.timeout_)},e.prototype.getPromise=function(){return this.promise_},e.prototype.cancel=function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&ir(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()},e.prototype.isRetryStatusCode_=function(e){var t=e>=500&&e<600,n=[408,429],r=-1!==n.indexOf(e),i=-1!==this.additionalRetryCodes_.indexOf(e);return t||r||i},e}(),vr=function(){function e(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}return e}();function gr(e,t){null!==t&&t.length>0&&(e["Authorization"]="Firebase "+t)}function mr(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}function yr(e,t){t&&(e["X-Firebase-GMPID"]=t)}function _r(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}function br(e,t,n,r,i,o){var a=dr(e.urlParams),s=e.url+a,u=Object.assign({},e.headers);return yr(u,t),gr(u,n),mr(u,o),_r(u,r),new pr(s,e.method,u,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wr(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function Ir(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=wr();if(void 0!==n){for(var r=new n,i=0;i<e.length;i++)r.append(e[i]);return r.getBlob()}if(lr())return new Blob(e);throw new gn("unsupported-environment","This browser doesn't seem to support creating Blobs")}function Tr(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Er=function(){function e(e,t){var n=0,r="";cr(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}return e.prototype.size=function(){return this.size_},e.prototype.type=function(){return this.type_},e.prototype.slice=function(t,n){if(cr(this.data_)){var r=this.data_,i=Tr(r,t,n);return null===i?null:new e(i)}var o=new Uint8Array(this.data_.buffer,t,n-t);return new e(o,!0)},e.getBlob=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(lr()){var r=t.map((function(t){return t instanceof e?t.data_:t}));return new e(Ir.apply(null,r))}var i=t.map((function(e){return ur(e)?qn(jn.RAW,e).data:e.data_})),o=0;i.forEach((function(e){o+=e.byteLength}));var a=new Uint8Array(o),s=0;return i.forEach((function(e){for(var t=0;t<e.length;t++)a[s++]=e[t]})),new e(a,!0)},e.prototype.uploadData=function(){return this.data_},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kr(e){var t;try{t=JSON.parse(e)}catch(n){return null}return sr(t)?t:null}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sr(e){if(0===e.length)return null;var t=e.lastIndexOf("/");if(-1===t)return"";var n=e.slice(0,t);return n}function Cr(e,t){var n=t.split("/").filter((function(e){return e.length>0})).join("/");return 0===e.length?n:e+"/"+n}function Ar(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nr(e,t){return t}var xr=function(){function e(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||Nr}return e}(),Rr=null;function Pr(e){return!ur(e)||e.length<2?e:Ar(e)}function Or(){if(Rr)return Rr;var e=[];function t(e,t){return Pr(t)}e.push(new xr("bucket")),e.push(new xr("generation")),e.push(new xr("metageneration")),e.push(new xr("name","fullPath",!0));var n=new xr("name");function r(e,t){return void 0!==t?Number(t):t}n.xform=t,e.push(n);var i=new xr("size");return i.xform=r,e.push(i),e.push(new xr("timeCreated")),e.push(new xr("updated")),e.push(new xr("md5Hash",null,!0)),e.push(new xr("cacheControl",null,!0)),e.push(new xr("contentDisposition",null,!0)),e.push(new xr("contentEncoding",null,!0)),e.push(new xr("contentLanguage",null,!0)),e.push(new xr("contentType",null,!0)),e.push(new xr("metadata","customMetadata",!0)),Rr=e,Rr}function Dr(e,t){function n(){var n=e["bucket"],r=e["fullPath"],i=new tr(n,r);return t._makeStorageReference(i)}Object.defineProperty(e,"ref",{get:n})}function Mr(e,t,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var a=n[o];r[a.local]=a.xform(r,t[a.server])}return Dr(r,e),r}function Lr(e,t,n){var r=kr(t);if(null===r)return null;var i=r;return Mr(e,i,n)}function Fr(e,t,n){var r=kr(t);if(null===r)return null;if(!ur(r["downloadTokens"]))return null;var i=r["downloadTokens"];if(0===i.length)return null;var o=encodeURIComponent,a=i.split(","),s=a.map((function(t){var r=e["bucket"],i=e["fullPath"],a="/b/"+o(r)+"/o/"+o(i),s=fr(a,n),u=dr({alt:"media",token:t});return s+u}));return s[0]}function jr(e,t){for(var n={},r=t.length,i=0;i<r;i++){var o=t[i];o.writable&&(n[o.server]=e[o.local])}return JSON.stringify(n)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ur="prefixes",qr="items";function Vr(e,t,n){var r={prefixes:[],items:[],nextPageToken:n["nextPageToken"]};if(n[Ur])for(var i=0,o=n[Ur];i<o.length;i++){var a=o[i],s=a.replace(/\/$/,""),u=e._makeStorageReference(new tr(t,s));r.prefixes.push(u)}if(n[qr])for(var c=0,l=n[qr];c<l.length;c++){var h=l[c];u=e._makeStorageReference(new tr(t,h["name"]));r.items.push(u)}return r}function Br(e,t,n){var r=kr(n);if(null===r)return null;var i=r;return Vr(e,t,i)}var Kr=function(){function e(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}return e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wr(e){if(!e)throw yn()}function Hr(e,t){function n(n,r){var i=Lr(e,r,t);return Wr(null!==i),i}return n}function Gr(e,t){function n(n,r){var i=Br(e,t,r);return Wr(null!==i),i}return n}function zr(e,t){function n(n,r){var i=Lr(e,r,t);return Wr(null!==i),Fr(i,r,e.host)}return n}function Qr(e){function t(t,n){var r;return r=401===t.getStatus()?t.getResponseText().includes("Firebase App Check token is invalid")?In():wn():402===t.getStatus()?bn(e.bucket):403===t.getStatus()?Tn(e.path):n,r.serverResponse=n.serverResponse,r}return t}function $r(e){var t=Qr(e);function n(n,r){var i=t(n,r);return 404===n.getStatus()&&(i=_n(e.path)),i.serverResponse=r.serverResponse,i}return n}function Yr(e,t,n){var r=t.fullServerUrl(),i=fr(r,e.host),o="GET",a=e.maxOperationRetryTime,s=new Kr(i,o,Hr(e,n),a);return s.errorHandler=$r(t),s}function Xr(e,t,n,r,i){var o={};t.isRoot?o["prefix"]="":o["prefix"]=t.path+"/",n&&n.length>0&&(o["delimiter"]=n),r&&(o["pageToken"]=r),i&&(o["maxResults"]=i);var a=t.bucketOnlyServerUrl(),s=fr(a,e.host),u="GET",c=e.maxOperationRetryTime,l=new Kr(s,u,Gr(e,t.bucket),c);return l.urlParams=o,l.errorHandler=Qr(t),l}function Jr(e,t,n){var r=t.fullServerUrl(),i=fr(r,e.host),o="GET",a=e.maxOperationRetryTime,s=new Kr(i,o,zr(e,n),a);return s.errorHandler=$r(t),s}function Zr(e,t,n,r){var i=t.fullServerUrl(),o=fr(i,e.host),a="PATCH",s=jr(n,r),u={"Content-Type":"application/json; charset=utf-8"},c=e.maxOperationRetryTime,l=new Kr(o,a,Hr(e,r),c);return l.headers=u,l.body=s,l.errorHandler=$r(t),l}function ei(e,t){var n=t.fullServerUrl(),r=fr(n,e.host),i="DELETE",o=e.maxOperationRetryTime;function a(e,t){}var s=new Kr(r,i,a,o);return s.successCodes=[200,204],s.errorHandler=$r(t),s}function ti(e,t){return e&&e["contentType"]||t&&t.type()||"application/octet-stream"}function ni(e,t,n){var r=Object.assign({},n);return r["fullPath"]=e.path,r["size"]=t.size(),r["contentType"]||(r["contentType"]=ti(null,t)),r}function ri(e,t,n,r,i){var o=t.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function s(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}var u=s();a["Content-Type"]="multipart/related; boundary="+u;var c=ni(t,r,i),l=jr(c,n),h="--"+u+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+l+"\r\n--"+u+"\r\nContent-Type: "+c["contentType"]+"\r\n\r\n",f="\r\n--"+u+"--",d=Er.getBlob(h,r,f);if(null===d)throw Nn();var p={name:c["fullPath"]},v=fr(o,e.host),g="POST",m=e.maxUploadRetryTime,y=new Kr(v,g,Hr(e,n),m);return y.urlParams=p,y.headers=a,y.body=d.uploadData(),y.errorHandler=Qr(t),y}var ii=function(){function e(e,t,n,r){this.current=e,this.total=t,this.finalized=!!n,this.metadata=r||null}return e}();function oi(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(i){Wr(!1)}var r=t||["active"];return Wr(!!n&&-1!==r.indexOf(n)),n}function ai(e,t,n,r,i){var o=t.bucketOnlyServerUrl(),a=ni(t,r,i),s={name:a["fullPath"]},u=fr(o,e.host),c="POST",l={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":""+r.size(),"X-Goog-Upload-Header-Content-Type":a["contentType"],"Content-Type":"application/json; charset=utf-8"},h=jr(a,n),f=e.maxUploadRetryTime;function d(e){var t;oi(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(n){Wr(!1)}return Wr(ur(t)),t}var p=new Kr(u,c,d,f);return p.urlParams=s,p.headers=l,p.body=h,p.errorHandler=Qr(t),p}function si(e,t,n,r){var i={"X-Goog-Upload-Command":"query"};function o(e){var t=oi(e,["active","final"]),n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(o){Wr(!1)}n||Wr(!1);var i=Number(n);return Wr(!isNaN(i)),new ii(i,r.size(),"final"===t)}var a="POST",s=e.maxUploadRetryTime,u=new Kr(n,a,o,s);return u.headers=i,u.errorHandler=Qr(t),u}var ui=262144;function ci(e,t,n,r,i,o,a,s){var u=new ii(0,0);if(a?(u.current=a.current,u.total=a.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw xn();var c=u.total-u.current,l=c;i>0&&(l=Math.min(l,i));var h=u.current,f=h+l,d=l===c?"upload, finalize":"upload",p={"X-Goog-Upload-Command":d,"X-Goog-Upload-Offset":""+u.current},v=r.slice(h,f);if(null===v)throw Nn();function g(e,n){var i,a=oi(e,["active","final"]),s=u.current+l,c=r.size();return i="final"===a?Hr(t,o)(e,n):null,new ii(s,c,"final"===a,i)}var m="POST",y=t.maxUploadRetryTime,_=new Kr(n,m,g,y);return _.headers=p,_.body=v.uploadData(),_.progressCallback=s||null,_.errorHandler=Qr(e),_}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var li=function(){function e(e,t,n){var r=ar(e)||null!=t||null!=n;if(r)this.next=e,this.error=t,this.complete=n;else{var i=e;this.next=i.next,this.error=i.error,this.complete=i.complete}}return e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hi(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];Promise.resolve().then((function(){return e.apply(void 0,t)}))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fi=function(){function e(e,t,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=n,this._mappings=Or(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(e){r._request=void 0,r._chunkMultiplier=1,e._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=e,r._transition("error"))},this._metadataErrorHandler=function(e){r._request=void 0,e._codeEquals("canceled")?r.completeTransitions_():(r._error=e,r._transition("error"))},this._promise=new Promise((function(e,t){r._resolve=e,r._reject=t,r._start()})),this._promise.then(null,(function(){}))}return e.prototype._makeProgressCallback=function(){var e=this,t=this._transferred;return function(n){return e._updateProgress(t+n)}},e.prototype._shouldDoResumable=function(e){return e.size()>262144},e.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},e.prototype._resolveToken=function(e){var t=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=n[0],i=n[1];switch(t._state){case"running":e(r,i);break;case"canceling":t._transition("canceled");break;case"pausing":t._transition("paused");break}}))},e.prototype._createResumable=function(){var e=this;this._resolveToken((function(t,n){var r=ai(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._uploadUrl=t,e._needToFetchStatus=!1,e.completeTransitions_()}),e._errorHandler)}))},e.prototype._fetchStatus=function(){var e=this,t=this._uploadUrl;this._resolveToken((function(n,r){var i=si(e._ref.storage,e._ref._location,t,e._blob),o=e._ref.storage._makeRequest(i,n,r);e._request=o,o.getPromise().then((function(t){e._request=void 0,e._updateProgress(t.current),e._needToFetchStatus=!1,t.finalized&&(e._needToFetchMetadata=!0),e.completeTransitions_()}),e._errorHandler)}))},e.prototype._continueUpload=function(){var e=this,t=ui*this._chunkMultiplier,n=new ii(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,o){var a;try{a=ci(e._ref._location,e._ref.storage,r,e._blob,t,e._mappings,n,e._makeProgressCallback())}catch(u){return e._error=u,void e._transition("error")}var s=e._ref.storage._makeRequest(a,i,o);e._request=s,s.getPromise().then((function(t){e._increaseMultiplier(),e._request=void 0,e._updateProgress(t.current),t.finalized?(e._metadata=t.metadata,e._transition("success")):e.completeTransitions_()}),e._errorHandler)}))},e.prototype._increaseMultiplier=function(){var e=ui*this._chunkMultiplier;e<33554432&&(this._chunkMultiplier*=2)},e.prototype._fetchMetadata=function(){var e=this;this._resolveToken((function(t,n){var r=Yr(e._ref.storage,e._ref._location,e._mappings),i=e._ref.storage._makeRequest(r,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._transition("success")}),e._metadataErrorHandler)}))},e.prototype._oneShotUpload=function(){var e=this;this._resolveToken((function(t,n){var r=ri(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._updateProgress(e._blob.size()),e._transition("success")}),e._errorHandler)}))},e.prototype._updateProgress=function(e){var t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()},e.prototype._transition=function(e){if(this._state!==e)switch(e){case"canceling":this._state=e,void 0!==this._request&&this._request.cancel();break;case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":var t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=kn(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}},e.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}},Object.defineProperty(e.prototype,"snapshot",{get:function(){var e=Xn(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),e.prototype.on=function(e,t,n,r){var i=this,o=new li(t,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},e.prototype.then=function(e,t){return this._promise.then(e,t)},e.prototype.catch=function(e){return this.then(null,e)},e.prototype._addObserver=function(e){this._observers.push(e),this._notifyObserver(e)},e.prototype._removeObserver=function(e){var t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)},e.prototype._notifyObservers=function(){var e=this;this._finishPromise();var t=this._observers.slice();t.forEach((function(t){e._notifyObserver(t)}))},e.prototype._finishPromise=function(){if(void 0!==this._resolve){var e=!0;switch(Xn(this._state)){case Yn.SUCCESS:hi(this._resolve.bind(null,this.snapshot))();break;case Yn.CANCELED:case Yn.ERROR:var t=this._reject;hi(t.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}},e.prototype._notifyObserver=function(e){var t=Xn(this._state);switch(t){case Yn.RUNNING:case Yn.PAUSED:e.next&&hi(e.next.bind(e,this.snapshot))();break;case Yn.SUCCESS:e.complete&&hi(e.complete.bind(e))();break;case Yn.CANCELED:case Yn.ERROR:e.error&&hi(e.error.bind(e,this._error))();break;default:e.error&&hi(e.error.bind(e,this._error))()}},e.prototype.resume=function(){var e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e},e.prototype.pause=function(){var e="running"===this._state;return e&&this._transition("pausing"),e},e.prototype.cancel=function(){var e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e},e}(),di=function(){function e(e,t){this._service=e,this._location=t instanceof tr?t:tr.makeFromUrl(t,e.host)}return e.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},e.prototype._newRef=function(t,n){return new e(t,n)},Object.defineProperty(e.prototype,"root",{get:function(){var e=new tr(this._location.bucket,"");return this._newRef(this._service,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return Ar(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=Sr(this._location.path);if(null===t)return null;var n=new tr(this._location.bucket,t);return new e(this._service,n)},enumerable:!1,configurable:!0}),e.prototype._throwIfRoot=function(e){if(""===this._location.path)throw Dn(e)},e}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pi(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new fi(e,new Er(t),n)}function vi(e){var t={prefixes:[],items:[]};return gi(e,t).then((function(){return t}))}function gi(e,t,n){return(0,u.__awaiter)(this,void 0,void 0,(function(){var r,i,o,a;return(0,u.__generator)(this,(function(s){switch(s.label){case 0:return r={pageToken:n},[4,mi(e,r)];case 1:return i=s.sent(),(o=t.prefixes).push.apply(o,i.prefixes),(a=t.items).push.apply(a,i.items),null==i.nextPageToken?[3,3]:[4,gi(e,t,i.nextPageToken)];case 2:s.sent(),s.label=3;case 3:return[2]}}))}))}function mi(e,t){return(0,u.__awaiter)(this,void 0,void 0,(function(){var n,r;return(0,u.__generator)(this,(function(i){switch(i.label){case 0:return null!=t&&"number"===typeof t.maxResults&&hr("options.maxResults",1,1e3,t.maxResults),n=t||{},r=Xr(e.storage,e._location,"/",n.pageToken,n.maxResults),[4,e.storage.makeRequestWithTokens(r)];case 1:return[2,i.sent().getPromise()]}}))}))}function yi(e){return(0,u.__awaiter)(this,void 0,void 0,(function(){var t;return(0,u.__generator)(this,(function(n){switch(n.label){case 0:return e._throwIfRoot("getMetadata"),t=Yr(e.storage,e._location,Or()),[4,e.storage.makeRequestWithTokens(t)];case 1:return[2,n.sent().getPromise()]}}))}))}function _i(e,t){return(0,u.__awaiter)(this,void 0,void 0,(function(){var n;return(0,u.__generator)(this,(function(r){switch(r.label){case 0:return e._throwIfRoot("updateMetadata"),n=Zr(e.storage,e._location,t,Or()),[4,e.storage.makeRequestWithTokens(n)];case 1:return[2,r.sent().getPromise()]}}))}))}function bi(e){return(0,u.__awaiter)(this,void 0,void 0,(function(){var t;return(0,u.__generator)(this,(function(n){switch(n.label){case 0:return e._throwIfRoot("getDownloadURL"),t=Jr(e.storage,e._location,Or()),[4,e.storage.makeRequestWithTokens(t)];case 1:return[2,n.sent().getPromise().then((function(e){if(null===e)throw Rn();return e}))]}}))}))}function wi(e){return(0,u.__awaiter)(this,void 0,void 0,(function(){var t;return(0,u.__generator)(this,(function(n){switch(n.label){case 0:return e._throwIfRoot("deleteObject"),t=ei(e.storage,e._location),[4,e.storage.makeRequestWithTokens(t)];case 1:return[2,n.sent().getPromise()]}}))}))}function Ii(e,t){var n=Cr(e._location.path,t),r=new tr(e._location.bucket,n);return new di(e.storage,r)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ti(e){return/^[A-Za-z]+:\/\//.test(e)}function Ei(e,t){return new di(e,t)}function ki(e,t){if(e instanceof Ni){var n=e;if(null==n._bucket)throw An();var r=new di(n,n._bucket);return null!=t?ki(r,t):r}return void 0!==t?Ii(e,t):e}function Si(e,t){if(t&&Ti(t)){if(e instanceof Ni)return Ei(e,t);throw Pn("To use ref(service, url), the first argument must be a Storage instance.")}return ki(e,t)}function Ci(e,t){var n=null===t||void 0===t?void 0:t[dn];return null==n?null:tr.makeFromBucketSpec(n,e)}function Ai(e,t,n,r){void 0===r&&(r={}),e.host="http://"+t+":"+n;var i=r.mockUserToken;i&&(e._overrideAuthToken="string"===typeof i?i:(0,o.createMockUserToken)(i,e.app.options.projectId))}var Ni=function(){function e(e,t,n,r,i,o){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._pool=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=fn,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=pn,this._maxUploadRetryTime=vn,this._requests=new Set,this._bucket=null!=i?tr.makeFromBucketSpec(i,this._host):Ci(this._host,this.app.options)}return Object.defineProperty(e.prototype,"host",{get:function(){return this._host},set:function(e){this._host=e,null!=this._url?this._bucket=tr.makeFromBucketSpec(this._url,e):this._bucket=Ci(e,this.app.options)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(e){hr("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(e){hr("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e},enumerable:!1,configurable:!0}),e.prototype._getAuthToken=function(){return(0,u.__awaiter)(this,void 0,void 0,(function(){var e,t;return(0,u.__generator)(this,(function(n){switch(n.label){case 0:return this._overrideAuthToken?[2,this._overrideAuthToken]:(e=this._authProvider.getImmediate({optional:!0}),e?[4,e.getToken()]:[3,2]);case 1:if(t=n.sent(),null!==t)return[2,t.accessToken];n.label=2;case 2:return[2,null]}}))}))},e.prototype._getAppCheckToken=function(){return(0,u.__awaiter)(this,void 0,void 0,(function(){var e,t;return(0,u.__generator)(this,(function(n){switch(n.label){case 0:return e=this._appCheckProvider.getImmediate({optional:!0}),e?[4,e.getToken()]:[3,2];case 1:return t=n.sent(),[2,t.token];case 2:return[2,null]}}))}))},e.prototype._delete=function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(e){return e.cancel()})),this._requests.clear()),Promise.resolve()},e.prototype._makeStorageReference=function(e){return new di(this,e)},e.prototype._makeRequest=function(e,t,n){var r=this;if(this._deleted)return new nr(On());var i=br(e,this._appId,t,n,this._pool,this._firebaseVersion);return this._requests.add(i),i.getPromise().then((function(){return r._requests.delete(i)}),(function(){return r._requests.delete(i)})),i},e.prototype.makeRequestWithTokens=function(e){return(0,u.__awaiter)(this,void 0,void 0,(function(){var t,n,r;return(0,u.__generator)(this,(function(i){switch(i.label){case 0:return[4,Promise.all([this._getAuthToken(),this._getAppCheckToken()])];case 1:return t=i.sent(),n=t[0],r=t[1],[2,this._makeRequest(e,n,r)]}}))}))},e}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xi(e,t,n){return e=(0,o.getModularInstance)(e),pi(e,t,n)}function Ri(e){return e=(0,o.getModularInstance)(e),yi(e)}function Pi(e,t){return e=(0,o.getModularInstance)(e),_i(e,t)}function Oi(e,t){return e=(0,o.getModularInstance)(e),mi(e,t)}function Di(e){return e=(0,o.getModularInstance)(e),vi(e)}function Mi(e){return e=(0,o.getModularInstance)(e),bi(e)}function Li(e){return e=(0,o.getModularInstance)(e),wi(e)}function Fi(e,t){return e=(0,o.getModularInstance)(e),Si(e,t)}function ji(e,t){return Ii(e,t)}function Ui(e,t,n,r){void 0===r&&(r={}),Ai(e,t,n,r)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qi=function(){function e(e,t,n){this._delegate=e,this.task=t,this.ref=n}return Object.defineProperty(e.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),e}(),Vi=function(){function e(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(e.prototype,"snapshot",{get:function(){return new qi(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),e.prototype.then=function(e,t){var n=this;return this._delegate.then((function(t){if(e)return e(new qi(t,n,n._ref))}),t)},e.prototype.on=function(e,t,n,r){var i=this,o=void 0;return t&&(o="function"===typeof t?function(e){return t(new qi(e,i,i._ref))}:{next:t.next?function(e){return t.next(new qi(e,i,i._ref))}:void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,o,n||void 0,r||void 0)},e}(),Bi=function(){function e(e,t){this._delegate=e,this._service=t}return Object.defineProperty(e.prototype,"prefixes",{get:function(){var e=this;return this._delegate.prefixes.map((function(t){return new Ki(t,e._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){var e=this;return this._delegate.items.map((function(t){return new Ki(t,e._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),e}(),Ki=function(){function e(e,t){this._delegate=e,this.storage=t}return Object.defineProperty(e.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return this._delegate.toString()},e.prototype.child=function(t){var n=ji(this._delegate,t);return new e(n,this.storage)},Object.defineProperty(e.prototype,"root",{get:function(){return new e(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return null==t?null:new e(t,this.storage)},enumerable:!1,configurable:!0}),e.prototype.put=function(e,t){return this._throwIfRoot("put"),new Vi(xi(this._delegate,e,t),this)},e.prototype.putString=function(e,t,n){void 0===t&&(t=jn.RAW),this._throwIfRoot("putString");var r=qn(t,e),i=(0,u.__assign)({},n);return null==i["contentType"]&&null!=r.contentType&&(i["contentType"]=r.contentType),new Vi(new fi(this._delegate,new Er(r.data,!0),i),this)},e.prototype.listAll=function(){var e=this;return Di(this._delegate).then((function(t){return new Bi(t,e.storage)}))},e.prototype.list=function(e){var t=this;return Oi(this._delegate,e||void 0).then((function(e){return new Bi(e,t.storage)}))},e.prototype.getMetadata=function(){return Ri(this._delegate)},e.prototype.updateMetadata=function(e){return Pi(this._delegate,e)},e.prototype.getDownloadURL=function(){return Mi(this._delegate)},e.prototype.delete=function(){return this._throwIfRoot("delete"),Li(this._delegate)},e.prototype._throwIfRoot=function(e){if(""===this._delegate._location.path)throw Dn(e)},e}(),Wi=function(){function e(e,t){this.app=e,this._delegate=t}return Object.defineProperty(e.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),e.prototype.ref=function(e){if(Ti(e))throw Pn("ref() expected a child path but got a URL, use refFromURL instead.");return new Ki(Fi(this._delegate,e),this)},e.prototype.refFromURL=function(e){if(!Ti(e))throw Pn("refFromURL() expected a full URL but got a child path, use ref() instead.");try{tr.makeFromUrl(e,this._delegate.host)}catch(t){throw Pn("refFromUrl() expected a valid full URL but got an invalid one.")}return new Ki(Fi(this._delegate,e),this)},e.prototype.setMaxUploadRetryTime=function(e){this._delegate.maxUploadRetryTime=e},e.prototype.setMaxOperationRetryTime=function(e){this._delegate.maxOperationRetryTime=e},e.prototype.useEmulator=function(e,t,n){void 0===n&&(n={}),Ui(this._delegate,e,t,n)},e}(),Hi="@firebase/storage",Gi="0.7.1",zi="storage";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qi(e,t){var n=t.instanceIdentifier,i=e.getProvider("app").getImmediate(),o=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal"),s=new Wi(i,new Ni(i,o,a,new er,n,r["default"].SDK_VERSION));return s}function $i(e){var t={TaskState:Yn,TaskEvent:$n,StringFormat:jn,Storage:Ni,Reference:Ki};e.INTERNAL.registerComponent(new c.Component(zi,Qi,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion(Hi,Gi)}$i(r["default"]);var Yi,Xi,Ji,Zi="@firebase/performance",eo="0.4.18",to=eo,no="FB-PERF-TRACE-START",ro="FB-PERF-TRACE-STOP",io="FB-PERF-TRACE-MEASURE",oo="_wt_",ao="_fp",so="_fcp",uo="_fid",co="@firebase/performance/config",lo="@firebase/performance/configexpire",ho="performance",fo="Performance",po=(Yi={},Yi["trace started"]="Trace {$traceName} was started before.",Yi["trace stopped"]="Trace {$traceName} is not running.",Yi["nonpositive trace startTime"]="Trace {$traceName} startTime should be positive.",Yi["nonpositive trace duration"]="Trace {$traceName} duration should be positive.",Yi["no window"]="Window is not available.",Yi["no app id"]="App id is not available.",Yi["no project id"]="Project id is not available.",Yi["no api key"]="Api key is not available.",Yi["invalid cc log"]="Attempted to queue invalid cc event",Yi["FB not default"]="Performance can only start when Firebase app instance is the default one.",Yi["RC response not ok"]="RC response is not ok",Yi["invalid attribute name"]="Attribute name {$attributeName} is invalid.",Yi["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",Yi["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",Yi["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",Yi),vo=new o.ErrorFactory(ho,fo,po),go=new a.Logger(fo);go.logLevel=a.LogLevel.INFO;var mo,yo=function(){function e(e){if(this.window=e,!e)throw vo.create("no window");this.performance=e.performance,this.PerformanceObserver=e.PerformanceObserver,this.windowLocation=e.location,this.navigator=e.navigator,this.document=e.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=e.localStorage),e.perfMetrics&&e.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=e.perfMetrics.onFirstInputDelay)}return e.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},e.prototype.mark=function(e){this.performance&&this.performance.mark&&this.performance.mark(e)},e.prototype.measure=function(e,t,n){this.performance&&this.performance.measure&&this.performance.measure(e,t,n)},e.prototype.getEntriesByType=function(e){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(e):[]},e.prototype.getEntriesByName=function(e){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(e):[]},e.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},e.prototype.requiredApisAvailable=function(){return fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled?!!(0,o.isIndexedDBAvailable)()||(go.info("IndexedDB is not supported by current browswer"),!1):(go.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)},e.prototype.setupObserver=function(e,t){if(this.PerformanceObserver){var n=new this.PerformanceObserver((function(e){for(var n=0,r=e.getEntries();n<r.length;n++){var i=r[n];t(i)}}));n.observe({entryTypes:[e]})}},e.getInstance=function(){return void 0===Xi&&(Xi=new e(Ji)),Xi},e}();function _o(e){Ji=e}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bo(e,t){var n=e.length-t.length;if(n<0||n>1)throw vo.create("invalid String merger input");for(var r=[],i=0;i<e.length;i++)r.push(e.charAt(i)),t.length>i&&r.push(t.charAt(i));return r.join("")}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wo,Io,To=function(){function e(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=bo("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=bo("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}return e.prototype.getAppId=function(){var e=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!e)throw vo.create("no app id");return e},e.prototype.getProjectId=function(){var e=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!e)throw vo.create("no project id");return e},e.prototype.getApiKey=function(){var e=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!e)throw vo.create("no api key");return e},e.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},e.getInstance=function(){return void 0===mo&&(mo=new e),mo},e}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eo(){var e=To.getInstance().installationsService.getId();return e.then((function(e){wo=e})),e}function ko(){return wo}function So(){var e=To.getInstance().installationsService.getToken();return e.then((function(e){})),e}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(e){e[e["UNKNOWN"]=0]="UNKNOWN",e[e["VISIBLE"]=1]="VISIBLE",e[e["HIDDEN"]=2]="HIDDEN"})(Io||(Io={}));var Co=["firebase_","google_","ga_"],Ao=new RegExp("^[a-zA-Z]\\w*$"),No=40,xo=100;function Ro(){var e=yo.getInstance().navigator;return"serviceWorker"in e?e.serviceWorker.controller?2:3:1}function Po(){var e=yo.getInstance().document,t=e.visibilityState;switch(t){case"visible":return Io.VISIBLE;case"hidden":return Io.HIDDEN;default:return Io.UNKNOWN}}function Oo(){var e=yo.getInstance().navigator,t=e.connection,n=t&&t.effectiveType;switch(n){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}function Do(e){if(0===e.length||e.length>No)return!1;var t=Co.some((function(t){return e.startsWith(t)}));return!t&&!!e.match(Ao)}function Mo(e){return 0!==e.length&&e.length<=xo}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Lo="0.0.1",Fo={loggingEnabled:!0},jo="FIREBASE_INSTALLATIONS_AUTH";function Uo(e){var t=qo();return t?(Wo(t),Promise.resolve()):Ko(e).then(Wo).then((function(e){return Vo(e)}),(function(){}))}function qo(){var e=yo.getInstance().localStorage;if(e){var t=e.getItem(lo);if(t&&Ho(t)){var n=e.getItem(co);if(n)try{var r=JSON.parse(n);return r}catch(S){return}}}}function Vo(e){var t=yo.getInstance().localStorage;e&&t&&(t.setItem(co,JSON.stringify(e)),t.setItem(lo,String(Date.now()+60*To.getInstance().configTimeToLive*60*1e3)))}var Bo="Could not fetch config, will use default configs";function Ko(e){return So().then((function(t){var n=To.getInstance().getProjectId(),r="https://firebaseremoteconfig.googleapis.com/v1/projects/"+n+"/namespaces/fireperf:fetch?key="+To.getInstance().getApiKey(),i=new Request(r,{method:"POST",headers:{Authorization:jo+" "+t},body:JSON.stringify({app_instance_id:e,app_instance_id_token:t,app_id:To.getInstance().getAppId(),app_version:to,sdk_version:Lo})});return fetch(i).then((function(e){if(e.ok)return e.json();throw vo.create("RC response not ok")}))})).catch((function(){go.info(Bo)}))}function Wo(e){if(!e)return e;var t=To.getInstance(),n=e.entries||{};return void 0!==n.fpr_enabled?t.loggingEnabled="true"===String(n.fpr_enabled):t.loggingEnabled=Fo.loggingEnabled,n.fpr_log_source&&(t.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(t.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(t.transportKey=n.fpr_log_transport_key),void 0!==n.fpr_vc_network_request_sampling_rate&&(t.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(t.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),t.logTraceAfterSampling=Go(t.tracesSamplingRate),t.logNetworkAfterSampling=Go(t.networkRequestsSamplingRate),e}function Ho(e){return Number(e)>Date.now()}function Go(e){return Math.random()<=e}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zo,Qo=1;function $o(){return Qo=2,zo=zo||Xo(),zo}function Yo(){return 3===Qo}function Xo(){return Jo().then((function(){return Eo()})).then((function(e){return Uo(e)})).then((function(){return Zo()}),(function(){return Zo()}))}function Jo(){var e=yo.getInstance().document;return new Promise((function(t){if(e&&"complete"!==e.readyState){var n=function(){"complete"===e.readyState&&(e.removeEventListener("readystatechange",n),t())};e.addEventListener("readystatechange",n)}else t()}))}function Zo(){Qo=3}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ea,ta=1e4,na=5500,ra=3,ia=1e3,oa=ra,aa=[],sa=!1;function ua(){sa||(ca(na),sa=!0)}function ca(e){setTimeout((function(){if(0!==oa)return aa.length?void la():ca(ta)}),e)}function la(){var e=aa.splice(0,ia),t=e.map((function(e){return{source_extension_json_proto3:e.message,event_time_ms:String(e.eventTime)}})),n={request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:To.getInstance().logSource,log_event:t};ha(n,e).catch((function(){aa=(0,u.__spreadArray)((0,u.__spreadArray)([],e),aa),oa--,go.info("Tries left: "+oa+"."),ca(ta)}))}function ha(e,t){return fa(e).then((function(e){return e.ok||go.info("Call to Firebase backend failed."),e.json()})).then((function(e){var n=Number(e.nextRequestWaitMillis),r=ta;isNaN(n)||(r=Math.max(n,r));var i=e.logResponseDetails;Array.isArray(i)&&i.length>0&&"RETRY_REQUEST_LATER"===i[0].responseAction&&(aa=(0,u.__spreadArray)((0,u.__spreadArray)([],t),aa),go.info("Retry transport request later.")),oa=ra,ca(r)}))}function fa(e){var t=To.getInstance().getFlTransportFullUrl();return fetch(t,{method:"POST",body:JSON.stringify(e)})}function da(e){if(!e.eventTime||!e.message)throw vo.create("invalid cc log");aa=(0,u.__spreadArray)((0,u.__spreadArray)([],aa),[e])}function pa(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=e.apply(void 0,t);da({message:r,eventTime:Date.now()})}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function va(e,t){ea||(ea=pa(_a)),ea(e,t)}function ga(e){var t=To.getInstance();!t.instrumentationEnabled&&e.isAuto||(t.dataCollectionEnabled||e.isAuto)&&yo.getInstance().requiredApisAvailable()&&(e.isAuto&&Po()!==Io.VISIBLE||(Yo()?ma(e):$o().then((function(){return ma(e)}),(function(){return ma(e)}))))}function ma(e){if(ko()){var t=To.getInstance();t.loggingEnabled&&t.logTraceAfterSampling&&setTimeout((function(){return va(e,1)}),0)}}function ya(e){var t=To.getInstance();if(t.instrumentationEnabled){var n=e.url,r=t.logEndPointUrl.split("?")[0],i=t.flTransportEndpointUrl.split("?")[0];n!==r&&n!==i&&t.loggingEnabled&&t.logNetworkAfterSampling&&setTimeout((function(){return va(e,0)}),0)}}function _a(e,t){return 0===t?ba(e):wa(e)}function ba(e){var t={url:e.url,http_method:e.httpMethod||0,http_response_code:200,response_payload_bytes:e.responsePayloadBytes,client_start_time_us:e.startTimeUs,time_to_response_initiated_us:e.timeToResponseInitiatedUs,time_to_response_completed_us:e.timeToResponseCompletedUs},n={application_info:Ia(),network_request_metric:t};return JSON.stringify(n)}function wa(e){var t={name:e.name,is_auto:e.isAuto,client_start_time_us:e.startTimeUs,duration_us:e.durationUs};0!==Object.keys(e.counters).length&&(t.counters=e.counters);var n=e.getAttributes();0!==Object.keys(n).length&&(t.custom_attributes=n);var r={application_info:Ia(),trace_metric:t};return JSON.stringify(r)}function Ia(){return{google_app_id:To.getInstance().getAppId(),app_instance_id:ko(),web_app_info:{sdk_version:to,page_url:yo.getInstance().getUrl(),service_worker_status:Ro(),visibility_state:Po(),effective_connection_type:Oo()},application_process_state:0}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ta=100,Ea="_",ka=[ao,so,uo];function Sa(e,t){return!(0===e.length||e.length>Ta)&&(t&&t.startsWith(oo)&&ka.indexOf(e)>-1||!e.startsWith(Ea))}function Ca(e){var t=Math.floor(e);return t<e&&go.info("Metric value should be an Integer, setting the value as : "+t+"."),t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Aa=function(){function e(e,t,n){void 0===t&&(t=!1),this.name=e,this.isAuto=t,this.state=1,this.customAttributes={},this.counters={},this.api=yo.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark=no+"-"+this.randomId+"-"+this.name,this.traceStopMark=ro+"-"+this.randomId+"-"+this.name,this.traceMeasure=n||io+"-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}return e.prototype.start=function(){if(1!==this.state)throw vo.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},e.prototype.stop=function(){if(2!==this.state)throw vo.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),ga(this)},e.prototype.record=function(e,t,n){if(e<=0)throw vo.create("nonpositive trace startTime",{traceName:this.name});if(t<=0)throw vo.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*t),this.startTimeUs=Math.floor(1e3*e),n&&n.attributes&&(this.customAttributes=(0,u.__assign)({},n.attributes)),n&&n.metrics)for(var r=0,i=Object.keys(n.metrics);r<i.length;r++){var o=i[r];isNaN(Number(n.metrics[o]))||(this.counters[o]=Number(Math.floor(n.metrics[o])))}ga(this)},e.prototype.incrementMetric=function(e,t){void 0===t&&(t=1),void 0===this.counters[e]?this.putMetric(e,t):this.putMetric(e,this.counters[e]+t)},e.prototype.putMetric=function(e,t){if(!Sa(e,this.name))throw vo.create("invalid custom metric name",{customMetricName:e});this.counters[e]=Ca(t)},e.prototype.getMetric=function(e){return this.counters[e]||0},e.prototype.putAttribute=function(e,t){var n=Do(e),r=Mo(t);if(n&&r)this.customAttributes[e]=t;else{if(!n)throw vo.create("invalid attribute name",{attributeName:e});if(!r)throw vo.create("invalid attribute value",{attributeValue:t})}},e.prototype.getAttribute=function(e){return this.customAttributes[e]},e.prototype.removeAttribute=function(e){void 0!==this.customAttributes[e]&&delete this.customAttributes[e]},e.prototype.getAttributes=function(){return(0,u.__assign)({},this.customAttributes)},e.prototype.setStartTime=function(e){this.startTimeUs=e},e.prototype.setDuration=function(e){this.durationUs=e},e.prototype.calculateTraceMetrics=function(){var e=this.api.getEntriesByName(this.traceMeasure),t=e&&e[0];t&&(this.durationUs=Math.floor(1e3*t.duration),this.startTimeUs=Math.floor(1e3*(t.startTime+this.api.getTimeOrigin())))},e.createOobTrace=function(t,n,r){var i=yo.getInstance().getUrl();if(i){var o=new e(oo+i,!0),a=Math.floor(1e3*yo.getInstance().getTimeOrigin());o.setStartTime(a),t&&t[0]&&(o.setDuration(Math.floor(1e3*t[0].duration)),o.putMetric("domInteractive",Math.floor(1e3*t[0].domInteractive)),o.putMetric("domContentLoadedEventEnd",Math.floor(1e3*t[0].domContentLoadedEventEnd)),o.putMetric("loadEventEnd",Math.floor(1e3*t[0].loadEventEnd)));var s="first-paint",u="first-contentful-paint";if(n){var c=n.find((function(e){return e.name===s}));c&&c.startTime&&o.putMetric(ao,Math.floor(1e3*c.startTime));var l=n.find((function(e){return e.name===u}));l&&l.startTime&&o.putMetric(so,Math.floor(1e3*l.startTime)),r&&o.putMetric(uo,Math.floor(1e3*r))}ga(o)}},e.createUserTimingTrace=function(t){var n=new e(t,!1,t);ga(n)},e}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Na(e){var t=e;if(t&&void 0!==t.responseStart){var n=yo.getInstance().getTimeOrigin(),r=Math.floor(1e3*(t.startTime+n)),i=t.responseStart?Math.floor(1e3*(t.responseStart-t.startTime)):void 0,o=Math.floor(1e3*(t.responseEnd-t.startTime)),a=t.name&&t.name.split("?")[0],s={url:a,responsePayloadBytes:t.transferSize,startTimeUs:r,timeToResponseInitiatedUs:i,timeToResponseCompletedUs:o};ya(s)}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xa=5e3;function Ra(){ko()&&(setTimeout((function(){return Oa()}),0),setTimeout((function(){return Pa()}),0),setTimeout((function(){return Da()}),0))}function Pa(){for(var e=yo.getInstance(),t=e.getEntriesByType("resource"),n=0,r=t;n<r.length;n++){var i=r[n];Na(i)}e.setupObserver("resource",Na)}function Oa(){var e=yo.getInstance(),t=e.getEntriesByType("navigation"),n=e.getEntriesByType("paint");if(e.onFirstInputDelay){var r=setTimeout((function(){Aa.createOobTrace(t,n),r=void 0}),xa);e.onFirstInputDelay((function(e){r&&(clearTimeout(r),Aa.createOobTrace(t,n,e))}))}else Aa.createOobTrace(t,n)}function Da(){for(var e=yo.getInstance(),t=e.getEntriesByType("measure"),n=0,r=t;n<r.length;n++){var i=r[n];Ma(i)}e.setupObserver("measure",Ma)}function Ma(e){var t=e.name;t.substring(0,io.length)!==io&&Aa.createUserTimingTrace(t)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var La=function(){function e(e){this.app=e,yo.getInstance().requiredApisAvailable()&&(0,o.validateIndexedDBOpenable)().then((function(e){e&&(ua(),$o().then(Ra,Ra))})).catch((function(e){go.info("Environment doesn't support IndexedDB: "+e)}))}return e.prototype.trace=function(e){return new Aa(e)},Object.defineProperty(e.prototype,"instrumentationEnabled",{get:function(){return To.getInstance().instrumentationEnabled},set:function(e){To.getInstance().instrumentationEnabled=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dataCollectionEnabled",{get:function(){return To.getInstance().dataCollectionEnabled},set:function(e){To.getInstance().dataCollectionEnabled=e},enumerable:!1,configurable:!0}),e}(),Fa="[DEFAULT]";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ja(e){var t=function(e,t){if(e.name!==Fa)throw vo.create("FB not default");if("undefined"===typeof window)throw vo.create("no window");return _o(window),To.getInstance().firebaseAppInstance=e,To.getInstance().installationsService=t,new La(e)};e.INTERNAL.registerComponent(new c.Component("performance",(function(e){var n=e.getProvider("app").getImmediate(),r=e.getProvider("installations").getImmediate();return t(n,r)}),"PUBLIC")),e.registerVersion(Zi,eo)}ja(r["default"]);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Ua,qa,Va="firebase_id",Ba="origin",Ka=6e4,Wa="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ha="https://www.googletagmanager.com/gtag/js";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Ga(e,t,n,r,i){return(0,u.__awaiter)(this,void 0,void 0,(function(){var o,a;return(0,u.__generator)(this,(function(s){switch(s.label){case 0:return i&&i.global?(e(Ua.EVENT,n,r),[2]):[3,1];case 1:return[4,t];case 2:o=s.sent(),a=(0,u.__assign)((0,u.__assign)({},r),{send_to:o}),e(Ua.EVENT,n,a),s.label=3;case 3:return[2]}}))}))}function za(e,t,n,r){return(0,u.__awaiter)(this,void 0,void 0,(function(){var i;return(0,u.__generator)(this,(function(o){switch(o.label){case 0:return r&&r.global?(e(Ua.SET,{screen_name:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,t];case 2:i=o.sent(),e(Ua.CONFIG,i,{update:!0,screen_name:n}),o.label=3;case 3:return[2]}}))}))}function Qa(e,t,n,r){return(0,u.__awaiter)(this,void 0,void 0,(function(){var i;return(0,u.__generator)(this,(function(o){switch(o.label){case 0:return r&&r.global?(e(Ua.SET,{user_id:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,t];case 2:i=o.sent(),e(Ua.CONFIG,i,{update:!0,user_id:n}),o.label=3;case 3:return[2]}}))}))}function $a(e,t,n,r){return(0,u.__awaiter)(this,void 0,void 0,(function(){var i,o,a,s,c;return(0,u.__generator)(this,(function(u){switch(u.label){case 0:if(!r||!r.global)return[3,1];for(i={},o=0,a=Object.keys(n);o<a.length;o++)s=a[o],i["user_properties."+s]=n[s];return e(Ua.SET,i),[2,Promise.resolve()];case 1:return[4,t];case 2:c=u.sent(),e(Ua.CONFIG,c,{update:!0,user_properties:n}),u.label=3;case 3:return[2]}}))}))}function Ya(e,t){return(0,u.__awaiter)(this,void 0,void 0,(function(){var n;return(0,u.__generator)(this,(function(r){switch(r.label){case 0:return[4,e];case 1:return n=r.sent(),window["ga-disable-"+n]=!t,[2]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(e){e["EVENT"]="event",e["SET"]="set",e["CONFIG"]="config"})(Ua||(Ua={})),function(e){e["ADD_SHIPPING_INFO"]="add_shipping_info",e["ADD_PAYMENT_INFO"]="add_payment_info",e["ADD_TO_CART"]="add_to_cart",e["ADD_TO_WISHLIST"]="add_to_wishlist",e["BEGIN_CHECKOUT"]="begin_checkout",e["CHECKOUT_PROGRESS"]="checkout_progress",e["EXCEPTION"]="exception",e["GENERATE_LEAD"]="generate_lead",e["LOGIN"]="login",e["PAGE_VIEW"]="page_view",e["PURCHASE"]="purchase",e["REFUND"]="refund",e["REMOVE_FROM_CART"]="remove_from_cart",e["SCREEN_VIEW"]="screen_view",e["SEARCH"]="search",e["SELECT_CONTENT"]="select_content",e["SELECT_ITEM"]="select_item",e["SELECT_PROMOTION"]="select_promotion",e["SET_CHECKOUT_OPTION"]="set_checkout_option",e["SHARE"]="share",e["SIGN_UP"]="sign_up",e["TIMING_COMPLETE"]="timing_complete",e["VIEW_CART"]="view_cart",e["VIEW_ITEM"]="view_item",e["VIEW_ITEM_LIST"]="view_item_list",e["VIEW_PROMOTION"]="view_promotion",e["VIEW_SEARCH_RESULTS"]="view_search_results"}(qa||(qa={}));var Xa,Ja=new a.Logger("@firebase/analytics");
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Za(e,t){var n=document.createElement("script");n.src=Ha+"?l="+e+"&id="+t,n.async=!0,document.head.appendChild(n)}function es(e){var t=[];return Array.isArray(window[e])?t=window[e]:window[e]=t,t}function ts(e,t,n,r,i,o){return(0,u.__awaiter)(this,void 0,void 0,(function(){var a,s,c,l;return(0,u.__generator)(this,(function(u){switch(u.label){case 0:a=r[i],u.label=1;case 1:return u.trys.push([1,7,,8]),a?[4,t[a]]:[3,3];case 2:return u.sent(),[3,6];case 3:return[4,Promise.all(n)];case 4:return s=u.sent(),c=s.find((function(e){return e.measurementId===i})),c?[4,t[c.appId]]:[3,6];case 5:u.sent(),u.label=6;case 6:return[3,8];case 7:return l=u.sent(),Ja.error(l),[3,8];case 8:return e(Ua.CONFIG,i,o),[2]}}))}))}function ns(e,t,n,r,i){return(0,u.__awaiter)(this,void 0,void 0,(function(){var o,a,s,c,l,h,f,d,p;return(0,u.__generator)(this,(function(u){switch(u.label){case 0:return u.trys.push([0,4,,5]),o=[],i&&i["send_to"]?(a=i["send_to"],Array.isArray(a)||(a=[a]),[4,Promise.all(n)]):[3,2];case 1:for(s=u.sent(),c=function(e){var n=s.find((function(t){return t.measurementId===e})),r=n&&t[n.appId];if(!r)return o=[],"break";o.push(r)},l=0,h=a;l<h.length;l++)if(f=h[l],d=c(f),"break"===d)break;u.label=2;case 2:return 0===o.length&&(o=Object.values(t)),[4,Promise.all(o)];case 3:return u.sent(),e(Ua.EVENT,r,i||{}),[3,5];case 4:return p=u.sent(),Ja.error(p),[3,5];case 5:return[2]}}))}))}function rs(e,t,n,r){function i(i,o,a){return(0,u.__awaiter)(this,void 0,void 0,(function(){var s;return(0,u.__generator)(this,(function(u){switch(u.label){case 0:return u.trys.push([0,6,,7]),i!==Ua.EVENT?[3,2]:[4,ns(e,t,n,o,a)];case 1:return u.sent(),[3,5];case 2:return i!==Ua.CONFIG?[3,4]:[4,ts(e,t,n,r,o,a)];case 3:return u.sent(),[3,5];case 4:e(Ua.SET,o),u.label=5;case 5:return[3,7];case 6:return s=u.sent(),Ja.error(s),[3,7];case 7:return[2]}}))}))}return i}function is(e,t,n,r,i){var o=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];window[r].push(arguments)};return window[i]&&"function"===typeof window[i]&&(o=window[i]),window[i]=rs(o,e,t,n),{gtagCore:o,wrappedGtag:window[i]}}function os(){for(var e=window.document.getElementsByTagName("script"),t=0,n=Object.values(e);t<n.length;t++){var r=n[t];if(r.src&&r.src.includes(Ha))return r}return null}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var as=(Xa={},Xa["already-exists"]="A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",Xa["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",Xa["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate: {$reason}",Xa["invalid-analytics-context"]="Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",Xa["indexeddb-unavailable"]="IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",Xa["fetch-throttle"]="The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",Xa["config-fetch-failed"]="Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",Xa["no-api-key"]='The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',Xa["no-app-id"]='The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',Xa),ss=new o.ErrorFactory("analytics","Analytics",as),us=30,cs=1e3,ls=function(){function e(e,t){void 0===e&&(e={}),void 0===t&&(t=cs),this.throttleMetadata=e,this.intervalMillis=t}return e.prototype.getThrottleMetadata=function(e){return this.throttleMetadata[e]},e.prototype.setThrottleMetadata=function(e,t){this.throttleMetadata[e]=t},e.prototype.deleteThrottleMetadata=function(e){delete this.throttleMetadata[e]},e}(),hs=new ls;function fs(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}function ds(e){var t;return(0,u.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,a,s,c;return(0,u.__generator)(this,(function(u){switch(u.label){case 0:return n=e.appId,r=e.apiKey,i={method:"GET",headers:fs(r)},o=Wa.replace("{app-id}",n),[4,fetch(o,i)];case 1:if(a=u.sent(),200===a.status||304===a.status)return[3,6];s="",u.label=2;case 2:return u.trys.push([2,4,,5]),[4,a.json()];case 3:return c=u.sent(),(null===(t=c.error)||void 0===t?void 0:t.message)&&(s=c.error.message),[3,5];case 4:return u.sent(),[3,5];case 5:throw ss.create("config-fetch-failed",{httpStatus:a.status,responseMessage:s});case 6:return[2,a.json()]}}))}))}function ps(e,t,n){return void 0===t&&(t=hs),(0,u.__awaiter)(this,void 0,void 0,(function(){var r,i,o,a,s,c,l=this;return(0,u.__generator)(this,(function(h){if(r=e.options,i=r.appId,o=r.apiKey,a=r.measurementId,!i)throw ss.create("no-app-id");if(!o){if(a)return[2,{measurementId:a,appId:i}];throw ss.create("no-api-key")}return s=t.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new ys,setTimeout((function(){return(0,u.__awaiter)(l,void 0,void 0,(function(){return(0,u.__generator)(this,(function(e){return c.abort(),[2]}))}))}),void 0!==n?n:Ka),[2,vs({appId:i,apiKey:o,measurementId:a},s,c,t)]}))}))}function vs(e,t,n,r){var i=t.throttleEndTimeMillis,a=t.backoffCount;return void 0===r&&(r=hs),(0,u.__awaiter)(this,void 0,void 0,(function(){var t,s,c,l,h,f,d;return(0,u.__generator)(this,(function(u){switch(u.label){case 0:t=e.appId,s=e.measurementId,u.label=1;case 1:return u.trys.push([1,3,,4]),[4,gs(n,i)];case 2:return u.sent(),[3,4];case 3:if(c=u.sent(),s)return Ja.warn("Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID "+s+' provided in the "measurementId" field in the local Firebase config. ['+c.message+"]"),[2,{appId:t,measurementId:s}];throw c;case 4:return u.trys.push([4,6,,7]),[4,ds(e)];case 5:return l=u.sent(),r.deleteThrottleMetadata(t),[2,l];case 6:if(h=u.sent(),!ms(h)){if(r.deleteThrottleMetadata(t),s)return Ja.warn("Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID "+s+' provided in the "measurementId" field in the local Firebase config. ['+h.message+"]"),[2,{appId:t,measurementId:s}];throw h}return f=503===Number(h.customData.httpStatus)?(0,o.calculateBackoffMillis)(a,r.intervalMillis,us):(0,o.calculateBackoffMillis)(a,r.intervalMillis),d={throttleEndTimeMillis:Date.now()+f,backoffCount:a+1},r.setThrottleMetadata(t,d),Ja.debug("Calling attemptFetch again in "+f+" millis"),[2,vs(e,d,n,r)];case 7:return[2]}}))}))}function gs(e,t){return new Promise((function(n,r){var i=Math.max(t-Date.now(),0),o=setTimeout(n,i);e.addEventListener((function(){clearTimeout(o),r(ss.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}function ms(e){if(!(e instanceof o.FirebaseError)||!e.customData)return!1;var t=Number(e.customData["httpStatus"]);return 429===t||500===t||503===t||504===t}var ys=function(){function e(){this.listeners=[]}return e.prototype.addEventListener=function(e){this.listeners.push(e)},e.prototype.abort=function(){this.listeners.forEach((function(e){return e()}))},e}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _s(){return(0,u.__awaiter)(this,void 0,void 0,(function(){var e;return(0,u.__generator)(this,(function(t){switch(t.label){case 0:return(0,o.isIndexedDBAvailable)()?[3,1]:(Ja.warn(ss.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),[2,!1]);case 1:return t.trys.push([1,3,,4]),[4,(0,o.validateIndexedDBOpenable)()];case 2:return t.sent(),[3,4];case 3:return e=t.sent(),Ja.warn(ss.create("indexeddb-unavailable",{errorInfo:e}).message),[2,!1];case 4:return[2,!0]}}))}))}function bs(e,t,n,r,i,o){return(0,u.__awaiter)(this,void 0,void 0,(function(){var a,s,c,l,h,f,d;return(0,u.__generator)(this,(function(u){switch(u.label){case 0:return a=ps(e),a.then((function(t){n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&Ja.warn("The measurement ID in the local Firebase config ("+e.options.measurementId+") does not match the measurement ID fetched from the server ("+t.measurementId+"). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")})).catch((function(e){return Ja.error(e)})),t.push(a),s=_s().then((function(e){return e?r.getId():void 0})),[4,Promise.all([a,s])];case 1:return c=u.sent(),l=c[0],h=c[1],os()||Za(o,l.measurementId),i("js",new Date),d={},d[Ba]="firebase",d.update=!0,f=d,null!=h&&(f[Va]=h),i(Ua.CONFIG,l.measurementId,f),[2,l.measurementId]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ws,Is,Ts={},Es=[],ks={},Ss="dataLayer",Cs="gtag",As=!1;function Ns(e){if(As)throw ss.create("already-initialized");e.dataLayerName&&(Ss=e.dataLayerName),e.gtagName&&(Cs=e.gtagName)}function xs(){var e=[];if((0,o.isBrowserExtension)()&&e.push("This is a browser extension environment."),(0,o.areCookiesEnabled)()||e.push("Cookies are not available."),e.length>0){var t=e.map((function(e,t){return"("+(t+1)+") "+e})).join(" "),n=ss.create("invalid-analytics-context",{errorInfo:t});Ja.warn(n.message)}}function Rs(e,t){xs();var n=e.options.appId;if(!n)throw ss.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw ss.create("no-api-key");Ja.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '+e.options.measurementId+' provided in the "measurementId" field in the local Firebase config.')}if(null!=Ts[n])throw ss.create("already-exists",{id:n});if(!As){es(Ss);var r=is(Ts,Es,ks,Ss,Cs),i=r.wrappedGtag,o=r.gtagCore;Is=i,ws=o,As=!0}Ts[n]=bs(e,Es,ks,t,ws,Ss);var a={app:e,logEvent:function(e,t,r){Ga(Is,Ts[n],e,t,r).catch((function(e){return Ja.error(e)}))},setCurrentScreen:function(e,t){za(Is,Ts[n],e,t).catch((function(e){return Ja.error(e)}))},setUserId:function(e,t){Qa(Is,Ts[n],e,t).catch((function(e){return Ja.error(e)}))},setUserProperties:function(e,t){$a(Is,Ts[n],e,t).catch((function(e){return Ja.error(e)}))},setAnalyticsCollectionEnabled:function(e){Ya(Ts[n],e).catch((function(e){return Ja.error(e)}))},INTERNAL:{delete:function(){return delete Ts[n],Promise.resolve()}}};return a}var Ps="@firebase/analytics",Os="0.6.18",Ds="analytics";function Ms(e){function t(e){try{var t=e.getProvider(Ds).getImmediate();return{logEvent:t.logEvent}}catch(n){throw ss.create("interop-component-reg-failed",{reason:n})}}e.INTERNAL.registerComponent(new c.Component(Ds,(function(e){var t=e.getProvider("app").getImmediate(),n=e.getProvider("installations").getImmediate();return Rs(t,n)}),"PUBLIC").setServiceProps({settings:Ns,EventName:qa,isSupported:Ls})),e.INTERNAL.registerComponent(new c.Component("analytics-internal",t,"PRIVATE")),e.registerVersion(Ps,Os)}function Ls(){return(0,u.__awaiter)(this,void 0,void 0,(function(){var e;return(0,u.__generator)(this,(function(t){switch(t.label){case 0:if((0,o.isBrowserExtension)())return[2,!1];if(!(0,o.areCookiesEnabled)())return[2,!1];if(!(0,o.isIndexedDBAvailable)())return[2,!1];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,(0,o.validateIndexedDBOpenable)()];case 2:return e=t.sent(),[2,e];case 3:return t.sent(),[2,!1];case 4:return[2]}}))}))}Ms(r["default"]);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Fs,js=function(){function e(e,t,n,r){this.client=e,this.storage=t,this.storageCache=n,this.logger=r}return e.prototype.isCachedDataFresh=function(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-t,r=n<=e;return this.logger.debug("Config fetch cache check. Cache age millis: "+n+". Cache max age millis (minimumFetchIntervalMillis setting): "+e+". Is cache hit: "+r+"."),r},e.prototype.fetch=function(e){return(0,u.__awaiter)(this,void 0,void 0,(function(){var t,n,r,i,o;return(0,u.__generator)(this,(function(a){switch(a.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return t=a.sent(),n=t[0],r=t[1],r&&this.isCachedDataFresh(e.cacheMaxAgeMillis,n)?[2,r]:(e.eTag=r&&r.eTag,[4,this.client.fetch(e)]);case 2:return i=a.sent(),o=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===i.status&&o.push(this.storage.setLastSuccessfulFetchResponse(i)),[4,Promise.all(o)];case 3:return a.sent(),[2,i]}}))}))},e}(),Us=(Fs={},Fs["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",Fs["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",Fs["registration-api-key"]="Undefined API key. Check Firebase app initialization.",Fs["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",Fs["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",Fs["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",Fs["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",Fs["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",Fs["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",Fs["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',Fs["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',Fs["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",Fs["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",Fs),qs=new o.ErrorFactory("remoteconfig","Remote Config",Us);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vs(e,t){return e instanceof o.FirebaseError&&-1!==e.code.indexOf(t)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bs(e){return void 0===e&&(e=navigator),e.languages&&e.languages[0]||e.language}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ks=function(){function e(e,t,n,r,i,o){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=o}return e.prototype.fetch=function(e){return(0,u.__awaiter)(this,void 0,void 0,(function(){var t,n,r,i,o,a,s,c,l,h,f,d,p,v,g,m,y,_,b;return(0,u.__generator)(this,(function(u){switch(u.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:t=u.sent(),n=t[0],r=t[1],i=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",o=i+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,a={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},s={sdk_version:this.sdkVersion,app_instance_id:n,app_instance_id_token:r,app_id:this.appId,language_code:Bs()},c={method:"POST",headers:a,body:JSON.stringify(s)},l=fetch(o,c),h=new Promise((function(t,n){e.signal.addEventListener((function(){var e=new Error("The operation was aborted.");e.name="AbortError",n(e)}))})),u.label=2;case 2:return u.trys.push([2,5,,6]),[4,Promise.race([l,h])];case 3:return u.sent(),[4,l];case 4:return f=u.sent(),[3,6];case 5:throw d=u.sent(),p="fetch-client-network","AbortError"===d.name&&(p="fetch-timeout"),qs.create(p,{originalErrorMessage:d.message});case 6:if(v=f.status,g=f.headers.get("ETag")||void 0,200!==f.status)return[3,11];_=void 0,u.label=7;case 7:return u.trys.push([7,9,,10]),[4,f.json()];case 8:return _=u.sent(),[3,10];case 9:throw b=u.sent(),qs.create("fetch-client-parse",{originalErrorMessage:b.message});case 10:m=_["entries"],y=_["state"],u.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===y?v=500:"NO_CHANGE"===y?v=304:"NO_TEMPLATE"!==y&&"EMPTY_CONFIG"!==y||(m={}),304!==v&&200!==v)throw qs.create("fetch-status",{httpStatus:v});return[2,{status:v,eTag:g,config:m}]}}))}))},e}(),Ws=function(){function e(){this.listeners=[]}return e.prototype.addEventListener=function(e){this.listeners.push(e)},e.prototype.abort=function(){this.listeners.forEach((function(e){return e()}))},e}(),Hs=!1,Gs="",zs=0,Qs=["1","true","t","yes","y","on"],$s=function(){function e(e,t){void 0===t&&(t=Gs),this._source=e,this._value=t}return e.prototype.asString=function(){return this._value},e.prototype.asBoolean=function(){return"static"===this._source?Hs:Qs.indexOf(this._value.toLowerCase())>=0},e.prototype.asNumber=function(){if("static"===this._source)return zs;var e=Number(this._value);return isNaN(e)&&(e=zs),e},e.prototype.getSource=function(){return this._source},e}(),Ys=6e4,Xs=432e5,Js=function(){function e(e,t,n,r,i){this.app=e,this._client=t,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:Ys,minimumFetchIntervalMillis:Xs},this.defaultConfig={}}return e.prototype.setLogLevel=function(e){switch(e){case"debug":this._logger.logLevel=a.LogLevel.DEBUG;break;case"silent":this._logger.logLevel=a.LogLevel.SILENT;break;default:this._logger.logLevel=a.LogLevel.ERROR}},Object.defineProperty(e.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!1,configurable:!0}),e.prototype.activate=function(){return(0,u.__awaiter)(this,void 0,void 0,(function(){var e,t,n;return(0,u.__generator)(this,(function(r){switch(r.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return e=r.sent(),t=e[0],n=e[1],t&&t.config&&t.eTag&&t.eTag!==n?[4,Promise.all([this._storageCache.setActiveConfig(t.config),this._storage.setActiveConfigEtag(t.eTag)])]:[2,!1];case 2:return r.sent(),[2,!0]}}))}))},e.prototype.ensureInitialized=function(){var e=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then((function(){e._isInitializationComplete=!0}))),this._initializePromise},e.prototype.fetch=function(){return(0,u.__awaiter)(this,void 0,void 0,(function(){var e,t,n,r=this;return(0,u.__generator)(this,(function(i){switch(i.label){case 0:e=new Ws,setTimeout((function(){return(0,u.__awaiter)(r,void 0,void 0,(function(){return(0,u.__generator)(this,(function(t){return e.abort(),[2]}))}))}),this.settings.fetchTimeoutMillis),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:e})];case 2:return i.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return i.sent(),[3,6];case 4:return t=i.sent(),n=Vs(t,"fetch-throttle")?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(n)];case 5:throw i.sent(),t;case 6:return[2]}}))}))},e.prototype.fetchAndActivate=function(){return(0,u.__awaiter)(this,void 0,void 0,(function(){return(0,u.__generator)(this,(function(e){switch(e.label){case 0:return[4,this.fetch()];case 1:return e.sent(),[2,this.activate()]}}))}))},e.prototype.getAll=function(){var e=this;return Zs(this._storageCache.getActiveConfig(),this.defaultConfig).reduce((function(t,n){return t[n]=e.getValue(n),t}),{})},e.prototype.getBoolean=function(e){return this.getValue(e).asBoolean()},e.prototype.getNumber=function(e){return this.getValue(e).asNumber()},e.prototype.getString=function(e){return this.getValue(e).asString()},e.prototype.getValue=function(e){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+e+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var t=this._storageCache.getActiveConfig();return t&&void 0!==t[e]?new $s("remote",t[e]):this.defaultConfig&&void 0!==this.defaultConfig[e]?new $s("default",String(this.defaultConfig[e])):(this._logger.debug('Returning static value for key "'+e+'". Define a default or remote value if this is unintentional.'),new $s("static"))},e}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zs(e,t){return void 0===e&&(e={}),void 0===t&&(t={}),Object.keys((0,u.__assign)((0,u.__assign)({},e),t))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eu(e,t){var n=e.target.error||void 0;return qs.create(t,{originalErrorMessage:n&&n.message})}var tu="app_namespace_store",nu="firebase_remote_config",ru=1;function iu(){return new Promise((function(e,t){var n=indexedDB.open(nu,ru);n.onerror=function(e){t(eu(e,"storage-open"))},n.onsuccess=function(t){e(t.target.result)},n.onupgradeneeded=function(e){var t=e.target.result;switch(e.oldVersion){case 0:t.createObjectStore(tu,{keyPath:"compositeKey"})}}}))}var ou=function(){function e(e,t,n,r){void 0===r&&(r=iu()),this.appId=e,this.appName=t,this.namespace=n,this.openDbPromise=r}return e.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},e.prototype.setLastFetchStatus=function(e){return this.set("last_fetch_status",e)},e.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},e.prototype.setLastSuccessfulFetchTimestampMillis=function(e){return this.set("last_successful_fetch_timestamp_millis",e)},e.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},e.prototype.setLastSuccessfulFetchResponse=function(e){return this.set("last_successful_fetch_response",e)},e.prototype.getActiveConfig=function(){return this.get("active_config")},e.prototype.setActiveConfig=function(e){return this.set("active_config",e)},e.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},e.prototype.setActiveConfigEtag=function(e){return this.set("active_config_etag",e)},e.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},e.prototype.setThrottleMetadata=function(e){return this.set("throttle_metadata",e)},e.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},e.prototype.get=function(e){return(0,u.__awaiter)(this,void 0,void 0,(function(){var t,n=this;return(0,u.__generator)(this,(function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return t=r.sent(),[2,new Promise((function(r,i){var o=t.transaction([tu],"readonly"),a=o.objectStore(tu),s=n.createCompositeKey(e);try{var u=a.get(s);u.onerror=function(e){i(eu(e,"storage-get"))},u.onsuccess=function(e){var t=e.target.result;r(t?t.value:void 0)}}catch(c){i(qs.create("storage-get",{originalErrorMessage:c&&c.message}))}}))]}}))}))},e.prototype.set=function(e,t){return(0,u.__awaiter)(this,void 0,void 0,(function(){var n,r=this;return(0,u.__generator)(this,(function(i){switch(i.label){case 0:return[4,this.openDbPromise];case 1:return n=i.sent(),[2,new Promise((function(i,o){var a=n.transaction([tu],"readwrite"),s=a.objectStore(tu),u=r.createCompositeKey(e);try{var c=s.put({compositeKey:u,value:t});c.onerror=function(e){o(eu(e,"storage-set"))},c.onsuccess=function(){i()}}catch(l){o(qs.create("storage-set",{originalErrorMessage:l&&l.message}))}}))]}}))}))},e.prototype.delete=function(e){return(0,u.__awaiter)(this,void 0,void 0,(function(){var t,n=this;return(0,u.__generator)(this,(function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return t=r.sent(),[2,new Promise((function(r,i){var o=t.transaction([tu],"readwrite"),a=o.objectStore(tu),s=n.createCompositeKey(e);try{var u=a.delete(s);u.onerror=function(e){i(eu(e,"storage-delete"))},u.onsuccess=function(){r()}}catch(c){i(qs.create("storage-delete",{originalErrorMessage:c&&c.message}))}}))]}}))}))},e.prototype.createCompositeKey=function(e){return[this.appId,this.appName,this.namespace,e].join()},e}(),au=function(){function e(e){this.storage=e}return e.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},e.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},e.prototype.getActiveConfig=function(){return this.activeConfig},e.prototype.loadFromStorage=function(){return(0,u.__awaiter)(this,void 0,void 0,(function(){var e,t,n,r,i,o;return(0,u.__generator)(this,(function(a){switch(a.label){case 0:return e=this.storage.getLastFetchStatus(),t=this.storage.getLastSuccessfulFetchTimestampMillis(),n=this.storage.getActiveConfig(),[4,e];case 1:return r=a.sent(),r&&(this.lastFetchStatus=r),[4,t];case 2:return i=a.sent(),i&&(this.lastSuccessfulFetchTimestampMillis=i),[4,n];case 3:return o=a.sent(),o&&(this.activeConfig=o),[2]}}))}))},e.prototype.setLastFetchStatus=function(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)},e.prototype.setLastSuccessfulFetchTimestampMillis=function(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)},e.prototype.setActiveConfig=function(e){return this.activeConfig=e,this.storage.setActiveConfig(e)},e}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function su(e,t){return new Promise((function(n,r){var i=Math.max(t-Date.now(),0),o=setTimeout(n,i);e.addEventListener((function(){clearTimeout(o),r(qs.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}function uu(e){if(!(e instanceof o.FirebaseError)||!e.customData)return!1;var t=Number(e.customData["httpStatus"]);return 429===t||500===t||503===t||504===t}var cu=function(){function e(e,t){this.client=e,this.storage=t}return e.prototype.fetch=function(e){return(0,u.__awaiter)(this,void 0,void 0,(function(){var t;return(0,u.__generator)(this,(function(n){switch(n.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return t=n.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(e,t)]}}))}))},e.prototype.attemptFetch=function(e,t){var n=t.throttleEndTimeMillis,r=t.backoffCount;return(0,u.__awaiter)(this,void 0,void 0,(function(){var t,i,a;return(0,u.__generator)(this,(function(s){switch(s.label){case 0:return[4,su(e.signal,n)];case 1:s.sent(),s.label=2;case 2:return s.trys.push([2,5,,7]),[4,this.client.fetch(e)];case 3:return t=s.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return s.sent(),[2,t];case 5:if(i=s.sent(),!uu(i))throw i;return a={throttleEndTimeMillis:Date.now()+(0,o.calculateBackoffMillis)(r),backoffCount:r+1},[4,this.storage.setThrottleMetadata(a)];case 6:return s.sent(),[2,this.attemptFetch(e,a)];case 7:return[2]}}))}))},e}(),lu="@firebase/remote-config",hu="0.1.43";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function fu(e){function t(t,n){var r=n.instanceIdentifier,i=t.getProvider("app").getImmediate(),o=t.getProvider("installations").getImmediate();if("undefined"===typeof window)throw qs.create("registration-window");var s=i.options,u=s.projectId,c=s.apiKey,l=s.appId;if(!u)throw qs.create("registration-project-id");if(!c)throw qs.create("registration-api-key");if(!l)throw qs.create("registration-app-id");r=r||"firebase";var h=new ou(l,i.name,r),f=new au(h),d=new a.Logger(lu);d.logLevel=a.LogLevel.ERROR;var p=new Ks(o,e.SDK_VERSION,r,u,c,l),v=new cu(p,h),g=new js(v,h,f,d),m=new Js(i,g,f,h,d);return m.ensureInitialized(),m}e.INTERNAL.registerComponent(new c.Component("remoteConfig",t,"PUBLIC").setMultipleInstances(!0)),e.registerVersion(lu,hu)}fu(r["default"]);n(1746);var du="firebase",pu="8.10.1";
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
r["default"].registerVersion(du,pu,"app"),r["default"].SDK_VERSION=pu;var vu="firebase",gu="8.10.1";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the module builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nCommonJS Modules:\nconst firebase = require('firebase/app');\nrequire('firebase/<PACKAGE>');\n\nES Modules:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n\nTypescript:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n"),r["default"].registerVersion(vu,gu)},8307:function(e,t,n){"use strict";n(8328)},7920:function(e,t,n){n(7658),function(e,n){n(t)}(0,(function(e){"use strict";function t(e){return Array.prototype.slice.call(e)}function n(e){return new Promise((function(t,n){e.onsuccess=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function r(e,t,r){var i,o=new Promise((function(o,a){i=e[t].apply(e,r),n(i).then(o,a)}));return o.request=i,o}function i(e,t,n){var i=r(e,t,n);return i.then((function(e){if(e)return new l(e,i.request)}))}function o(e,t,n){n.forEach((function(n){Object.defineProperty(e.prototype,n,{get:function(){return this[t][n]},set:function(e){this[t][n]=e}})}))}function a(e,t,n,i){i.forEach((function(i){i in n.prototype&&(e.prototype[i]=function(){return r(this[t],i,arguments)})}))}function s(e,t,n,r){r.forEach((function(r){r in n.prototype&&(e.prototype[r]=function(){return this[t][r].apply(this[t],arguments)})}))}function u(e,t,n,r){r.forEach((function(r){r in n.prototype&&(e.prototype[r]=function(){return i(this[t],r,arguments)})}))}function c(e){this._index=e}function l(e,t){this._cursor=e,this._request=t}function h(e){this._store=e}function f(e){this._tx=e,this.complete=new Promise((function(t,n){e.oncomplete=function(){t()},e.onerror=function(){n(e.error)},e.onabort=function(){n(e.error)}}))}function d(e,t,n){this._db=e,this.oldVersion=t,this.transaction=new f(n)}function p(e){this._db=e}function v(e,t,n){var i=r(indexedDB,"open",[e,t]),o=i.request;return o&&(o.onupgradeneeded=function(e){n&&n(new d(o.result,e.oldVersion,o.transaction))}),i.then((function(e){return new p(e)}))}function g(e){return r(indexedDB,"deleteDatabase",[e])}o(c,"_index",["name","keyPath","multiEntry","unique"]),a(c,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),u(c,"_index",IDBIndex,["openCursor","openKeyCursor"]),o(l,"_cursor",["direction","key","primaryKey","value"]),a(l,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach((function(e){e in IDBCursor.prototype&&(l.prototype[e]=function(){var t=this,r=arguments;return Promise.resolve().then((function(){return t._cursor[e].apply(t._cursor,r),n(t._request).then((function(e){if(e)return new l(e,t._request)}))}))})})),h.prototype.createIndex=function(){return new c(this._store.createIndex.apply(this._store,arguments))},h.prototype.index=function(){return new c(this._store.index.apply(this._store,arguments))},o(h,"_store",["name","keyPath","indexNames","autoIncrement"]),a(h,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),u(h,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),s(h,"_store",IDBObjectStore,["deleteIndex"]),f.prototype.objectStore=function(){return new h(this._tx.objectStore.apply(this._tx,arguments))},o(f,"_tx",["objectStoreNames","mode"]),s(f,"_tx",IDBTransaction,["abort"]),d.prototype.createObjectStore=function(){return new h(this._db.createObjectStore.apply(this._db,arguments))},o(d,"_db",["name","version","objectStoreNames"]),s(d,"_db",IDBDatabase,["deleteObjectStore","close"]),p.prototype.transaction=function(){return new f(this._db.transaction.apply(this._db,arguments))},o(p,"_db",["name","version","objectStoreNames"]),s(p,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach((function(e){[h,c].forEach((function(n){e in n.prototype&&(n.prototype[e.replace("open","iterate")]=function(){var n=t(arguments),r=n[n.length-1],i=this._store||this._index,o=i[e].apply(i,n.slice(0,-1));o.onsuccess=function(){r(o.result)}})}))})),[c,h].forEach((function(e){e.prototype.getAll||(e.prototype.getAll=function(e,t){var n=this,r=[];return new Promise((function(i){n.iterateCursor(e,(function(e){e?(r.push(e.value),void 0===t||r.length!=t?e.continue():i(r)):i(r)}))}))})})),e.openDb=v,e.deleteDb=g,Object.defineProperty(e,"__esModule",{value:!0})}))},2900:function(e,t,n){"use strict";n.r(t),n.d(t,{__assign:function(){return o},__asyncDelegator:function(){return w},__asyncGenerator:function(){return b},__asyncValues:function(){return I},__await:function(){return _},__awaiter:function(){return l},__classPrivateFieldGet:function(){return C},__classPrivateFieldIn:function(){return N},__classPrivateFieldSet:function(){return A},__createBinding:function(){return f},__decorate:function(){return s},__exportStar:function(){return d},__extends:function(){return i},__generator:function(){return h},__importDefault:function(){return S},__importStar:function(){return k},__makeTemplateObject:function(){return T},__metadata:function(){return c},__param:function(){return u},__read:function(){return v},__rest:function(){return a},__spread:function(){return g},__spreadArray:function(){return y},__spreadArrays:function(){return m},__values:function(){return p}});n(7658);var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)};function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},o.apply(this,arguments)};function a(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function s(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}function u(e,t){return function(n,r){t(n,r,e)}}function c(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)}function l(e,t,n,r){function i(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r["throw"](e))}catch(t){o(t)}}function u(e){e.done?n(e.value):i(e.value).then(a,s)}u((r=r.apply(e,t||[])).next())}))}function h(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(e){return function(t){return u([e,t])}}function u(s){if(n)throw new TypeError("Generator is already executing.");while(o&&(o=0,s[0]&&(a=0)),a)try{if(n=1,r&&(i=2&s[0]?r["return"]:s[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!(i=i.length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(u){s=[6,u],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}}var f=Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]};function d(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||f(t,e,n)}function p(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function v(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{while((void 0===t||t-- >0)&&!(r=o.next()).done)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o["return"])&&n.call(o)}finally{if(i)throw i.error}}return a}function g(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(v(arguments[t]));return e}function m(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}function y(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}function _(e){return this instanceof _?(this.v=e,this):new _(e)}function b(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(e){i[e]&&(r[e]=function(t){return new Promise((function(n,r){o.push([e,t,n,r])>1||s(e,t)}))})}function s(e,t){try{u(i[e](t))}catch(n){h(o[0][3],n)}}function u(e){e.value instanceof _?Promise.resolve(e.value.v).then(c,l):h(o[0][2],e)}function c(e){s("next",e)}function l(e){s("throw",e)}function h(e,t){e(t),o.shift(),o.length&&s(o[0][0],o[0][1])}}function w(e){var t,n;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:_(e[r](t)),done:"return"===r}:i?i(t):t}:i}}function I(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e="function"===typeof p?p(e):e[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,o){t=e[n](t),i(r,o,t.done,t.value)}))}}function i(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)}}function T(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var E=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e["default"]=t};function k(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&f(t,e,n);return E(t,e),t}function S(e){return e&&e.__esModule?e:{default:e}}function C(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)}function A(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n}function N(e,t){if(null===t||"object"!==typeof t&&"function"!==typeof t)throw new TypeError("Cannot use 'in' operator on non-object");return"function"===typeof e?t===e:e.has(t)}},9434:function(e){!function(t,n){e.exports=n()}(0,(function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/dist-module/",t(t.s=3)}([function(e,t,n){var r=n(4)(n(1),n(5),null,null,null);e.exports=r.exports},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),i=function(e){return e&&e.__esModule?e:{default:e}}(r),o=function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")};t.default={props:{search:{type:String,required:!1,default:""},emojiTable:{type:Object,required:!1,default:function(){return i.default}}},data:function(){return{display:{x:0,y:0,visible:!1}}},computed:{emojis:function(){if(this.search){var e={};for(var t in this.emojiTable){for(var n in e[t]={},this.emojiTable[t])new RegExp(".*"+o(this.search)+".*").test(n)&&(e[t][n]=this.emojiTable[t][n]);0===Object.keys(e[t]).length&&delete e[t]}return e}return this.emojiTable}},methods:{insert:function(e){this.$emit("emoji",e)},toggle:function(e){this.display.visible=!this.display.visible,this.display.x=e.clientX,this.display.y=e.clientY},hide:function(){this.display.visible=!1},escape:function(e){!0===this.display.visible&&27===e.keyCode&&(this.display.visible=!1)}},directives:{"click-outside":{bind:function(e,t,n){if("function"==typeof t.value){var r=t.modifiers.bubble,i=function(n){(r||!e.contains(n.target)&&e!==n.target)&&t.value(n)};e.__vueClickOutside__=i,document.addEventListener("click",i)}},unbind:function(e,t){document.removeEventListener("click",e.__vueClickOutside__),e.__vueClickOutside__=null}}},mounted:function(){document.addEventListener("keyup",this.escape)},destroyed:function(){document.removeEventListener("keyup",this.escape)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={"Frequently used":{thumbs_up:"ð","-1":"ð",sob:"ð­",confused:"ð",neutral_face:"ð",blush:"ð",heart_eyes:"ð"},People:{smile:"ð",smiley:"ð",grinning:"ð",blush:"ð",wink:"ð",heart_eyes:"ð",kissing_heart:"ð",kissing_closed_eyes:"ð",kissing:"ð",kissing_smiling_eyes:"ð",stuck_out_tongue_winking_eye:"ð",stuck_out_tongue_closed_eyes:"ð",stuck_out_tongue:"ð",flushed:"ð³",grin:"ð",pensive:"ð",relieved:"ð",unamused:"ð",disappointed:"ð",persevere:"ð£",cry:"ð¢",joy:"ð",sob:"ð­",sleepy:"ðª",disappointed_relieved:"ð¥",cold_sweat:"ð°",sweat_smile:"ð",sweat:"ð",weary:"ð©",tired_face:"ð«",fearful:"ð¨",scream:"ð±",angry:"ð ",rage:"ð¡",triumph:"ð¤",confounded:"ð",laughing:"ð",yum:"ð",mask:"ð·",sunglasses:"ð",sleeping:"ð´",dizzy_face:"ðµ",astonished:"ð²",worried:"ð",frowning:"ð¦",anguished:"ð§",imp:"ð¿",open_mouth:"ð®",grimacing:"ð¬",neutral_face:"ð",confused:"ð",hushed:"ð¯",smirk:"ð",expressionless:"ð",man_with_gua_pi_mao:"ð²",man_with_turban:"ð³",cop:"ð®",construction_worker:"ð·",guardsman:"ð",baby:"ð¶",boy:"ð¦",girl:"ð§",man:"ð¨",woman:"ð©",older_man:"ð´",older_woman:"ðµ",person_with_blond_hair:"ð±",angel:"ð¼",princess:"ð¸",smiley_cat:"ðº",smile_cat:"ð¸",heart_eyes_cat:"ð»",kissing_cat:"ð½",smirk_cat:"ð¼",scream_cat:"ð",crying_cat_face:"ð¿",joy_cat:"ð¹",pouting_cat:"ð¾",japanese_ogre:"ð¹",japanese_goblin:"ðº",see_no_evil:"ð",hear_no_evil:"ð",speak_no_evil:"ð",skull:"ð",alien:"ð½",hankey:"ð©",fire:"ð¥",sparkles:"â¨",star2:"ð",dizzy:"ð«",boom:"ð¥",anger:"ð¢",sweat_drops:"ð¦",droplet:"ð§",zzz:"ð¤",dash:"ð¨",ear:"ð",eyes:"ð",nose:"ð",tongue:"ð",lips:"ð",thumbs_up:"ð","-1":"ð",ok_hand:"ð",facepunch:"ð",fist:"â",wave:"ð",hand:"â",open_hands:"ð",point_up_2:"ð",point_down:"ð",point_right:"ð",point_left:"ð",raised_hands:"ð",pray:"ð",clap:"ð",muscle:"ðª",walking:"ð¶",runner:"ð",dancer:"ð",couple:"ð«",family:"ðª",couplekiss:"ð",couple_with_heart:"ð",dancers:"ð¯",ok_woman:"ð",no_good:"ð",information_desk_person:"ð",raising_hand:"ð",massage:"ð",haircut:"ð",nail_care:"ð",bride_with_veil:"ð°",person_with_pouting_face:"ð",person_frowning:"ð",bow:"ð",tophat:"ð©",crown:"ð",womans_hat:"ð",athletic_shoe:"ð",mans_shoe:"ð",sandal:"ð¡",high_heel:"ð ",boot:"ð¢",shirt:"ð",necktie:"ð",womans_clothes:"ð",dress:"ð",running_shirt_with_sash:"ð½",jeans:"ð",kimono:"ð",bikini:"ð",briefcase:"ð¼",handbag:"ð",pouch:"ð",purse:"ð",eyeglasses:"ð",ribbon:"ð",closed_umbrella:"ð",lipstick:"ð",yellow_heart:"ð",blue_heart:"ð",purple_heart:"ð",green_heart:"ð",broken_heart:"ð",heartpulse:"ð",heartbeat:"ð",two_hearts:"ð",sparkling_heart:"ð",revolving_hearts:"ð",cupid:"ð",love_letter:"ð",kiss:"ð",ring:"ð",gem:"ð",bust_in_silhouette:"ð¤",speech_balloon:"ð¬",footprints:"ð£"},Nature:{dog:"ð¶",wolf:"ðº",cat:"ð±",mouse:"ð­",hamster:"ð¹",rabbit:"ð°",frog:"ð¸",tiger:"ð¯",koala:"ð¨",bear:"ð»",pig:"ð·",pig_nose:"ð½",cow:"ð®",boar:"ð",monkey_face:"ðµ",monkey:"ð",horse:"ð´",sheep:"ð",elephant:"ð",panda_face:"ð¼",penguin:"ð§",bird:"ð¦",baby_chick:"ð¤",hatched_chick:"ð¥",hatching_chick:"ð£",chicken:"ð",snake:"ð",turtle:"ð¢",bug:"ð",bee:"ð",ant:"ð",beetle:"ð",snail:"ð",octopus:"ð",shell:"ð",tropical_fish:"ð ",fish:"ð",dolphin:"ð¬",whale:"ð³",racehorse:"ð",dragon_face:"ð²",blowfish:"ð¡",camel:"ð«",poodle:"ð©",feet:"ð¾",bouquet:"ð",cherry_blossom:"ð¸",tulip:"ð·",four_leaf_clover:"ð",rose:"ð¹",sunflower:"ð»",hibiscus:"ðº",maple_leaf:"ð",leaves:"ð",fallen_leaf:"ð",herb:"ð¿",ear_of_rice:"ð¾",mushroom:"ð",cactus:"ðµ",palm_tree:"ð´",chestnut:"ð°",seedling:"ð±",blossom:"ð¼",new_moon:"ð",first_quarter_moon:"ð",moon:"ð",full_moon:"ð",first_quarter_moon_with_face:"ð",crescent_moon:"ð",earth_asia:"ð",volcano:"ð",milky_way:"ð",stars:"ð ",partly_sunny:"â",snowman:"â",cyclone:"ð",foggy:"ð",rainbow:"ð",ocean:"ð"},Objects:{bamboo:"ð",gift_heart:"ð",dolls:"ð",school_satchel:"ð",mortar_board:"ð",flags:"ð",fireworks:"ð",sparkler:"ð",wind_chime:"ð",rice_scene:"ð",jack_o_lantern:"ð",ghost:"ð»",santa:"ð",christmas_tree:"ð",gift:"ð",tanabata_tree:"ð",tada:"ð",confetti_ball:"ð",balloon:"ð",crossed_flags:"ð",crystal_ball:"ð®",movie_camera:"ð¥",camera:"ð·",video_camera:"ð¹",vhs:"ð¼",cd:"ð¿",dvd:"ð",minidisc:"ð½",floppy_disk:"ð¾",computer:"ð»",iphone:"ð±",telephone_receiver:"ð",pager:"ð",fax:"ð ",satellite:"ð¡",tv:"ðº",radio:"ð»",loud_sound:"ð",bell:"ð",loudspeaker:"ð¢",mega:"ð£",hourglass_flowing_sand:"â³",hourglass:"â",alarm_clock:"â°",watch:"â",unlock:"ð",lock:"ð",lock_with_ink_pen:"ð",closed_lock_with_key:"ð",key:"ð",mag_right:"ð",bulb:"ð¡",flashlight:"ð¦",electric_plug:"ð",battery:"ð",mag:"ð",bath:"ð",toilet:"ð½",wrench:"ð§",nut_and_bolt:"ð©",hammer:"ð¨",door:"ðª",smoking:"ð¬",bomb:"ð£",gun:"ð«",hocho:"ðª",pill:"ð",syringe:"ð",moneybag:"ð°",yen:"ð´",dollar:"ðµ",credit_card:"ð³",money_with_wings:"ð¸",calling:"ð²","e-mail":"ð§",inbox_tray:"ð¥",outbox_tray:"ð¤",envelope_with_arrow:"ð©",incoming_envelope:"ð¨",mailbox:"ð«",mailbox_closed:"ðª",postbox:"ð®",package:"ð¦",memo:"ð",page_facing_up:"ð",page_with_curl:"ð",bookmark_tabs:"ð",bar_chart:"ð",chart_with_upwards_trend:"ð",chart_with_downwards_trend:"ð",scroll:"ð",clipboard:"ð",date:"ð",calendar:"ð",card_index:"ð",file_folder:"ð",open_file_folder:"ð",pushpin:"ð",paperclip:"ð",straight_ruler:"ð",triangular_ruler:"ð",closed_book:"ð",green_book:"ð",blue_book:"ð",orange_book:"ð",notebook:"ð",notebook_with_decorative_cover:"ð",ledger:"ð",books:"ð",book:"ð",bookmark:"ð",name_badge:"ð",newspaper:"ð°",art:"ð¨",clapper:"ð¬",microphone:"ð¤",headphones:"ð§",musical_score:"ð¼",musical_note:"ðµ",notes:"ð¶",musical_keyboard:"ð¹",violin:"ð»",trumpet:"ðº",saxophone:"ð·",guitar:"ð¸",space_invader:"ð¾",video_game:"ð®",black_joker:"ð",flower_playing_cards:"ð´",mahjong:"ð",game_die:"ð²",dart:"ð¯",football:"ð",basketball:"ð",soccer:"â½",baseball:"â¾",tennis:"ð¾","8ball":"ð±",bowling:"ð³",golf:"â³",checkered_flag:"ð",trophy:"ð",ski:"ð¿",snowboarder:"ð",swimmer:"ð",surfer:"ð",fishing_pole_and_fish:"ð£",tea:"ðµ",sake:"ð¶",beer:"ðº",beers:"ð»",cocktail:"ð¸",tropical_drink:"ð¹",wine_glass:"ð·",fork_and_knife:"ð´",pizza:"ð",hamburger:"ð",fries:"ð",poultry_leg:"ð",meat_on_bone:"ð",spaghetti:"ð",curry:"ð",fried_shrimp:"ð¤",bento:"ð±",sushi:"ð£",fish_cake:"ð¥",rice_ball:"ð",rice_cracker:"ð",rice:"ð",ramen:"ð",stew:"ð²",oden:"ð¢",dango:"ð¡",egg:"ð³",bread:"ð",doughnut:"ð©",custard:"ð®",icecream:"ð¦",ice_cream:"ð¨",shaved_ice:"ð§",birthday:"ð",cake:"ð°",cookie:"ðª",chocolate_bar:"ð«",candy:"ð¬",lollipop:"ð­",honey_pot:"ð¯",apple:"ð",green_apple:"ð",tangerine:"ð",cherries:"ð",grapes:"ð",watermelon:"ð",strawberry:"ð",peach:"ð",melon:"ð",banana:"ð",pineapple:"ð",sweet_potato:"ð ",eggplant:"ð",tomato:"ð",corn:"ð½"},Places:{house:"ð ",house_with_garden:"ð¡",school:"ð«",office:"ð¢",post_office:"ð£",hospital:"ð¥",bank:"ð¦",convenience_store:"ðª",love_hotel:"ð©",hotel:"ð¨",wedding:"ð",church:"âª",department_store:"ð¬",city_sunrise:"ð",city_sunset:"ð",japanese_castle:"ð¯",european_castle:"ð°",tent:"âº",factory:"ð­",tokyo_tower:"ð¼",japan:"ð¾",mount_fuji:"ð»",sunrise_over_mountains:"ð",sunrise:"ð",night_with_stars:"ð",statue_of_liberty:"ð½",bridge_at_night:"ð",carousel_horse:"ð ",ferris_wheel:"ð¡",fountain:"â²",roller_coaster:"ð¢",ship:"ð¢",boat:"âµ",speedboat:"ð¤",rocket:"ð",seat:"ðº",station:"ð",bullettrain_side:"ð",bullettrain_front:"ð",metro:"ð",railway_car:"ð",bus:"ð",blue_car:"ð",car:"ð",taxi:"ð",truck:"ð",rotating_light:"ð¨",police_car:"ð",fire_engine:"ð",ambulance:"ð",bike:"ð²",barber:"ð",busstop:"ð",ticket:"ð«",traffic_light:"ð¥",construction:"ð§",beginner:"ð°",fuelpump:"â½",izakaya_lantern:"ð®",slot_machine:"ð°",moyai:"ð¿",circus_tent:"ðª",performing_arts:"ð­",round_pushpin:"ð",triangular_flag_on_post:"ð©"},Symbols:{keycap_ten:"ð",1234:"ð¢",symbols:"ð£",capital_abcd:"ð ",abcd:"ð¡",abc:"ð¤",arrow_up_small:"ð¼",arrow_down_small:"ð½",rewind:"âª",fast_forward:"â©",arrow_double_up:"â«",arrow_double_down:"â¬",ok:"ð",new:"ð",up:"ð",cool:"ð",free:"ð",ng:"ð",signal_strength:"ð¶",cinema:"ð¦",koko:"ð",u6307:"ð¯",u7a7a:"ð³",u6e80:"ðµ",u5408:"ð´",u7981:"ð²",ideograph_advantage:"ð",u5272:"ð¹",u55b6:"ðº",u6709:"ð¶",u7121:"ð",restroom:"ð»",mens:"ð¹",womens:"ðº",baby_symbol:"ð¼",wc:"ð¾",no_smoking:"ð­",u7533:"ð¸",accept:"ð",cl:"ð",sos:"ð",id:"ð",no_entry_sign:"ð«",underage:"ð",no_entry:"â",negative_squared_cross_mark:"â",white_check_mark:"â",heart_decoration:"ð",vs:"ð",vibration_mode:"ð³",mobile_phone_off:"ð´",ab:"ð",diamond_shape_with_a_dot_inside:"ð ",ophiuchus:"â",six_pointed_star:"ð¯",atm:"ð§",chart:"ð¹",heavy_dollar_sign:"ð²",currency_exchange:"ð±",x:"â",exclamation:"â",question:"â",grey_exclamation:"â",grey_question:"â",o:"â­",top:"ð",end:"ð",back:"ð",on:"ð",soon:"ð",arrows_clockwise:"ð",clock12:"ð",clock1:"ð",clock2:"ð",clock3:"ð",clock4:"ð",clock5:"ð",clock6:"ð",clock7:"ð",clock8:"ð",clock9:"ð",clock10:"ð",clock11:"ð",heavy_plus_sign:"â",heavy_minus_sign:"â",heavy_division_sign:"â",white_flower:"ð®",100:"ð¯",radio_button:"ð",link:"ð",curly_loop:"â°",trident:"ð±",small_red_triangle:"ðº",black_square_button:"ð²",white_square_button:"ð³",red_circle:"ð´",large_blue_circle:"ðµ",small_red_triangle_down:"ð»",white_large_square:"â¬",black_large_square:"â¬",large_orange_diamond:"ð¶",large_blue_diamond:"ð·",small_orange_diamond:"ð¸",small_blue_diamond:"ð¹"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EmojiPickerPlugin=t.EmojiPicker=void 0;var r=n(0),i=function(e){return e&&e.__esModule?e:{default:e}}(r),o={install:function(e){e.component("emoji-picker",i.default)}};"undefined"!=typeof window&&(window.EmojiPicker=o),t.EmojiPicker=i.default,t.EmojiPickerPlugin=o,t.default=i.default},function(e,t){e.exports=function(e,t,n,r,i){var o,a=e=e||{},s=typeof e.default;"object"!==s&&"function"!==s||(o=e,a=e.default);var u,c="function"==typeof a?a.options:a;if(t&&(c.render=t.render,c.staticRenderFns=t.staticRenderFns),r&&(c._scopeId=r),i?(u=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),n&&n.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(i)},c._ssrRegister=u):n&&(u=n),u){var l=c.functional,h=l?c.render:c.beforeCreate;l?c.render=function(e,t){return u.call(t),h(e,t)}:c.beforeCreate=h?[].concat(h,u):[u]}return{esModule:o,exports:a,options:c}}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._t("emoji-invoker",null,{events:{click:function(t){return e.toggle(t)}}}),e._v(" "),e.display.visible?n("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.hide,expression:"hide"}]},[e._t("emoji-picker",null,{emojis:e.emojis,insert:e.insert,display:e.display})],2):e._e()],2)},staticRenderFns:[]}}])}))},89:function(e,t){"use strict";t.Z=(e,t)=>{const n=e.__vccOpts||e;for(const[r,i]of t)n[r]=i;return n}},2483:function(e,t,n){"use strict";n.d(t,{PO:function(){return U},p7:function(){return tt},tv:function(){return it}});n(7658),n(541);var r=n(3396),i=n(4870);
/*!
  * vue-router v4.1.6
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */
const o="undefined"!==typeof window;function a(e){return e.__esModule||"Module"===e[Symbol.toStringTag]}const s=Object.assign;function u(e,t){const n={};for(const r in t){const i=t[r];n[r]=l(i)?i.map(e):e(i)}return n}const c=()=>{},l=Array.isArray;const h=/\/$/,f=e=>e.replace(h,"");function d(e,t,n="/"){let r,i={},o="",a="";const s=t.indexOf("#");let u=t.indexOf("?");return s<u&&s>=0&&(u=-1),u>-1&&(r=t.slice(0,u),o=t.slice(u+1,s>-1?s:t.length),i=e(o)),s>-1&&(r=r||t.slice(0,s),a=t.slice(s,t.length)),r=w(null!=r?r:t,n),{fullPath:r+(o&&"?")+o+a,path:r,query:i,hash:a}}function p(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function v(e,t){return t&&e.toLowerCase().startsWith(t.toLowerCase())?e.slice(t.length)||"/":e}function g(e,t,n){const r=t.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&m(t.matched[r],n.matched[i])&&y(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function m(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function y(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!_(e[n],t[n]))return!1;return!0}function _(e,t){return l(e)?b(e,t):l(t)?b(t,e):e===t}function b(e,t){return l(t)?e.length===t.length&&e.every(((e,n)=>e===t[n])):1===e.length&&e[0]===t}function w(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),r=e.split("/");let i,o,a=n.length-1;for(i=0;i<r.length;i++)if(o=r[i],"."!==o){if(".."!==o)break;a>1&&a--}return n.slice(0,a).join("/")+"/"+r.slice(i-(i===r.length?1:0)).join("/")}var I,T;(function(e){e["pop"]="pop",e["push"]="push"})(I||(I={})),function(e){e["back"]="back",e["forward"]="forward",e["unknown"]=""}(T||(T={}));function E(e){if(!e)if(o){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return"/"!==e[0]&&"#"!==e[0]&&(e="/"+e),f(e)}const k=/^[^#]+#/;function S(e,t){return e.replace(k,"#")+t}function C(e,t){const n=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:t.behavior,left:r.left-n.left-(t.left||0),top:r.top-n.top-(t.top||0)}}const A=()=>({left:window.pageXOffset,top:window.pageYOffset});function N(e){let t;if("el"in e){const n=e.el,r="string"===typeof n&&n.startsWith("#");0;const i="string"===typeof n?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;t=C(i,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(null!=t.left?t.left:window.pageXOffset,null!=t.top?t.top:window.pageYOffset)}function x(e,t){const n=history.state?history.state.position-t:-1;return n+e}const R=new Map;function P(e,t){R.set(e,t)}function O(e){const t=R.get(e);return R.delete(e),t}let D=()=>location.protocol+"//"+location.host;function M(e,t){const{pathname:n,search:r,hash:i}=t,o=e.indexOf("#");if(o>-1){let t=i.includes(e.slice(o))?e.slice(o).length:1,n=i.slice(t);return"/"!==n[0]&&(n="/"+n),v(n,"")}const a=v(n,e);return a+r+i}function L(e,t,n,r){let i=[],o=[],a=null;const u=({state:o})=>{const s=M(e,location),u=n.value,c=t.value;let l=0;if(o){if(n.value=s,t.value=o,a&&a===u)return void(a=null);l=c?o.position-c.position:0}else r(s);i.forEach((e=>{e(n.value,u,{delta:l,type:I.pop,direction:l?l>0?T.forward:T.back:T.unknown})}))};function c(){a=n.value}function l(e){i.push(e);const t=()=>{const t=i.indexOf(e);t>-1&&i.splice(t,1)};return o.push(t),t}function h(){const{history:e}=window;e.state&&e.replaceState(s({},e.state,{scroll:A()}),"")}function f(){for(const e of o)e();o=[],window.removeEventListener("popstate",u),window.removeEventListener("beforeunload",h)}return window.addEventListener("popstate",u),window.addEventListener("beforeunload",h),{pauseListeners:c,listen:l,destroy:f}}function F(e,t,n,r=!1,i=!1){return{back:e,current:t,forward:n,replaced:r,position:window.history.length,scroll:i?A():null}}function j(e){const{history:t,location:n}=window,r={value:M(e,n)},i={value:t.state};function o(r,o,a){const s=e.indexOf("#"),u=s>-1?(n.host&&document.querySelector("base")?e:e.slice(s))+r:D()+e+r;try{t[a?"replaceState":"pushState"](o,"",u),i.value=o}catch(c){console.error(c),n[a?"replace":"assign"](u)}}function a(e,n){const a=s({},t.state,F(i.value.back,e,i.value.forward,!0),n,{position:i.value.position});o(e,a,!0),r.value=e}function u(e,n){const a=s({},i.value,t.state,{forward:e,scroll:A()});o(a.current,a,!0);const u=s({},F(r.value,e,null),{position:a.position+1},n);o(e,u,!1),r.value=e}return i.value||o(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0),{location:r,state:i,push:u,replace:a}}function U(e){e=E(e);const t=j(e),n=L(e,t.state,t.location,t.replace);function r(e,t=!0){t||n.pauseListeners(),history.go(e)}const i=s({location:"",base:e,go:r,createHref:S.bind(null,e)},t,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>t.state.value}),i}function q(e){return"string"===typeof e||e&&"object"===typeof e}function V(e){return"string"===typeof e||"symbol"===typeof e}const B={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},K=Symbol("");var W;(function(e){e[e["aborted"]=4]="aborted",e[e["cancelled"]=8]="cancelled",e[e["duplicated"]=16]="duplicated"})(W||(W={}));function H(e,t){return s(new Error,{type:e,[K]:!0},t)}function G(e,t){return e instanceof Error&&K in e&&(null==t||!!(e.type&t))}const z="[^/]+?",Q={sensitive:!1,strict:!1,start:!0,end:!0},$=/[.+*?^${}()[\]/\\]/g;function Y(e,t){const n=s({},Q,t),r=[];let i=n.start?"^":"";const o=[];for(const s of e){const e=s.length?[]:[90];n.strict&&!s.length&&(i+="/");for(let t=0;t<s.length;t++){const r=s[t];let a=40+(n.sensitive?.25:0);if(0===r.type)t||(i+="/"),i+=r.value.replace($,"\\$&"),a+=40;else if(1===r.type){const{value:e,repeatable:n,optional:u,regexp:c}=r;o.push({name:e,repeatable:n,optional:u});const l=c||z;if(l!==z){a+=10;try{new RegExp(`(${l})`)}catch(h){throw new Error(`Invalid custom RegExp for param "${e}" (${l}): `+h.message)}}let f=n?`((?:${l})(?:/(?:${l}))*)`:`(${l})`;t||(f=u&&s.length<2?`(?:/${f})`:"/"+f),u&&(f+="?"),i+=f,a+=20,u&&(a+=-8),n&&(a+=-20),".*"===l&&(a+=-50)}e.push(a)}r.push(e)}if(n.strict&&n.end){const e=r.length-1;r[e][r[e].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&(i+="(?:/|$)");const a=new RegExp(i,n.sensitive?"":"i");function u(e){const t=e.match(a),n={};if(!t)return null;for(let r=1;r<t.length;r++){const e=t[r]||"",i=o[r-1];n[i.name]=e&&i.repeatable?e.split("/"):e}return n}function c(t){let n="",r=!1;for(const i of e){r&&n.endsWith("/")||(n+="/"),r=!1;for(const e of i)if(0===e.type)n+=e.value;else if(1===e.type){const{value:o,repeatable:a,optional:s}=e,u=o in t?t[o]:"";if(l(u)&&!a)throw new Error(`Provided param "${o}" is an array but it is not repeatable (* or + modifiers)`);const c=l(u)?u.join("/"):u;if(!c){if(!s)throw new Error(`Missing required param "${o}"`);i.length<2&&(n.endsWith("/")?n=n.slice(0,-1):r=!0)}n+=c}}return n||"/"}return{re:a,score:r,keys:o,parse:u,stringify:c}}function X(e,t){let n=0;while(n<e.length&&n<t.length){const r=t[n]-e[n];if(r)return r;n++}return e.length<t.length?1===e.length&&80===e[0]?-1:1:e.length>t.length?1===t.length&&80===t[0]?1:-1:0}function J(e,t){let n=0;const r=e.score,i=t.score;while(n<r.length&&n<i.length){const e=X(r[n],i[n]);if(e)return e;n++}if(1===Math.abs(i.length-r.length)){if(Z(r))return 1;if(Z(i))return-1}return i.length-r.length}function Z(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const ee={type:0,value:""},te=/[a-zA-Z0-9_]/;function ne(e){if(!e)return[[]];if("/"===e)return[[ee]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(e){throw new Error(`ERR (${n})/"${c}": ${e}`)}let n=0,r=n;const i=[];let o;function a(){o&&i.push(o),o=[]}let s,u=0,c="",l="";function h(){c&&(0===n?o.push({type:0,value:c}):1===n||2===n||3===n?(o.length>1&&("*"===s||"+"===s)&&t(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),o.push({type:1,value:c,regexp:l,repeatable:"*"===s||"+"===s,optional:"*"===s||"?"===s})):t("Invalid state to consume buffer"),c="")}function f(){c+=s}while(u<e.length)if(s=e[u++],"\\"!==s||2===n)switch(n){case 0:"/"===s?(c&&h(),a()):":"===s?(h(),n=1):f();break;case 4:f(),n=r;break;case 1:"("===s?n=2:te.test(s)?f():(h(),n=0,"*"!==s&&"?"!==s&&"+"!==s&&u--);break;case 2:")"===s?"\\"==l[l.length-1]?l=l.slice(0,-1)+s:n=3:l+=s;break;case 3:h(),n=0,"*"!==s&&"?"!==s&&"+"!==s&&u--,l="";break;default:t("Unknown state");break}else r=n,n=4;return 2===n&&t(`Unfinished custom RegExp for param "${c}"`),h(),a(),i}function re(e,t,n){const r=Y(ne(e.path),n);const i=s(r,{record:e,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf===!t.record.aliasOf&&t.children.push(i),i}function ie(e,t){const n=[],r=new Map;function i(e){return r.get(e)}function o(e,n,r){const i=!r,u=ae(e);u.aliasOf=r&&r.record;const h=le(t,e),f=[u];if("alias"in e){const t="string"===typeof e.alias?[e.alias]:e.alias;for(const e of t)f.push(s({},u,{components:r?r.record.components:u.components,path:e,aliasOf:r?r.record:u}))}let d,p;for(const t of f){const{path:s}=t;if(n&&"/"!==s[0]){const e=n.record.path,r="/"===e[e.length-1]?"":"/";t.path=n.record.path+(s&&r+s)}if(d=re(t,n,h),r?r.alias.push(d):(p=p||d,p!==d&&p.alias.push(d),i&&e.name&&!ue(d)&&a(e.name)),u.children){const e=u.children;for(let t=0;t<e.length;t++)o(e[t],d,r&&r.children[t])}r=r||d,(d.record.components&&Object.keys(d.record.components).length||d.record.name||d.record.redirect)&&l(d)}return p?()=>{a(p)}:c}function a(e){if(V(e)){const t=r.get(e);t&&(r.delete(e),n.splice(n.indexOf(t),1),t.children.forEach(a),t.alias.forEach(a))}else{const t=n.indexOf(e);t>-1&&(n.splice(t,1),e.record.name&&r.delete(e.record.name),e.children.forEach(a),e.alias.forEach(a))}}function u(){return n}function l(e){let t=0;while(t<n.length&&J(e,n[t])>=0&&(e.record.path!==n[t].record.path||!he(e,n[t])))t++;n.splice(t,0,e),e.record.name&&!ue(e)&&r.set(e.record.name,e)}function h(e,t){let i,o,a,u={};if("name"in e&&e.name){if(i=r.get(e.name),!i)throw H(1,{location:e});0,a=i.record.name,u=s(oe(t.params,i.keys.filter((e=>!e.optional)).map((e=>e.name))),e.params&&oe(e.params,i.keys.map((e=>e.name)))),o=i.stringify(u)}else if("path"in e)o=e.path,i=n.find((e=>e.re.test(o))),i&&(u=i.parse(o),a=i.record.name);else{if(i=t.name?r.get(t.name):n.find((e=>e.re.test(t.path))),!i)throw H(1,{location:e,currentLocation:t});a=i.record.name,u=s({},t.params,e.params),o=i.stringify(u)}const c=[];let l=i;while(l)c.unshift(l.record),l=l.parent;return{name:a,path:o,params:u,matched:c,meta:ce(c)}}return t=le({strict:!1,end:!0,sensitive:!1},t),e.forEach((e=>o(e))),{addRoute:o,resolve:h,removeRoute:a,getRoutes:u,getRecordMatcher:i}}function oe(e,t){const n={};for(const r of t)r in e&&(n[r]=e[r]);return n}function ae(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:se(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function se(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const r in e.components)t[r]="boolean"===typeof n?n:n[r];return t}function ue(e){while(e){if(e.record.aliasOf)return!0;e=e.parent}return!1}function ce(e){return e.reduce(((e,t)=>s(e,t.meta)),{})}function le(e,t){const n={};for(const r in e)n[r]=r in t?t[r]:e[r];return n}function he(e,t){return t.children.some((t=>t===e||he(e,t)))}const fe=/#/g,de=/&/g,pe=/\//g,ve=/=/g,ge=/\?/g,me=/\+/g,ye=/%5B/g,_e=/%5D/g,be=/%5E/g,we=/%60/g,Ie=/%7B/g,Te=/%7C/g,Ee=/%7D/g,ke=/%20/g;function Se(e){return encodeURI(""+e).replace(Te,"|").replace(ye,"[").replace(_e,"]")}function Ce(e){return Se(e).replace(Ie,"{").replace(Ee,"}").replace(be,"^")}function Ae(e){return Se(e).replace(me,"%2B").replace(ke,"+").replace(fe,"%23").replace(de,"%26").replace(we,"`").replace(Ie,"{").replace(Ee,"}").replace(be,"^")}function Ne(e){return Ae(e).replace(ve,"%3D")}function xe(e){return Se(e).replace(fe,"%23").replace(ge,"%3F")}function Re(e){return null==e?"":xe(e).replace(pe,"%2F")}function Pe(e){try{return decodeURIComponent(""+e)}catch(t){}return""+e}function Oe(e){const t={};if(""===e||"?"===e)return t;const n="?"===e[0],r=(n?e.slice(1):e).split("&");for(let i=0;i<r.length;++i){const e=r[i].replace(me," "),n=e.indexOf("="),o=Pe(n<0?e:e.slice(0,n)),a=n<0?null:Pe(e.slice(n+1));if(o in t){let e=t[o];l(e)||(e=t[o]=[e]),e.push(a)}else t[o]=a}return t}function De(e){let t="";for(let n in e){const r=e[n];if(n=Ne(n),null==r){void 0!==r&&(t+=(t.length?"&":"")+n);continue}const i=l(r)?r.map((e=>e&&Ae(e))):[r&&Ae(r)];i.forEach((e=>{void 0!==e&&(t+=(t.length?"&":"")+n,null!=e&&(t+="="+e))}))}return t}function Me(e){const t={};for(const n in e){const r=e[n];void 0!==r&&(t[n]=l(r)?r.map((e=>null==e?null:""+e)):null==r?r:""+r)}return t}const Le=Symbol(""),Fe=Symbol(""),je=Symbol(""),Ue=Symbol(""),qe=Symbol("");function Ve(){let e=[];function t(t){return e.push(t),()=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)}}function n(){e=[]}return{add:t,list:()=>e,reset:n}}function Be(e,t,n,r,i){const o=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise(((a,s)=>{const u=e=>{!1===e?s(H(4,{from:n,to:t})):e instanceof Error?s(e):q(e)?s(H(2,{from:t,to:e})):(o&&r.enterCallbacks[i]===o&&"function"===typeof e&&o.push(e),a())},c=e.call(r&&r.instances[i],t,n,u);let l=Promise.resolve(c);e.length<3&&(l=l.then(u)),l.catch((e=>s(e)))}))}function Ke(e,t,n,r){const i=[];for(const o of e){0;for(const e in o.components){let s=o.components[e];if("beforeRouteEnter"===t||o.instances[e])if(We(s)){const a=s.__vccOpts||s,u=a[t];u&&i.push(Be(u,n,r,o,e))}else{let u=s();0,i.push((()=>u.then((i=>{if(!i)return Promise.reject(new Error(`Couldn't resolve component "${e}" at "${o.path}"`));const s=a(i)?i.default:i;o.components[e]=s;const u=s.__vccOpts||s,c=u[t];return c&&Be(c,n,r,o,e)()}))))}}}return i}function We(e){return"object"===typeof e||"displayName"in e||"props"in e||"__vccOpts"in e}function He(e){const t=(0,r.f3)(je),n=(0,r.f3)(Ue),o=(0,r.Fl)((()=>t.resolve((0,i.SU)(e.to)))),a=(0,r.Fl)((()=>{const{matched:e}=o.value,{length:t}=e,r=e[t-1],i=n.matched;if(!r||!i.length)return-1;const a=i.findIndex(m.bind(null,r));if(a>-1)return a;const s=Ye(e[t-2]);return t>1&&Ye(r)===s&&i[i.length-1].path!==s?i.findIndex(m.bind(null,e[t-2])):a})),s=(0,r.Fl)((()=>a.value>-1&&$e(n.params,o.value.params))),u=(0,r.Fl)((()=>a.value>-1&&a.value===n.matched.length-1&&y(n.params,o.value.params)));function l(n={}){return Qe(n)?t[(0,i.SU)(e.replace)?"replace":"push"]((0,i.SU)(e.to)).catch(c):Promise.resolve()}return{route:o,href:(0,r.Fl)((()=>o.value.href)),isActive:s,isExactActive:u,navigate:l}}const Ge=(0,r.aZ)({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:He,setup(e,{slots:t}){const n=(0,i.qj)(He(e)),{options:o}=(0,r.f3)(je),a=(0,r.Fl)((()=>({[Xe(e.activeClass,o.linkActiveClass,"router-link-active")]:n.isActive,[Xe(e.exactActiveClass,o.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive})));return()=>{const i=t.default&&t.default(n);return e.custom?i:(0,r.h)("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:a.value},i)}}}),ze=Ge;function Qe(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&(void 0===e.button||0===e.button)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function $e(e,t){for(const n in t){const r=t[n],i=e[n];if("string"===typeof r){if(r!==i)return!1}else if(!l(i)||i.length!==r.length||r.some(((e,t)=>e!==i[t])))return!1}return!0}function Ye(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Xe=(e,t,n)=>null!=e?e:null!=t?t:n,Je=(0,r.aZ)({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const o=(0,r.f3)(qe),a=(0,r.Fl)((()=>e.route||o.value)),u=(0,r.f3)(Fe,0),c=(0,r.Fl)((()=>{let e=(0,i.SU)(u);const{matched:t}=a.value;let n;while((n=t[e])&&!n.components)e++;return e})),l=(0,r.Fl)((()=>a.value.matched[c.value]));(0,r.JJ)(Fe,(0,r.Fl)((()=>c.value+1))),(0,r.JJ)(Le,l),(0,r.JJ)(qe,a);const h=(0,i.iH)();return(0,r.YP)((()=>[h.value,l.value,e.name]),(([e,t,n],[r,i,o])=>{t&&(t.instances[n]=e,i&&i!==t&&e&&e===r&&(t.leaveGuards.size||(t.leaveGuards=i.leaveGuards),t.updateGuards.size||(t.updateGuards=i.updateGuards))),!e||!t||i&&m(t,i)&&r||(t.enterCallbacks[n]||[]).forEach((t=>t(e)))}),{flush:"post"}),()=>{const i=a.value,o=e.name,u=l.value,c=u&&u.components[o];if(!c)return Ze(n.default,{Component:c,route:i});const f=u.props[o],d=f?!0===f?i.params:"function"===typeof f?f(i):f:null,p=e=>{e.component.isUnmounted&&(u.instances[o]=null)},v=(0,r.h)(c,s({},d,t,{onVnodeUnmounted:p,ref:h}));return Ze(n.default,{Component:v,route:i})||v}}});function Ze(e,t){if(!e)return null;const n=e(t);return 1===n.length?n[0]:n}const et=Je;function tt(e){const t=ie(e.routes,e),n=e.parseQuery||Oe,a=e.stringifyQuery||De,h=e.history;const f=Ve(),v=Ve(),m=Ve(),y=(0,i.XI)(B);let _=B;o&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const b=u.bind(null,(e=>""+e)),w=u.bind(null,Re),T=u.bind(null,Pe);function E(e,n){let r,i;return V(e)?(r=t.getRecordMatcher(e),i=n):i=e,t.addRoute(i,r)}function k(e){const n=t.getRecordMatcher(e);n&&t.removeRoute(n)}function S(){return t.getRoutes().map((e=>e.record))}function C(e){return!!t.getRecordMatcher(e)}function R(e,r){if(r=s({},r||y.value),"string"===typeof e){const i=d(n,e,r.path),o=t.resolve({path:i.path},r),a=h.createHref(i.fullPath);return s(i,o,{params:T(o.params),hash:Pe(i.hash),redirectedFrom:void 0,href:a})}let i;if("path"in e)i=s({},e,{path:d(n,e.path,r.path).path});else{const t=s({},e.params);for(const e in t)null==t[e]&&delete t[e];i=s({},e,{params:w(e.params)}),r.params=w(r.params)}const o=t.resolve(i,r),u=e.hash||"";o.params=b(T(o.params));const c=p(a,s({},e,{hash:Ce(u),path:o.path})),l=h.createHref(c);return s({fullPath:c,hash:u,query:a===De?Me(e.query):e.query||{}},o,{redirectedFrom:void 0,href:l})}function D(e){return"string"===typeof e?d(n,e,y.value.path):s({},e)}function M(e,t){if(_!==e)return H(8,{from:t,to:e})}function L(e){return U(e)}function F(e){return L(s(D(e),{replace:!0}))}function j(e){const t=e.matched[e.matched.length-1];if(t&&t.redirect){const{redirect:n}=t;let r="function"===typeof n?n(e):n;return"string"===typeof r&&(r=r.includes("?")||r.includes("#")?r=D(r):{path:r},r.params={}),s({query:e.query,hash:e.hash,params:"path"in r?{}:e.params},r)}}function U(e,t){const n=_=R(e),r=y.value,i=e.state,o=e.force,u=!0===e.replace,c=j(n);if(c)return U(s(D(c),{state:"object"===typeof c?s({},i,c.state):i,force:o,replace:u}),t||n);const l=n;let h;return l.redirectedFrom=t,!o&&g(a,r,n)&&(h=H(16,{to:l,from:r}),ne(r,r,!0,!1)),(h?Promise.resolve(h):K(l,r)).catch((e=>G(e)?G(e,2)?e:te(e):Z(e,l,r))).then((e=>{if(e){if(G(e,2))return U(s({replace:u},D(e.to),{state:"object"===typeof e.to?s({},i,e.to.state):i,force:o}),t||l)}else e=z(l,r,!0,u,i);return W(l,r,e),e}))}function q(e,t){const n=M(e,t);return n?Promise.reject(n):Promise.resolve()}function K(e,t){let n;const[r,i,o]=rt(e,t);n=Ke(r.reverse(),"beforeRouteLeave",e,t);for(const s of r)s.leaveGuards.forEach((r=>{n.push(Be(r,e,t))}));const a=q.bind(null,e,t);return n.push(a),nt(n).then((()=>{n=[];for(const r of f.list())n.push(Be(r,e,t));return n.push(a),nt(n)})).then((()=>{n=Ke(i,"beforeRouteUpdate",e,t);for(const r of i)r.updateGuards.forEach((r=>{n.push(Be(r,e,t))}));return n.push(a),nt(n)})).then((()=>{n=[];for(const r of e.matched)if(r.beforeEnter&&!t.matched.includes(r))if(l(r.beforeEnter))for(const i of r.beforeEnter)n.push(Be(i,e,t));else n.push(Be(r.beforeEnter,e,t));return n.push(a),nt(n)})).then((()=>(e.matched.forEach((e=>e.enterCallbacks={})),n=Ke(o,"beforeRouteEnter",e,t),n.push(a),nt(n)))).then((()=>{n=[];for(const r of v.list())n.push(Be(r,e,t));return n.push(a),nt(n)})).catch((e=>G(e,8)?e:Promise.reject(e)))}function W(e,t,n){for(const r of m.list())r(e,t,n)}function z(e,t,n,r,i){const a=M(e,t);if(a)return a;const u=t===B,c=o?history.state:{};n&&(r||u?h.replace(e.fullPath,s({scroll:u&&c&&c.scroll},i)):h.push(e.fullPath,i)),y.value=e,ne(e,t,n,u),te()}let Q;function $(){Q||(Q=h.listen(((e,t,n)=>{if(!se.listening)return;const r=R(e),i=j(r);if(i)return void U(s(i,{replace:!0}),r).catch(c);_=r;const a=y.value;o&&P(x(a.fullPath,n.delta),A()),K(r,a).catch((e=>G(e,12)?e:G(e,2)?(U(e.to,r).then((e=>{G(e,20)&&!n.delta&&n.type===I.pop&&h.go(-1,!1)})).catch(c),Promise.reject()):(n.delta&&h.go(-n.delta,!1),Z(e,r,a)))).then((e=>{e=e||z(r,a,!1),e&&(n.delta&&!G(e,8)?h.go(-n.delta,!1):n.type===I.pop&&G(e,20)&&h.go(-1,!1)),W(r,a,e)})).catch(c)})))}let Y,X=Ve(),J=Ve();function Z(e,t,n){te(e);const r=J.list();return r.length?r.forEach((r=>r(e,t,n))):console.error(e),Promise.reject(e)}function ee(){return Y&&y.value!==B?Promise.resolve():new Promise(((e,t)=>{X.add([e,t])}))}function te(e){return Y||(Y=!e,$(),X.list().forEach((([t,n])=>e?n(e):t())),X.reset()),e}function ne(t,n,i,a){const{scrollBehavior:s}=e;if(!o||!s)return Promise.resolve();const u=!i&&O(x(t.fullPath,0))||(a||!i)&&history.state&&history.state.scroll||null;return(0,r.Y3)().then((()=>s(t,n,u))).then((e=>e&&N(e))).catch((e=>Z(e,t,n)))}const re=e=>h.go(e);let oe;const ae=new Set,se={currentRoute:y,listening:!0,addRoute:E,removeRoute:k,hasRoute:C,getRoutes:S,resolve:R,options:e,push:L,replace:F,go:re,back:()=>re(-1),forward:()=>re(1),beforeEach:f.add,beforeResolve:v.add,afterEach:m.add,onError:J.add,isReady:ee,install(e){const t=this;e.component("RouterLink",ze),e.component("RouterView",et),e.config.globalProperties.$router=t,Object.defineProperty(e.config.globalProperties,"$route",{enumerable:!0,get:()=>(0,i.SU)(y)}),o&&!oe&&y.value===B&&(oe=!0,L(h.location).catch((e=>{0})));const n={};for(const i in B)n[i]=(0,r.Fl)((()=>y.value[i]));e.provide(je,t),e.provide(Ue,(0,i.qj)(n)),e.provide(qe,y);const a=e.unmount;ae.add(e),e.unmount=function(){ae.delete(e),ae.size<1&&(_=B,Q&&Q(),Q=null,y.value=B,oe=!1,Y=!1),a()}}};return se}function nt(e){return e.reduce(((e,t)=>e.then((()=>t()))),Promise.resolve())}function rt(e,t){const n=[],r=[],i=[],o=Math.max(t.matched.length,e.matched.length);for(let a=0;a<o;a++){const o=t.matched[a];o&&(e.matched.find((e=>m(e,o)))?r.push(o):n.push(o));const s=e.matched[a];s&&(t.matched.find((e=>m(e,s)))||i.push(s))}return[n,r,i]}function it(){return(0,r.f3)(je)}}}]);
//# sourceMappingURL=chunk-vendors.f48fc795.js.map