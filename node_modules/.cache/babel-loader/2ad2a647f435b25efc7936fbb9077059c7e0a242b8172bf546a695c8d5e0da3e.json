{"ast":null,"code":"import { toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, createElementVNode as _createElementVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"class chat-window\"\n};\nconst _hoisted_2 = {\n  key: 0\n};\nconst _hoisted_3 = {\n  key: 1,\n  class: \"messages\",\n  ref: \"messages\"\n};\nconst _hoisted_4 = {\n  class: \"created-at\"\n};\nconst _hoisted_5 = {\n  class: \"name\"\n};\nconst _hoisted_6 = {\n  class: \"message\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [$setup.error ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, _toDisplayString($setup.error), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true), $setup.documents ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.formattedDocuments, doc => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: doc.id,\n      class: \"single\"\n    }, [_createElementVNode(\"span\", _hoisted_4, _toDisplayString(doc.createdAt), 1 /* TEXT */), _createElementVNode(\"span\", _hoisted_5, _toDisplayString(doc.name), 1 /* TEXT */), _createElementVNode(\"span\", _hoisted_6, _toDisplayString(doc.message), 1 /* TEXT */)]);\n  }), 128 /* KEYED_FRAGMENT */))], 512 /* NEED_PATCH */)) : _createCommentVNode(\"v-if\", true)]);\n}","map":{"version":3,"mappings":";;EACSA,KAAK,EAAC;AAAmB;;;;;;EAEJA,KAAK,EAAC,UAAU;EAACC,GAAG,EAAC;;;EAE7BD,KAAK,EAAC;AAAY;;EAClBA,KAAK,EAAC;AAAM;;EACZA,KAAK,EAAC;AAAS;;uBANjCE,oBASM,OATNC,UASM,GARSC,YAAK,kBAAhBF,oBAAoC,oCAAdE,YAAK,uDAChBA,gBAAS,kBAApBF,oBAMM,OANNG,UAMM,sBALFH,oBAIMI,6BAJaF,yBAAkB,EAAzBG,GAAG;yBAAfL,oBAIM;MAJkCM,GAAG,EAAED,GAAG,CAACE,EAAE;MAAET,KAAK,EAAC;QACvDU,oBAAoD,QAApDC,UAAoD,mBAAvBJ,GAAG,CAACK,SAAS,kBAC1CF,oBAAwC,QAAxCG,UAAwC,mBAAlBN,GAAG,CAACO,IAAI,kBAC9BJ,oBAA8C,QAA9CK,UAA8C,mBAArBR,GAAG,CAACS,OAAO","names":["class","ref","_createElementBlock","_hoisted_1","$setup","_hoisted_3","_Fragment","doc","key","id","_createElementVNode","_hoisted_4","createdAt","_hoisted_5","name","_hoisted_6","message"],"sourceRoot":"","sources":["C:\\Users\\JW\\Desktop\\VUE_JS\\class10\\live-chat-2\\src\\components\\ChatWindow.vue"],"sourcesContent":["<template>\r\n    <div class=\"class chat-window\">\r\n        <div v-if=\"error\"> {{ error }}</div>\r\n        <div v-if=\"documents\" class=\"messages\" ref=\"messages\">\r\n            <div v-for=\"doc in formattedDocuments\" :key=\"doc.id\" class=\"single\">\r\n                <span class=\"created-at\"> {{ doc.createdAt }}</span>\r\n                <span class=\"name\">{{ doc.name }}</span>\r\n                <span class=\"message\">{{ doc.message }}</span>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import getCollection from '../composables/getCollection'\r\n    import { formatDistanceToNow }  from 'date-fns'\r\n    import {computed} from 'vue'\r\n    import {ref} from 'vue'\r\n    import {onUpdated} from 'vue'\r\n    \r\n    export default {\r\n        setup(){\r\n            const {error, documents} = getCollection('messages')\r\n            const formattedDocuments = computed( () => {\r\n                if (documents.value){\r\n                    return documents.value.map(doc => {\r\n                        let time = formatDistanceToNow(doc.createdAt.toDate())\r\n                        return {...doc, createdAt: time}\r\n                    })\r\n                }\r\n            })\r\n\r\n            const messages = ref(null)\r\n            onUpdated( () => {messages.value.scrollTop = messages.value.scrollHeight})\r\n            return {error, documents, formattedDocuments, messages}\r\n        }\r\n    }\r\n</script>\r\n<style>\r\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}