{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref, watchEffect } from 'vue';\nimport { projectFireStore } from '../firebase/config';\nconst getCollection = collection => {\n  const documents = ref(null);\n  const error = ref(null);\n  let collectionRef = projectFireStore.collection(collection).orderBy('createdAt');\n  collectionRef.onSnapshot(snap => {\n    let results = [];\n    snap.docs.forEach(doc => {\n      doc.data().createdAt && results.push({\n        ...doc.data(),\n        id: doc.id\n      });\n      //results.push({...doc.data(), id: doc.id})\n    });\n\n    documents.value = results;\n    error.value = null;\n  }, err => {\n    console.log(err.message);\n    documents.value = null;\n    error.value = \"Could not fetch data\";\n  });\n  watchEffect(onInvalidate);\n  return {\n    documents,\n    error\n  };\n};\nexport default getCollection;","map":{"version":3,"names":["ref","watchEffect","projectFireStore","getCollection","collection","documents","error","collectionRef","orderBy","onSnapshot","snap","results","docs","forEach","doc","data","createdAt","push","id","value","err","console","log","message","onInvalidate"],"sources":["C:/Users/JW/Desktop/VUE_JS/class10/live-chat-2/src/composables/getCollection.js"],"sourcesContent":["import {ref, watchEffect} from 'vue'\r\nimport {projectFireStore} from '../firebase/config'\r\n\r\n\r\n\r\nconst getCollection = (collection) => {\r\n    const documents = ref(null)\r\n    const error = ref(null)\r\n\r\n    let collectionRef = projectFireStore.collection(collection)\r\n    .orderBy('createdAt')\r\n\r\n    collectionRef.onSnapshot((snap) => {\r\n        let results = []\r\n        snap.docs.forEach(doc => {\r\n            doc.data().createdAt && results.push({...doc.data(), id: doc.id})\r\n            //results.push({...doc.data(), id: doc.id})\r\n            })\r\n            documents.value = results\r\n            error.value = null\r\n        }, (err) => {\r\n            console.log(err.message)\r\n            documents.value = null\r\n            error.value = \"Could not fetch data\" \r\n        })\r\n\r\n        watchEffect(onInvalidate)\r\n\r\n        return { documents, error}\r\n}\r\n\r\nexport default getCollection"],"mappings":";AAAA,SAAQA,GAAG,EAAEC,WAAW,QAAO,KAAK;AACpC,SAAQC,gBAAgB,QAAO,oBAAoB;AAInD,MAAMC,aAAa,GAAIC,UAAU,IAAK;EAClC,MAAMC,SAAS,GAAGL,GAAG,CAAC,IAAI,CAAC;EAC3B,MAAMM,KAAK,GAAGN,GAAG,CAAC,IAAI,CAAC;EAEvB,IAAIO,aAAa,GAAGL,gBAAgB,CAACE,UAAU,CAACA,UAAU,CAAC,CAC1DI,OAAO,CAAC,WAAW,CAAC;EAErBD,aAAa,CAACE,UAAU,CAAEC,IAAI,IAAK;IAC/B,IAAIC,OAAO,GAAG,EAAE;IAChBD,IAAI,CAACE,IAAI,CAACC,OAAO,CAACC,GAAG,IAAI;MACrBA,GAAG,CAACC,IAAI,EAAE,CAACC,SAAS,IAAIL,OAAO,CAACM,IAAI,CAAC;QAAC,GAAGH,GAAG,CAACC,IAAI,EAAE;QAAEG,EAAE,EAAEJ,GAAG,CAACI;MAAE,CAAC,CAAC;MACjE;IACA,CAAC,CAAC;;IACFb,SAAS,CAACc,KAAK,GAAGR,OAAO;IACzBL,KAAK,CAACa,KAAK,GAAG,IAAI;EACtB,CAAC,EAAGC,GAAG,IAAK;IACRC,OAAO,CAACC,GAAG,CAACF,GAAG,CAACG,OAAO,CAAC;IACxBlB,SAAS,CAACc,KAAK,GAAG,IAAI;IACtBb,KAAK,CAACa,KAAK,GAAG,sBAAsB;EACxC,CAAC,CAAC;EAEFlB,WAAW,CAACuB,YAAY,CAAC;EAEzB,OAAO;IAAEnB,SAAS;IAAEC;EAAK,CAAC;AAClC,CAAC;AAED,eAAeH,aAAa"},"metadata":{},"sourceType":"module","externalDependencies":[]}